<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TalentForge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* styles.css */

        #main-header.collapsed {
            max-height: 0;
            opacity: 0;
            margin-bottom: 0;
            padding-top: 0;
            padding-bottom: 0;
        }

        .collapsed {
            max-height: 0 !important;
            opacity: 0 !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            margin-bottom: 0 !important;
            pointer-events: none;
        }

        .talent-tree {
            background-size: cover;
            background-position: center;
            display: flex;
            gap: 10px;
            padding: 10px;
        }

        .talent-tree-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            position: relative;
        }

        .talent-icon {
            width: 44px;
            height: 44px;
            background-image: url("https://wow.zamimg.com/images/wow/talents/icons/vanilla.jpg");
            background-size: cover;
            background-color: #111;
            position: relative;
            border: 2px solid rgba(0, 0, 0, 0.5);
            border-radius: 6px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .talent-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px gold;
            z-index: 2;
        }

        .talent-icon:focus {
            outline: 2px solid gold;
            outline-offset: 2px;
        }

        .talent-icon.active {
            border-color: gold;
            box-shadow: 0 0 10px gold;
        }

        .talent-icon.maxed {
            border-color: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .talent-icon.disabled {
            filter: grayscale(100%);
            opacity: 0.5;
            cursor: not-allowed;
        }

        .talent-points {
            position: absolute;
            bottom: -5px;
            right: -5px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            border: 1px solid #fff;
        }

        .arrow {
            position: absolute;
            border-radius: 2px;
            opacity: 1;
            width: 40px;
            height: 40px;
            background-size: contain;
            background-repeat: no-repeat;
            pointer-events: none;
            z-index: 1;
            transition: background-color 0.2s ease;
        }

        .arrow-down.locked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/down.png"); */
            width: 8px;
            background-color: #5e5d5e;
            box-shadow: none;
        }

        .arrow-down.unlocked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/down2.png"); */
            width: 8px;
            background-color: #cead05;
            box-shadow: none;
        }

        .arrow-left.locked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/left.png"); */
            height: 8px;
            background-color: #5e5d5e;
            box-shadow: none;
        }

        .arrow-left.unlocked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/left2.png"); */
            height: 8px;
            background-color: #cead05;
            box-shadow: none;
        }

        .arrow-right.locked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/right.png"); */
            height: 8px;
            background-color: #5e5d5e;
            box-shadow: none;
        }

        .arrow-right.unlocked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/right2.png"); */
            height: 8px;
            background-color: #cead05;
            box-shadow: none;
        }

        .arrow-leftdown.locked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/leftdown.png"); */
            width: 8px;
            height: 8px;
            background-color: #5e5d5e;
            box-shadow: none;
        }

        .arrow-leftdown.unlocked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/leftdown2.png"); */
            width: 8px;
            height: 8px;
            background-color: #cead05;
            box-shadow: none;
        }

        .arrow-rightdown.locked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/rightdown.png"); */
            width: 8px;
            height: 8px;
            background-color: #5e5d5e;
            box-shadow: none;
        }

        .arrow-rightdown.unlocked {
            /* background-image: url("https://wow.zamimg.com/images/TalentCalc/arrows/rightdown2.png"); */
            width: 8px;
            height: 8px;
            background-color: #cead05;
            box-shadow: none;
        }

        /* Horizontal parts (left/right arrows) */
        /*
        .arrow-left, .arrow-leftdown {
        border-top-left-radius: 4px;
        border-bottom-left-radius: 4px;
        }

        .arrow-right, .arrow-rightdown {
        border-top-right-radius: 4px;
        border-bottom-right-radius: 4px;
        }
        */

        /* Vertical part (down arrows) */
        /* */
        /* .arrow-down, .arrow-leftdown, .arrow-rightdown { */
        /* border-bottom-left-radius: 4px; */
        /* for leftdown */
        /* border-bottom-right-radius: 4px; */
        /* for rightdown */
        /* border-top-left-radius: 0; */
        /* border-top-right-radius: 0; */
        /* } */
        /* */

        .build-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .build-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .talent-tree-container {
                flex-direction: column;
            }

            .class-selection {
                flex-direction: row;
                overflow-x: auto;
                padding-bottom: 10px;
                scroll-snap-type: x mandatory;
            }

            .class-btn {
                min-width: 60px;
                scroll-snap-align: start;
            }
        }

        .class-btn {
            width: 60px;
            height: 60px;
            border: 2px solid transparent;
            /* base border */
            border-radius: 6px;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: background-color 0.2s ease;
            background-color: #2d2d2d;
        }

        /* for tooltips */
        .talent-tooltip {
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 240px;
            background: rgba(0, 0, 0, 0.85);
            /* 85% opaque black */
            color: #fff;
            padding: 8px;
            border: 1px solid #999;
            box-shadow: 0 0 12px rgba(0, 0, 0, 0.7);
            font-family: Friz Quadrata, sans-serif;
            font-size: 13px;
            line-height: 1.4;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s ease-in-out;
            z-index: 10;
            white-space: normal;
        }

        .talent-tooltip-title {
            color: #ffd100;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .talent-tooltip-body {
            color: #ffffff;
        }

        .talent-tooltip-rank {
            color: #999999;
            margin-top: 4px;
            font-size: 12px;
        }

        .talent-tooltip::after {
            content: "";
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            border-width: 6px;
            border-style: solid;
        }

        .talent-tooltip[data-position="bottom"]::after {
            top: 100%;
            border-color: #000 transparent transparent transparent;
        }

        .talent-tooltip[data-position="top"]::after {
            bottom: 100%;
            border-color: transparent transparent #000 transparent;
        }

        .talent-icon:hover .talent-tooltip {
            opacity: 1;
        }

        #class-list {
            scroll-padding-left: 0;
            -webkit-overflow-scrolling: touch;
            /* For smooth scrolling on iOS */
        }
    </style>
</head>

<body class="bg-gray-900 text-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header id="main-header" class="text-center mb-8 transition-all duration-500 overflow-hidden">
            <h1 class="text-4xl font-bold text-yellow-400 mb-2">TalentForge</h1>
            <p id="main-caption" class="text-gray-400">Create and share talent builds or create brand new talent trees!</p>
        </header>

        <!-- Class selection row -->
        <div id="select-class-container" class="bg-gray-900 rounded-lg p-6 mb-4 text-center overflow-visible">
            <!-- <h2 id="select-class-header" class="text-xl font-semibold mb-4 text-yellow-400">Select Class</h2>  -->
            <div id="class-list"
                class="class-selection p-1 flex flex-nowrap gap-2 justify-center md:justify-center overflow-x-auto overflow-visible scroll-smooth">
                <button id="deathknight-button"
                    class="hidden class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="deathknight" title="Death Knight" style="border: 2px solid #C41F3B;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_deathknight.jpg"
                        alt="Death Knight" class="w-12 h-12 rounded-full">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="druid" title="Druid" style="border: 2px solid #FF7D0A;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_druid.jpg" alt="Druid"
                        class="w-12 h-12 rounded-full">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="hunter" title="Hunter" style="border: 2px solid #ABD473;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_hunter.jpg" alt="Hunter"
                        class="w-12 h-12 rounded-full ">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="mage" title="Mage" style="border: 2px solid #69CCF0;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_mage.jpg" alt="Mage"
                        class="w-12 h-12 rounded-full ">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="paladin" title="Paladin" style="border: 2px solid #F58CBA;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_paladin.jpg" alt="Paladin"
                        class="w-12 h-12 rounded-full ">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="priest" title="Priest" style="border: 2px solid #FFFFFF;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_priest.jpg" alt="Priest"
                        class="w-12 h-12 rounded-full ">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="rogue" title="Rogue" style="border: 2px solid #FFF569;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_rogue.jpg" alt="Rogue"
                        class="w-12 h-12 rounded-full ">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="shaman" title="Shaman" style="border: 2px solid #0070DE;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_shaman.jpg" alt="Shaman"
                        class="w-12 h-12 rounded-full">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="warlock" title="Warlock" style="border: 2px solid #9482C9;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_warlock.jpg" alt="Warlock"
                        class="w-12 h-12 rounded-full ">
                </button>
                <button
                    class="class-btn bg-black rounded-full p-1 flex flex-col items-center justify-center transition-transform duration-150 ease-in-out hover:scale-110"
                    data-class="warrior" title="Warrior" style="border: 2px solid #C79C6E;">
                    <img src="https://wow.zamimg.com/images/wow/icons/large/classicon_warrior.jpg" alt="Warrior"
                        class="w-12 h-12 rounded-full ">
                </button>
            </div>
        </div>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Left sidebar -->
            <div id="sidebar" class="relative w-full lg:w-1/4 transition-all duration-300">
                <!-- Sidebar toggle button inside the sidebar -->
                <div class="flex justify-end p-2">
                    <button id="toggle-sidebar" title="Hide Sidebar"
                        class="absolute top-2 left-2 bg-gray-700 text-white px-2 py-1 rounded-md hover:bg-gray-600">
                        ☰
                    </button>
                </div>

                <!-- Inner content wrapper -->
                <div id="sidebar-content" class="mt-10">
                    <!-- Version selector -->
                    <div class="bg-gray-800 rounded-lg p-4 mb-6">
                        <h2 class="text-xl font-semibold mb-4 text-yellow-400">Game Version</h2>
                        <div class="space-y-3 ">
                            <!-- Expansion Select -->
                            <select id="expansion-select"
                                class="appearance-none w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2">
                                <option value="" disabled selected>Select client</option>
                                <option value="vanilla">Vanilla</option>
                                <option value="tbc">The Burning Crusade</option>
                                <option value="wotlk">Wrath of the Lich King</option>
                                <option value="cataclysm">Cataclysm</option>
                                <option value="turtlewow">Turtle WoW</option>
                                <option value="epoch">Epoch</option>
                                <option value="custom">Custom</option>
                            </select>

                            <!-- Patch Select (populated dynamically) -->
                            <select id="version-select"
                                class="appearance-none w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2"
                                disabled>
                                <option value="" disabled selected>Select patch</option>
                            </select>
                            <button id="apply-version"
                                class="hidden flex items-center justify-center gap-1 bg-blue-600 border border-blue-800 hover:bg-blue-700 text-white px-2 py-2 rounded-md mt-2 w-32">
                                Apply
                            </button>
                        </div>
                    </div>

                    <!-- Points box wrapper -->
                    <div id="talent-points-box" class="mb-6 hidden">
                        <!-- Points counter -->
                        <div class="bg-gray-800 rounded-lg p-4 mb-6">
                            <h2 class="text-xl font-semibold mb-2 text-yellow-400">Talent Points</h2>
                            <div class="flex justify-between items-center">
                                <div class="text-lg">
                                    <span id="points-spent">0</span> / <span id="points-total">51</span>
                                </div>
                                <button id="reset-talents"
                                    class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm">
                                    <i class="fas fa-redo mr-1"></i> Reset
                                </button>
                            </div>
                            <div class="w-full bg-gray-700 h-2 mt-2 rounded-full">
                                <div id="points-bar" class="bg-yellow-500 h-2 rounded-full" style="width: 0%"></div>
                            </div>

                            <div id="custom-version-options" class="mt-4 hidden">
                                <label class="block text-sm font-medium mb-1">Custom Talent Points</label>
                                <input type="number" id="custom-points"
                                    class="w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500"
                                    value="51" min="1" max="100">
                            </div>
                        </div>
                    </div>

                    <!-- Build management -->
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-yellow-400">Build Manager</h2>
                            <button id="toggle-build-manager"
                                class="text-yellow-400 hover:text-yellow-300 transition-transform duration-300 text-xl mr-2"
                                title="Collapse Build Manager" aria-expanded="true"
                                aria-controls="build-manager-wrapper">
                                <i class="fas fa-chevron-down text-base transition-transform duration-300"></i>
                            </button>
                        </div>
                        <div id="build-manager-wrapper" class="transition-[max-height] duration-300 overflow-hidden"
                            style="max-height: 1000px;">
                            <div id="build-manager-content">
                                <div class="mb-4">
                                    <input type="text" id="build-name" placeholder="Build name"
                                        class="w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                    <div class="flex gap-2">
                                        <button id="save-build"
                                            class="flex-1 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-md">
                                            <i class="fas fa-save mr-1"></i> Save
                                        </button>
                                        <button id="import-build"
                                            class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md">
                                            <i class="fas fa-file-import mr-1"></i> Import
                                        </button>
                                    </div>
                                </div>
                                <div id="builds-list" class="space-y-2 max-h-64 overflow-y-auto">
                                    <!-- Build cards will be added here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Talent trees -->
            <div id="talent-wrapper" class="w-full lg:w-3/4 duration-300 ease-in-out">
                <div id="talent-container" class="bg-gray-800 rounded-lg p-4">
                    <div id="talent-placeholder" class="text-center py-12">
                        <h2 class="text-2xl text-yellow-400 mb-2">Select a version</h2>
                        <p class="text-gray-400">Use the dropdown to choose a game version</p>
                    </div>
                    <div id="talent-trees"></div>
                    <!-- Druid Talent Icons Preview -->
                    <!--
          <div class="grid grid-cols-4 gap-4 mt-8 hidden" id="druid-talents-preview">
          -->
                    <!-- Balance -->
                    <!-- 
            <div class="text-center">
              <h3 class="text-lg font-semibold mb-2 text-yellow-400">Balance</h3>
              <div class="flex flex-wrap justify-center gap-2">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_abolishmagic.jpg" alt="Improved Wrath" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_natureswrath.jpg" alt="Nature's Grasp" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_thorns.jpg" alt="Improved Thorns" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_crystalball.jpg" alt="Omen of Clarity" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_purge.jpg" alt="Vengeance" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_arcane_starfire.jpg" alt="Improved Starfire" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_naturesblessing.jpg" alt="Nature's Grace" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_moonglow.jpg" alt="Moonfury" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_forceofnature.jpg" alt="Moonkin Form" class="w-10 h-10">
              </div>
            </div>
            -->

                    <!-- Feral Combat -->
                    <!-- 
            <div class="text-center">
              <h3 class="text-lg font-semibold mb-2 text-yellow-400">Feral Combat</h3>
              <div class="flex flex-wrap justify-center gap-2">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_hunter_pet_hyena.jpg" alt="Ferocity" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_druid_demoralizingroar.jpg" alt="Feral Aggression" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_ambush.jpg" alt="Feral Instinct" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_druid_bash.jpg" alt="Brutal Impact" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/inv_misc_pelt_bear_03.jpg" alt="Thick Hide" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_spiritwolf.jpg" alt="Feral Swiftness" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/inv_misc_monsterclaw_04.jpg" alt="Sharpened Claws" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_hunter_pet_cat.jpg" alt="Predatory Strikes" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_racial_cannibalize.jpg" alt="Primal Fury" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_druid_ravage.jpg" alt="Savage Fury" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_faeriefire.jpg" alt="Faerie Fire (Feral)" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_holy_blessingofagility.jpg" alt="Heart of the Wild" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_unyeildingstamina.jpg" alt="Leader of the Pack" class="w-10 h-10">
              </div>
            </div>
            -->

                    <!-- Restoration -->
                    <!-- 
            <div class="text-center">
              <h3 class="text-lg font-semibold mb-2 text-yellow-400">Restoration</h3>
              <div class="flex flex-wrap justify-center gap-2">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_regeneration.jpg" alt="Improved Mark of the Wild" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_unyeildingstamina.jpg" alt="Furor" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_healingtouch.jpg" alt="Improved Healing Touch" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_healingwavegreater.jpg" alt="Nature's Focus" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_druid_enrage.jpg" alt="Improved Enrage" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_frost_windwalkon.jpg" alt="Reflection" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/ability_eyeoftheowl.jpg" alt="Subtlety" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_holy_elunesgrace.jpg" alt="Tranquil Spirit" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_rejuvenation.jpg" alt="Improved Rejuvenation" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_ravenform.jpg" alt="Nature's Swiftness" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_protectionformnature.jpg" alt="Gift of Nature" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_tranquility.jpg" alt="Improved Tranquility" class="w-10 h-10">
                <img src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_resistnature.jpg" alt="Improved Regrowth" class="w-10 h-10">
              </div>
            </div>
            -->
                </div>
            </div>
        </div>

        <!-- Tooltip -->
        <div id="talent-tooltip"
            class="hidden fixed z-50 bg-gray-900 text-white text-sm px-3 py-2 rounded shadow-lg max-w-sm border border-yellow-500">
        </div>

    </div>
    </div>

    <script>
        // script.js

        // DOM elements
        const headerEl = document.getElementById("main-header");
        const captionEl = document.getElementById("main-caption");
        const selectClassHeader = document.getElementById("select-class-header");
        const expansionSelect = document.getElementById("expansion-select");
        const versionSelect = document.getElementById("version-select");
        const applyVersionBtn = document.getElementById("apply-version");
        const customVersionOptions = document.getElementById("custom-version-options");
        const customPoints = document.getElementById("custom-points");
        const classButtons = document.querySelectorAll(".class-btn");
        const pointsSpentEl = document.getElementById("points-spent");
        const pointsTotalEl = document.getElementById("points-total");
        const pointsBar = document.getElementById("points-bar");
        const resetTalentsBtn = document.getElementById("reset-talents");
        const talentContainer = document.getElementById("talent-container");
        const talentTrees = document.getElementById("talent-trees");
        const talentPlaceholder = document.getElementById("talent-placeholder");
        const buildNameInput = document.getElementById("build-name");
        const saveBuildBtn = document.getElementById("save-build");
        const importBuildBtn = document.getElementById("import-build");
        const buildsList = document.getElementById("builds-list");
        const sidebar = document.getElementById('sidebar');
        const toggleSidebarButton = document.getElementById('toggle-sidebar');
        const sidebarContent = document.getElementById('sidebar-content');
        const talentWrapper = document.getElementById("talent-wrapper");
        const toggleBuildManagerButton = document.getElementById("toggle-build-manager");
        const buildManagerWrapper = document.getElementById("build-manager-wrapper");
        const buildManagerContent = document.getElementById("build-manager-content");

        // Event listeners
        // versionSelect.addEventListener("change", handleVersionChange);
        customPoints.addEventListener("change", handleCustomPointsChange);
        classButtons.forEach((btn) => btn.addEventListener("click", handleClassSelect));
        resetTalentsBtn.addEventListener("click", resetTalents);
        saveBuildBtn.addEventListener("click", saveBuild);
        importBuildBtn.addEventListener("click", importBuild);

        let selectedExpansion = null;
        let selectedPatch = null;

        expansionSelect.addEventListener("change", () => {
            selectedExpansion = expansionSelect.value;
            versionSelect.innerHTML = '<option value="" disabled selected>Select patch</option>';
            versionSelect.disabled = true;

            if (patchOptions[selectedExpansion]) {
                patchOptions[selectedExpansion].forEach(patch => {
                    const opt = document.createElement("option");
                    opt.value = patch.value;
                    opt.textContent = patch.label;
                    versionSelect.appendChild(opt);
                });
                versionSelect.disabled = false;
            }

            applyVersionBtn.classList.add("hidden"); // Hide until patch selected
        });

        versionSelect.addEventListener("change", () => {
            selectedPatch = versionSelect.value;
            if (selectedExpansion && selectedPatch) {
                applyVersionBtn.classList.remove("hidden");
            }
        });

        applyVersionBtn.addEventListener("click", () => {
            if (!selectedPatch) return;
            versionSelect.value = selectedPatch;
            handleVersionChange();
        });

        let isCollapsed = false;

        toggleSidebarButton.addEventListener('click', () => {
            isCollapsed = !isCollapsed;

            if (isCollapsed) {
                sidebar.classList.remove('lg:w-1/4', 'w-full');
                sidebar.classList.add('w-12');
                sidebarContent.classList.add('hidden');
                toggleSidebarButton.title = "Show Sidebar";

                // Make talent area centered
                talentWrapper.classList.remove('lg:w-3/4');
                talentWrapper.classList.add('w-full', 'justify-center');
            } else {
                sidebar.classList.remove('w-12');
                sidebar.classList.add('w-full', 'lg:w-1/4');
                sidebarContent.classList.remove('hidden');
                toggleSidebarButton.title = "Hide Sidebar";

                // Restore talent layout
                talentWrapper.classList.remove('w-full', 'justify-center');
                talentWrapper.classList.add('lg:w-3/4');
            }
        });

        const icon = toggleBuildManagerButton.querySelector("i");

        toggleBuildManagerButton.addEventListener("click", () => {
            const isExpanded = toggleBuildManagerButton.getAttribute("aria-expanded") === "true";

            if (isExpanded) {
                // Collapse
                const contentHeight = buildManagerContent.offsetHeight;
                buildManagerWrapper.style.maxHeight = `${contentHeight}px`;
                requestAnimationFrame(() => {
                    buildManagerWrapper.style.maxHeight = "0px";
                });

                toggleBuildManagerButton.setAttribute("aria-expanded", "false");
                icon.style.transform = "rotate(-90deg)"; // point right
                toggleBuildManagerButton.title = "Expand Build Manager";
            } else {
                // Expand
                const contentHeight = buildManagerContent.scrollHeight;
                buildManagerWrapper.style.maxHeight = `${contentHeight}px`;

                toggleBuildManagerButton.setAttribute("aria-expanded", "true");
                icon.style.transform = "rotate(0deg)"; // point down
                toggleBuildManagerButton.title = "Collapse Build Manager";
            }
        });

        // Reset URL hash on page load
        window.addEventListener('DOMContentLoaded', function() {
            if (location.hash) location.hash = '';
        });

        /*
        expansionSelect.addEventListener("change", () => {
            const selectedExpansion = expansionSelect.value;

            // Reset patch dropdown
            versionSelect.innerHTML = '<option value="" disabled selected>Select patch</option>';
            versionSelect.disabled = true;

            if (patchOptions[selectedExpansion]) {
                patchOptions[selectedExpansion].forEach(patch => {
                const opt = document.createElement("option");
                opt.value = patch.value;
                opt.textContent = patch.label;
                versionSelect.appendChild(opt);
                });
                versionSelect.disabled = false;
            }

            // Reset UI and state when changing expansion
            currentState.version = null;
            currentState.class = null;
            currentState.pointsSpent = 0;
            currentState.talentOrder = [];
            currentState.talents = {};

                // Remove yellow highlights
            classButtons.forEach((btn) => {
                btn.classList.remove("bg-yellow-600", "text-white");
                btn.classList.add("bg-gray-700", "hover:bg-gray-600");
                btn.disabled = true; // disable until patch selected
                btn.classList.add("opacity-50", "cursor-not-allowed");
            });

            updatePointsDisplay();

            // Restore placeholder message
            talentContainer.innerHTML = `
                <div id="talent-placeholder" class="text-center py-12">
                <h2 class="text-2xl text-yellow-400 mb-2">Select a version to begin</h2>
                <p class="text-gray-400">Use the dropdown to choose a game version</p>
                </div>
            `;

            // Hide points box again
            document.getElementById("talent-points-box").classList.add("hidden");

            // Disable class buttons again
            classButtons.forEach((btn) => {
                btn.disabled = true;
                btn.classList.add("opacity-50", "cursor-not-allowed");
            });
            customVersionOptions.classList.add("hidden");
        });
        */

        // Disable all class buttons on initial load
        classButtons.forEach((btn) => {
            btn.disabled = true;
            btn.classList.add("opacity-50", "cursor-not-allowed");
        });

        // Base specialization data for vanilla versions
        const baseTreeData = {
            maxPoints: 51,
            classes: {
                druid: { name: "Druid", trees: ["Balance", "Feral Combat", "Restoration"] },
                hunter: {
                    name: "Hunter",
                    trees: ["Beast Mastery", "Marksmanship", "Survival"]
                },
                mage: { name: "Mage", trees: ["Arcane", "Fire", "Frost"] },
                paladin: { name: "Paladin", trees: ["Holy", "Protection", "Retribution"] },
                priest: { name: "Priest", trees: ["Discipline", "Holy", "Shadow"] },
                rogue: { name: "Rogue", trees: ["Assassination", "Combat", "Subtlety"] },
                shaman: {
                    name: "Shaman",
                    trees: ["Elemental", "Enhancement", "Restoration"]
                },
                warlock: {
                    name: "Warlock",
                    trees: ["Affliction", "Demonology", "Destruction"]
                },
                warrior: { name: "Warrior", trees: ["Arms", "Fury", "Protection"] },
                deathknight: { name: "Death Knight", trees: ["Blood", "Frost", "Unholy"] }
            }
        };

        // Define versions that share the same data
        const sharedVersions = [
            "0.12",
            "1.1",
            "1.2",
            "1.3",
            "1.4",
            "1.5",
            "1.6",
            "1.7",
            "1.8",
            "1.9",
            "1.10",
            "1.11",
            "1.12",
            "1.13",
            "2.4",
            "3.2.0",
            "3.3.5",
            "4.3.5",
            "custom1",
            "1.0.0e",
            "1.16.0t",
            "1.16.1t",
            "1.17.2t"
        ];

        const patchOptions = {
            vanilla: [
                { value: "0.12", label: "Patch 0.12 (pre-Launch)" },
                { value: "1.1", label: "Patch 1.1 (Launch)" },
                { value: "1.2", label: "Patch 1.2 (Mysteries of Maraudon)" },
                { value: "1.3", label: "Patch 1.3 (Ruins of the Dire Maul)" },
                { value: "1.4", label: "Patch 1.4 (The Call to War)" },
                { value: "1.5", label: "Patch 1.5 (Battlegrounds)" },
                { value: "1.6", label: "Patch 1.6 (Assault on Blackwing Lair)" },
                { value: "1.7", label: "Patch 1.7 (Rise of the Blood God)" },
                { value: "1.8", label: "Patch 1.8 (Dragons of Nightmare)" },
                { value: "1.9", label: "Patch 1.9 (The Gates of Ahn'Qiraj)" },
                { value: "1.10", label: "Patch 1.10 (Storms of Azeroth)" },
                { value: "1.11", label: "Patch 1.11 (Shadow of the Necropolis)" },
                { value: "1.12", label: "Patch 1.12 (Drums of War)" },
                { value: "1.13", label: "Patch 1.13 (Classic Era)" }
            ],
            tbc: [
                // { value: "2.1", label: "Patch 2.1" },
                // { value: "2.2", label: "Patch 2.2" },
                // { value: "2.3", label: "Patch 2.3" },
                { value: "2.4", label: "Patch 2.4 (TBC Classic)" }
                // ...
            ],
            wotlk: [
                // { value: "3.1", label: "Patch 3.1" },
                { value: "3.2.0", label: "Patch 3.2.0" },
                // { value: "3.3", label: "Patch 3.3" },
                { value: "3.3.5", label: "Patch 3.3.5 (WotLK Classic)" }
                // ...
            ],
            cataclysm: [
                // { value: "4.1", label: "Patch 4.1" },
                { value: "4.2.0", label: "Patch 4.2.0" },
                // { value: "4.3", label: "Patch 4.3" },
                { value: "4.3.5", label: "Patch 4.3.5 (Cataclysm Classic)" }
                // ...
            ],
            turtlewow: [
                { value: "1.16.0t", label: "Patch 1.16.0: Mysteries of Azeroth" },
                { value: "1.16.1t", label: "Patch 1.16.1: Hateforge Quarry" },
                // { value: "1.16.4t", label: "Patch 1.16.4: Anchor's Fall" },
                // { value: "1.17.0t", label: "Patch 1.17.0: Beyond the Greymane Wall" },
                // { value: "1.17.1t", label: "Patch 1.17.1: Labor and Legacy" },
                { value: "1.17.2t", label: "Patch 1.17.2: Tower of Karazhan" },
                // { value: "1.18.0t", label: "Patch 1.18.0: Scars of the Past" }
            ],
            epoch: [
                { value: "1.0.0e", label: "Patch 1.0.0: Launch" },
                // { value: "1.0.5e", label: "Patch 1.0.5: Into the Flames" },
                // { value: "1.1.0e", label: "Patch 1.1.0: The Call to War" },
                // { value: "1.2.0e", label: "Patch 1.2.0: Echoes of Stonetalon" },
                // { value: "1.2.5e", label: "Patch 1.2.5: Deck of Delights" },
                // { value: "1.3.0e", label: "Patch 1.3.0: Secrets of Uldum" }
            ],
            custom: [
                { value: "custom1", label: "Custom 1" },
                // { value: "custom2", label: "Custom 2" }
            ]
        };

        const talentTreeData = {};

        sharedVersions.forEach((version) => {
            // Clone the baseTreeData
            talentTreeData[version] = JSON.parse(JSON.stringify(baseTreeData));

            // Assign expansion-specific maxPoints
            if (version.startsWith("3.")) {
                talentTreeData[version].maxPoints = 71; // Wrath of the Lich King
            } else if (version.startsWith("2.") || version.endsWith("e")) {
                talentTreeData[version].maxPoints = 61; // The Burning Crusade
            } else {
                talentTreeData[version].maxPoints = 51; // Vanilla & others
            }
        });

        // Modify just 1.11 (e.g., remove one tree from Priest)
        // talentTreeData["1.11"].classes.priest.trees = ["Discipline", "Holy"];  // Shadow not yet available
        talentTreeData["0.12"].classes.hunter.trees = [
            "Beast Mastery",
            "Ranged Combat",
            "Outdoorsmanship"
        ];

        const mageTrees = ["Arcane", "Frost", "Fire"];

        ["0.12", "1.1", "1.2", "1.3", "1.4", "1.5", "1.6", "1.7", "1.8", "1.9", "1.10"].forEach(version => {
            talentTreeData[version].classes.mage.trees = mageTrees;
        });


        let currentState = {
            version: null,
            class: null,
            pointsSpent: 0,
            pointsTotal: 51,
            talents: {},
            builds: [],
            talentOrder: []
        };

        // ==============================
        // Talents (Base)
        // ==============================

        const baseTalents = {
            vanilla: {
                druid: {
                    // druid - vanilla
                    Balance: [
                        {
                            id: "improved_wrath",
                            name: "Improved Wrath",
                            icon: "spell_nature_abolishmagic",
                            row: 0,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Wrath spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "natures_grasp",
                            name: "Nature's Grasp",
                            icon: "spell_nature_natureswrath",
                            row: 0,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "While active, any time an enemy strikes the caster they have a 35% chance to become afflicted by Entangling Roots (Rank 1).  Only useable outdoors.  1 charge.  Lasts 45 sec."
                            ]
                        },
                        {
                            id: "improved_natures_grasp",
                            name: "Improved Nature's Grasp",
                            icon: "spell_nature_natureswrath",
                            row: 0,
                            col: 2,
                            ranks: 4,
                            requiresTalents: "natures_grasp",
                            description: [
                                "Increases the chance for your Nature's Grasp to entangle an enemy by {value}%.",
                                {
                                    value: [15, 30, 45, 65]
                                }
                            ]
                        },
                        {
                            id: "improved_entangling_roots",
                            name: "Improved Entangling Roots",
                            icon: "spell_nature_stranglevines",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting Entangling Roots.",
                                {
                                    value: [40, 70, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_moonfire",
                            name: "Improved Moonfire",
                            icon: "spell_nature_starfall",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage and critical strike chance of your Moonfire spell by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "natural_weapons",
                            name: "Natural Weapons",
                            icon: "inv_staff_01",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with physical attacks in all forms by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "natural_shapeshifter",
                            name: "Natural Shapeshifter",
                            icon: "spell_nature_wispsplode",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all shapeshifting by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_thorns",
                            name: "Improved Thorns",
                            icon: "spell_nature_thorns",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases damage caused by your Thorns spell by {value}%.",
                                {
                                    value: [25, 50, 75]
                                }
                            ]
                        },
                        {
                            id: "omen_of_clarity",
                            name: "Omen of Clarity",
                            icon: "spell_nature_crystalball",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "natural_weapons",
                            description: [
                                "Imbues the Druid with natural energy.  Each of the Druid's melee attacks has a chance of causing the caster to enter a Clearcasting state.  The Clearcasting state reduces the Mana, Rage or Energy cost of your next damage or healing spell or offensive ability by 100%.  Lasts 10 min."
                            ]
                        },
                        {
                            id: "natures_reach",
                            name: "Nature's Reach",
                            icon: "spell_nature_naturetouchgrow",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Wrath, Entangling Roots, Faerie Fire, Moonfire, Starfire, and Hurricane spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "vengeance",
                            name: "Vengeance",
                            icon: "spell_nature_purge",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "improved_moonfire",
                            description: [
                                "Increases the critical strike damage bonus of your Starfire, Moonfire, and Wrath spells by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_starfire",
                            name: "Improved Starfire",
                            icon: "spell_arcane_starfire",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of Starfire by {cast} sec and has a {chance}% chance to stun the target for 3 sec.",
                                {
                                    cast: [0.1, 0.2, 0.3, 0.4, 0.5],
                                    chance: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "natures_grace",
                            name: "Nature's Grace",
                            icon: "spell_nature_naturesblessing",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "All spell criticals grace you with a blessing of nature, reducing the casting time of your next spell by 0.5 sec."
                            ]
                        },
                        {
                            id: "moonglow",
                            name: "Moonglow",
                            icon: "spell_nature_sentinal",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Moonfire, Starfire, Wrath, Healing Touch, Regrowth and Rejuvenation spells by {value}%.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "moonfury",
                            name: "Moonfury",
                            icon: "spell_nature_moonglow",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "natures_grace",
                            description: [
                                "Increases the damage done by your Starfire, Moonfire and Wrath spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "moonkin_form",
                            name: "Moonkin Form",
                            icon: "spell_nature_forceofnature",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Transforms the Druid into Moonkin Form. While in this form the armor contribution from items is increased by 360% and all party members within 30 yards have their spell critical chance increased by 3%. The Moonkin cannot cast healing spells while shapeshifted.<br><br>The act of shapeshifting frees the caster of Polymorph and Movement Impairing effects."
                            ]
                        }
                    ],
                    // druid - vanilla
                    "Feral Combat": [
                        {
                            id: "ferocity",
                            name: "Ferocity",
                            icon: "ability_hunter_pet_hyena",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Maul, Swipe, Claw, and Rake abilities by {value} Rage or Energy.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "feral_aggression_old",
                            name: "Feral Aggression",
                            icon: "classic_ability_druid_demoralizingroar",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the Attack Power reduction of your Demoralizing Roar by {reduction}% and the damage caused by your Ferocious Bite by {damage}%.",
                                {
                                    reduction: [8, 16, 24, 32, 40],
                                    damage: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "feral_instinct",
                            name: "Feral Instinct",
                            icon: "ability_ambush",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases threat caused in Bear and Dire Bear Form by {value}% and reduces the chance enemies have to detect you while Prowling.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "brutal_impact",
                            name: "Brutal Impact",
                            icon: "ability_druid_bash",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the stun duration of your Bash and Pounce abilities by {value} sec.",
                                {
                                    value: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "thick_hide",
                            name: "Thick Hide",
                            icon: "inv_misc_pelt_bear_03",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Armor contribution from items by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "feline_swiftness",
                            name: "Feline Swiftness",
                            icon: "spell_nature_spiritwolf",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your movement speed by {speed}% in Cat Form and increases your chance to dodge while in Cat Form by {dodge}%.",
                                {
                                    speed: [15, 30],
                                    dodge: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "feral_charge",
                            name: "Feral Charge",
                            icon: "ability_hunter_pet_bear",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes you to charge an enemy, immobilizing and interrupting any spell being cast for 4 sec."
                            ]
                        },
                        {
                            id: "sharpened_claws",
                            name: "Sharpened Claws",
                            icon: "inv_misc_monsterclaw_04",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance while in Bear, Dire Bear or Cat Form by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_shred",
                            name: "Improved Shred",
                            icon: "spell_shadow_vampiricaura",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Energy cost of your Shred ability by {value}.",
                                {
                                    value: [6, 12]
                                }
                            ]
                        },
                        {
                            id: "predatory_strikes",
                            name: "Predatory Strikes",
                            icon: "ability_hunter_pet_cat",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your melee attack power in Cat, Bear and Dire Bear Forms by {value}% of your level.",
                                {
                                    value: [50, 100, 150]
                                }
                            ]
                        },
                        {
                            id: "blood_frenzy",
                            name: "Blood Frenzy",
                            icon: "ability_ghoulfrenzy",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "sharpened_claws",
                            description: [
                                "Your critical strikes from Cat Form abilities that add combo points  have a {value}% chance to add an additional combo point.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "primal_fury",
                            name: "Primal Fury",
                            icon: "ability_racial_cannibalize",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: "sharpened_claws",
                            description: [
                                "Gives you a {value}% chance to gain an additional 5 Rage anytime you get a critical strike while in Bear and Dire Bear Form.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "savage_fury",
                            name: "Savage Fury",
                            icon: "ability_druid_ravage",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage caused by your Claw, Rake, Maul and Swipe abilities by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "faerie_fire_feral",
                            name: "Faerie Fire (Feral)",
                            icon: "spell_nature_faeriefire",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Decrease the armor of the target by 175 for 40 sec.  While affected, the target cannot stealth or turn invisible."
                            ]
                        },
                        {
                            id: "heart_of_the_wild",
                            name: "Heart of the Wild",
                            icon: "spell_holy_blessingofagility",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "predatory_strikes",
                            description: [
                                "Increases your Intellect by {value}%.  In addition, while in Bear or Dire Bear Form your Stamina is increased by {value}% and while in Cat Form your Strength is increased by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "leader_of_the_pack",
                            name: "Leader of the Pack",
                            icon: "spell_nature_unyeildingstamina",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "While in Cat, Bear or Dire Bear Form, the Leader of the Pack increases ranged and melee critical chance of all party members within 45 yards by 3%."
                            ]
                        }
                    ],
                    // druid - vanilla
                    Restoration: [
                        {
                            id: "improved_mark_of_the_wild",
                            name: "Improved Mark of the Wild",
                            icon: "spell_nature_regeneration",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effects of your Mark of the Wild and Gift of the Wild spells by {value}%.",
                                {
                                    value: [7, 14, 21, 28, 35]
                                }
                            ]
                        },
                        {
                            id: "furor",
                            name: "Furor",
                            icon: "spell_holy_blessingofstamina",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to gain 10 Rage when you shapeshift into Bear and Dire Bear Form or 40 Energy when you shapeshift into Cat Form.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_healing_touch",
                            name: "Improved Healing Touch",
                            icon: "spell_nature_healingtouch",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Healing Touch spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "natures_focus",
                            name: "Nature's Focus",
                            icon: "spell_nature_healingwavegreater",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting the Healing Touch, Regrowth and Tranquility spells.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "improved_enrage",
                            name: "Improved Enrage",
                            icon: "ability_druid_enrage",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "The Enrage ability now instantly generates {value} Rage.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "reflection",
                            name: "Reflection",
                            icon: "spell_frost_windwalkon",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value}% of your Mana regeneration to continue while casting.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "insect_swarm",
                            name: "Insect Swarm",
                            icon: "spell_nature_insectswarm",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The enemy target is swarmed by insects, decreasing their chance to hit by 2% and causing 66 Nature damage over 12 sec."
                            ]
                        },
                        {
                            id: "subtlety",
                            name: "Subtlety",
                            icon: "ability_eyeoftheowl",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your Healing spells by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "tranquil_spirit",
                            name: "Tranquil Spirit",
                            icon: "spell_holy_elunesgrace",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Healing Touch and Tranquility spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_rejuvenation",
                            name: "Improved Rejuvenation",
                            icon: "spell_nature_rejuvenation",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Rejuvenation spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "natures_swiftness",
                            name: "Nature's Swiftness",
                            icon: "spell_nature_ravenform",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "improved_healing_touch",
                            description: [
                                "When activated, your next Nature spell becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "gift_of_nature",
                            name: "Gift of Nature",
                            icon: "spell_nature_protectionformnature",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "insect_swarm",
                            description: [
                                "Increases the effect of all healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_tranquility",
                            name: "Improved Tranquility",
                            icon: "spell_nature_tranquility",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces threat caused by Tranquility by {value}%.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_regrowth",
                            name: "Improved Regrowth",
                            icon: "spell_nature_resistnature",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Regrowth spell by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "swiftmend",
                            name: "Swiftmend",
                            icon: "inv_relics_idolofrejuvenation",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "tranquil_spirit",
                            description: [
                                "Consumes a Rejuvenation or Regrowth effect on a friendly target to instantly heal them an amount equal to 12 sec. of Rejuvenation or 18 sec. of Regrowth."
                            ]
                        }
                    ]
                },
                hunter: {
                    // hunter - vanilla
                    "Beast Mastery": [
                        {
                            id: "improved_aspect_of_the_hawk",
                            name: "Improved Aspect of the Hawk",
                            icon: "spell_nature_ravenform",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "While Aspect of the Hawk is active, all normal ranged attacks have a {value}% chance of increasing ranged attack speed by 30% for 12 sec.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "endurance_training",
                            name: "Endurance Training",
                            icon: "spell_nature_reincarnation",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the Health of your pets by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_eyes_of_the_beast",
                            name: "Improved Eyes of the Beast",
                            icon: "ability_eyeoftheowl",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Eyes of the Beast by {value} sec.",
                                {
                                    value: [30, 60]
                                }
                            ]
                        },
                        {
                            id: "improved_aspect_of_the_monkey",
                            name: "Improved Aspect of the Monkey",
                            icon: "ability_hunter_aspectofthemonkey",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the Dodge bonus of your Aspect of the Monkey by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "thick_hide",
                            name: "Thick Hide",
                            icon: "inv_misc_pelt_bear_03",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the Armor rating of your pets by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_revive_pet",
                            name: "Improved Revive Pet",
                            icon: "ability_hunter_beastsoothe",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Revive Pet's casting time is reduced by {value1} sec, mana cost is reduced by {value2}%, and increases the health your pet returns with by an additional {value3}%.",
                                {
                                    value1: [3, 6],
                                    value2: [20, 40],
                                    value3: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "pathfinding",
                            name: "Pathfinding",
                            icon: "ability_mount_jungletiger",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the speed bonus of your Aspect of the Cheetah and Aspect of the Pack by {value}%.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "bestial_swiftness",
                            name: "Bestial Swiftness",
                            icon: "ability_druid_dash",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the outdoor movement speed of your pets by 30%."
                            ]
                        },
                        {
                            id: "unleashed_fury",
                            name: "Unleashed Fury",
                            icon: "ability_bullrush",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your pets by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_mend_pet",
                            name: "Improved Mend Pet",
                            icon: "ability_hunter_mendpet",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives the Mend Pet spell a {value}% chance of cleansing 1 Curse, Disease, Magic or Poison effect from the pet each tick.",
                                {
                                    value: [15, 50]
                                }
                            ]
                        },
                        {
                            id: "ferocity",
                            name: "Ferocity",
                            icon: "inv_misc_monsterclaw_04",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your pets by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "spirit_bond_old",
                            name: "Spirit Bond",
                            icon: "classic_ability_druid_demoralizingroar",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "While your pet is active, you and your pet will regenerate {value}% of total health every 10 sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "intimidation",
                            name: "Intimidation",
                            icon: "ability_devour",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Command your pet to intimidate the target on the next successful melee attack, causing a high amount of threat and stunning the target for 3 sec."
                            ]
                        },
                        {
                            id: "bestial_discipline",
                            name: "Bestial Discipline",
                            icon: "spell_nature_abolishmagic",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the Focus regeneration of your pets by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "frenzy",
                            name: "Frenzy",
                            icon: "inv_misc_monsterclaw_03",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "ferocity",
                            description: [
                                "Gives your pet a {value}% chance to gain a 30% attack speed increase for 8 sec after dealing a critical strike.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "bestial_wrath",
                            name: "Bestial Wrath",
                            icon: "ability_druid_ferociousbite",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "intimidation",
                            description: [
                                "Send your pet into a rage causing 50% additional damage for 18 sec.  While enraged, the beast does not feel pity or remorse or fear and it cannot be stopped unless killed."
                            ]
                        }
                    ],
                    // hunter - vanilla
                    Marksmanship: [
                        {
                            id: "improved_concussive_shot",
                            name: "Improved Concussive Shot",
                            icon: "spell_frost_stun",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Concussive Shot a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "efficiency",
                            name: "Efficiency",
                            icon: "spell_frost_wizardmark",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Shots and Stings by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_hunters_mark",
                            name: "Improved Hunter's Mark",
                            icon: "ability_hunter_snipershot",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the Ranged Attack Power bonus of your Hunter's Mark spell by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "lethal_shots",
                            name: "Lethal Shots",
                            icon: "ability_searingarrow",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance with ranged weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "aimed_shot",
                            name: "Aimed Shot",
                            icon: "inv_spear_07",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: ["An aimed shot that increases ranged damage by 70."]
                        },
                        {
                            id: "improved_arcane_shot",
                            name: "Improved Arcane Shot",
                            icon: "ability_impalingbolt",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Arcane Shot by {value} sec.",
                                {
                                    value: [0.2, 0.4, 0.6, 0.8, 1]
                                }
                            ]
                        },
                        {
                            id: "hawk_eye",
                            name: "Hawk Eye",
                            icon: "ability_townwatch",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your ranged weapons by {value} yards.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_serpent_sting",
                            name: "Improved Serpent Sting",
                            icon: "ability_hunter_quickshot",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Serpent Sting by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "mortal_shots",
                            name: "Mortal Shots",
                            icon: "ability_piercedamage",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "lethal_shots",
                            description: [
                                "Increases your ranged weapon critical strike damage bonus by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "scatter_shot",
                            name: "Scatter Shot",
                            icon: "ability_golemstormbolt",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "A short-range shot that deals 50% weapon damage and disorients the target for 4 sec. Any damage caused will remove the effect. Turns off your attack when used."
                            ]
                        },
                        {
                            id: "barrage",
                            name: "Barrage",
                            icon: "ability_upgrademoonglaive",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Multi-Shot and Volley spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_scorpid_sting",
                            name: "Improved Scorpid Sting",
                            icon: "ability_hunter_criticalshot",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the Stamina of targets affected by your Scorpid Sting by {value}% of the amount of Strength reduced.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "ranged_weapon_specialization",
                            name: "Ranged Weapon Specialization",
                            icon: "inv_weapon_rifle_06",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with ranged weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "trueshot_aura",
                            name: "Trueshot Aura",
                            icon: "ability_trueshot",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "barrage",
                            description: [
                                "Increases the attack power of party members within 45 yards by 50. Lasts 30 min."
                            ]
                        }
                    ],
                    // hunter - vanilla
                    Survival: [
                        {
                            id: "monster_slaying",
                            name: "Monster Slaying",
                            icon: "inv_misc_head_dragon_black",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused against Beasts, Giants and Dragonkin targets by {value}% and increases critical damage caused against Beasts, Giants and Dragonkin targets by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "humanoid_slaying",
                            name: "Humanoid Slaying",
                            icon: "spell_holy_prayerofhealing",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused against Humanoid targets by {value}% and increases critical damage caused against Humanoid targets by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "entrapment",
                            name: "Entrapment",
                            icon: "spell_nature_stranglevines",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Immolation Trap, Frost Trap, and Explosive Trap a {value}% chance to entrap the target, preventing them from moving for 5 sec.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "savage_strikes",
                            name: "Savage Strikes",
                            icon: "ability_racial_bloodrage",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of Raptor Strike and Mongoose Bite by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_wing_clip",
                            name: "Improved Wing Clip",
                            icon: "ability_rogue_trip",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Wing Clip ability a {value}% chance to immobilize the target for 5 sec.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "clever_traps",
                            name: "Clever Traps",
                            icon: "spell_nature_timestop",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of Freezing and Frost trap effects by {value}% and the damage of Immolation and Explosive trap effects by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "survivalist",
                            name: "Survivalist",
                            icon: "spell_shadow_twilight",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases total health by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "deterrence",
                            name: "Deterrence",
                            icon: "ability_whirlwind",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, increases your Dodge and Parry chance by 25% for 10 sec."
                            ]
                        },
                        {
                            id: "trap_mastery",
                            name: "Trap Mastery",
                            icon: "ability_ensnare",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the chance enemies will resist trap effects by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "surefooted",
                            name: "Surefooted",
                            icon: "ability_kick",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases hit chance by {hit}% and increases the chance movement impairing effects will be resisted by an additional {resist}%.",
                                {
                                    hit: [1, 2, 3],
                                    resist: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_feign_death",
                            name: "Improved Feign Death",
                            icon: "ability_rogue_feigndeath",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance your Feign Death ability will be resisted by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "killer_instinct",
                            name: "Killer Instinct",
                            icon: "spell_holy_blessingofstamina",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance with all attacks by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "counterattack",
                            name: "Counterattack",
                            icon: "ability_warrior_challange",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "deterrence",
                            description: [
                                "A strike that becomes active after parrying an opponent's attack.  This attack deals 40 damage and immobilizes the target for 5 sec.  Counterattack cannot be blocked, dodged, or parried."
                            ]
                        },
                        {
                            id: "lightning_reflexes",
                            name: "Lightning Reflexes",
                            icon: "spell_nature_invisibilty",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Agility by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "wyvern_sting",
                            name: "Wyvern Sting",
                            icon: "inv_spear_02",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "killer_instinct",
                            description: [
                                "A stinging shot that puts the target to sleep for 12 sec.  Any damage will cancel the effect.  When the target wakes up, the Sting causes 300 Nature damage over 6 sec.  Only usable out of combat.  Only one Sting per Hunter can be active on the target at a time."
                            ]
                        }
                    ]
                },
                mage: {
                    // mage - vanilla
                    Arcane: [
                        {
                            id: "arcane_subtlety",
                            name: "Arcane Subtlety",
                            icon: "spell_holy_dispelmagic",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces your target's resistance to all your spells by {resistance} and reduces the threat caused by your Arcane spells by {threat}%.",
                                {
                                    resistance: [5, 10],
                                    threat: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "arcane_focus",
                            name: "Arcane Focus",
                            icon: "spell_holy_devotion",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance that the opponent can resist your Arcane spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_arcane_missiles",
                            name: "Improved Arcane Missiles",
                            icon: "spell_nature_starfall",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while channeling Arcane Missiles.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "wand_specialization",
                            name: "Wand Specialization",
                            icon: "inv_wand_01",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your damage with Wands by {value}%.",
                                {
                                    value: [13, 25]
                                }
                            ]
                        },
                        {
                            id: "magic_absorption",
                            name: "Magic Absorption",
                            icon: "spell_nature_astralrecalgroup",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases all resistances by {resistance} and causes all spells you fully resist to restore {mana}% of your total mana.  1 sec. cooldown.",
                                {
                                    resistance: [2, 4, 6, 8, 10],
                                    mana: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "arcane_concentration",
                            name: "Arcane Concentration",
                            icon: "spell_shadow_manaburn",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance of entering a Clearcasting state after any damage spell hits a target.  The Clearcasting state reduces the mana cost of your next damage spell by 100%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "magic_attunement",
                            name: "Magic Attunement",
                            icon: "spell_nature_abolishmagic",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Amplify Magic and Dampen Magic spells by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_arcane_explosion",
                            name: "Improved Arcane Explosion",
                            icon: "spell_nature_wispsplode",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Arcane Explosion spell by an additional {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "arcane_resilience",
                            name: "Arcane Resilience",
                            icon: "spell_arcane_arcaneresilience",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your armor by an amount equal to 50% of your Intellect."
                            ]
                        },
                        {
                            id: "improved_mana_shield",
                            name: "Improved Mana Shield",
                            icon: "spell_shadow_detectlesserinvisibility",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the mana lost per point of damage taken when Mana Shield is active by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_counterspell",
                            name: "Improved Counterspell",
                            icon: "spell_frost_iceshock",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Counterspell a {value}% chance to silence the target for 4 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "arcane_meditation",
                            name: "Arcane Meditation",
                            icon: "spell_shadow_siphonmana",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value}% of your Mana regeneration to continue while casting.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "presence_of_mind",
                            name: "Presence of Mind",
                            icon: "spell_nature_enchantarmor",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, your next Mage spell with a casting time less than 10 sec becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "arcane_mind",
                            name: "Arcane Mind",
                            icon: "spell_shadow_charm",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "arcane_resilience",
                            description: [
                                "Increases your maximum Mana by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "arcane_instability",
                            name: "Arcane Instability",
                            icon: "spell_shadow_teleport",
                            row: 5,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "presence_of_mind",
                            description: [
                                "Increases your spell damage and critical strike chance by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "arcane_power",
                            name: "Arcane Power",
                            icon: "spell_nature_lightning",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "arcane_instability",
                            description: [
                                "When activated, your spells deal 30% more damage while costing 30% more mana to cast.  This effect lasts 15 sec."
                            ]
                        }
                    ],
                    // mage - vanilla
                    Fire: [
                        {
                            id: "improved_fireball",
                            name: "Improved Fireball",
                            icon: "spell_fire_flamebolt",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Fireball spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "impact",
                            name: "Impact",
                            icon: "spell_fire_meteorstorm",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Fire spells a {value}% chance to stun the target for 2 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "ignite",
                            name: "Ignite",
                            icon: "spell_fire_incinerate",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your critical strikes from Fire damage spells cause the target to burn for an additional {value}% of your spell's damage over 4 sec.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "flame_throwing",
                            name: "Flame Throwing",
                            icon: "spell_fire_flare",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Fire spells by {value} yards.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_fire_blast",
                            name: "Improved Fire Blast",
                            icon: "spell_fire_fireball",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Fire Blast spell by {value} sec.",
                                {
                                    value: [0.5, 1, 1.5]
                                }
                            ]
                        },
                        {
                            id: "incinerate",
                            name: "Incinerate",
                            icon: "spell_fire_flameshock",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Fire Blast and Scorch spells by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_flamestrike",
                            name: "Improved Flamestrike",
                            icon: "spell_fire_selfdestruct",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Flamestrike spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "pyroblast",
                            name: "Pyroblast",
                            icon: "spell_fire_fireball02",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Hurls an immense fiery boulder that causes 148 to 195 Fire damage and an additional 56 Fire damage over 12 sec."
                            ]
                        },
                        {
                            id: "burning_soul",
                            name: "Burning Soul",
                            icon: "spell_fire_fire",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Fire spells a {pushback}% chance to not lose casting time when you take damage and reduces the threat caused by your Fire spells by {threat}%.",
                                {
                                    pushback: [35, 70],
                                    threat: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_scorch",
                            name: "Improved Scorch",
                            icon: "spell_fire_soulburn",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your  Scorch spells have a {value}% chance to cause your target to be vulnerable to Fire damage. This vulnerability increases the Fire damage dealt to your target by 3% and lasts 30 sec. Stacks up to 5 times.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_fire_ward",
                            name: "Improved Fire Ward",
                            icon: "spell_fire_firearmor",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Causes your Fire Ward spell to have a {value}% chance to reflect Fire spells while active.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "master_of_elements",
                            name: "Master of Elements",
                            icon: "spell_fire_masterofelements",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Fire and Frost spell criticals will refund {value}% of their base mana cost.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "critical_mass",
                            name: "Critical Mass",
                            icon: "spell_nature_wispheal",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "blast_wave",
                            name: "Blast Wave",
                            icon: "spell_holy_excorcism_02",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "pyroblast",
                            description: [
                                "A wave of flame radiates outward from the caster, damaging all enemies caught within the blast for 160 to 192 Fire damage, and dazing them for 6 sec."
                            ]
                        },
                        {
                            id: "fire_power",
                            name: "Fire Power",
                            icon: "spell_fire_immolation",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "combustion",
                            name: "Combustion",
                            icon: "spell_fire_sealoffire",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "critical_mass",
                            description: [
                                "When activated, this spell causes each of your Fire damage spell hits to increase your critical strike chance with Fire damage spells by 10%.  This effect lasts until you have caused 3 critical strikes with Fire spells."
                            ]
                        }
                    ],
                    // mage - vanilla
                    Frost: [
                        {
                            id: "frost_warding",
                            name: "Frost Warding",
                            icon: "spell_frost_frostward",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the armor and resistances given by your Frost Armor and Ice Armor spells by {armor}%.  In addition, gives your Frost Ward a {ward}% chance to reflect Frost spells and effects while active.",
                                {
                                    armor: [15, 30],
                                    ward: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_frostbolt",
                            name: "Improved Frostbolt",
                            icon: "spell_frost_frostbolt02",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Frostbolt spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "elemental_precision",
                            name: "Elemental Precision",
                            icon: "spell_ice_magicdamage",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance that the opponent can resist your Frost and Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "ice_shards",
                            name: "Ice Shards",
                            icon: "spell_frost_iceshard",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Frost spells by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "frostbite",
                            name: "Frostbite",
                            icon: "spell_frost_frostarmor",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Chill effects a {value}% chance to freeze the target for 5 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_frost_nova",
                            name: "Improved Frost Nova",
                            icon: "spell_frost_freezingbreath",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Frost Nova spell by {value} sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "permafrost",
                            name: "Permafrost",
                            icon: "spell_frost_wisp",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Chill effects by {chill} sec and reduces the target's speed by an additional {speed}%.",
                                {
                                    chill: [1, 2, 3],
                                    speed: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "piercing_ice",
                            name: "Piercing Ice",
                            icon: "spell_frost_frostbolt",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Frost spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "cold_snap",
                            name: "Cold Snap",
                            icon: "spell_frost_wizardmark",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this spell finishes the cooldown on all of your Frost spells."
                            ]
                        },
                        {
                            id: "improved_blizzard",
                            name: "Improved Blizzard",
                            icon: "spell_frost_icestorm",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Adds a chill effect to your Blizzard spell.  This effect lowers the target's movement speed by {value}%.  Lasts 1.50 sec.",
                                {
                                    value: [30, 50, 65]
                                }
                            ]
                        },
                        {
                            id: "arctic_reach",
                            name: "Arctic Reach",
                            icon: "spell_shadow_darkritual",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Frostbolt and Blizzard spells and the radius of your Frost Nova and Cone of Cold spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "frost_channeling",
                            name: "Frost Channeling",
                            icon: "spell_frost_stun",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Frost spells by {cost}% and reduces the threat caused by your Frost spells by {threat}%.",
                                {
                                    cost: [5, 10, 15],
                                    threat: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "shatter",
                            name: "Shatter",
                            icon: "spell_frost_frostshock",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "improved_frost_nova",
                            description: [
                                "Increases the critical strike chance of all your spells against frozen targets by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "ice_block",
                            name: "Ice Block",
                            icon: "spell_frost_frost",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You become encased in a block of ice, protecting you from all physical attacks and spells for 10 sec, but during that time you cannot attack, move or cast spells."
                            ]
                        },
                        {
                            id: "improved_cone_of_cold",
                            name: "Improved Cone of Cold",
                            icon: "spell_frost_glacier",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by your Cone of Cold spell by {value}%.",
                                {
                                    value: [15, 25, 35]
                                }
                            ]
                        },
                        {
                            id: "winters_chill",
                            name: "Winter's Chill",
                            icon: "spell_frost_chillingblast",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Frost damage spells a {value}% chance to apply the Winter's Chill effect, which increases the chance a Frost spell will critically hit the target by 2% for 15 sec.  Stacks up to 5 times.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "ice_barrier",
                            name: "Ice Barrier",
                            icon: "spell_ice_lament",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "ice_block",
                            description: [
                                "Instantly shields you, absorbing 455 damage.  Lasts 1 min.  While the shield holds, spellcasting will not be delayed by damage."
                            ]
                        }
                    ]
                },
                paladin: {
                    // paladin - vanilla
                    Holy: [
                        {
                            id: "divine_strength",
                            name: "Divine Strength",
                            icon: "ability_golemthunderclap",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Strength by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "divine_intellect",
                            name: "Divine Intellect",
                            icon: "spell_nature_sleep",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Intellect by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "spiritual_focus",
                            name: "Spiritual Focus",
                            icon: "spell_arcane_blink",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Flash of Light and Holy Light spells a {value}% chance to not lose casting time when you take damage.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "improved_seal_of_righteousness",
                            name: "Improved Seal of Righteousness",
                            icon: "ability_thunderbolt",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Seal of Righteousness and Judgement of Righteousness by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "healing_light",
                            name: "Healing Light",
                            icon: "spell_holy_holybolt",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Holy Light and Flash of Light spells by {value}%.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "consecration",
                            name: "Consecration",
                            icon: "spell_holy_innerfire",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Consecrates the land beneath Paladin, doing 64 Holy damage over 8 sec to enemies who enter the area."
                            ]
                        },
                        {
                            id: "improved_lay_on_hands",
                            name: "Improved Lay on Hands",
                            icon: "spell_holy_layonhands",
                            row: 2,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives the target of your Lay on Hands spell a {armor}% bonus to their armor value from items for 2 min.  In addition, the cooldown for your Lay on Hands spell is reduced by {cd} min.",
                                {
                                    armor: [15, 30],
                                    cd: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "unyielding_faith",
                            name: "Unyielding Faith",
                            icon: "spell_holy_unyieldingfaith",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of all Fear and Disorient effects by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "illumination",
                            name: "Illumination",
                            icon: "spell_holy_greaterheal",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "After getting a critical effect from your Flash of Light, Holy Light, or Holy Shock heal spell, gives you a {value}% chance to gain Mana equal to the base cost of the spell.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_blessing_of_wisdom",
                            name: "Improved Blessing of Wisdom",
                            icon: "spell_holy_sealofwisdom",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Blessing of Wisdom spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "divine_favor",
                            name: "Divine Favor",
                            icon: "spell_holy_heal",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "illumination",
                            description: [
                                "When activated, gives your next Flash of Light, Holy Light, or Holy Shock spell a 100% critical effect chance."
                            ]
                        },
                        {
                            id: "lasting_judgement",
                            name: "Lasting Judgement",
                            icon: "spell_holy_healingaura",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Judgement of Light and Judgement of Wisdom by {value} sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "holy_power",
                            name: "Holy Power",
                            icon: "spell_holy_power",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "holy_shock",
                            name: "Holy Shock",
                            icon: "spell_holy_searinglight",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "divine_favor",
                            description: [
                                "Blasts the target with Holy energy, causing 204 to 220 Holy damage to an enemy, or 204 to 220 healing to an ally."
                            ]
                        }
                    ],
                    // paladin - vanilla
                    Protection: [
                        {
                            id: "improved_devotion_aura",
                            name: "Improved Devotion Aura",
                            icon: "spell_holy_devotionaura",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the armor bonus of your Devotion Aura by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "redoubt",
                            name: "Redoubt",
                            icon: "ability_defend",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to block attacks with your shield by {value}% after being the victim of a critical strike.  Lasts 10 sec or 5 blocks.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "precision",
                            name: "Precision",
                            icon: "ability_rogue_ambush",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "guardians_favor",
                            name: "Guardian's Favor",
                            icon: "spell_holy_sealofprotection",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Blessing of Protection by {value1} sec and increases the duration of your Blessing of Freedom by {value2} sec.",
                                {
                                    value1: [60, 120],
                                    value2: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 1,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "blessing_of_kings",
                            name: "Blessing of Kings",
                            icon: "spell_magic_magearmor",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Places a Blessing on the friendly target, increasing total stats by 10% for 5 min.  Players may only have one Blessing on them per Paladin at any one time."
                            ]
                        },
                        {
                            id: "improved_righteous_fury",
                            name: "Improved Righteous Fury",
                            icon: "spell_holy_sealoffury",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of threat generated by your Righteous Fury spell by {value}%.",
                                {
                                    value: [16, 33, 50]
                                }
                            ]
                        },
                        {
                            id: "shield_specialization",
                            name: "Shield Specialization",
                            icon: "inv_shield_06",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "redoubt",
                            description: [
                                "Increases the amount of damage absorbed by your shield by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Defense skill by {value}.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_hammer_of_justice",
                            name: "Improved Hammer of Justice",
                            icon: "spell_holy_sealofmight",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Hammer of Justice spell by {value} sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_concentration_aura",
                            name: "Improved Concentration Aura",
                            icon: "spell_holy_mindsooth",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Concentration Aura by an additional {value}% and gives all group members affected by the aura an additional {value}% chance to resist Silence and Interrupt effects.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "blessing_of_sanctuary",
                            name: "Blessing of Sanctuary",
                            icon: "spell_nature_lightningshield",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Places a Blessing on the friendly target, reducing damage dealt from all sources by up to 10 for 5 min.  In addition, when the target blocks a melee attack the attacker will take 14 Holy damage.  Players may only have one Blessing on them per Paladin at any one time."
                            ]
                        },
                        {
                            id: "reckoning",
                            name: "Reckoning",
                            icon: "spell_holy_blessingofstrength",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to gain an extra attack after being the victim of a critical strike.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "one_handed_weapon_specialization",
                            name: "One-Handed Weapon Specialization",
                            icon: "inv_sword_20",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with one-handed melee weapons by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "holy_shield",
                            name: "Holy Shield",
                            icon: "classic_spell_holy_blessingofprotection",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "blessing_of_sanctuary",
                            description: [
                                "Increases chance to block by 30% for 10 sec, and deals 65 Holy damage for each attack blocked while active.  Damage caused by Holy Shield causes 20% additional threat. Each block expends a charge. 4 charges."
                            ]
                        }
                    ],
                    // paladin - vanilla
                    Retribution: [
                        {
                            id: "improved_blessing_of_might",
                            name: "Improved Blessing of Might",
                            icon: "spell_holy_fistofjustice",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Blessing of Might by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "benediction",
                            name: "Benediction",
                            icon: "spell_frost_windwalkon",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Judgement and Seal spells by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_judgement",
                            name: "Improved Judgement",
                            icon: "spell_holy_righteousfury",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Judgement spell by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_seal_of_the_crusader",
                            name: "Improved Seal of the Crusader",
                            icon: "spell_holy_holysmite",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Seal of the Crusader and the Holy damage increase of your Judgement of the Crusader by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "vindication",
                            name: "Vindication",
                            icon: "spell_holy_vindication",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives the Paladin's damaging melee attacks a chance to reduce the target's Strength and Agility by {value}% for 10 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "conviction",
                            name: "Conviction",
                            icon: "spell_holy_retributionaura",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "seal_of_command",
                            name: "Seal of Command",
                            icon: "ability_warrior_innerrage",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Gives the Paladin a chance to deal additional Holy damage equal to 70% of normal weapon damage.  Only one Seal can be active on the Paladin at any one time.  Lasts 30 sec.<br><br>Unleashing this Seal's energy will judge an enemy, instantly causing 68 to 73 Holy damage, 137 to 146 if the target is stunned or incapacitated."
                            ]
                        },
                        {
                            id: "pursuit_of_justice",
                            name: "Pursuit of Justice",
                            icon: "spell_holy_persuitofjustice",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases movement and mounted movement speed by {value}%.  This does not stack with other movement speed increasing effects.",
                                {
                                    value: [4, 8]
                                }
                            ]
                        },
                        {
                            id: "eye_for_an_eye",
                            name: "Eye for an Eye",
                            icon: "spell_holy_eyeforaneye",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All spell criticals against you cause {value}% of the damage taken to the caster as well.  The damage caused by Eye for an Eye will not exceed 50% of the Paladin's total health.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_retribution_aura",
                            name: "Improved Retribution Aura",
                            icon: "spell_holy_auraoflight",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Retribution Aura by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "two_handed_weapon_specialization",
                            name: "Two-Handed Weapon Specialization",
                            icon: "inv_hammer_04",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "sanctity_aura",
                            name: "Sanctity Aura",
                            icon: "spell_holy_mindvision",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases Holy damage done by party members within 30 yards by 10%.  Players may only have one Aura on them per Paladin at any one time."
                            ]
                        },
                        {
                            id: "vengeance",
                            name: "Vengeance",
                            icon: "ability_racial_avatar",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "conviction",
                            description: [
                                "Gives you a {value}% bonus to Physical and Holy damage you deal for 8 sec after dealing a critical strike from a weapon swing, spell, or ability.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "repentance",
                            name: "Repentance",
                            icon: "spell_holy_prayerofhealing",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Puts the enemy target in a state of meditation, incapacitating them for up to 6 sec.  Any damage caused will awaken the target.  Only works against Humanoids."
                            ]
                        }
                    ]
                },
                priest: {
                    // priest - vanilla
                    Discipline: [
                        {
                            id: "unbreakable_will",
                            name: "Unbreakable Will",
                            icon: "spell_magic_magearmor",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist Stun, Fear, and Silence effects by an additional {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "wand_specialization",
                            name: "Wand Specialization",
                            icon: "inv_wand_01",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your damage with Wands by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "silent_resolve",
                            name: "Silent Resolve",
                            icon: "spell_nature_manaregentotem",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your spells by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_power_word_fortitude",
                            name: "Improved Power Word: Fortitude",
                            icon: "spell_holy_wordfortitude",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Power Word: Fortitude and Prayer of Fortitude spells by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_power_word_shield",
                            name: "Improved Power Word: Shield",
                            icon: "spell_holy_powerwordshield",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage absorbed by your Power Word: Shield by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "martyrdom",
                            name: "Martyrdom",
                            icon: "spell_nature_tranquility",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value1}% chance to gain the Focused Casting effect that lasts for 6 sec after being the victim of a melee or ranged critical strike.  The Focused Casting effect prevents you from losing casting time when taking damage and increases resistance to Interrupt effects by {value2}%.",
                                {
                                    value1: [50, 100],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "inner_focus",
                            name: "Inner Focus",
                            icon: "spell_frost_windwalkon",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, reduces the mana cost of your next spell by 100% and increases its critical effect chance by 25% if it is capable of a critical effect."
                            ]
                        },
                        {
                            id: "meditation",
                            name: "Meditation",
                            icon: "spell_nature_sleep",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value}% of your Mana regeneration to continue while casting.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_inner_fire",
                            name: "Improved Inner Fire",
                            icon: "spell_holy_innerfire",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the Armor bonus of your Inner Fire spell by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "mental_agility",
                            name: "Mental Agility",
                            icon: "ability_hibernation",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your instant cast spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_mana_burn",
                            name: "Improved Mana Burn",
                            icon: "spell_shadow_manaburn",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Mana Burn spell by {value}.",
                                {
                                    value: ["0.25 secs", "0.5 sec"]
                                }
                            ]
                        },
                        {
                            id: "mental_strength",
                            name: "Mental Strength",
                            icon: "spell_nature_enchantarmor",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum Mana by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "divine_spirit",
                            name: "Divine Spirit",
                            icon: "spell_holy_divinespirit",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "meditation",
                            description: [
                                "Holy power infuses the target, increasing their Spirit by 17 for 30 min."
                            ]
                        },
                        {
                            id: "force_of_will",
                            name: "Force of Will",
                            icon: "spell_nature_slowingtotem",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage by {value}% and the critical strike chance of your offensive spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "power_infusion",
                            name: "Power Infusion",
                            icon: "spell_holy_powerinfusion",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "mental_strength",
                            description: [
                                "Infuses the target with power, increasing their spell damage and healing by 20%.  Lasts 15 sec."
                            ]
                        }
                    ],
                    // priest - vanilla
                    Holy: [
                        {
                            id: "healing_focus",
                            name: "Healing Focus",
                            icon: "spell_holy_healingfocus",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting any healing spell.",
                                {
                                    value: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "improved_renew",
                            name: "Improved Renew",
                            icon: "spell_holy_renew",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Renew spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "holy_specialization",
                            name: "Holy Specialization",
                            icon: "spell_holy_sealofsalvation",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "spell_warding",
                            name: "Spell Warding",
                            icon: "spell_holy_spellwarding",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces all spell damage taken by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "divine_fury",
                            name: "Divine Fury",
                            icon: "spell_holy_sealofwrath",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Smite, Holy Fire, Heal and Greater Heal spells by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "holy_nova",
                            name: "Holy Nova",
                            icon: "spell_holy_holynova",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes an explosion of holy light around the caster, causing 29 to 34 Holy damage to all enemy targets within 10 yards and healing all party members within 10 yards for 54 to 63.  These effects cause no threat."
                            ]
                        },
                        {
                            id: "blessed_recovery",
                            name: "Blessed Recovery",
                            icon: "spell_holy_blessedrecovery",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "After being struck by a melee or ranged critical hit, heal {value}% of the damage taken over 6 sec.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "inspiration",
                            name: "Inspiration",
                            icon: "spell_holy_layonhands",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your target's armor by {value}% for 15 sec after getting a critical effect from your Flash Heal, Heal, Greater Heal, or Prayer of Healing spell.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "holy_reach",
                            name: "Holy Reach",
                            icon: "spell_holy_purify",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Smite and Holy Fire spells and the radius of your Prayer of Healing and Holy Nova spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_healing",
                            name: "Improved Healing",
                            icon: "spell_holy_heal02",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Lesser Heal, Heal, and Greater Heal spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "searing_light",
                            name: "Searing Light",
                            icon: "spell_holy_searinglightpriest",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "divine_fury",
                            description: [
                                "Increases the damage of your Smite and Holy Fire spells by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_prayer_of_healing",
                            name: "Improved Prayer of Healing",
                            icon: "spell_holy_prayerofhealing02",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Prayer of Healing spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "spirit_of_redemption",
                            name: "Spirit of Redemption",
                            icon: "inv_enchant_essenceeternallarge",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Upon death, the priest becomes the Spirit of Redemption for 10 sec.  The Spirit of Redemption cannot move, attack, be attacked or targeted by any spells or effects.  While in this form the priest can cast any healing spell free of cost.  When the effect ends, the priest dies."
                            ]
                        },
                        {
                            id: "spiritual_guidance",
                            name: "Spiritual Guidance",
                            icon: "spell_holy_spiritualguidence",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases spell damage and healing by up to {value}% of your total Spirit.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "spiritual_healing",
                            name: "Spiritual Healing",
                            icon: "spell_nature_moonglow",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "lightwell",
                            name: "Lightwell",
                            icon: "spell_holy_summonlightwell",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "spirit_of_redemption",
                            description: [
                                "Creates a holy Lightwell near the priest.  Members of your raid or party can click the Lightwell to restore 800 health over 10 sec.  Being attacked cancels the effect.  Lightwell lasts for 3 min or 5 charges."
                            ]
                        }
                    ],
                    // priest - vanilla
                    Shadow: [
                        {
                            id: "spirit_tap",
                            name: "Spirit Tap",
                            icon: "spell_shadow_requiem",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to gain a 100% bonus to your Spirit after killing a target that yields experience or honor.  For the duration, your Mana will regenerate at a 50% rate while casting.  Lasts 15 sec.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "blackout",
                            name: "Blackout",
                            icon: "spell_shadow_gathershadows",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Shadow damage spells a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "shadow_affinity",
                            name: "Shadow Affinity",
                            icon: "spell_shadow_shadowward",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your Shadow spells by {value}%.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_shadow_word_pain",
                            name: "Improved Shadow Word: Pain",
                            icon: "spell_shadow_shadowwordpain",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Shadow Word: Pain spell by {value} sec.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "shadow_focus",
                            name: "Shadow Focus",
                            icon: "spell_shadow_burningspirit",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces your target's chance to resist your Shadow spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_psychic_scream",
                            name: "Improved Psychic Scream",
                            icon: "spell_shadow_psychicscream",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Psychic Scream spell by {value} sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_mind_blast",
                            name: "Improved Mind Blast",
                            icon: "spell_shadow_unholyfrenzy",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Mind Blast spell by {value} sec.",
                                {
                                    value: [0.5, 1, 1.5, 2, 2.5]
                                }
                            ]
                        },
                        {
                            id: "mind_flay",
                            name: "Mind Flay",
                            icon: "spell_shadow_siphonmana",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Assault the target's mind with Shadow energy, causing 75 Shadow damage over 3 sec and slowing their movement speed by 50%."
                            ]
                        },
                        {
                            id: "improved_fade",
                            name: "Improved Fade",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Fade ability by {value} sec.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "shadow_reach",
                            name: "Shadow Reach",
                            icon: "spell_shadow_chilltouch",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Shadow damage spells by {value}%.",
                                {
                                    value: [6, 13, 20]
                                }
                            ]
                        },
                        {
                            id: "shadow_weaving",
                            name: "Shadow Weaving",
                            icon: "spell_shadow_blackplague",
                            row: 3,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Shadow damage spells have a {value}% chance to cause your target to be vulnerable to Shadow damage.  This vulnerability increases the Shadow damage dealt to your target by 3% and lasts 15 sec.  Stacks up to 5 times.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "silence",
                            name: "Silence",
                            icon: "spell_shadow_impphaseshift",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "improved_psychic_scream",
                            description: [
                                "Silences the target, preventing them from casting spells for 5 sec."
                            ]
                        },
                        {
                            id: "vampiric_embrace",
                            name: "Vampiric Embrace",
                            icon: "spell_shadow_unsummonbuilding",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Afflicts your target with Shadow energy that causes all party members to be healed for 20% of any Shadow spell damage you deal for 1 min."
                            ]
                        },
                        {
                            id: "improved_vampiric_embrace",
                            name: "Improved Vampiric Embrace",
                            icon: "spell_shadow_improvedvampiricembrace",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "vampiric_embrace",
                            description: [
                                "Increases the percentage healed by Vampiric Embrace by an additional {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "darkness",
                            name: "Darkness",
                            icon: "spell_shadow_twilight",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Shadow spell damage by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "shadowform",
                            name: "Shadowform",
                            icon: "spell_shadow_shadowform",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "vampiric_embrace",
                            description: [
                                "Assume a Shadowform, increasing your Shadow damage by 15% and reducing Physical damage done to you by 15%.  However, you may not cast Holy spells while in this form."
                            ]
                        }
                    ]
                },
                rogue: {
                    // rogue - vanilla
                    Assassination: [
                        {
                            id: "improved_eviscerate",
                            name: "Improved Eviscerate",
                            icon: "ability_rogue_eviscerate",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Eviscerate ability by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "remorseless_attacks",
                            name: "Remorseless Attacks",
                            icon: "ability_fiegndead",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "After killing an opponent that yields experience or honor, gives you a {value}% increased critical strike chance on your next Sinister Strike, Backstab, Ambush, or Ghostly Strike.  Lasts 20 sec.",
                                {
                                    value: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "malice",
                            name: "Malice",
                            icon: "ability_racial_bloodrage",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "ruthlessness",
                            name: "Ruthlessness",
                            icon: "ability_druid_disembowel",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your finishing moves a {value}% chance to add a combo point to your target.",
                                {
                                    value: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "murder",
                            name: "Murder",
                            icon: "spell_shadow_deathscream",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused against Humanoid, Giant, Beast and Dragonkin targets by {value}%.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_slice_and_dice",
                            name: "Improved Slice and Dice",
                            icon: "ability_rogue_slicedice",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Slice and Dice ability by {value}%.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "relentless_strikes",
                            name: "Relentless Strikes",
                            icon: "ability_warrior_decisivestrike",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your finishing moves have a 20% chance per combo point to restore 25 energy."
                            ]
                        },
                        {
                            id: "improved_expose_armor",
                            name: "Improved Expose Armor",
                            icon: "ability_warrior_riposte",
                            row: 2,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the armor reduced by your Expose Armor ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "lethality",
                            name: "Lethality",
                            icon: "ability_criticalstrike",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "malice",
                            description: [
                                "Increases the critical strike damage bonus of your Sinister Strike, Gouge, Backstab, Ghostly Strike, and Hemorrhage abilities by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "vile_poisons",
                            name: "Vile Poisons",
                            icon: "ability_rogue_feigndeath",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by your poisons by {value1}% and gives your poisons an additional {value2}% chance to resist dispel effects.",
                                {
                                    value1: [4, 8, 12, 16, 20],
                                    value2: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "improved_poisons",
                            name: "Improved Poisons",
                            icon: "ability_poisons",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the chance to apply poisons to your target by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "cold_blood",
                            name: "Cold Blood",
                            icon: "spell_ice_lament",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, increases the critical strike chance of your next Sinister Strike, Backstab, Ambush, or Eviscerate by 100%."
                            ]
                        },
                        {
                            id: "improved_kidney_shot",
                            name: "Improved Kidney Shot",
                            icon: "ability_rogue_kidneyshot",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "While affected by your Kidney Shot ability, the target receives an additional {value}% damage from all sources.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "seal_fate",
                            name: "Seal Fate",
                            icon: "spell_shadow_chilltouch",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "cold_blood",
                            description: [
                                "Your critical strikes from abilities that add combo points have a {value}% chance to add an additional combo point.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "vigor",
                            name: "Vigor",
                            icon: "spell_nature_earthbindtotem",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum Energy by 10."
                            ]
                        }
                    ],
                    // rogue - vanilla
                    Combat: [
                        {
                            id: "improved_gouge",
                            name: "Improved Gouge",
                            icon: "ability_gouge",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect duration of your Gouge ability by {value} sec.",
                                {
                                    value: [0.5, 1, 1.5]
                                }
                            ]
                        },
                        {
                            id: "improved_sinister_strike",
                            name: "Improved Sinister Strike",
                            icon: "spell_shadow_ritualofsacrifice",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Energy cost of your Sinister Strike ability by {value}.",
                                {
                                    value: [3, 5]
                                }
                            ]
                        },
                        {
                            id: "lightning_reflexes",
                            name: "Lightning Reflexes",
                            icon: "spell_nature_invisibilty",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Dodge chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_backstab",
                            name: "Improved Backstab",
                            icon: "ability_backstab",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Backstab ability by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "precision",
                            name: "Precision",
                            icon: "ability_marksmanship",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "endurance",
                            name: "Endurance",
                            icon: "spell_shadow_shadowward",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Sprint and Evasion abilities by {value}.",
                                {
                                    value: ["45 sec", "1.5 min"]
                                }
                            ]
                        },
                        {
                            id: "riposte",
                            name: "Riposte",
                            icon: "ability_warrior_challange",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "deflection",
                            description: [
                                "A strike that becomes active after parrying an opponent's attack.  This attack deals 150% weapon damage and disarms the target for 6 sec."
                            ]
                        },
                        {
                            id: "improved_sprint",
                            name: "Improved Sprint",
                            icon: "ability_rogue_sprint",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives a {value}% chance to remove all movement impairing effects when you activate your Sprint ability.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_kick",
                            name: "Improved Kick",
                            icon: "ability_kick",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Kick ability a {value}% chance to silence the target for 2 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "dagger_specialization",
                            name: "Dagger Specialization",
                            icon: "inv_weapon_shortblade_05",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with Daggers by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwield",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "precision",
                            description: [
                                "Increases the damage done by your offhand weapon by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "mace_specialization",
                            name: "Mace Specialization",
                            icon: "inv_mace_01",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your skill with Maces by {skill}, and gives you a {stun}% chance to stun your target for 3 sec with a mace.",
                                {
                                    skill: [1, 2, 3, 4, 5],
                                    stun: [1, 2, 3, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "blade_flurry",
                            name: "Blade Flurry",
                            icon: "ability_warrior_punishingblow",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your attack speed by 20%.  In addition, attacks strike an additional nearby opponent.  Lasts 15 sec."
                            ]
                        },
                        {
                            id: "sword_specialization",
                            name: "Sword Specialization",
                            icon: "inv_sword_27",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to get an extra attack on the same target after dealing damage with your Sword.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "fist_weapon_specialization",
                            name: "Fist Weapon Specialization",
                            icon: "inv_gauntlets_04",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with Fist Weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "weapon_expertise",
                            name: "Weapon Expertise",
                            icon: "spell_holy_blessingofstrength",
                            row: 5,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "blade_flurry",
                            description: [
                                "Increases your skill with Sword, Fist and Dagger weapons by {value}.",
                                {
                                    value: [3, 5]
                                }
                            ]
                        },
                        {
                            id: "aggression",
                            name: "Aggression",
                            icon: "ability_racial_avatar",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Sinister Strike and Eviscerate abilities by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "adrenaline_rush",
                            name: "Adrenaline Rush",
                            icon: "spell_shadow_shadowworddominate",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your Energy regeneration rate by 100% for 15 sec."
                            ]
                        }
                    ],
                    // rogue - vanilla
                    Subtlety: [
                        {
                            id: "master_of_deception",
                            name: "Master of Deception",
                            icon: "spell_shadow_charm",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance enemies have to detect you while in Stealth mode.{value}",
                                {
                                    value: ["", "  More effective than Master of Deception (Rank 1).", "  More effective than Master of Deception (Rank 2).", "  More effective than Master of Deception (Rank 3).", "  More effective than Master of Deception (Rank 4)."]
                                }
                            ]
                        },
                        {
                            id: "opportunity",
                            name: "Opportunity",
                            icon: "ability_warrior_warcry",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt when striking from behind with your Backstab, Garrote, or Ambush abilities by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "sleight_of_hand",
                            name: "Sleight of Hand",
                            icon: "ability_rogue_feint",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you are critically hit by melee and ranged attacks by {value1}% and increases the threat reduction of your Feint ability by {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "elusiveness",
                            name: "Elusiveness",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Vanish and Blind abilities by {value}.",
                                {
                                    value: ["45 sec", "1.5 min"]
                                }
                            ]
                        },
                        {
                            id: "camouflage",
                            name: "Camouflage",
                            icon: "ability_stealth",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your speed while stealthed by {value1}% and reduces the cooldown of your Stealth ability by {value2} sec.",
                                {
                                    value1: [3, 6, 9, 12, 15],
                                    value2: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "initiative",
                            name: "Initiative",
                            icon: "spell_shadow_fumble",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to add an additional combo point to your target when using your Ambush, Garrote, or Cheap Shot ability.",
                                {
                                    value: [25, 50, 75]
                                }
                            ]
                        },
                        {
                            id: "ghostly_strike",
                            name: "Ghostly Strike",
                            icon: "spell_shadow_curse",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "A strike that deals 125% weapon damage and increases your chance to dodge by 15% for 7 sec.  Awards 1 combo point."
                            ]
                        },
                        {
                            id: "improved_ambush",
                            name: "Improved Ambush",
                            icon: "ability_rogue_ambush",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Ambush ability by {value}%.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "setup",
                            name: "Setup",
                            icon: "spell_nature_mirrorimage",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to add a combo point to your target after dodging their attack or fully resisting one of their spells.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "improved_sap",
                            name: "Improved Sap",
                            icon: "ability_sap",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to return to stealth mode after using your Sap ability.",
                                {
                                    value: [30, 60, 90]
                                }
                            ]
                        },
                        {
                            id: "serrated_blades",
                            name: "Serrated Blades",
                            icon: "inv_sword_17",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Causes your attacks to ignore 0 of your target's Armor and increases the damage dealt by your Rupture ability by {value}%.  The amount of Armor reduced increases with your level.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "heightened_senses",
                            name: "Heightened Senses",
                            icon: "ability_ambush",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your Stealth detection and reduces the chance you are hit by spells and ranged attacks by {value1}%.{value2}",
                                {
                                    value1: [2, 4],
                                    value2: ["", "  More effective than Heightened Senses (Rank 1)."]
                                }
                            ]
                        },
                        {
                            id: "preparation",
                            name: "Preparation",
                            icon: "spell_shadow_antishadow",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability immediately finishes the cooldown on your other Rogue abilities."
                            ]
                        },
                        {
                            id: "dirty_deeds",
                            name: "Dirty Deeds",
                            icon: "spell_shadow_summonsuccubus",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Energy cost of your Cheap Shot and Garrote abilities by {value}.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "hemorrhage",
                            name: "Hemorrhage",
                            icon: "spell_shadow_lifedrain",
                            row: 4,
                            col: 3,
                            ranks: 1,
                            requiresTalents: "serrated_blades",
                            description: [
                                "An instant strike that damages the opponent and causes the target to hemorrhage, increasing any Physical damage dealt to the target by up to 3.  Lasts 30 charges or 15 sec.  Awards 1 combo point."
                            ]
                        },
                        {
                            id: "deadliness",
                            name: "Deadliness",
                            icon: "inv_weapon_crossbow_11",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Attack Power by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "premeditation",
                            name: "Premeditation",
                            icon: "spell_shadow_possession",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "preparation",
                            description: [
                                "When used, adds 2 combo points to your target.  You must add to or use those combo points within 10 sec or the combo points are lost."
                            ]
                        }
                    ]
                },
                shaman: {
                    // shaman - vanilla
                    Elemental: [
                        {
                            id: "convection",
                            name: "Convection",
                            icon: "spell_nature_wispsplode",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Shock, Lightning Bolt and Chain Lightning spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "concussion",
                            name: "Concussion",
                            icon: "spell_fire_fireball",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Lightning Bolt, Chain Lightning and Shock spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "earths_grasp",
                            name: "Earth's Grasp",
                            icon: "spell_nature_stoneclawtotem",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the health of your Stoneclaw Totem by {value1}% and the radius of your Earthbind Totem by {value2}%.",
                                {
                                    value1: [25, 50],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "elemental_warding",
                            name: "Elemental Warding",
                            icon: "spell_nature_spiritarmor",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces damage taken from Fire, Frost and Nature effects by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "call_of_flame",
                            name: "Call of Flame",
                            icon: "spell_fire_immolation",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire Totems by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "elemental_focus",
                            name: "Elemental Focus",
                            icon: "spell_shadow_manaburn",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Gives you a 10% chance to enter a Clearcasting state after casting any Fire, Frost, or Nature damage spell.  The Clearcasting state reduces the mana cost of your next damage spell by 100%."
                            ]
                        },
                        {
                            id: "reverberation",
                            name: "Reverberation",
                            icon: "spell_frost_frostward",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Shock spells by {value} sec.",
                                {
                                    value: [0.2, 0.4, 0.6, 0.8, 1]
                                }
                            ]
                        },
                        {
                            id: "call_of_thunder",
                            name: "Call of Thunder",
                            icon: "spell_nature_callstorm",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Lightning Bolt and Chain Lightning spells by an additional {value}%.",
                                {
                                    value: [1, 2, 3, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_fire_totems",
                            name: "Improved Fire Totems",
                            icon: "spell_fire_sealoffire",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the delay before your Fire Nova Totem activates by {value1} sec. and decreases the threat generated by your Magma Totem by {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "eye_of_the_storm",
                            name: "Eye of the Storm",
                            icon: "spell_nature_eyeofthestorm",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to gain the Focused Casting effect that lasts for 6 sec after being the victim of a melee or ranged critical strike.  The Focused Casting effect prevents you from losing casting time when taking damage.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "elemental_devastation",
                            name: "Elemental Devastation",
                            icon: "classic_spell_fire_elementaldevastation",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your offensive spell crits will increase your chance to get a critical strike with melee attacks by {value}% for 10 sec.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "storm_reach",
                            name: "Storm Reach",
                            icon: "spell_nature_stormreach",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Lightning Bolt and Chain Lightning spells by {value} yards.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "elemental_fury",
                            name: "Elemental Fury",
                            icon: "spell_fire_volcano",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Searing, Magma, and Fire Nova Totems and your Fire, Frost, and Nature spells by 100%."
                            ]
                        },
                        {
                            id: "lightning_mastery",
                            name: "Lightning Mastery",
                            icon: "spell_lightning_lightningbolt01",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "call_of_thunder",
                            description: [
                                "Reduces the cast time of your Lightning Bolt and Chain Lightning spells by {value} sec.",
                                {
                                    value: [0.2, 0.4, 0.6, 0.8, 1]
                                }
                            ]
                        },
                        {
                            id: "elemental_mastery",
                            name: "Elemental Mastery",
                            icon: "spell_nature_wispheal",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "elemental_fury",
                            description: [
                                "When activated, this spell gives your next Fire, Frost, or Nature damage spell a 100% critical strike chance and reduces the mana cost by 100%."
                            ]
                        }
                    ],
                    // shaman - vanilla
                    Enhancement: [
                        {
                            id: "ancestral_knowledge",
                            name: "Ancestral Knowledge",
                            icon: "spell_shadow_grimward",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum Mana by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "shield_specialization",
                            name: "Shield Specialization",
                            icon: "inv_shield_06",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to block attacks with a shield by {block}% and increases the amount blocked by {blocked}%.",
                                {
                                    block: [1, 2, 3, 4, 5],
                                    blocked: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "guardian_totems",
                            name: "Guardian Totems",
                            icon: "spell_nature_stoneskintotem",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of damage reduced by your Stoneskin Totem and Windwall Totem by {damage}% and reduces the cooldown of your Grounding Totem by {cooldown} sec.",
                                {
                                    damage: [10, 20],
                                    cooldown: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "thundering_strikes",
                            name: "Thundering Strikes",
                            icon: "ability_thunderbolt",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Improves your chance to get a critical strike with your weapon attacks by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_ghost_wolf",
                            name: "Improved Ghost Wolf",
                            icon: "spell_nature_spiritwolf",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Ghost Wolf spell by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_lightning_shield",
                            name: "Improved Lightning Shield",
                            icon: "spell_nature_lightningshield",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Lightning Shield orbs by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "enhancing_totems",
                            name: "Enhancing Totems",
                            icon: "spell_nature_earthbindtotem",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Strength of Earth and Grace of Air Totems by {value}%.",
                                {
                                    value: [8, 15]
                                }
                            ]
                        },
                        {
                            id: "two_handed_axes_and_maces",
                            name: "Two-Handed Axes and Maces",
                            icon: "inv_axe_10",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Allows you to use Two-Handed Axes and Two-Handed Maces."
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_nature_mirrorimage",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to dodge by an additional {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "flurry",
                            name: "Flurry",
                            icon: "ability_ghoulfrenzy",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "thundering_strikes",
                            description: [
                                "Increases your attack speed by {value}% for your next 3 swings after dealing a critical strike.",
                                {
                                    value: [10, 15, 20, 25, 30]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_weapon_totems",
                            name: "Improved Weapon Totems",
                            icon: "spell_fire_enchantweapon",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Windfury Totem by {windfury}% and increases the damage caused by your Flametongue Totem by {flametongue}%.",
                                {
                                    windfury: [15, 30],
                                    flametongue: [6, 12]
                                }
                            ]
                        },
                        {
                            id: "elemental_weapons",
                            name: "Elemental Weapons",
                            icon: "spell_fire_flametounge",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Rockbiter Weapon by {rockbiter}%, your Windfury Weapon effect by {windfury}% and increases the damage caused by your Flametongue Weapon and Frostbrand Weapon by {flamefrost}%.",
                                {
                                    rockbiter: [7, 14, 20],
                                    windfury: [13, 27, 40],
                                    flamefrost: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "parry",
                            name: "Parry",
                            icon: "ability_parry",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Gives a chance to parry enemy melee attacks."
                            ]
                        },
                        {
                            id: "weapon_mastery",
                            name: "Weapon Mastery",
                            icon: "ability_hunter_swiftstrike",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with all weapons by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "stormstrike",
                            name: "Stormstrike",
                            icon: "spell_holy_sealofmight",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "elemental_weapons",
                            description: [
                                "Gives you an extra attack.  In addition, the next 2 sources of Nature damage dealt to the target are increased by 20%. Lasts 12 sec."
                            ]
                        }
                    ],
                    // shaman - vanilla
                    Restoration: [
                        {
                            id: "improved_healing_wave",
                            name: "Improved Healing Wave",
                            icon: "spell_nature_magicimmunity",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Healing Wave spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "tidal_focus",
                            name: "Tidal Focus",
                            icon: "spell_frost_manarecharge",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your healing spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_reincarnation",
                            name: "Improved Reincarnation",
                            icon: "spell_nature_reincarnation",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Reincarnation spell by {value} min and increases the amount of health and mana you reincarnate with by an additional {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "ancestral_healing",
                            name: "Ancestral Healing",
                            icon: "spell_nature_undyingstrength",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your target's armor value by {value}% for 15 sec after getting a critical effect from one of your healing spells.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "totemic_focus",
                            name: "Totemic Focus",
                            icon: "spell_nature_moonglow",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your totems by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "natures_guidance",
                            name: "Nature's Guidance",
                            icon: "spell_frost_stun",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with melee attacks and spells by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "healing_focus",
                            name: "Healing Focus",
                            icon: "spell_nature_healingwavelesser",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting any healing spell.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "totemic_mastery",
                            name: "Totemic Mastery",
                            icon: "spell_nature_nullward",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The radius of your totems that affect friendly targets is increased to 30 yd."
                            ]
                        },
                        {
                            id: "healing_grace",
                            name: "Healing Grace",
                            icon: "spell_nature_healingtouch",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your healing spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "restorative_totems",
                            name: "Restorative Totems",
                            icon: "spell_nature_manaregentotem",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Mana Spring and Healing Stream Totems by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "tidal_mastery",
                            name: "Tidal Mastery",
                            icon: "spell_nature_tranquility",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your healing and lightning spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "healing_way",
                            name: "Healing Way",
                            icon: "classic_spell_nature_healingway",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Healing Wave spells have a {value}% chance to increase the effect of subsequent Healing Wave spells on that target by 6% for 15 sec.  This effect will stack up to 3 times.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "natures_swiftness",
                            name: "Nature's Swiftness",
                            icon: "spell_nature_ravenform",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, your next Nature spell with a casting time less than 10 sec. becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "purification",
                            name: "Purification",
                            icon: "spell_frost_wizardmark",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "mana_tide_totem",
                            name: "Mana Tide Totem",
                            icon: "spell_frost_summonwaterelemental",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "restorative_totems",
                            description: [
                                "Summons a Mana Tide Totem with 5 health at the feet of the caster for 12 sec that restores 170 mana every 3 seconds to group members within 20 yards."
                            ]
                        }
                    ]
                },
                warlock: {
                    // warlock - vanilla
                    Affliction: [
                        {
                            id: "suppression",
                            name: "Suppression",
                            icon: "spell_shadow_unsummonbuilding",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance for enemies to resist your Affliction spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_corruption",
                            name: "Improved Corruption",
                            icon: "spell_shadow_abominationexplosion",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Corruption spell by {value} sec.",
                                {
                                    value: [0.4, 0.8, 1.2, 1.6, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_curse_of_weakness",
                            name: "Improved Curse of Weakness",
                            icon: "spell_shadow_curseofmannoroth",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Curse of Weakness by {value}%.",
                                {
                                    value: [6, 13, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_drain_soul",
                            name: "Improved Drain Soul",
                            icon: "spell_shadow_haunting",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to get a 100% increase to your Mana regeneration for 10 sec if the target is killed by you while you drain its soul.  In addition your Mana may continue to regenerate while casting at 50% of normal.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_life_tap",
                            name: "Improved Life Tap",
                            icon: "spell_shadow_burningspirit",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Mana awarded by your Life Tap spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_drain_life",
                            name: "Improved Drain Life",
                            icon: "spell_shadow_lifedrain02",
                            row: 1,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the Health drained by your Drain Life spell by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_curse_of_agony",
                            name: "Improved Curse of Agony",
                            icon: "spell_shadow_curseofsargeras",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Curse of Agony by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "fel_concentration",
                            name: "Fel Concentration",
                            icon: "spell_shadow_fingerofdeath",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while channeling the Drain Life, Drain Mana, or Drain Soul spell.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "amplify_curse",
                            name: "Amplify Curse",
                            icon: "spell_shadow_contagion",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your next Curse of Weakness or Curse of Agony by 50%, or your next Curse of Exhaustion by 20%.  Lasts 30 sec."
                            ]
                        },
                        {
                            id: "grim_reach",
                            name: "Grim Reach",
                            icon: "spell_shadow_callofbone",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Affliction spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "nightfall",
                            name: "Nightfall",
                            icon: "spell_shadow_twilight",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Corruption and Drain Life spells a {value}% chance to cause you to enter a Shadow Trance state after damaging the opponent.  The Shadow Trance state reduces the casting time of your next Shadow Bolt spell by 100%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_drain_mana",
                            name: "Improved Drain Mana",
                            icon: "spell_shadow_siphonmana",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Causes {value}% of the Mana drained by your Drain Mana spell to damage the opponent.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "siphon_life",
                            name: "Siphon Life",
                            icon: "spell_shadow_requiem",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Transfers 15 health from the target to the caster every 3 sec.  Lasts 30 sec."
                            ]
                        },
                        {
                            id: "curse_of_exhaustion",
                            name: "Curse of Exhaustion",
                            icon: "spell_shadow_grimward",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "amplify_curse",
                            description: [
                                "Reduces the target's movement speed by 10% for 12 sec.  Only one Curse per Warlock can be active on any one target."
                            ]
                        },
                        {
                            id: "improved_curse_of_exhaustion",
                            name: "Improved Curse of Exhaustion",
                            icon: "spell_shadow_grimward",
                            row: 4,
                            col: 3,
                            ranks: 4,
                            requiresTalents: "curse_of_exhaustion",
                            description: [
                                "Increases the speed reduction of your Curse of Exhaustion by {value}%.",
                                {
                                    value: [5, 10, 15, 20]
                                }
                            ]
                        },
                        {
                            id: "shadow_mastery",
                            name: "Shadow Mastery",
                            icon: "spell_shadow_shadetruesight",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "siphon_life",
                            description: [
                                "Increases the damage dealt or life drained by your Shadow spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "dark_pact",
                            name: "Dark Pact",
                            icon: "spell_shadow_darkritual",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Drains 150 of your pet's Mana, returning 100% to you."
                            ]
                        }
                    ],
                    // warlock - vanilla
                    Demonology: [
                        {
                            id: "improved_healthstone",
                            name: "Improved Healthstone",
                            icon: "inv_stone_04",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Health restored by your Healthstone by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_imp",
                            name: "Improved Imp",
                            icon: "spell_shadow_summonimp",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Imp's Firebolt, Fire Shield, and Blood Pact spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "demonic_embrace",
                            name: "Demonic Embrace",
                            icon: "spell_shadow_metamorphosis",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina by {stamina}% but reduces your total Spirit by {spirit}%.",
                                {
                                    stamina: [3, 6, 9, 12, 15],
                                    spirit: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_health_funnel",
                            name: "Improved Health Funnel",
                            icon: "spell_shadow_lifedrain",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Health transferred by your Health Funnel spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_voidwalker",
                            name: "Improved Voidwalker",
                            icon: "spell_shadow_summonvoidwalker",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your Voidwalker's Torment, Consume Shadows, Sacrifice and Suffering spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "fel_intellect",
                            name: "Fel Intellect",
                            icon: "spell_holy_magicalsentry",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the maximum Mana of your Imp, Voidwalker, Succubus, and Felhunter by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_succubus",
                            name: "Improved Succubus",
                            icon: "spell_shadow_summonsuccubus",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Succubus' Lash of Pain and Soothing Kiss spells by {effect}%, and increases the duration of your Succubus' Seduction and Lesser Invisibility spells by {duration}%.",
                                {
                                    effect: [10, 20, 30],
                                    duration: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "fel_domination",
                            name: "Fel Domination",
                            icon: "spell_nature_removecurse",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your next Imp, Voidwalker, Succubus, or Felhunter Summon spell has its casting time reduced by 5.5 sec and its Mana cost reduced by 50%."
                            ]
                        },
                        {
                            id: "fel_stamina",
                            name: "Fel Stamina",
                            icon: "spell_shadow_antishadow",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the maximum Health of your Imp, Voidwalker, Succubus, and Felhunter by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "master_summoner",
                            name: "Master Summoner",
                            icon: "spell_shadow_impphaseshift",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "fel_domination",
                            description: [
                                "Reduces the casting time of your Imp, Voidwalker, Succubus, and Felhunter Summoning spells by {casttime} sec and the Mana cost by {cost}%.",
                                {
                                    casttime: [2, 4],
                                    cost: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "unholy_power",
                            name: "Unholy Power",
                            icon: "spell_shadow_shadowworddominate",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Voidwalker, Succubus, and Felhunter's melee attacks by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_enslave_demon",
                            name: "Improved Enslave Demon",
                            icon: "spell_shadow_enslavedemon",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Attack Speed and Casting Speed penalty of your Enslave Demon spell by {value}% and reduces the resist chance by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "demonic_sacrifice",
                            name: "Demonic Sacrifice",
                            icon: "spell_shadow_psychicscream",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, sacrifices your summoned demon to grant you an effect that lasts 30 min.  The effect is canceled if any Demon is summoned.<br><br>Imp: Increases your Fire damage by 15%.<br><br>Voidwalker: Restores 3% of total Health every 4 sec.<br><br>Succubus: Increases your Shadow damage by 15%.<br><br>Felhunter: Restores 2% of total Mana every 4 sec."
                            ]
                        },
                        {
                            id: "improved_firestone",
                            name: "Improved Firestone",
                            icon: "inv_ammo_firetar",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the bonus Fire damage from Firestones and the Firestone effect by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "master_demonologist",
                            name: "Master Demonologist",
                            icon: "spell_shadow_shadowpact",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "unholy_power",
                            description: [
                                "Grants both the Warlock and the summoned demon an effect as long as that demon is active.<br><br>Imp - Increases threat caused by {imp}%.<br><br>Voidwalker - Reduces physical damage taken by {voidsucc}%.<br><br>Succubus - Increases all damage caused by {voidsucc}%.<br><br>Felhunter - Increases all resistances by {felhunter} per level.",
                                {
                                    imp: [4, 8, 12, 16, 20],
                                    voidsucc: [2, 4, 6, 8, 10],
                                    felhunter: [".2", ".4", ".6", ".8", "1"]
                                }
                            ]
                        },
                        {
                            id: "soul_link",
                            name: "Soul Link",
                            icon: "spell_shadow_gathershadows",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "demonic_sacrifice",
                            description: [
                                "When active, 30% of all damage taken by the caster is taken by your Imp, Voidwalker, Succubus, or Felhunter demon instead.  In addition, both the demon and master will inflict 3% more damage. Lasts as long as the demon is active."
                            ]
                        },
                        {
                            id: "improved_spellstone",
                            name: "Improved Spellstone",
                            icon: "inv_misc_gem_sapphire_01",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of damage absorbed by your Spellstone by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        }
                    ],
                    // warlock - vanilla
                    Destruction: [
                        {
                            id: "improved_shadow_bolt",
                            name: "Improved Shadow Bolt",
                            icon: "spell_shadow_shadowbolt",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Shadow Bolt spell by {damage}%, and your Shadow Bolt has a {chance}% chance to cause your target to be vulnerable to spell damage, increasing spell critical strike chance against that target by 5%. Effect lasts 30 sec.",
                                {
                                    damage: [2, 4, 6, 8, 10],
                                    chance: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "cataclysm",
                            name: "Cataclysm",
                            icon: "spell_fire_windsofwoe",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Destruction spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "bane",
                            name: "Bane",
                            icon: "spell_shadow_deathpact",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Shadow Bolt and Immolate spells by {value1} sec and your Soul Fire spell by {value2} sec.",
                                {
                                    value1: [0.1, 0.2, 0.3, 0.4, 0.5],
                                    value2: [0.4, 0.8, 1.2, 1.6, 2]
                                }
                            ]
                        },
                        {
                            id: "aftermath",
                            name: "Aftermath",
                            icon: "spell_fire_fire",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Destruction spells a {value}% chance to daze the target for 5 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_firebolt",
                            name: "Improved Firebolt",
                            icon: "spell_fire_firebolt",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Imp's Firebolt spell by {value} sec.",
                                {
                                    value: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "improved_lash_of_pain",
                            name: "Improved Lash of Pain",
                            icon: "spell_shadow_curse",
                            row: 2,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Succubus' Lash of Pain spell by {value} sec.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "devastation",
                            name: "Devastation",
                            icon: "spell_fire_flameshock",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Destruction spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "shadowburn",
                            name: "Shadowburn",
                            icon: "spell_shadow_scourgebuild",
                            row: 2,
                            col: 3,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly blasts the target for 91 to 104 Shadow damage.  If the target dies within 5 sec of Shadowburn, and yields experience or honor, the caster gains a Soul Shard."
                            ]
                        },
                        {
                            id: "intensity",
                            name: "Intensity",
                            icon: "spell_fire_lavaspawn",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to resist interruption caused by damage while channeling the Rain of Fire, Hellfire or Soul Fire spell.",
                                {
                                    value: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "destructive_reach",
                            name: "Destructive Reach",
                            icon: "spell_shadow_corpseexplode",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Destruction spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_searing_pain",
                            name: "Improved Searing Pain",
                            icon: "spell_fire_soulburn",
                            row: 3,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Searing Pain spell by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "pyroclasm",
                            name: "Pyroclasm",
                            icon: "spell_fire_volcano",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "intensity",
                            description: [
                                "Gives your Rain of Fire, Hellfire, and Soul Fire spells a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [13, 26]
                                }
                            ]
                        },
                        {
                            id: "improved_immolate",
                            name: "Improved Immolate",
                            icon: "spell_fire_immolation",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the initial damage of your Immolate spell by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "ruin",
                            name: "Ruin",
                            icon: "spell_shadow_shadowwordpain",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "devastation",
                            description: [
                                "Increases the critical strike damage bonus of your Destruction spells by 100%."
                            ]
                        },
                        {
                            id: "emberstorm",
                            name: "Emberstorm",
                            icon: "spell_fire_selfdestruct",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "conflagrate",
                            name: "Conflagrate",
                            icon: "spell_fire_fireball",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "improved_immolate",
                            description: [
                                "Ignites a target that is already afflicted by Immolate, dealing 249 to 316 Fire damage and consuming the Immolate spell."
                            ]
                        }
                    ]
                },
                warrior: {
                    // warrior - vanilla
                    Arms: [
                        {
                            id: "improved_heroic_strike",
                            name: "Improved Heroic Strike",
                            icon: "ability_rogue_ambush",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Heroic Strike ability by {value}.",
                                {
                                    value: ["1 rage point", "2 rage points", "3 rage points"]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_rend",
                            name: "Improved Rend",
                            icon: "ability_gouge",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the bleed damage done by your Rend ability by {value}%.",
                                {
                                    value: [15, 25, 35]
                                }
                            ]
                        },
                        {
                            id: "improved_charge",
                            name: "Improved Charge",
                            icon: "ability_warrior_charge",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of rage generated by your Charge ability by {value}.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "tactical_mastery",
                            name: "Tactical Mastery",
                            icon: "spell_nature_enchantarmor",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "You retain up to {value} of your rage points when you change stances.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_thunder_clap",
                            name: "Improved Thunder Clap",
                            icon: "ability_thunderclap",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Thunder Clap ability by {value}.",
                                {
                                    value: ["1 rage point", "2 rage points", "4 rage points"]
                                }
                            ]
                        },
                        {
                            id: "improved_overpower",
                            name: "Improved Overpower",
                            icon: "inv_sword_05",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Overpower ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "anger_management",
                            name: "Anger Management",
                            icon: "spell_holy_blessingofstamina",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "tactical_mastery",
                            description: [
                                "Increases the time required for your rage to decay while out of combat by 30%."
                            ]
                        },
                        {
                            id: "deep_wounds",
                            name: "Deep Wounds",
                            icon: "ability_backstab",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "improved_rend",
                            description: [
                                "Your critical strikes cause the opponent to bleed, dealing {value}% of your melee weapon's average damage over 6 sec.",
                                {
                                    value: [16, 32, 48]
                                }
                            ]
                        },
                        {
                            id: "two_handed_weapon_specialization",
                            name: "Two-Handed Weapon Specialization",
                            icon: "inv_axe_09",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "impale",
                            name: "Impale",
                            icon: "ability_searingarrow",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "deep_wounds",
                            description: [
                                "Increases the critical strike damage bonus of your abilities by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "axe_specialization",
                            name: "Axe Specialization",
                            icon: "inv_axe_06",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with Axes by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "sweeping_strikes",
                            name: "Sweeping Strikes",
                            icon: "ability_rogue_slicedice",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your next 5 melee attacks strike an additional nearby opponent."
                            ]
                        },
                        {
                            id: "mace_specialization",
                            name: "Mace Specialization",
                            icon: "inv_mace_01",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to stun your target for 3 sec with a Mace.",
                                {
                                    value: [1, 2, 3, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "sword_specialization",
                            name: "Sword Specialization",
                            icon: "inv_sword_27",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to get an extra attack on the same target after dealing damage with your Sword.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "polearm_specialization",
                            name: "Polearm Specialization",
                            icon: "inv_weapon_halbard_01",
                            row: 5,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with Polearms by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_hamstring",
                            name: "Improved Hamstring",
                            icon: "ability_shockwave",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Hamstring ability a {value}% chance to immobilize the target for 5 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "mortal_strike",
                            name: "Mortal Strike",
                            icon: "ability_warrior_savageblow",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "sweeping_strikes",
                            description: [
                                "A vicious strike that deals weapon damage plus 85 and wounds the target, reducing the effectiveness of any healing by 50% for 10 sec."
                            ]
                        }
                    ],
                    // warrior - vanilla
                    Fury: [
                        {
                            id: "booming_voice",
                            name: "Booming Voice",
                            icon: "spell_nature_purge",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the area of effect and duration of your Battle Shout and Demoralizing Shout by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "cruelty",
                            name: "Cruelty",
                            icon: "ability_rogue_eviscerate",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_demoralizing_shout",
                            name: "Improved Demoralizing Shout",
                            icon: "ability_warrior_warcry",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power reduction of your Demoralizing Shout by {value}%.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "unbridled_wrath",
                            name: "Unbridled Wrath",
                            icon: "spell_nature_stoneclawtotem",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to generate an additional Rage point when you deal melee damage with a weapon.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "improved_cleave",
                            name: "Improved Cleave",
                            icon: "ability_warrior_cleave",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the bonus damage done by your Cleave ability by {value}%.",
                                {
                                    value: [40, 80, 120]
                                }
                            ]
                        },
                        {
                            id: "piercing_howl",
                            name: "Piercing Howl",
                            icon: "spell_shadow_deathscream",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes all enemies within 10 yards to be Dazed, reducing movement speed by 50% for 6 sec."
                            ]
                        },
                        {
                            id: "blood_craze",
                            name: "Blood Craze",
                            icon: "spell_shadow_summonimp",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Regenerates {value}% of your total Health over 6 sec after being the victim of a critical strike.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "improved_battle_shout",
                            name: "Improved Battle Shout",
                            icon: "ability_warrior_battleshout",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Battle Shout by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwield",
                            row: 3,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your offhand weapon by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_execute",
                            name: "Improved Execute",
                            icon: "inv_sword_48",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Rage cost of your Execute ability by {value}.",
                                {
                                    value: [2, 5]
                                }
                            ]
                        },
                        {
                            id: "enrage",
                            name: "Enrage",
                            icon: "spell_shadow_unholyfrenzy",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% melee damage bonus for 12 sec up to a maximum of 12 swings after being the victim of a critical strike.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_slam",
                            name: "Improved Slam",
                            icon: "ability_warrior_decisivestrike",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Decreases the casting time of your Slam ability by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "death_wish",
                            name: "Death Wish",
                            icon: "spell_shadow_deathpact",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, increases your physical damage by 20% and makes you immune to Fear effects, but lowers your armor and all resistances by 20%.  Lasts 30 sec."
                            ]
                        },
                        {
                            id: "improved_intercept",
                            name: "Improved Intercept",
                            icon: "ability_rogue_sprint",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Intercept ability by {value} sec.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_berserker_rage",
                            name: "Improved Berserker Rage",
                            icon: "spell_nature_ancestralguardian",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "The Berserker Rage ability will generate {value} rage when used.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "flurry",
                            name: "Flurry",
                            icon: "ability_ghoulfrenzy",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "enrage",
                            description: [
                                "Increases your attack speed by {value}% for your next 3 swings after dealing a melee critical strike.",
                                {
                                    value: [10, 15, 20, 25, 30]
                                }
                            ]
                        },
                        {
                            id: "bloodthirst",
                            name: "Bloodthirst",
                            icon: "spell_nature_bloodlust",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "death_wish",
                            description: [
                                "Instantly attack the target causing (Attack power * 50 / 100) damage.  In addition, the next 3 successful melee attacks will restore 1% of max health.  This effect lasts 8 sec.  Damage is based on your attack power."
                            ]
                        }
                    ],
                    // warrior - vanilla
                    Protection: [
                        {
                            id: "shield_specialization",
                            name: "Shield Specialization",
                            icon: "inv_shield_06",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to block attacks with a shield by {block}% and has a {rage}% chance to generate 5 rage when a block, dodge, or parry occurs.",
                                {
                                    block: [1, 2, 3, 4, 5],
                                    rage: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_nature_mirrorimage",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Defense skill by {value}.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_bloodrage",
                            name: "Improved Bloodrage",
                            icon: "ability_racial_bloodrage",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the rage generated by your Bloodrage ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "iron_will",
                            name: "Iron Will",
                            icon: "spell_magic_magearmor",
                            row: 1,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist Stun and Charm effects by an additional {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "last_stand",
                            name: "Last Stand",
                            icon: "spell_holy_ashestoashes",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "improved_bloodrage",
                            description: [
                                "When activated, this ability temporarily grants you 30% of your maximum health for 20 sec.  After the effect expires, the health is lost."
                            ]
                        },
                        {
                            id: "improved_shield_block",
                            name: "Improved Shield Block",
                            icon: "ability_defend",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "shield_specialization",
                            description: [
                                "Allows your Shield Block ability to block an additional attack and increases the duration by {value}.",
                                {
                                    value: ["0.5 seconds", "1 second", "2 seconds"]
                                }
                            ]
                        },
                        {
                            id: "improved_revenge",
                            name: "Improved Revenge",
                            icon: "ability_warrior_revenge",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Revenge ability a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "defiance",
                            name: "Defiance",
                            icon: "ability_warrior_innerrage",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the threat generated by your attacks by {value}% while in Defensive Stance.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_sunder_armor",
                            name: "Improved Sunder Armor",
                            icon: "ability_warrior_sunder",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Sunder Armor ability by {value}.",
                                {
                                    value: ["1 rage point", "2 rage points", "3 rage points"]
                                }
                            ]
                        },
                        {
                            id: "improved_disarm",
                            name: "Improved Disarm",
                            icon: "ability_warrior_disarm",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Disarm ability by {value} sec.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "improved_taunt",
                            name: "Improved Taunt",
                            icon: "spell_nature_reincarnation",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Taunt ability by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_shield_wall",
                            name: "Improved Shield Wall",
                            icon: "ability_warrior_shieldwall",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect duration of your Shield Wall ability by {value} secs.",
                                {
                                    value: [3, 5]
                                }
                            ]
                        },
                        {
                            id: "concussion_blow",
                            name: "Concussion Blow",
                            icon: "ability_thunderbolt",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Stuns the opponent for 5 sec and deals (38 / 100 * Attack power) damage (based on attack power)."
                            ]
                        },
                        {
                            id: "improved_shield_bash",
                            name: "Improved Shield Bash",
                            icon: "ability_warrior_shieldbash",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Shield Bash ability a {value}% chance to silence the target for 3 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "one_handed_weapon_specialization",
                            name: "One-Handed Weapon Specialization",
                            icon: "inv_sword_20",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with One-Handed Melee weapons by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "shield_slam",
                            name: "Shield Slam",
                            icon: "inv_shield_05",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "concussion_blow",
                            description: [
                                "Slam the target with your shield, causing 225 to 235 damage, modified by your shield block value, and has a 50% chance of dispelling 1 magic effect on the target.  Also causes a high amount of threat."
                            ]
                        }
                    ]
                }
            },
            tbc: {
                druid: {
                    // druid - tbc
                    Balance: [
                        {
                            id: "starlight_wrath",
                            name: "Starlight Wrath",
                            icon: "spell_nature_abolishmagic",
                            row: 0,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Wrath and Starfire spells by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "natures_grasp",
                            name: "Nature's Grasp",
                            icon: "spell_nature_natureswrath",
                            row: 0,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "While active, any time an enemy strikes the caster they have a 35% chance to become afflicted by Entangling Roots (Rank 4).  Only useable outdoors.  1 charge.  Lasts 45 sec."
                            ]
                        },
                        {
                            id: "improved_natures_grasp",
                            name: "Improved Nature's Grasp",
                            icon: "spell_nature_natureswrath",
                            row: 0,
                            col: 2,
                            ranks: 4,
                            requiresTalents: "natures_grasp",
                            description: [
                                "Increases the chance for your Nature's Grasp to entangle an enemy by 15%.",
                                {
                                    value: [15, 30, 45, 65]
                                }
                            ]
                        },
                        {
                            id: "control_of_nature",
                            name: "Control of Nature",
                            icon: "spell_nature_stranglevines",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting Entangling Roots and Cyclone.",
                                {
                                    value: [40, 70, 100]
                                }
                            ]
                        },
                        {
                            id: "focused_starlight",
                            name: "Focused Starlight",
                            icon: "inv_staff_01",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Wrath and Starfire spells by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_moonfire",
                            name: "Improved Moonfire",
                            icon: "spell_nature_starfall",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage and critical strike chance of your Moonfire spell by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "brambles",
                            name: "Brambles",
                            icon: "spell_nature_thorns",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases damage caused by your Thorns and Entangling Roots spells by {value}%.",
                                {
                                    value: [25, 50, 75]
                                }
                            ]
                        },
                        {
                            id: "insect_swarm",
                            name: "Insect Swarm",
                            icon: "spell_nature_insectswarm",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The enemy target is swarmed by insects, decreasing their chance to hit by 2% and causing 108 Nature damage over 12 sec."
                            ]
                        },
                        {
                            id: "natures_reach",
                            name: "Nature's Reach",
                            icon: "spell_nature_naturetouchgrow",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Balance spells and Faerie Fire (Feral) ability by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "vengeance",
                            name: "Vengeance",
                            icon: "spell_nature_purge",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "focused_starlight",
                            description: [
                                "Increases the critical strike damage bonus of your Starfire, Moonfire, and Wrath spells by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "celestial_focus",
                            name: "Celestial Focus",
                            icon: "spell_arcane_starfire",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Starfire spell a {value}% chance to stun the target for 3 sec and increases the chance you'll resist spell interruption when casting your Wrath spell by {value}%.",
                                {
                                    value: [5, 10, 15],
                                    value: [25, 50, 70]
                                }
                            ]
                        },
                        {
                            id: "lunar_guidance",
                            name: "Lunar Guidance",
                            icon: "ability_druid_lunarguidance",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage and healing by {value}% of your total Intellect.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "natures_grace",
                            name: "Nature's Grace",
                            icon: "spell_nature_naturesblessing",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "All spell criticals grace you with a blessing of nature, reducing the casting time of your next spell by 0.5 sec."
                            ]
                        },
                        {
                            id: "moonglow",
                            name: "Moonglow",
                            icon: "spell_nature_sentinal",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Moonfire, Starfire, Wrath, Healing Touch, Regrowth and Rejuvenation spells by {value}%.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "moonfury",
                            name: "Moonfury",
                            icon: "spell_nature_moonglow",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "natures_grace",
                            description: [
                                "Increases the damage done by your Starfire, Moonfire and Wrath spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "balance_of_power",
                            name: "Balance of Power",
                            icon: "ability_druid_balanceofpower",
                            row: 5,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with all spells and reduces the chance you'll be hit by spells by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "dreamstate",
                            name: "Dreamstate",
                            icon: "ability_druid_dreamstate",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Regenerate mana equal to {value}% of your Intellect every 5 sec, even while casting.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "moonkin_form",
                            name: "Moonkin Form",
                            icon: "spell_nature_forceofnature",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Shapeshift into Moonkin Form.  While in this form the armor contribution from items is increased by 400%, attack power is increased by 150% of your level and all party members within 30 yards have their spell critical chance increased by 5%.  Melee attacks in this form have a chance on hit to regenerate mana based on attack power.  The Moonkin can only cast Balance and Remove Curse spells while shapeshifted.<br><br>The act of shapeshifting frees the caster of Polymorph and Movement Impairing effects."
                            ]
                        },
                        {
                            id: "improved_faerie_fire",
                            name: "Improved Faerie Fire",
                            icon: "spell_nature_faeriefire",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Faerie Fire spell also increases the chance the target will be hit by melee and ranged attacks by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "wrath_of_cenarius",
                            name: "Wrath of Cenarius",
                            icon: "ability_druid_twilightswrath",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Starfire spell gains an additional {starfire}% and your Wrath gains an additional {wrath}% of your bonus damage effects.",
                                {
                                    starfire: [4, 8, 12, 16, 20],
                                    wrath: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "force_of_nature",
                            name: "Force of Nature",
                            icon: "ability_druid_forceofnature",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summons 3 treants to attack enemy targets for 30 sec."
                            ]
                        }
                    ],
                    // druid - tbc
                    "Feral Combat": [
                        {
                            id: "ferocity",
                            name: "Ferocity",
                            icon: "ability_hunter_pet_hyena",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Maul, Swipe, Claw, Rake and Mangle abilities by {value} Rage or Energy.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "feral_aggression",
                            name: "Feral Aggression",
                            icon: "ability_druid_demoralizingroar",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the attack power reduction of your Demoralizing Roar by {reduction}% and the damage caused by your Ferocious Bite by {damage}%.",
                                {
                                    reduction: [8, 16, 24, 32, 40],
                                    damage: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "feral_instinct",
                            name: "Feral Instinct",
                            icon: "ability_ambush",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases threat caused in Bear and Dire Bear Form by {value}% and reduces the chance enemies have to detect you while Prowling.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "brutal_impact",
                            name: "Brutal Impact",
                            icon: "ability_druid_bash",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the stun duration of your Bash and Pounce abilities by {value} sec.",
                                {
                                    value: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "thick_hide",
                            name: "Thick Hide",
                            icon: "inv_misc_pelt_bear_03",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your Armor contribution from items by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "feral_swiftness",
                            name: "Feral Swiftness",
                            icon: "spell_nature_spiritwolf",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your movement speed by {speed}% while outdoors in Cat Form and increases your chance to dodge while in Cat Form, Bear Form and Dire Bear Form by {dodge}%.",
                                {
                                    speed: [15, 30],
                                    dodge: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "feral_charge",
                            name: "Feral Charge",
                            icon: "ability_hunter_pet_bear",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes you to charge an enemy, immobilizing and interrupting any spell being cast for 4 sec."
                            ]
                        },
                        {
                            id: "sharpened_claws",
                            name: "Sharpened Claws",
                            icon: "inv_misc_monsterclaw_04",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance while in Bear, Dire Bear or Cat Form by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "shredding_attacks",
                            name: "Shredding Attacks",
                            icon: "spell_shadow_vampiricaura",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the energy cost of your Shred ability by {shred} and the rage cost of your Lacerate ability by {lacerate}.",
                                {
                                    shred: [9, 18],
                                    lacerate: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "predatory_strikes",
                            name: "Predatory Strikes",
                            icon: "ability_hunter_pet_cat",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your melee attack power in Cat, Bear, Dire Bear and Moonkin Forms by {value}% of your level.",
                                {
                                    value: [50, 100, 150]
                                }
                            ]
                        },
                        {
                            id: "primal_fury",
                            name: "Primal Fury",
                            icon: "ability_racial_cannibalize",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "sharpened_claws",
                            description: [
                                "Gives you a {value}% chance to gain an additional 5 Rage anytime you get a critical strike while in Bear and Dire Bear Form and your critical strikes from Cat Form abilities that add combo points have a {value}% chance to add an additional combo point.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "savage_fury",
                            name: "Savage Fury",
                            icon: "ability_druid_ravage",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage caused by your Claw, Rake, and Mangle (Cat) abilities by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "faerie_fire_feral",
                            name: "Faerie Fire (Feral)",
                            icon: "spell_nature_faeriefire",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Decrease the armor of the target by 175 for 40 sec.  While affected, the target cannot stealth or turn invisible."
                            ]
                        },
                        {
                            id: "nurturing_instinct",
                            name: "Nurturing Instinct",
                            icon: "ability_druid_healinginstincts",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your healing spells by up to {agi}% of your Agility, and increases healing done to you by {cat}% while in Cat form.",
                                {
                                    agi: [50, 100],
                                    cat: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "heart_of_the_wild",
                            name: "Heart of the Wild",
                            icon: "spell_holy_blessingofagility",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "predatory_strikes",
                            description: [
                                "Increases your Intellect by {value}%.  In addition, while in Bear or Dire Bear Form your Stamina is increased by {value}% and while in Cat Form your attack power is increased by {ap}%.",
                                {
                                    value: [4, 8, 12, 16, 20],
                                    ap: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "survival_of_the_fittest",
                            name: "Survival of the Fittest",
                            icon: "ability_druid_enrage",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all attributes by {value}% and reduces the chance you'll be critically hit by melee attacks by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "primal_tenacity",
                            name: "Primal Tenacity",
                            icon: "ability_druid_primaltenacity",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist Stun and Fear mechanics by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "leader_of_the_pack",
                            name: "Leader of the Pack",
                            icon: "spell_nature_unyeildingstamina",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "While in Cat, Bear or Dire Bear Form, the Leader of the Pack increases ranged and melee critical chance of all party members within 45 yards by 5%."
                            ]
                        },
                        {
                            id: "improved_leader_of_the_pack",
                            name: "Improved Leader of the Pack",
                            icon: "spell_nature_unyeildingstamina",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "leader_of_the_pack",
                            description: [
                                "Your Leader of the Pack ability also causes affected targets to have a 100% chance to heal themselves for {value}% of their total health when they critically hit with a melee or ranged attack.  The healing effect cannot occur more than once every 6 sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "predatory_instincts",
                            name: "Predatory Instincts",
                            icon: "ability_druid_predatoryinstincts",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "While in Cat Form, Bear Form, or Dire Bear Form, increases your damage from melee critical strikes by {damage}% and your chance to avoid area effect attacks by {avoidance}%.",
                                {
                                    damage: [2, 4, 6, 8, 10],
                                    avoidance: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "mangle",
                            name: "Mangle",
                            icon: "ability_druid_mangle2",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "leader_of_the_pack",
                            description: [
                                "Mangle the target, inflicting damage and causing the target to take additional damage from bleed effects for 12 sec. This ability can be used in Cat Form or Dire Bear Form."
                            ]
                        }
                    ],
                    // druid - tbc
                    Restoration: [
                        {
                            id: "improved_mark_of_the_wild",
                            name: "Improved Mark of the Wild",
                            icon: "spell_nature_regeneration",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effects of your Mark of the Wild and Gift of the Wild spells by {value}%.",
                                {
                                    value: [7, 14, 21, 28, 35]
                                }
                            ]
                        },
                        {
                            id: "furor",
                            name: "Furor",
                            icon: "spell_holy_blessingofstamina",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you {value}% chance to gain 10 Rage when you shapeshift into Bear and Dire Bear Form or 40 Energy when you shapeshift into Cat Form.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "naturalist",
                            name: "Naturalist",
                            icon: "spell_nature_healingtouch",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Healing Touch spell by {value1} sec and increases the damage you deal with physical attacks in all forms by {value2}%.",
                                {
                                    value1: [0.1, 0.2, 0.3, 0.4, 0.5],
                                    value2: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "natures_focus",
                            name: "Nature's Focus",
                            icon: "spell_nature_healingwavegreater",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting the Healing Touch, Regrowth and Tranquility spells.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "natural_shapeshifter",
                            name: "Natural Shapeshifter",
                            icon: "spell_nature_wispsplode",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all shapeshifting by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "intensity",
                            name: "Intensity",
                            icon: "spell_frost_windwalkon",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value1}% of your Mana regeneration to continue while casting and causes your Enrage ability to instantly generate {value2} rage.",
                                {
                                    value1: [10, 20, 30],
                                    value2: [4, 7, 10],
                                }
                            ]
                        },
                        {
                            id: "subtlety",
                            name: "Subtlety",
                            icon: "ability_eyeoftheowl",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your spells by {threat}% and reduces the chance your spells will be dispelled by {chance}%.",
                                {
                                    threat: [4, 8, 12, 16, 20],
                                    chance: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "omen_of_clarity",
                            name: "Omen of Clarity",
                            icon: "spell_nature_crystalball",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Imbues the Druid with natural energy.  Each of the Druid's melee attacks has a chance of causing the caster to enter a Clearcasting state.  The Clearcasting state reduces the Mana, Rage or Energy cost of your next damage or healing spell or offensive ability by 100%.  Lasts 30 min."
                            ]
                        },
                        {
                            id: "tranquil_spirit",
                            name: "Tranquil Spirit",
                            icon: "spell_holy_elunesgrace",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Healing Touch and Tranquility spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_rejuvenation",
                            name: "Improved Rejuvenation",
                            icon: "spell_nature_rejuvenation",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Rejuvenation spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "natures_swiftness",
                            name: "Nature's Swiftness",
                            icon: "spell_nature_ravenform",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "intensity",
                            description: [
                                "When activated, your next Nature spell becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "gift_of_nature",
                            name: "Gift of Nature",
                            icon: "spell_nature_protectionformnature",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of all healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_tranquility",
                            name: "Improved Tranquility",
                            icon: "spell_nature_tranquility",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces threat caused by Tranquility by {value}%.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "empowered_touch",
                            name: "Empowered Touch",
                            icon: "ability_druid_empoweredtouch",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Healing Touch spell gains an additional {value}% of your bonus healing effects.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_regrowth",
                            name: "Improved Regrowth",
                            icon: "spell_nature_resistnature",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "improved_rejuvenation",
                            description: [
                                "Increases the critical effect chance of your Regrowth spell by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "living_spirit",
                            name: "Living Spirit",
                            icon: "spell_nature_giftofthewaterspirit",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Spirit by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "swiftmend",
                            name: "Swiftmend",
                            icon: "inv_relics_idolofrejuvenation",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "gift_of_nature",
                            description: [
                                "Consumes a Rejuvenation or Regrowth effect on a friendly target to instantly heal them an amount equal to 12 sec. of Rejuvenation or 18 sec. of Regrowth."
                            ]
                        },
                        {
                            id: "natural_perfection",
                            name: "Natural Perfection",
                            icon: "ability_druid_naturalperfection",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your critical strike chance with all spells is increased by {crit}% and critical strikes against you give you the Natural Perfection effect reducing all damage taken by {reduction}%.  Stacks up to 3 times.  Lasts 8 sec.",
                                {
                                    crit: [1, 2, 3],
                                    reduction: [2, 3, 4]
                                }
                            ]
                        },
                        {
                            id: "empowered_rejuvenation",
                            name: "Empowered Rejuvenation",
                            icon: "ability_druid_empoweredrejuvination",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "The bonus healing effects of your healing over time spells is increased by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "tree_of_life",
                            name: "Tree of Life",
                            icon: "ability_druid_treeoflife",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "empowered_rejuvenation",
                            description: [
                                "Shapeshift into the Tree of Life.  While in this form you increase healing received by 25% of your total Spirit for all party members within 45 yards, your movement speed is reduced by 20%, and you can only cast Swiftmend, Innervate, Nature's Swiftness, Rebirth, Barkskin, poison removing and healing over time spells, but the mana cost of these spells is reduced by 20%.  The act of shapeshifting frees the caster of Polymorph and Movement Impairing effects."
                            ]
                        }
                    ]
                },
                hunter: {
                    // hunter - tbc
                    "Beast Mastery": [
                        {
                            id: "improved_aspect_of_the_hawk",
                            name: "Improved Aspect of the Hawk",
                            icon: "spell_nature_ravenform",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "While Aspect of the Hawk is active, all normal ranged attacks have a {value}% chance of increasing ranged attack speed by 30% for 12 sec.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "endurance_training",
                            name: "Endurance Training",
                            icon: "spell_nature_reincarnation",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the Health of your pet by {value1}% and your total health by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "focused_fire",
                            name: "Focused Fire",
                            icon: "ability_hunter_silenthunter",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All damage caused by you is increased by {value1}% while your pet is active and the critical strike chance of your Kill Command ability is increased by {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_aspect_of_the_monkey",
                            name: "Improved Aspect of the Monkey",
                            icon: "ability_hunter_aspectofthemonkey",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the Dodge bonus of your Aspect of the Monkey by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "thick_hide",
                            name: "Thick Hide",
                            icon: "inv_misc_pelt_bear_03",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the armor rating of your pets by {value1}% and your armor contribution from items by {value2}%.",
                                {
                                    value1: [7, 14, 20],
                                    value2: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_revive_pet",
                            name: "Improved Revive Pet",
                            icon: "ability_hunter_beastsoothe",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Revive Pet's casting time is reduced by {value1} sec, mana cost is reduced by {value2}%, and increases the health your pet returns with by an additional {value3}%.",
                                {
                                    value1: [3, 6],
                                    value2: [20, 40],
                                    value3: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "pathfinding",
                            name: "Pathfinding",
                            icon: "ability_mount_jungletiger",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the speed bonus of your Aspect of the Cheetah and Aspect of the Pack by {value}%.",
                                {
                                    value: [4, 8]
                                }
                            ]
                        },
                        {
                            id: "bestial_swiftness",
                            name: "Bestial Swiftness",
                            icon: "ability_druid_dash",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the outdoor movement speed of your pets by 30%."
                            ]
                        },
                        {
                            id: "unleashed_fury",
                            name: "Unleashed Fury",
                            icon: "ability_bullrush",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your pets by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_mend_pet",
                            name: "Improved Mend Pet",
                            icon: "ability_hunter_mendpet",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives the Mend Pet spell a {value}% chance of cleansing 1 Curse, Disease, Magic or Poison effect from the pet each tick.",
                                {
                                    value: [15, 50]
                                }
                            ]
                        },
                        {
                            id: "ferocity",
                            name: "Ferocity",
                            icon: "inv_misc_monsterclaw_04",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your pets by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "spirit_bond",
                            name: "Spirit Bond",
                            icon: "ability_druid_demoralizingroar",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "While your pet is active, you and your pet will regenerate {value}% of total health every 10 sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "intimidation",
                            name: "Intimidation",
                            icon: "ability_devour",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Command your pet to intimidate the target on the next successful melee attack, causing a high amount of threat and stunning the target for 3 sec."
                            ]
                        },
                        {
                            id: "bestial_discipline",
                            name: "Bestial Discipline",
                            icon: "spell_nature_abolishmagic",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the Focus regeneration of your pets by {value}%.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "animal_handler",
                            name: "Animal Handler",
                            icon: "ability_hunter_animalhandler",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your speed while mounted by {mountspeed}% and your pet's chance to hit by {hit}%. The mounted movement speed increase does not stack with other effects.",
                                {
                                    mountspeed: [4, 8],
                                    hit: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "frenzy",
                            name: "Frenzy",
                            icon: "inv_misc_monsterclaw_03",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "ferocity",
                            description: [
                                "Gives your pet a {value}% chance to gain a 30% attack speed increase for 8 sec after dealing a critical strike.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "ferocious_inspiration",
                            name: "Ferocious Inspiration",
                            icon: "ability_hunter_ferociousinspiration",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When your pet scores a critical hit, all party members have all damage increased by {value}% for 10 sec.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "bestial_wrath",
                            name: "Bestial Wrath",
                            icon: "ability_druid_ferociousbite",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "intimidation",
                            description: [
                                "Send your pet into a rage causing 50% additional damage for 18 sec.  While enraged, the beast does not feel pity or remorse or fear and it cannot be stopped unless killed."
                            ]
                        },
                        {
                            id: "catlike_reflexes",
                            name: "Catlike Reflexes",
                            icon: "ability_hunter_catlikereflexes",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your pet's chance to dodge by {petdodge}% and your chance to dodge by {hunterdodge}%.",
                                {
                                    petdodge: [3, 6, 9],
                                    hunterdodge: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "serpents_swiftness",
                            name: "Serpent's Swiftness",
                            icon: "ability_hunter_serpentswiftness",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases ranged combat attack speed by {value}% and your pet's melee attack speed by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "the_beast_within",
                            name: "The Beast Within",
                            icon: "ability_hunter_beastwithin",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "bestial_wrath",
                            description: [
                                "Go into a rage, increasing your damage by 30%.  Your pet also goes into a rage, causing 50% additional damage for 18 sec.  While enraged, the beast does not feel pity or remorse or fear and it cannot be stopped unless killed."
                            ]
                        }
                    ],
                    // hunter - tbc
                    Marksmanship: [
                        {
                            id: "improved_concussive_shot",
                            name: "Improved Concussive Shot",
                            icon: "spell_frost_stun",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Concussive Shot a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "lethal_shots",
                            name: "Lethal Shots",
                            icon: "ability_searingarrow",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance with ranged weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_hunters_mark",
                            name: "Improved Hunter's Mark",
                            icon: "ability_hunter_snipershot",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Causes {value}% of your Hunter's Mark ability's base attack power to apply to melee attack power as well.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "efficiency",
                            name: "Efficiency",
                            icon: "spell_frost_wizardmark",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Shots and Stings by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "go_for_the_throat",
                            name: "Go for the Throat",
                            icon: "ability_hunter_goforthethroat",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your ranged critical hits cause your pet to generate {value} Focus.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_arcane_shot",
                            name: "Improved Arcane Shot",
                            icon: "ability_impalingbolt",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Arcane Shot by {value} sec.",
                                {
                                    value: [0.2, 0.4, 0.6, 0.8, 1]
                                }
                            ]
                        },
                        {
                            id: "aimed_shot",
                            name: "Aimed Shot",
                            icon: "inv_spear_07",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "An aimed shot that increases ranged damage by 870 and reduces healing done to that target by 50%. Lasts 10 sec."
                            ]
                        },
                        {
                            id: "rapid_killing",
                            name: "Rapid Killing",
                            icon: "ability_hunter_rapidkilling",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Rapid Fire ability by {cooldown} min.  In addition, after killing an opponent that yields experience or honor, your next Aimed Shot, Arcane Shot or Auto Shot causes {damage}% additional damage.  Lasts 20 sec.",
                                {
                                    cooldown: [1, 2],
                                    damage: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_stings",
                            name: "Improved Stings",
                            icon: "ability_hunter_quickshot",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Serpent Sting and Wyvern Sting by {value}% and the mana drained by your Viper Sting by {value}%.  In addition, reduces the chance your Stings will be dispelled by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "mortal_shots",
                            name: "Mortal Shots",
                            icon: "ability_piercedamage",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "aimed_shot",
                            description: [
                                "Increases your ranged weapon critical strike damage bonus by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "concussive_barrage",
                            name: "Concussive Barrage",
                            icon: "spell_arcane_starfire",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your successful Auto Shot attacks have a {value}% chance to Daze the target for 4 sec.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "scatter_shot",
                            name: "Scatter Shot",
                            icon: "ability_golemstormbolt",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "A short-range shot that deals 50% weapon damage and disorients the target for 4 sec. Any damage caused will remove the effect. Turns off your attack when used."
                            ]
                        },
                        {
                            id: "barrage",
                            name: "Barrage",
                            icon: "ability_upgrademoonglaive",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Multi-Shot and Volley spells by {value}%.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "combat_experience",
                            name: "Combat Experience",
                            icon: "ability_hunter_combatexperience",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your total Agility by {agi}% and your total Intellect by {int}%.",
                                {
                                    agi: [1, 2],
                                    int: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "ranged_weapon_specialization",
                            name: "Ranged Weapon Specialization",
                            icon: "inv_weapon_rifle_06",
                            row: 5,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with ranged weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "careful_aim",
                            name: "Careful Aim",
                            icon: "ability_hunter_zenarchery",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your ranged attack power by an amount equal to {value}% of your total Intellect.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "trueshot_aura",
                            name: "Trueshot Aura",
                            icon: "ability_trueshot",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "scatter_shot",
                            description: [
                                "Increases the attack power of party members within 45 yards by 50. Lasts until cancelled."
                            ]
                        },
                        {
                            id: "improved_barrage",
                            name: "Improved Barrage",
                            icon: "ability_upgrademoonglaive",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "barrage",
                            description: [
                                "Increases the critical strike chance of your Multi-Shot ability by {crit}% and gives you a {pushback}% chance to avoid interruption caused by damage while channeling Volley.",
                                {
                                    crit: [4, 8, 12],
                                    pushback: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "master_marksman",
                            name: "Master Marksman",
                            icon: "ability_hunter_mastermarksman",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your ranged attack power by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "silencing_shot",
                            name: "Silencing Shot",
                            icon: "ability_theblackarrow",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "master_marksman",
                            description: [
                                "A shot that deals 50% weapon damage and Silences the target for 3 sec."
                            ]
                        }
                    ],
                    // hunter - tbc
                    Survival: [
                        {
                            id: "monster_slaying",
                            name: "Monster Slaying",
                            icon: "inv_misc_head_dragon_black",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused against Beasts, Giants and Dragonkin targets by {value}% and increases critical damage caused against Beasts, Giants and Dragonkin targets by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "humanoid_slaying",
                            name: "Humanoid Slaying",
                            icon: "spell_holy_prayerofhealing",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused against Humanoid targets by {value}% and increases critical damage caused against Humanoid targets by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "hawk_eye",
                            name: "Hawk Eye",
                            icon: "ability_townwatch",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your ranged weapons by {value} yards.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "savage_strikes",
                            name: "Savage Strikes",
                            icon: "ability_racial_bloodrage",
                            row: 0,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of Raptor Strike and Mongoose Bite by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "entrapment",
                            name: "Entrapment",
                            icon: "spell_nature_stranglevines",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Immolation Trap, Frost Trap, Explosive Trap, and Snake Trap a {value}% chance to entrap the target, preventing them from moving for 4 sec.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_wing_clip",
                            name: "Improved Wing Clip",
                            icon: "ability_rogue_trip",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Wing Clip ability a {value}% chance to immobilize the target for 5 sec.",
                                {
                                    value: [7, 14, 20]
                                }
                            ]
                        },
                        {
                            id: "clever_traps",
                            name: "Clever Traps",
                            icon: "spell_nature_timestop",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of Freezing and Frost trap effects by {value}% and the damage of Immolation and Explosive trap effects by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "survivalist",
                            name: "Survivalist",
                            icon: "spell_shadow_twilight",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases total health by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "deterrence",
                            name: "Deterrence",
                            icon: "ability_whirlwind",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, increases your Dodge and Parry chance by 25% for 10 sec."
                            ]
                        },
                        {
                            id: "trap_mastery",
                            name: "Trap Mastery",
                            icon: "ability_ensnare",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the chance enemies will resist trap effects by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "surefooted",
                            name: "Surefooted",
                            icon: "ability_kick",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases hit chance by {hit}% and increases the chance movement impairing effects will be resisted by an additional {resist}%.",
                                {
                                    hit: [1, 2, 3],
                                    resist: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_feign_death",
                            name: "Improved Feign Death",
                            icon: "ability_rogue_feigndeath",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance your Feign Death ability will be resisted by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "survival_instincts",
                            name: "Survival Instincts",
                            icon: "ability_hunter_survivalinstincts",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by {value}% and increases attack power by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "killer_instinct",
                            name: "Killer Instinct",
                            icon: "spell_holy_blessingofstamina",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance with all attacks by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "counterattack",
                            name: "Counterattack",
                            icon: "ability_warrior_challange",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "deterrence",
                            description: [
                                "A strike that becomes active after parrying an opponent's attack.  This attack deals 40 damage and immobilizes the target for 5 sec.  Counterattack cannot be blocked, dodged, or parried."
                            ]
                        },
                        {
                            id: "resourcefulness",
                            name: "Resourcefulness",
                            icon: "ability_hunter_resourcefulness",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all traps and melee abilities by {cost}% and reduces the cooldown of all traps by {cooldown} sec.",
                                {
                                    cost: [20, 40, 60],
                                    cooldown: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "lightning_reflexes",
                            name: "Lightning Reflexes",
                            icon: "spell_nature_invisibilty",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Agility by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "thrill_of_the_hunt",
                            name: "Thrill of the Hunt",
                            icon: "ability_hunter_thrillofthehunt",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to regain 40% of the mana cost of any shot when it critically hits.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "wyvern_sting",
                            name: "Wyvern Sting",
                            icon: "inv_spear_02",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "killer_instinct",
                            description: [
                                "A stinging shot that puts the target to sleep for 12 sec.  Any damage will cancel the effect.  When the target wakes up, the Sting causes 300 Nature damage over 12 sec.  Only one Sting per Hunter can be active on the target at a time."
                            ]
                        },
                        {
                            id: "expose_weakness",
                            name: "Expose Weakness",
                            icon: "ability_rogue_findweakness",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "lightning_reflexes",
                            description: [
                                "Your ranged criticals have a {value}% chance to apply an Expose Weakness effect to the target. Expose Weakness increases the attack power of all attackers against that target by 25% of your Agility for 7 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "master_tactician",
                            name: "Master Tactician",
                            icon: "ability_hunter_mastertactitian",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your successful ranged attacks have a 6% chance to increase your critical strike chance with all attacks by {value}% for 8 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "readiness",
                            name: "Readiness",
                            icon: "ability_hunter_readiness",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "master_tactician",
                            description: [
                                "When activated, this ability immediately finishes the cooldown on your other Hunter abilities."
                            ]
                        }
                    ]
                },
                mage: {
                    // mage - tbc
                    Arcane: [
                        {
                            id: "arcane_subtlety",
                            name: "Arcane Subtlety",
                            icon: "spell_holy_dispelmagic",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces your target's resistance to all your spells by {resistance} and reduces the threat caused by your Arcane spells by {threat}%.",
                                {
                                    resistance: [5, 10],
                                    threat: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "arcane_focus",
                            name: "Arcane Focus",
                            icon: "spell_holy_devotion",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance that the opponent can resist your Arcane spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_arcane_missiles",
                            name: "Improved Arcane Missiles",
                            icon: "spell_nature_starfall",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while channeling Arcane Missiles.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "wand_specialization",
                            name: "Wand Specialization",
                            icon: "inv_wand_01",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your damage with Wands by {value}%.",
                                {
                                    value: [13, 25]
                                }
                            ]
                        },
                        {
                            id: "magic_absorption",
                            name: "Magic Absorption",
                            icon: "spell_nature_astralrecalgroup",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases all resistances by {resistance} and causes all spells you fully resist to restore {mana}% of your total mana.  1 sec. cooldown.",
                                {
                                    resistance: [2, 4, 6, 8, 10],
                                    mana: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "arcane_concentration",
                            name: "Arcane Concentration",
                            icon: "spell_shadow_manaburn",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance of entering a Clearcasting state after any damage spell hits a target.  The Clearcasting state reduces the mana cost of your next damage spell by 100%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "magic_attunement",
                            name: "Magic Attunement",
                            icon: "spell_nature_abolishmagic",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Amplify Magic and Dampen Magic spells by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "arcane_impact",
                            name: "Arcane Impact",
                            icon: "spell_nature_wispsplode",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Arcane Explosion and Arcane Blast spells by an additional {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "arcane_fortitude",
                            name: "Arcane Fortitude",
                            icon: "spell_arcane_arcaneresilience",
                            row: 2,
                            col: 3,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your armor by an amount equal to 100% of your Intellect."
                            ]
                        },
                        {
                            id: "improved_mana_shield",
                            name: "Improved Mana Shield",
                            icon: "spell_shadow_detectlesserinvisibility",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the mana lost per point of damage taken when Mana Shield is active by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_counterspell",
                            name: "Improved Counterspell",
                            icon: "spell_frost_iceshock",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Counterspell a {value}% chance to silence the target for 4 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "arcane_meditation",
                            name: "Arcane Meditation",
                            icon: "spell_shadow_siphonmana",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value}% of your mana regeneration to continue while casting.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_blink",
                            name: "Improved Blink",
                            icon: "spell_arcane_blink",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "For 4 sec after casting Blink, your chance to be hit by all attacks and spells is reduced by {value}%.",
                                {
                                    value: [13, 25]
                                }
                            ]
                        },
                        {
                            id: "presence_of_mind",
                            name: "Presence of Mind",
                            icon: "spell_nature_enchantarmor",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, your next Mage spell with a casting time less than 10 sec becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "arcane_mind",
                            name: "Arcane Mind",
                            icon: "spell_shadow_charm",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Intellect by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "prismatic_cloak",
                            name: "Prismatic Cloak",
                            icon: "spell_arcane_prismaticcloak",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "arcane_instability",
                            name: "Arcane Instability",
                            icon: "spell_shadow_teleport",
                            row: 5,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "presence_of_mind",
                            description: [
                                "Increases your spell damage and critical strike chance by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "arcane_potency",
                            name: "Arcane Potency",
                            icon: "spell_arcane_arcanepotency",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "arcane_concentration",
                            description: [
                                "Increases the critical strike chance of any spell cast while Clearcasting by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "empowered_arcane_missiles",
                            name: "Empowered Arcane Missiles",
                            icon: "spell_nature_starfall",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Arcane Missiles spell gains an additional {spelldamage}% of your bonus spell damage effects, but mana cost is increased by {mana}%.",
                                {
                                    spelldamage: [15, 30, 45],
                                    mana: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "arcane_power",
                            name: "Arcane Power",
                            icon: "spell_nature_lightning",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "arcane_instability",
                            description: [
                                "When activated, your spells deal 30% more damage while costing 30% more mana to cast.  This effect lasts 15 sec."
                            ]
                        },
                        {
                            id: "spell_power",
                            name: "Spell Power",
                            icon: "spell_arcane_arcanetorrent",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases critical strike damage bonus of all spells by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "mind_mastery",
                            name: "Mind Mastery",
                            icon: "spell_arcane_mindmastery",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases spell damage by up to {value}% of your total Intellect.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "slow",
                            name: "Slow",
                            icon: "spell_nature_slow",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces target's movement speed by 50%, increases the time between ranged attacks by 50% and increases casting time by 50%.  Lasts 15 sec.  Slow can only affect one target at a time."
                            ]
                        }
                    ],
                    // mage - tbc
                    Fire: [
                        {
                            id: "improved_fireball",
                            name: "Improved Fireball",
                            icon: "spell_fire_flamebolt",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Fireball spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "impact",
                            name: "Impact",
                            icon: "spell_fire_meteorstorm",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Fire spells a {value}% chance to stun the target for 2 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "ignite",
                            name: "Ignite",
                            icon: "spell_fire_incinerate",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your critical strikes from Fire damage spells cause the target to burn for an additional {value}% of your spell's damage over 4 sec.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "flame_throwing",
                            name: "Flame Throwing",
                            icon: "spell_fire_flare",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Fire spells by {value} yards.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_fire_blast",
                            name: "Improved Fire Blast",
                            icon: "spell_fire_fireball",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Fire Blast spell by {value} sec.",
                                {
                                    value: [0.5, 1, 1.5]
                                }
                            ]
                        },
                        {
                            id: "incineration",
                            name: "Incineration",
                            icon: "spell_fire_flameshock",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Fire Blast and Scorch spells by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_flamestrike",
                            name: "Improved Flamestrike",
                            icon: "spell_fire_selfdestruct",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Flamestrike spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "pyroblast",
                            name: "Pyroblast",
                            icon: "spell_fire_fireball02",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Hurls an immense fiery boulder that causes 148 to 195 Fire damage and an additional 56 Fire damage over 12 sec."
                            ]
                        },
                        {
                            id: "burning_soul",
                            name: "Burning Soul",
                            icon: "spell_fire_fire",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Fire spells by {pushback}% and reduces the threat caused by your Fire spells by {threat}%.",
                                {
                                    pushback: [35, 70],
                                    threat: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_scorch",
                            name: "Improved Scorch",
                            icon: "spell_fire_soulburn",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to critically hit with Scorch, Fireball and Frostfire Bolt by an additional {crit}% and your damaging Scorch spells have a {chance}% chance to cause your target to be vulnerable to spell damage, increasing spell critical strike chance against that target by 5% and lasts 30 sec.",
                                {
                                    crit: [1, 2, 3],
                                    chance: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "molten_shields",
                            name: "Molten Shields",
                            icon: "spell_fire_firearmor",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Causes your Fire Ward and Frost Ward spells to have a {reflect}% chance to reflect the warded spell while active. In addition, your Molten Armor has a {affect}% chance to affect ranged and spell attacks.",
                                {
                                    reflect: [15, 30],
                                    affect: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "master_of_elements",
                            name: "Master of Elements",
                            icon: "spell_fire_masterofelements",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Fire and Frost spell criticals will refund {value}% of their base mana cost.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "playing_with_fire",
                            name: "Playing with Fire",
                            icon: "spell_fire_playingwithfire",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all spell damage caused by {value}% and all spell damage taken by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "critical_mass",
                            name: "Critical Mass",
                            icon: "spell_nature_wispheal",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "blast_wave",
                            name: "Blast Wave",
                            icon: "spell_holy_excorcism_02",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "pyroblast",
                            description: [
                                "A wave of flame radiates outward from the caster, damaging all enemies caught within the blast for 160 to 192 Fire damage, and Dazing them for 6 sec."
                            ]
                        },
                        {
                            id: "blazing_speed",
                            name: "Blazing Speed",
                            icon: "spell_fire_burningspeed",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance when hit by a melee or ranged attack to increase your movement speed by 50% and dispel all movement impairing effects.  This effect lasts 8 sec.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "fire_power",
                            name: "Fire Power",
                            icon: "spell_fire_immolation",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "pyromaniac",
                            name: "Pyromaniac",
                            icon: "spell_fire_burnout",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases chance to critically hit and reduces the mana cost of all Fire spells by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "combustion",
                            name: "Combustion",
                            icon: "spell_fire_sealoffire",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "critical_mass",
                            description: [
                                "When activated, this spell increases your critical strike damage bonus with Fire damage spells by 50%, and causes each of your Fire damage spell hits to increase your critical strike chance with Fire damage spells by 10%.  This effect lasts until you have caused 3 non-periodic critical strikes with Fire spells."
                            ]
                        },
                        {
                            id: "molten_fury",
                            name: "Molten Fury",
                            icon: "spell_fire_moltenblood",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases damage of all spells against targets with less than 20% health by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "empowered_fireball",
                            name: "Empowered Fireball",
                            icon: "spell_fire_flamebolt",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Fireball spell gains an additional {value}% of your bonus spell damage effects.",
                                {
                                    value: [3, 6, 9, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "dragons_breath",
                            name: "Dragon's Breath",
                            icon: "inv_misc_head_dragon_01",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "combustion",
                            description: [
                                "Targets in a cone in front of the caster take 382 to 442 Fire damage and are Disoriented and Snared for 5 sec.  Any direct damaging attack will revive targets.  Turns off your attack when used."
                            ]
                        }
                    ],
                    // mage - tbc
                    Frost: [
                        {
                            id: "frost_warding",
                            name: "Frost Warding",
                            icon: "spell_frost_frostward",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the armor and resistances given by your Frost Armor and Ice Armor spells by {armor}%.  In addition, gives your Frost Ward a {ward}% chance to reflect Frost spells and effects while active.",
                                {
                                    armor: [15, 30],
                                    ward: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_frostbolt",
                            name: "Improved Frostbolt",
                            icon: "spell_frost_frostbolt02",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Frostbolt spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "elemental_precision",
                            name: "Elemental Precision",
                            icon: "spell_ice_magicdamage",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost and chance targets resist your Frost and Fire spells by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "ice_shards",
                            name: "Ice Shards",
                            icon: "spell_frost_iceshard",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Frost spells by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "frostbite",
                            name: "Frostbite",
                            icon: "spell_frost_frostarmor",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Chill effects a {value}% chance to freeze the target for 5 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_frost_nova",
                            name: "Improved Frost Nova",
                            icon: "spell_frost_freezingbreath",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Frost Nova spell by {value} sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "permafrost",
                            name: "Permafrost",
                            icon: "spell_frost_wisp",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Chill effects by {chill} sec and reduces the target's speed by an additional {speed}%.",
                                {
                                    chill: [1, 2, 3],
                                    speed: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "piercing_ice",
                            name: "Piercing Ice",
                            icon: "spell_frost_frostbolt",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Frost spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "icy_veins",
                            name: "Icy Veins",
                            icon: "spell_frost_coldhearted",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Hastens your spellcasting, increasing spell casting speed by 20% and gives you 100% chance to avoid interruption caused by damage while casting.  Lasts 20 sec."
                            ]
                        },
                        {
                            id: "improved_blizzard",
                            name: "Improved Blizzard",
                            icon: "spell_frost_icestorm",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Adds a chill effect to your Blizzard spell.  This effect lowers the target's movement speed by {value}%.  Lasts 1.50 sec.",
                                {
                                    value: [30, 50, 65]
                                }
                            ]
                        },
                        {
                            id: "arctic_reach",
                            name: "Arctic Reach",
                            icon: "spell_shadow_darkritual",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Frostbolt, Ice Lance and Blizzard spells and the radius of your Frost Nova and Cone of Cold spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "frost_channeling",
                            name: "Frost Channeling",
                            icon: "spell_frost_stun",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Frost spells by {cost}% and reduces the threat caused by your Frost spells by {threat}%.",
                                {
                                    cost: [5, 10, 15],
                                    threat: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "shatter",
                            name: "Shatter",
                            icon: "spell_frost_frostshock",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "improved_frost_nova",
                            description: [
                                "Increases the critical strike chance of all your spells against frozen targets by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "frozen_core",
                            name: "Frozen Core",
                            icon: "spell_frost_frozencore",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the damage taken by Frost and Fire effects by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "cold_snap",
                            name: "Cold Snap",
                            icon: "spell_frost_wizardmark",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this spell finishes the cooldown on all Frost spells you recently cast."
                            ]
                        },
                        {
                            id: "improved_cone_of_cold",
                            name: "Improved Cone of Cold",
                            icon: "spell_frost_glacier",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by your Cone of Cold spell by {value}%.",
                                {
                                    value: [15, 25, 35]
                                }
                            ]
                        },
                        {
                            id: "ice_floes",
                            name: "Ice Floes",
                            icon: "spell_frost_icefloes",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Cone of Cold, Cold Snap, Ice Barrier and Ice Block spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "winters_chill",
                            name: "Winter's Chill",
                            icon: "spell_frost_chillingblast",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Frost damage spells a {value}% chance to apply the Winter's Chill effect, which increases the chance a Frost spell will critically hit the target by 2% for 15 sec.  Stacks up to 5 times.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "ice_barrier",
                            name: "Ice Barrier",
                            icon: "spell_ice_lament",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "cold_snap",
                            description: [
                                "Instantly shields you, absorbing 455 damage.  Lasts 1 min.  While the shield holds, spellcasting will not be delayed by damage."
                            ]
                        },
                        {
                            id: "arctic_winds",
                            name: "Arctic Winds",
                            icon: "spell_frost_arcticwinds",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases all Frost damage you cause by {value}% and reduces the chance melee and ranged attacks will hit you by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "empowered_frostbolt",
                            name: "Improved Frostbolt",
                            icon: "spell_frost_frostbolt02",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Frostbolt spell gains an additional {bonus}% of your bonus spell damage effects and an additional {crit}% chance to critically strike.",
                                {
                                    bonus: [2, 4, 6, 8, 10],
                                    crit: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "summon_water_elemental",
                            name: "Summon Water Elemental",
                            icon: "spell_frost_summonwaterelemental_2",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summon a Water Elemental to fight for the caster for 45 sec."
                            ]
                        }
                    ]
                },
                paladin: {
                    // paladin - tbc
                    Holy: [
                        {
                            id: "divine_strength",
                            name: "Divine Strength",
                            icon: "ability_golemthunderclap",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Strength by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "divine_intellect",
                            name: "Divine Intellect",
                            icon: "spell_nature_sleep",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Intellect by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "spiritual_focus",
                            name: "Spiritual Focus",
                            icon: "spell_arcane_blink",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Flash of Light and Holy Light spells a {value}% chance to not lose casting time when you take damage.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "improved_seal_of_righteousness",
                            name: "Improved Seal of Righteousness",
                            icon: "ability_thunderbolt",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Seal of Righteousness and Judgement of Righteousness by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "healing_light",
                            name: "Healing Light",
                            icon: "spell_holy_holybolt",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Holy Light and Flash of Light spells by {value}%.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "aura_mastery",
                            name: "Aura Mastery",
                            icon: "spell_holy_auramastery",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the radius of your Auras to 40 yards."
                            ]
                        },
                        {
                            id: "improved_lay_on_hands",
                            name: "Improved Lay on Hands",
                            icon: "spell_holy_layonhands",
                            row: 2,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives the target of your Lay on Hands spell a {armor}% bonus to their armor value from items for 2 min.  In addition, the cooldown for your Lay on Hands spell is reduced by {cd} min.",
                                {
                                    armor: [15, 30],
                                    cd: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "unyielding_faith",
                            name: "Unyielding Faith",
                            icon: "spell_holy_unyieldingfaith",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist Fear and Disorient effects by an additional {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "illumination",
                            name: "Illumination",
                            icon: "spell_holy_greaterheal",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "After getting a critical effect from your Flash of Light, Holy Light, or Holy Shock heal spell, gives you a {value}% chance to gain mana equal to 60% of the base cost of the spell.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_blessing_of_wisdom",
                            name: "Improved Blessing of Wisdom",
                            icon: "spell_holy_sealofwisdom",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Blessing of Wisdom spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "pure_of_heart",
                            name: "Pure of Heart",
                            icon: "spell_holy_pureofheart",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of Curse, Disease and Poison effects by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "divine_favor",
                            name: "Divine Favor",
                            icon: "spell_holy_heal",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "illumination",
                            description: [
                                "When activated, gives your next Flash of Light, Holy Light, or Holy Shock spell a 100% critical effect chance."
                            ]
                        },
                        {
                            id: "sanctified_light",
                            name: "Sanctified Light",
                            icon: "spell_holy_healingaura",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy Light spell by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "purifying_power",
                            name: "Purifying Power",
                            icon: "spell_holy_purifyingpower",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Cleanse, Purify and Consecration spells by {cost}% and reduces the cooldown of your Exorcism and Holy Wrath spells by {cooldown}%.",
                                {
                                    cost: [5, 10],
                                    cooldown: [17, 33]
                                }
                            ]
                        },
                        {
                            id: "holy_power",
                            name: "Holy Power",
                            icon: "spell_holy_power",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "lights_grace",
                            name: "Light's Grace",
                            icon: "spell_holy_lightsgrace",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Holy Light spell a {value}% chance to reduce the cast time of your next Holy Light spell by 0.5 sec.  This effect lasts 15 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "holy_shock",
                            name: "Holy Shock",
                            icon: "spell_holy_searinglight",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "divine_favor",
                            description: [
                                "Blasts the target with Holy energy, causing 277 to 299 Holy damage to an enemy, or 351 to 379 healing to an ally."
                            ]
                        },
                        {
                            id: "blessed_life",
                            name: "Blessed Life",
                            icon: "spell_holy_blessedlife",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "All attacks against you have a {value}% chance to cause half damage.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "holy_guidance",
                            name: "Holy Guidance",
                            icon: "spell_holy_holyguidance",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage and healing by {value}% of your total Intellect.",
                                {
                                    value: [7, 14, 21, 28, 35]
                                }
                            ]
                        },
                        {
                            id: "divine_illumination",
                            name: "Divine Illumination",
                            icon: "spell_holy_divineillumination",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all spells by 50% for 15 sec."
                            ]
                        }
                    ],
                    // paladin - tbc
                    Protection: [
                        {
                            id: "improved_devotion_aura",
                            name: "Improved Devotion Aura",
                            icon: "spell_holy_devotionaura",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the armor bonus of your Devotion Aura by {value}%.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "redoubt",
                            name: "Redoubt",
                            icon: "ability_defend",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Damaging melee and ranged attacks against you have a 10% chance to increase your chance to block by {value}%.  Lasts 10 sec or 5 blocks.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "precision",
                            name: "Precision",
                            icon: "ability_rogue_ambush",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with melee weapons and spells by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "guardians_favor",
                            name: "Guardian's Favor",
                            icon: "spell_holy_sealofprotection",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Blessing of Protection by {value1} sec and increases the duration of your Blessing of Freedom by {value2} sec.",
                                {
                                    value1: [60, 120],
                                    value2: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 1,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "blessing_of_kings",
                            name: "Blessing of Kings",
                            icon: "spell_magic_magearmor",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Places a Blessing on the friendly target, increasing total stats by 10% for 10 min.  Players may only have one Blessing on them per Paladin at any one time."
                            ]
                        },
                        {
                            id: "improved_righteous_fury",
                            name: "Improved Righteous Fury",
                            icon: "spell_holy_sealoffury",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "While Righteous Fury is active, all damage taken is reduced by {value1}% and increases the amount of threat generated by your Righteous Fury spell by {value2}%.",
                                {
                                    value1: [2, 4, 6],
                                    value2: [16, 33, 50]
                                }
                            ]
                        },
                        {
                            id: "shield_specialization",
                            name: "Shield Specialization",
                            icon: "inv_shield_06",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "redoubt",
                            description: [
                                "Increases the amount of damage absorbed by your shield by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Defense skill by {value}.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "stoicism",
                            name: "Stoicism",
                            icon: "spell_holy_stoicism",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your resistance to Stun effects by an additional {value1}% and reduces the chance your spells will be dispelled by an additional {value2}%.",
                                {
                                    value1: [5, 10],
                                    value2: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_hammer_of_justice",
                            name: "Improved Hammer of Justice",
                            icon: "spell_holy_sealofmight",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Hammer of Justice spell by {value} sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_concentration_aura",
                            name: "Improved Concentration Aura",
                            icon: "spell_holy_mindsooth",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Concentration Aura by an additional {effect}% and reduces the duration of any Silence or Interrupt effect used against an affected group member by {duration}%.  The duration reduction does not stack with any other effects.",
                                {
                                    effect: [5, 10, 15],
                                    duration: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "spell_warding",
                            name: "Spell Warding",
                            icon: "spell_holy_improvedresistanceauras",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All spell damage taken is reduced by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "blessing_of_sanctuary",
                            name: "Blessing of Sanctuary",
                            icon: "spell_nature_lightningshield",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Places a Blessing on the friendly target, reducing damage dealt from all sources by up to 10 for 10 min.  In addition, when the target blocks a melee attack the attacker will take 14 Holy damage.  Players may only have one Blessing on them per Paladin at any one time."
                            ]
                        },
                        {
                            id: "reckoning",
                            name: "Reckoning",
                            icon: "spell_holy_blessingofstrength",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance after being hit by any damaging attack that the next 4 weapon swings within 8 sec will generate an additional attack.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "sacred_duty",
                            name: "Sacred Duty",
                            icon: "spell_holy_divineintervention",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina by {value1}%, reduces the cooldown of your Divine Shield spell by {value2} sec and reduces the attack speed penalty by {value3}%.",
                                {
                                    value1: [3, 6],
                                    value2: [30, 60],
                                    value3: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "one_handed_weapon_specialization",
                            name: "One-Handed Weapon Specialization",
                            icon: "inv_sword_20",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases all damage you deal when a one-handed melee weapon is equipped by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_holy_shield",
                            name: "Improved Holy Shield",
                            icon: "classic_spell_holy_blessingofprotection",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "holy_shield",
                            description: [
                                "Increases damage caused by your Holy Shield by {value1}% and increases the number of charges of your Holy Shield by {value2}.",
                                {
                                    value1: [10, 20],
                                    value2: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "holy_shield",
                            name: "Holy Shield",
                            icon: "classic_spell_holy_blessingofprotection",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "blessing_of_sanctuary",
                            description: [
                                "Increases chance to block by 30% for 10 sec and deals 59 Holy damage for each attack blocked while active.  Damage caused by Holy Shield causes 35% additional threat.  Each block expends a charge.  4 charges."
                            ]
                        },
                        {
                            id: "ardent_defender",
                            name: "Ardent Defender",
                            icon: "spell_holy_ardentdefender",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "When you have less than 35% health, all damage taken is reduced by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "combat_expertise",
                            name: "Combat Expertise",
                            icon: "spell_holy_weaponmastery",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your expertise by {value1} and your total Stamina by {value2}%.",
                                {
                                    value1: [1, 2, 3, 4, 5],
                                    value2: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "avengers_shield",
                            name: "Avenger's Shield",
                            icon: "spell_holy_avengersshield",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "holy_shield",
                            description: [
                                "Hurls a holy shield at the enemy, dealing 270 to 330 Holy damage, Dazing them and then jumping to additional nearby enemies.  Affects 3 total targets.  Lasts 6 sec."
                            ]
                        }
                    ],
                    // paladin - tbc
                    Retribution: [
                        {
                            id: "improved_blessing_of_might",
                            name: "Improved Blessing of Might",
                            icon: "spell_holy_fistofjustice",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the attack power bonus of your Blessing of Might by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "benediction",
                            name: "Benediction",
                            icon: "spell_frost_windwalkon",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Judgement and Seal spells by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_judgement",
                            name: "Improved Judgement",
                            icon: "spell_holy_righteousfury",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Judgement spell by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_seal_of_the_crusader",
                            name: "Improved Seal of the Crusader",
                            icon: "spell_holy_holysmite",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "In addition to the normal effect, your Judgement of the Crusader spell will also increase the critical strike chance of all attacks made against that target by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "vindication",
                            name: "Vindication",
                            icon: "spell_holy_vindication",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives the Paladin's damaging melee attacks a chance to reduce the target's attributes by {value}% for 15 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "conviction",
                            name: "Conviction",
                            icon: "spell_holy_retributionaura",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "seal_of_command",
                            name: "Seal of Command",
                            icon: "ability_warrior_innerrage",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Gives the Paladin a chance to deal additional Holy damage equal to 70% of normal weapon damage.  Only one Seal can be active on the Paladin at any one time.  Lasts 30 sec.<br><br>Unleashing this Seal's energy will judge an enemy, instantly causing 68 to 73 Holy damage, 137 to 146 if the target is stunned or incapacitated."
                            ]
                        },
                        {
                            id: "pursuit_of_justice",
                            name: "Pursuit of Justice",
                            icon: "spell_holy_persuitofjustice",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you'll be hit by spells by {value1}% and increases movement and mounted movement speed by {value2}%.  This does not stack with other movement speed increasing effects.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "eye_for_an_eye",
                            name: "Eye for an Eye",
                            icon: "spell_holy_eyeforaneye",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All spell criticals against you cause {value}% of the damage taken to the caster as well.  The damage caused by Eye for an Eye will not exceed 50% of the Paladin's total health.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_retribution_aura",
                            name: "Improved Retribution Aura",
                            icon: "spell_holy_auraoflight",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Retribution Aura by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "crusade",
                            name: "Crusade",
                            icon: "spell_holy_crusade",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused against Humanoids, Demons, Undead and Elementals by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "two_handed_weapon_specialization",
                            name: "Two-Handed Weapon Specialization",
                            icon: "inv_hammer_04",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "sanctity_aura",
                            name: "Sanctity Aura",
                            icon: "spell_holy_mindvision",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases Holy damage done by party members within 30 yards by 10%.  Players may only have one Aura on them per Paladin at any one time."
                            ]
                        },
                        {
                            id: "improved_sanctity_aura",
                            name: "Improved Sanctity Aura",
                            icon: "spell_holy_mindvision",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: "sanctity_aura",
                            description: [
                                "The amount of damage caused by targets affected by Sanctity Aura is increased by {value}%.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "vengeance",
                            name: "Vengeance",
                            icon: "ability_racial_avatar",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "conviction",
                            description: [
                                "Gives you a {value}% bonus to Physical and Holy damage you deal for 30 sec after dealing a critical strike from a weapon swing, spell, or ability.  This effect stacks up to 3 times.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "sanctified_judgement",
                            name: "Sanctified Judgement",
                            icon: "spell_holy_righteousfury",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Judgement spell a {value}% chance to return 80% of the mana cost of the judged seal.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "sanctified_seals",
                            name: "Sanctified Seals",
                            icon: "spell_holy_holysmite",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to critically hit with all spells and melee attacks by {value1}% and reduces the chance your Seals will be dispelled by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "repentance",
                            name: "Repentance",
                            icon: "spell_holy_prayerofhealing",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Puts the enemy target in a state of meditation, incapacitating them for up to 6 sec.  Any damage caused will awaken the target.  Only works against Humanoids."
                            ]
                        },
                        {
                            id: "divine_purpose",
                            name: "Divine Purpose",
                            icon: "spell_holy_divinepurpose",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Melee and ranged critical strikes against you cause {value}% less damage.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "fanaticism",
                            name: "Fanaticism",
                            icon: "spell_holy_fanaticism",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "repentance",
                            description: [
                                "Increases the critical strike chance of all Judgements capable of a critical hit by {value1}% and reduces threat caused by all actions by {value2}% except when under the effects of Righteous Fury.",
                                {
                                    value1: [3, 6, 9, 12, 15],
                                    value2: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "crusader_strike",
                            name: "Crusader Strike",
                            icon: "spell_holy_crusaderstrike",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "An instant strike that causes 110% weapon damage and refreshes all Judgements on the target."
                            ]
                        }
                    ]
                },
                priest: {
                    // priest - tbc
                    Discipline: [
                        {
                            id: "unbreakable_will",
                            name: "Unbreakable Will",
                            icon: "spell_magic_magearmor",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist Stun, Fear, and Silence effects by an additional {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "wand_specialization",
                            name: "Wand Specialization",
                            icon: "inv_wand_01",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your damage with Wands by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "silent_resolve",
                            name: "Silent Resolve",
                            icon: "spell_nature_manaregentotem",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your Holy and Discipline spells by {value}% and reduces the chance your spells will be dispelled by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_power_word_fortitude",
                            name: "Improved Power Word: Fortitude",
                            icon: "spell_holy_wordfortitude",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Power Word: Fortitude and Prayer of Fortitude spells by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_power_word_shield",
                            name: "Improved Power Word: Shield",
                            icon: "spell_holy_powerwordshield",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage absorbed by your Power Word: Shield by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "martyrdom",
                            name: "Martyrdom",
                            icon: "spell_nature_tranquility",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value1}% chance to gain the Focused Casting effect that lasts for 6 sec after being the victim of a melee or ranged critical strike.  The Focused Casting effect prevents you from losing casting time when taking damage while casting Priest spells and increases resistance to Interrupt effects by {value2}%.",
                                {
                                    value1: [50, 100],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "absolution",
                            name: "Absolution",
                            icon: "spell_holy_absolution",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Dispel Magic, Cure Disease, Abolish Disease and Mass Dispel spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "inner_focus",
                            name: "Inner Focus",
                            icon: "spell_frost_windwalkon",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, reduces the mana cost of your next spell by 100% and increases its critical effect chance by 25% if it is capable of a critical effect."
                            ]
                        },
                        {
                            id: "meditation",
                            name: "Meditation",
                            icon: "spell_nature_sleep",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value}% of your mana regeneration to continue while casting.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_inner_fire",
                            name: "Improved Inner Fire",
                            icon: "spell_holy_innerfire",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the armor bonus of your Inner Fire spell by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "mental_agility",
                            name: "Mental Agility",
                            icon: "ability_hibernation",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your instant cast spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_mana_burn",
                            name: "Improved Mana Burn",
                            icon: "spell_shadow_manaburn",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Mana Burn spell by {value} sec.",
                                {
                                    value: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "mental_strength",
                            name: "Mental Strength",
                            icon: "spell_nature_enchantarmor",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum mana by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "divine_spirit",
                            name: "Divine Spirit",
                            icon: "spell_holy_divinespirit",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "meditation",
                            description: [
                                "Holy power infuses the target, increasing their Spirit by 17 for 30 min."
                            ]
                        },
                        {
                            id: "improved_divine_spirit",
                            name: "Improved Divine Spirit",
                            icon: "spell_holy_divinespirit",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: "divine_spirit",
                            description: [
                                "Your Divine Spirit and Prayer of Spirit spells also increase the target's spell damage and healing by an amount equal to {value}% of their total Spirit.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "focused_power",
                            name: "Focused Power",
                            icon: "spell_shadow_focusedpower",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Smite, Mind Blast and Mass Dispel spells have an additional {value1}% chance to hit.  In addition, your Mass Dispel cast time is reduced by {value2} sec.",
                                {
                                    value1: [2, 4],
                                    value2: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "force_of_will",
                            name: "Force of Will",
                            icon: "spell_nature_slowingtotem",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage by {value}% and the critical strike chance of your offensive spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "focused_will",
                            name: "Focused Will",
                            icon: "spell_arcane_focusedpower",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "After taking a critical hit you gain the Focused Will effect, reducing all damage taken by {value1}% and increasing healing effects on you by {value2}%.  Stacks up to 3 times.  Lasts 8 sec.",
                                {
                                    value1: [2, 3, 4],
                                    value2: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "power_infusion",
                            name: "Power Infusion",
                            icon: "spell_holy_powerinfusion",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "mental_strength",
                            description: [
                                "Infuses the target with power, increasing spell casting speed by 20% and reducing the mana cost of all spells by 20%.  Lasts 15 sec."
                            ]
                        },
                        {
                            id: "reflective_shield",
                            name: "Reflective Shield",
                            icon: "spell_holy_powerwordshield",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Causes {value}% of the damage absorbed by your Power Word: Shield to reflect back at the attacker.  This damage causes no threat.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "enlightenment",
                            name: "Enlightenment",
                            icon: "spell_arcane_mindmastery",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina, Intellect and Spirit by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "pain_suppression",
                            name: "Pain Suppression",
                            icon: "spell_holy_painsupression",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly reduces a friendly target's threat by 5%, reduces all damage taken by 40% and increases resistance to Dispel mechanics by 65% for 8 sec."
                            ]
                        }
                    ],
                    // priest - tbc
                    Holy: [
                        {
                            id: "healing_focus",
                            name: "Healing Focus",
                            icon: "spell_holy_healingfocus",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting any healing spell.",
                                {
                                    value: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "improved_renew",
                            name: "Improved Renew",
                            icon: "spell_holy_renew",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Renew spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "holy_specialization",
                            name: "Holy Specialization",
                            icon: "spell_holy_sealofsalvation",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "spell_warding",
                            name: "Spell Warding",
                            icon: "spell_holy_spellwarding",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces all spell damage taken by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "divine_fury",
                            name: "Divine Fury",
                            icon: "spell_holy_sealofwrath",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Smite, Holy Fire, Heal and Greater Heal spells by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "holy_nova",
                            name: "Holy Nova",
                            icon: "spell_holy_holynova",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes an explosion of holy light around the caster, causing 29 to 34 Holy damage to all enemy targets within 10 yards and healing all party members within 10 yards for 54 to 63.  These effects cause no threat."
                            ]
                        },
                        {
                            id: "blessed_recovery",
                            name: "Blessed Recovery",
                            icon: "spell_holy_blessedrecovery",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "After being struck by a melee or ranged critical hit, heal {value}% of the damage taken over 6 sec.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "inspiration",
                            name: "Inspiration",
                            icon: "spell_holy_layonhands",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your target's armor by {value}% for 15 sec after getting a critical effect from your Flash Heal, Heal, Greater Heal, Binding Heal, Prayer of Healing, or Circle of Healing spell.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "holy_reach",
                            name: "Holy Reach",
                            icon: "spell_holy_purify",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Smite and Holy Fire spells and the radius of your Prayer of Healing, Holy Nova and Circle of Healing spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_healing",
                            name: "Improved Healing",
                            icon: "spell_holy_heal02",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Lesser Heal, Heal, and Greater Heal spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "searing_light",
                            name: "Searing Light",
                            icon: "spell_holy_searinglightpriest",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "divine_fury",
                            description: [
                                "Increases the damage of your Smite and Holy Fire spells by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "healing_prayers",
                            name: "Healing Prayers",
                            icon: "spell_holy_prayerofhealing02",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Prayer of Healing and Prayer of Mending spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "spirit_of_redemption",
                            name: "Spirit of Redemption",
                            icon: "inv_enchant_essenceeternallarge",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases total Spirit by 5% and upon death, the priest becomes the Spirit of Redemption for 15 sec.  The Spirit of Redemption cannot move, attack, be attacked or targeted by any spells or effects.  While in this form the priest can cast any healing spell free of cost.  When the effect ends, the priest dies."
                            ]
                        },
                        {
                            id: "spiritual_guidance",
                            name: "Spiritual Guidance",
                            icon: "spell_holy_spiritualguidence",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases spell damage and healing by up to {value}% of your total Spirit.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "surge_of_light",
                            name: "Surge of Light",
                            icon: "spell_holy_surgeoflight",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your spell criticals have a {value}% chance to cause your next Smite spell to be instant cast, cost no mana but be incapable of a critical hit.  This effect lasts 10 sec.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "spiritual_healing",
                            name: "Spiritual Healing",
                            icon: "spell_nature_moonglow",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "holy_concentration",
                            name: "Holy Concentration",
                            icon: "spell_holy_fanaticism",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to enter a Clearcasting state after casting any Flash Heal, Binding Heal, or Greater Heal spell.  The Clearcasting state reduces the mana cost of your next Flash Heal, Binding Heal, or Greater Heal spell by 100%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "lightwell",
                            name: "Lightwell",
                            icon: "spell_holy_summonlightwell",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "spirit_of_redemption",
                            description: [
                                "Creates a Holy Lightwell.  Members of your raid or party can click the Lightwell to restore 801 health over 6 sec.  Any damage taken will cancel the effect.  Lightwell lasts for 3 min or 5 charges."
                            ]
                        },
                        {
                            id: "blessed_resilience",
                            name: "Blessed Resilience",
                            icon: "spell_holy_blessedresillience",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Critical hits made against you have a {value}% chance to prevent you from being critically hit again for 6 sec.",
                                {
                                    value: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "empowered_healing",
                            name: "Empowered Healing",
                            icon: "spell_holy_greaterheal",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Greater Heal spell gains an additional {value1}% and your Flash Heal and Binding Heal gain an additional {value2}% of your bonus healing effects.",
                                {
                                    value1: [4, 8, 12, 16, 20],
                                    value2: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "circle_of_healing",
                            name: "Circle of Healing",
                            icon: "spell_holy_circleofrenewal",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Heals friendly target and that target's party members within 15 yards of the target for 250 to 274."
                            ]
                        }
                    ],
                    // priest - tbc
                    Shadow: [
                        {
                            id: "spirit_tap",
                            name: "Spirit Tap",
                            icon: "spell_shadow_requiem",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to gain a 100% bonus to your Spirit after killing a target that yields experience or honor.  For the duration, your mana will regenerate at a 50% rate while casting.  Lasts 15 sec.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "blackout",
                            name: "Blackout",
                            icon: "spell_shadow_gathershadows",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Shadow damage spells a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "shadow_affinity",
                            name: "Shadow Affinity",
                            icon: "spell_shadow_shadowward",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your Shadow spells by {value}%.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_shadow_word_pain",
                            name: "Improved Shadow Word: Pain",
                            icon: "spell_shadow_shadowwordpain",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Shadow Word: Pain spell by {value} sec.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "shadow_focus",
                            name: "Shadow Focus",
                            icon: "spell_shadow_burningspirit",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces your target's chance to resist your Shadow spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_psychic_scream",
                            name: "Improved Psychic Scream",
                            icon: "spell_shadow_psychicscream",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Psychic Scream spell by {value} sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_mind_blast",
                            name: "Improved Mind Blast",
                            icon: "spell_shadow_unholyfrenzy",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Mind Blast spell by {value} sec.",
                                {
                                    value: [0.5, 1, 1.5, 2, 2.5]
                                }
                            ]
                        },
                        {
                            id: "mind_flay",
                            name: "Mind Flay",
                            icon: "spell_shadow_siphonmana",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Assault the target's mind with Shadow energy, causing 75 Shadow damage over 3 sec and slowing their movement speed by 50%."
                            ]
                        },
                        {
                            id: "improved_fade",
                            name: "Improved Fade",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Fade ability by {value} sec.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "shadow_reach",
                            name: "Shadow Reach",
                            icon: "spell_shadow_chilltouch",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your offensive Shadow spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "shadow_weaving",
                            name: "Shadow Weaving",
                            icon: "spell_shadow_blackplague",
                            row: 3,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Shadow damage spells have a {value}% chance to cause your target to be vulnerable to Shadow damage.  This vulnerability increases the Shadow damage dealt to your target by 2% and lasts 15 sec.  Stacks up to 5 times.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "silence",
                            name: "Silence",
                            icon: "spell_shadow_impphaseshift",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "improved_psychic_scream",
                            description: [
                                "Silences the target, preventing them from casting spells for 5 sec."
                            ]
                        },
                        {
                            id: "vampiric_embrace",
                            name: "Vampiric Embrace",
                            icon: "spell_shadow_unsummonbuilding",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Afflicts your target with Shadow energy that causes all party members to be healed for 15% of any Shadow spell damage you deal for 1 min."
                            ]
                        },
                        {
                            id: "improved_vampiric_embrace",
                            name: "Improved Vampiric Embrace",
                            icon: "spell_shadow_improvedvampiricembrace",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "vampiric_embrace",
                            description: [
                                "Increases the percentage healed by Vampiric Embrace by an additional {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "focused_mind",
                            name: "Focused Mind",
                            icon: "spell_nature_focusedmind",
                            row: 4,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Mind Blast, Mind Control and Mind Flay spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "shadow_resilience",
                            name: "Shadow Resilience",
                            icon: "spell_shadow_grimward",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you'll be critically hit by all spells by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "darkness",
                            name: "Darkness",
                            icon: "spell_shadow_twilight",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Shadow spell damage by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "shadowform",
                            name: "Shadowform",
                            icon: "spell_shadow_shadowform",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "vampiric_embrace",
                            description: [
                                "Assume a Shadowform, increasing your Shadow damage by 15% and reducing Physical damage done to you by 15%.  However, you may not cast Holy spells while in this form."
                            ]
                        },
                        {
                            id: "shadow_power",
                            name: "Shadow Power",
                            icon: "spell_shadow_shadowpower",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Mind Blast and Shadow Word: Death spells by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "misery",
                            name: "Misery",
                            icon: "spell_shadow_misery",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Shadow Word: Pain, Mind Flay and Vampiric Touch spells also cause the target to take an additional {value}% spell damage.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "vampiric_touch",
                            name: "Vampiric Touch",
                            icon: "spell_holy_stoicism",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "shadowform",
                            description: [
                                "Causes 450 Shadow damage over 15 sec to your target and causes all party members to gain mana equal to 5% of any Shadow spell damage you deal."
                            ]
                        }
                    ]
                },
                rogue: {
                    // rogue - tbc
                    Assassination: [
                        {
                            id: "improved_eviscerate",
                            name: "Improved Eviscerate",
                            icon: "ability_rogue_eviscerate",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Eviscerate ability by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "remorseless_attacks",
                            name: "Remorseless Attacks",
                            icon: "ability_fiegndead",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "After killing an opponent that yields experience or honor, gives you a {value}% increased critical strike chance on your next Sinister Strike, Hemorrhage, Backstab, Mutilate, Ambush, or Ghostly Strike.  Lasts 20 sec.",
                                {
                                    value: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "malice",
                            name: "Malice",
                            icon: "ability_racial_bloodrage",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "ruthlessness",
                            name: "Ruthlessness",
                            icon: "ability_druid_disembowel",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your melee finishing moves a {value}% chance to add a combo point to your target.",
                                {
                                    value: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "murder",
                            name: "Murder",
                            icon: "spell_shadow_deathscream",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused against Humanoid, Giant, Beast and Dragonkin targets by {value}%.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "puncturing_wounds",
                            name: "Puncturing Wounds",
                            icon: "ability_backstab",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Backstab ability by {backstab}%, and the critical strike chance of your Mutilate ability by {mutilate}%.",
                                {
                                    backstab: [10, 20, 30],
                                    mutilate: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "relentless_strikes",
                            name: "Relentless Strikes",
                            icon: "ability_warrior_decisivestrike",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your finishing moves have a 20% chance per combo point to restore 25 energy."
                            ]
                        },
                        {
                            id: "improved_expose_armor",
                            name: "Improved Expose Armor",
                            icon: "ability_warrior_riposte",
                            row: 2,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the armor reduced by your Expose Armor ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "lethality",
                            name: "Lethality",
                            icon: "ability_criticalstrike",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "malice",
                            description: [
                                "Increases the critical strike damage bonus of your Sinister Strike, Gouge, Backstab, Ghostly Strike, Mutilate, Shiv, and Hemorrhage abilities by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "vile_poisons",
                            name: "Vile Poisons",
                            icon: "ability_rogue_feigndeath",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by your poisons and Envenom ability by {value1}% and gives your poisons an additional {value2}% chance to resist dispel effects.",
                                {
                                    value1: [4, 8, 12, 16, 20],
                                    value2: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "improved_poisons",
                            name: "Improved Poisons",
                            icon: "ability_poisons",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the chance to apply poisons to your target by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "fleet_footed",
                            name: "Fleet Footed",
                            icon: "ability_rogue_fleetfooted",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist movement impairing effects by {duration}% and increases your movement speed by {speed}%.  This does not stack with other movement speed increasing effects.",
                                {
                                    duration: [5, 10],
                                    speed: [8, 15]
                                }
                            ]
                        },
                        {
                            id: "cold_blood",
                            name: "Cold Blood",
                            icon: "spell_ice_lament",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, increases the critical strike chance of your next offensive ability by 100%."
                            ]
                        },
                        {
                            id: "improved_kidney_shot",
                            name: "Improved Kidney Shot",
                            icon: "ability_rogue_kidneyshot",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "While affected by your Kidney Shot ability, the target receives an additional {value}% damage from all sources.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "quick_recovery",
                            name: "Quick Recovery",
                            icon: "ability_rogue_quickrecovery",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All healing effects on you are increased by {healing}%.  In addition, your finishing moves cost {cost}% less Energy when they fail to hit.",
                                {
                                    healing: [10, 20],
                                    cost: [40, 80]
                                }
                            ]
                        },
                        {
                            id: "seal_fate",
                            name: "Seal Fate",
                            icon: "spell_shadow_chilltouch",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "cold_blood",
                            description: [
                                "Your critical strikes from abilities that add combo points have a {value}% chance to add an additional combo point.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "master_poisoner",
                            name: "Master Poisoner",
                            icon: "ability_creature_poison_06",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance your poisons will be resisted by {resisted}% and increases your chance to resist Poison effects by an additional {resistance}%.",
                                {
                                    resisted: [5, 10],
                                    resistance: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "vigor",
                            name: "Vigor",
                            icon: "spell_nature_earthbindtotem",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum Energy by 10."
                            ]
                        },
                        {
                            id: "deadened_nerves",
                            name: "Deadened Nerves",
                            icon: "ability_rogue_deadenednerves",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Decreases all physical damage taken by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "find_weakness",
                            name: "Find Weakness",
                            icon: "ability_rogue_findweakness",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your finishing moves increase the damage of all your offensive abilities by {value}% for 10 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "mutilate",
                            name: "Mutilate",
                            icon: "ability_rogue_shadowstrikes",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "vigor",
                            description: [
                                "Instantly attacks with both weapons for an additional 44 with each weapon.  Damage is increased by 50% against Poisoned targets.  Must be behind the target.  Awards 2 combo points."
                            ]
                        }
                    ],
                    // rogue - tbc
                    Combat: [
                        {
                            id: "improved_gouge",
                            name: "Improved Gouge",
                            icon: "ability_gouge",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect duration of your Gouge ability by {value} sec.",
                                {
                                    value: [0.5, 1, 1.5]
                                }
                            ]
                        },
                        {
                            id: "improved_sinister_strike",
                            name: "Improved Sinister Strike",
                            icon: "spell_shadow_ritualofsacrifice",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Energy cost of your Sinister Strike ability by {value}.",
                                {
                                    value: [3, 5]
                                }
                            ]
                        },
                        {
                            id: "lightning_reflexes",
                            name: "Lightning Reflexes",
                            icon: "spell_nature_invisibilty",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Dodge chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_slice_and_dice",
                            name: "Improved Slice and Dice",
                            icon: "ability_rogue_slicedice",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Slice and Dice ability by {value}%.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "precision",
                            name: "Precision",
                            icon: "ability_marksmanship",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "endurance",
                            name: "Endurance",
                            icon: "spell_shadow_shadowward",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Sprint and Evasion abilities by {value}.",
                                {
                                    value: ["45 sec", "1.5 min"]
                                }
                            ]
                        },
                        {
                            id: "riposte",
                            name: "Riposte",
                            icon: "ability_warrior_challange",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "deflection",
                            description: [
                                "A strike that becomes active after parrying an opponent's attack.  This attack deals 150% weapon damage and disarms the target for 6 sec."
                            ]
                        },
                        {
                            id: "improved_sprint",
                            name: "Improved Sprint",
                            icon: "ability_rogue_sprint",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives a {value}% chance to remove all Movement Impairing effects when you activate your Sprint ability.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_kick",
                            name: "Improved Kick",
                            icon: "ability_kick",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Kick ability a {value}% chance to silence the target for 2 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "dagger_specialization",
                            name: "Dagger Specialization",
                            icon: "inv_weapon_shortblade_05",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with Daggers by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwield",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "precision",
                            description: [
                                "Increases the damage done by your offhand weapon by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "mace_specialization",
                            name: "Mace Specialization",
                            icon: "inv_mace_01",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by your critical strikes with maces by {damage}%, and gives you a {stun}% chance to stun your target for 3 sec with a mace.",
                                {
                                    damage: [1, 2, 3, 4, 5],
                                    stun: [1, 2, 3, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "blade_flurry",
                            name: "Blade Flurry",
                            icon: "ability_warrior_punishingblow",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your attack speed by 20%.  In addition, attacks strike an additional nearby opponent.  Lasts 15 sec."
                            ]
                        },
                        {
                            id: "sword_specialization",
                            name: "Sword Specialization",
                            icon: "inv_sword_27",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to get an extra attack on the same target after hitting your target with your Sword.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "fist_weapon_specialization",
                            name: "Fist Weapon Specialization",
                            icon: "inv_gauntlets_04",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with Fist Weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "blade_twisting",
                            name: "Blade Twisting",
                            icon: "ability_rogue_bladetwisting",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Sinister Strike, Backstab, Gouge and Shiv abilities a {value}% chance to Daze the target for 8 sec.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "weapon_expertise",
                            name: "Weapon Expertise",
                            icon: "spell_holy_blessingofstrength",
                            row: 5,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "blade_flurry",
                            description: [
                                "Increases your expertise by {value}.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "aggression",
                            name: "Aggression",
                            icon: "ability_racial_avatar",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Sinister Strike, Backstab, and Eviscerate abilities by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "vitality",
                            name: "Vitality",
                            icon: "ability_warrior_revenge",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina by {stamina}% and your total Agility by {agility}%.",
                                {
                                    stamina: [2, 4],
                                    agility: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "adrenaline_rush",
                            name: "Adrenaline Rush",
                            icon: "spell_shadow_shadowworddominate",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your Energy regeneration rate by 100% for 15 sec."
                            ]
                        },
                        {
                            id: "nerves_of_steel",
                            name: "Nerves of Steel",
                            icon: "ability_rogue_nervesofsteel",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist Stun and Fear effects by an additional {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "combat_potency",
                            name: "Combat Potency",
                            icon: "inv_weapon_shortblade_38",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your successful off-hand melee attacks a 20% chance to generate {value} Energy.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "surprise_attacks",
                            name: "Surprise Attacks",
                            icon: "ability_rogue_surpriseattack",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "adrenaline_rush",
                            description: [
                                "Your finishing moves can no longer be dodged, and the damage dealt by your Sinister Strike, Backstab, Shiv and Gouge abilities is increased by 10%."
                            ]
                        }
                    ],
                    // rogue - tbc
                    Subtlety: [
                        {
                            id: "master_of_deception",
                            name: "Master of Deception",
                            icon: "spell_shadow_charm",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance enemies have to detect you while in Stealth mode.{value}",
                                {
                                    value: ["", "  More effective than Master of Deception (Rank 1).", "  More effective than Master of Deception (Rank 2).", "  More effective than Master of Deception (Rank 3).", "  More effective than Master of Deception (Rank 4)."]
                                }
                            ]
                        },
                        {
                            id: "opportunity",
                            name: "Opportunity",
                            icon: "ability_warrior_warcry",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt when striking from behind with your Backstab, Mutilate, Garrote and Ambush abilities by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "sleight_of_hand",
                            name: "Sleight of Hand",
                            icon: "ability_rogue_feint",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you are critically hit by melee and ranged attacks by {value1}% and increases the threat reduction of your Feint ability by {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "dirty_tricks",
                            name: "Dirty Tricks",
                            icon: "ability_sap",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Blind and Sap abilities by {value1} yards and reduces the energy cost of your Blind and Sap abilities by {value2}%.",
                                {
                                    value1: [2, 5],
                                    value2: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "camouflage",
                            name: "Camouflage",
                            icon: "ability_stealth",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your speed while stealthed by {value1}% and reduces the cooldown of your Stealth ability by {value2} sec.",
                                {
                                    value1: [3, 6, 9, 12, 15],
                                    value2: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "initiative",
                            name: "Initiative",
                            icon: "spell_shadow_fumble",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to add an additional combo point to your target when using your Ambush, Garrote, or Cheap Shot ability.",
                                {
                                    value: [25, 50, 75]
                                }
                            ]
                        },
                        {
                            id: "ghostly_strike",
                            name: "Ghostly Strike",
                            icon: "spell_shadow_curse",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "A strike that deals 125% weapon damage and increases your chance to dodge by 15% for 7 sec.  Awards 1 combo point."
                            ]
                        },
                        {
                            id: "improved_ambush",
                            name: "Improved Ambush",
                            icon: "ability_rogue_ambush",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Ambush ability by {value}%.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "setup",
                            name: "Setup",
                            icon: "spell_nature_mirrorimage",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to add a combo point to your target after dodging their attack or fully resisting one of their spells.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "elusiveness",
                            name: "Elusiveness",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Vanish and Blind abilities by {value} sec.",
                                {
                                    value: [45, 90]
                                }
                            ]
                        },
                        {
                            id: "serrated_blades",
                            name: "Serrated Blades",
                            icon: "inv_sword_17",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Causes your attacks to ignore 0 of your target's Armor and increases the damage dealt by your Rupture ability by {value}%.  The amount of Armor reduced increases with your level.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "heightened_senses",
                            name: "Heightened Senses",
                            icon: "ability_ambush",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your Stealth detection and reduces the chance you are hit by spells and ranged attacks by {value1}%.{value2}",
                                {
                                    value1: [2, 4],
                                    value2: ["", "  More effective than Heightened Senses (Rank 1)."]
                                }
                            ]
                        },
                        {
                            id: "preparation",
                            name: "Preparation",
                            icon: "spell_shadow_antishadow",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability immediately finishes the cooldown on your Evasion, Sprint, Vanish, Cold Blood, Shadowstep and Premeditation abilities."
                            ]
                        },
                        {
                            id: "dirty_deeds",
                            name: "Dirty Deeds",
                            icon: "spell_shadow_summonsuccubus",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Energy cost of your Cheap Shot and Garrote abilities by {value}.  Additionally, your special abilities cause {value}% more damage against targets below 35% health.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "hemorrhage",
                            name: "Hemorrhage",
                            icon: "spell_shadow_lifedrain",
                            row: 4,
                            col: 3,
                            ranks: 1,
                            requiresTalents: "serrated_blades",
                            description: [
                                "An instant strike that deals 110% weapon damage and causes the target to hemorrhage, increasing any Physical damage dealt to the target by up to 13.  Lasts 10 charges or 15 sec.  Awards 1 combo point."
                            ]
                        },
                        {
                            id: "master_of_subtlety",
                            name: "Master of Subtlety",
                            icon: "ability_rogue_masterofsubtlety",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Attacks made while stealthed and for 6 seconds after breaking stealth cause an additional {value}% damage.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "deadliness",
                            name: "Deadliness",
                            icon: "inv_weapon_crossbow_11",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your attack power by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "enveloping_shadows",
                            name: "Enveloping Shadows",
                            icon: "ability_rogue_envelopingshadows",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to avoid area of effect attacks by an additional {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "premeditation",
                            name: "Premeditation",
                            icon: "spell_shadow_possession",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "preparation",
                            description: [
                                "When used, adds 2 combo points to your target.  You must add to or use those combo points within 10 sec or the combo points are lost."
                            ]
                        },
                        {
                            id: "cheat_death",
                            name: "Cheat Death",
                            icon: "ability_rogue_cheatdeath",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a {value}% chance that an attack which would otherwise kill you will instead reduce you to 10% of your maximum health. In addition, all damage taken will be reduced by up to 90% for 3 sec (modified by resilience).  This effect cannot occur more than once per minute.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "sinister_calling",
                            name: "Sinister Calling",
                            icon: "ability_rogue_sinistercalling",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "premeditation",
                            description: [
                                "Increases your total Agility by {agility}% and increases the percentage damage bonus of Backstab and Hemorrhage by an additional {damage}%.",
                                {
                                    agility: [3, 6, 9, 12, 15],
                                    damage: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "shadowstep",
                            name: "Shadowstep",
                            icon: "ability_rogue_shadowstep",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Attempts to step through the shadows and reappear behind your enemy and increases movement speed by 70% for 3 sec.  The damage of your next ability is increased by 20% and the threat caused is reduced by 50%.  Lasts 10 sec."
                            ]
                        }
                    ]
                },
                shaman: {
                    // shaman - tbc
                    Elemental: [
                        {
                            id: "convection",
                            name: "Convection",
                            icon: "spell_nature_wispsplode",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Shock, Lightning Bolt and Chain Lightning spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "concussion",
                            name: "Concussion",
                            icon: "spell_fire_fireball",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Lightning Bolt, Chain Lightning and Shock spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "earths_grasp",
                            name: "Earth's Grasp",
                            icon: "spell_nature_stoneclawtotem",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the health of your Stoneclaw Totem by {value1}% and the radius of your Earthbind Totem by {value2}%.",
                                {
                                    value1: [25, 50],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "elemental_warding",
                            name: "Elemental Warding",
                            icon: "spell_nature_spiritarmor",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces damage taken from Fire, Frost and Nature effects by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "call_of_flame",
                            name: "Call of Flame",
                            icon: "spell_fire_immolation",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire Totems by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "elemental_focus",
                            name: "Elemental Focus",
                            icon: "spell_shadow_manaburn",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "After landing a critical strike with a Fire, Frost, or Nature damage spell, you enter a Clearcasting state.  The Clearcasting state reduces the mana cost of your next 2 damage spells by 40%."
                            ]
                        },
                        {
                            id: "reverberation",
                            name: "Reverberation",
                            icon: "spell_frost_frostward",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Shock spells by {value} sec.",
                                {
                                    value: [0.2, 0.4, 0.6, 0.8, 1]
                                }
                            ]
                        },
                        {
                            id: "call_of_thunder",
                            name: "Call of Thunder",
                            icon: "spell_nature_callstorm",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Lightning Bolt and Chain Lightning spells by an additional {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_fire_totems",
                            name: "Improved Fire Totems",
                            icon: "spell_fire_sealoffire",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the delay before your Fire Nova Totem activates by {value1} sec. and decreases the threat generated by your Magma Totem by {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "eye_of_the_storm",
                            name: "Eye of the Storm",
                            icon: "spell_shadow_soulleech_2",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to gain the Focused Casting effect that lasts for 6 sec after being the victim of a melee or ranged critical strike.  The Focused Casting effect prevents you from losing casting time on Shaman spells when taking damage.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "elemental_devastation",
                            name: "Elemental Devastation",
                            icon: "classic_spell_fire_elementaldevastation",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your offensive spell crits will increase your chance to get a critical strike with melee attacks by {value}% for 10 sec.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "storm_reach",
                            name: "Storm Reach",
                            icon: "spell_nature_stormreach",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Lightning Bolt and Chain Lightning spells by {value} yards.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "elemental_fury",
                            name: "Elemental Fury",
                            icon: "spell_fire_volcano",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Searing, Magma, and Fire Nova Totems and your Fire, Frost, and Nature spells by 100%."
                            ]
                        },
                        {
                            id: "unrelenting_storm",
                            name: "Unrelenting Storm",
                            icon: "spell_nature_unrelentingstorm",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Regenerate mana equal to {value}% of your Intellect every 5 sec, even while casting.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "elemental_precision",
                            name: "Elemental Precision",
                            icon: "spell_nature_elementalprecision_1",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with Fire, Frost and Nature spells by {value1}% and reduces the threat caused by Fire, Frost and Nature spells by {value2}%.",
                                {
                                    value1: [2, 4, 6],
                                    value2: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "lightning_mastery",
                            name: "Lightning Mastery",
                            icon: "spell_lightning_lightningbolt01",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "call_of_thunder",
                            description: [
                                "Reduces the cast time of your Lightning Bolt and Chain Lightning spells by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "elemental_mastery",
                            name: "Elemental Mastery",
                            icon: "spell_nature_wispheal",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "elemental_fury",
                            description: [
                                "When activated, this spell gives your next Fire, Frost, or Nature damage spell a 100% critical strike chance and reduces the mana cost by 100%."
                            ]
                        },
                        {
                            id: "elemental_shields",
                            name: "Elemental Shields",
                            icon: "spell_nature_elementalshields",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you will be critically hit by melee and ranged attacks by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "lightning_overload",
                            name: "Lightning Overload",
                            icon: "spell_nature_lightningoverload",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Lightning Bolt and Chain Lightning spells a {value}% chance to cast a second, similar spell on the same target at no additional cost that causes half damage and no threat.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "totem_of_wrath",
                            name: "Totem of Wrath",
                            icon: "spell_fire_totemofwrath",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "lightning_overload",
                            description: [
                                "Summons a Totem of Wrath with 5 health at the feet of the caster.  The totem increases the chance to hit and critically strike with spells by 3% for all party members within 20 yards.  Lasts 2 min."
                            ]
                        }
                    ],
                    // shaman - tbc
                    Enhancement: [
                        {
                            id: "ancestral_knowledge",
                            name: "Ancestral Knowledge",
                            icon: "spell_shadow_grimward",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum Mana by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "shield_specialization",
                            name: "Shield Specialization",
                            icon: "inv_shield_06",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to block attacks with a shield by {block}% and increases the amount blocked by {blocked}%.",
                                {
                                    block: [1, 2, 3, 4, 5],
                                    blocked: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "guardian_totems",
                            name: "Guardian Totems",
                            icon: "spell_nature_stoneskintotem",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of damage reduced by your Stoneskin Totem and Windwall Totem by {damage}% and reduces the cooldown of your Grounding Totem by {cooldown} sec.",
                                {
                                    damage: [10, 20],
                                    cooldown: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "thundering_strikes",
                            name: "Thundering Strikes",
                            icon: "ability_thunderbolt",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Improves your chance to get a critical strike with your weapon attacks by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_ghost_wolf",
                            name: "Improved Ghost Wolf",
                            icon: "spell_nature_spiritwolf",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Ghost Wolf spell by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_lightning_shield",
                            name: "Improved Lightning Shield",
                            icon: "spell_nature_lightningshield",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Lightning Shield orbs by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "enhancing_totems",
                            name: "Enhancing Totems",
                            icon: "spell_nature_earthbindtotem",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Strength of Earth and Grace of Air Totems by {value}%.",
                                {
                                    value: [8, 15]
                                }
                            ]
                        },
                        {
                            id: "shamanistic_focus",
                            name: "Shamanistic Focus",
                            icon: "spell_nature_elementalabsorption",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "After landing a melee critical strike, you enter a Focused state.  The Focused state reduces the mana cost of your next Shock spell by 60%."
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_nature_mirrorimage",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to dodge by an additional {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "flurry",
                            name: "Flurry",
                            icon: "ability_ghoulfrenzy",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "thundering_strikes",
                            description: [
                                "Increases your attack speed by {value}% for your next 3 swings after dealing a critical strike.",
                                {
                                    value: [10, 15, 20, 25, 30]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {armor}%, and reduces the duration of movement slowing effects on you by 10%.",
                                {
                                    armor: [2, 4, 6, 8, 10],
                                    slow: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_weapon_totems",
                            name: "Improved Weapon Totems",
                            icon: "spell_fire_enchantweapon",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Windfury Totem by {windfury}% and increases the damage caused by your Flametongue Totem by {flametongue}%.",
                                {
                                    windfury: [15, 30],
                                    flametongue: [6, 12]
                                }
                            ]
                        },
                        {
                            id: "spirit_weapons",
                            name: "Spirit Weapons",
                            icon: "ability_parry",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Gives a chance to parry enemy melee attacks and reduces the threat generated by your melee attacks by 30%."
                            ]
                        },
                        {
                            id: "elemental_weapons",
                            name: "Elemental Weapons",
                            icon: "spell_fire_flametounge",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Rockbiter Weapon by {rockbiter}%, your Windfury Weapon effect by {windfury}% and increases the damage caused by your Flametongue Weapon and Frostbrand Weapon by {flamefrost}%.",
                                {
                                    rockbiter: [7, 14, 20],
                                    windfury: [13, 27, 40],
                                    flamefrost: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "mental_quickness",
                            name: "Mental Quickness",
                            icon: "spell_nature_mentalquickness",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your instant cast Shaman spells by {cost}% and increases your spell damage and healing by an amount equal to {attackpower}% of your attack power.",
                                {
                                    cost: [2, 4, 6],
                                    attackpower: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "weapon_mastery",
                            name: "Weapon Mastery",
                            icon: "ability_hunter_swiftstrike",
                            row: 5,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with all weapons by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwieldspecialization",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "dual_wield",
                            description: [
                                "Increases your chance to hit while dual wielding by an additional {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "dual_wield",
                            name: "Dual Wield",
                            icon: "ability_dualwield",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "spirit_weapons",
                            description: [
                                "Allows one-hand and off-hand weapons to be equipped in the off-hand."
                            ]
                        },
                        {
                            id: "stormstrike",
                            name: "Stormstrike",
                            icon: "ability_shaman_stormstrike",
                            row: 6,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "elemental_weapons",
                            description: [
                                "Instantly attack with both weapons.  In addition, the next 2 sources of Nature damage dealt to the target are increased by 20%.  Lasts 12 sec."
                            ]
                        },
                        {
                            id: "unleashed_rage",
                            name: "Unleashed Rage",
                            icon: "spell_nature_unleashedrage",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Causes your critical hits with melee attacks to increase all party members' melee attack power by {value}% if within 20 yards of the Shaman.  Lasts 10 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "shamanistic_rage",
                            name: "Shamanistic Rage",
                            icon: "spell_nature_shamanrage",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by 30% and gives your successful melee attacks a chance to regenerate mana equal to 30% of your attack power.  Lasts 15 sec."
                            ]
                        }
                    ],
                    // shaman - tbc
                    Restoration: [
                        {
                            id: "improved_healing_wave",
                            name: "Improved Healing Wave",
                            icon: "spell_nature_magicimmunity",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Healing Wave spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "tidal_focus",
                            name: "Tidal Focus",
                            icon: "spell_frost_manarecharge",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your healing spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_reincarnation",
                            name: "Improved Reincarnation",
                            icon: "spell_nature_reincarnation",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Reincarnation spell by {value} min and increases the amount of health and mana you reincarnate with by an additional {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "ancestral_healing",
                            name: "Ancestral Healing",
                            icon: "spell_nature_undyingstrength",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your target's armor value by {value}% for 15 sec after getting a critical effect from one of your healing spells.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "totemic_focus",
                            name: "Totemic Focus",
                            icon: "spell_nature_moonglow",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your totems by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "natures_guidance",
                            name: "Nature's Guidance",
                            icon: "spell_frost_stun",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with melee attacks and spells by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "healing_focus",
                            name: "Healing Focus",
                            icon: "spell_nature_healingwavelesser",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while casting any Shaman healing spell.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "totemic_mastery",
                            name: "Totemic Mastery",
                            icon: "spell_nature_nullward",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The radius of your totems that affect friendly targets is increased to 30 yards."
                            ]
                        },
                        {
                            id: "healing_grace",
                            name: "Healing Grace",
                            icon: "spell_nature_healingtouch",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your healing spells by {value1}% and reduces the chance your spells will be dispelled by {value2}%.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "restorative_totems",
                            name: "Restorative Totems",
                            icon: "spell_nature_manaregentotem",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Mana Spring and Healing Stream Totems by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "tidal_mastery",
                            name: "Tidal Mastery",
                            icon: "spell_nature_tranquility",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your healing and lightning spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "healing_way",
                            name: "Healing Way",
                            icon: "classic_spell_nature_healingway",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Healing Wave spells have a {value}% chance to increase the effect of subsequent Healing Wave spells on that target by 6% for 15 sec.  This effect will stack up to 3 times.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "natures_swiftness",
                            name: "Nature's Swiftness",
                            icon: "spell_nature_ravenform",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, your next Nature spell with a casting time less than 10 sec. becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "focused_mind",
                            name: "Focused Mind",
                            icon: "spell_nature_focusedmind",
                            row: 4,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of any Silence or Interrupt effects used against the Shaman by {value}%. This effect does not stack with other similar effects.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "purification",
                            name: "Purification",
                            icon: "spell_frost_wizardmark",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "mana_tide_totem",
                            name: "Mana Tide Totem",
                            icon: "spell_frost_summonwaterelemental",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "restorative_totems",
                            description: [
                                "Summons a Mana Tide Totem with 5 health at the feet of the caster for 12 sec that restores 6% of total mana every 3 seconds to group members within 20 yards."
                            ]
                        },
                        {
                            id: "natures_guardian",
                            name: "Nature's Guardian",
                            icon: "spell_nature_natureguardian",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Whenever a damaging attack is taken that reduces you below 30% health, you have a {value}% chance to heal 10% of your total health and reduce your threat level on that target.  5 second cooldown.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "natures_blessing",
                            name: "Nature's Blessing",
                            icon: "spell_nature_natureblessing",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage and healing by an amount equal to {value}% of your Intellect.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_chain_heal",
                            name: "Improved Chain Heal",
                            icon: "spell_nature_healingwavegreater",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Chain Heal spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "earth_shield",
                            name: "Earth Shield",
                            icon: "spell_nature_skinofearth",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "natures_blessing",
                            description: [
                                "Protects the target with an earthen shield, giving a 30% chance of ignoring spell interruption when damaged and causing attacks to heal the shielded target for 150.  This effect can only occur once every few seconds.  6 charges.  Lasts 10 min.  Earth Shield can only be placed on one target at a time and only one Elemental Shield can be active on a target at a time."
                            ]
                        }
                    ]
                },
                warlock: {
                    // warlock - tbc
                    Affliction: [
                        {
                            id: "suppression",
                            name: "Suppression",
                            icon: "spell_shadow_unsummonbuilding",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance for enemies to resist your Affliction spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_corruption",
                            name: "Improved Corruption",
                            icon: "spell_shadow_abominationexplosion",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Corruption spell by {value} sec.",
                                {
                                    value: [0.4, 0.8, 1.2, 1.6, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_curse_of_weakness",
                            name: "Improved Curse of Weakness",
                            icon: "spell_shadow_curseofmannoroth",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Curse of Weakness by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_drain_soul",
                            name: "Improved Drain Soul",
                            icon: "spell_shadow_haunting",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Returns {value1}% of your maximum mana if the target is killed by you while you drain its soul.  In addition, your Affliction spells generate {value2}% less threat.",
                                {
                                    value1: [7, 15],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_life_tap",
                            name: "Improved Life Tap",
                            icon: "spell_shadow_burningspirit",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Mana awarded by your Life Tap spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "soul_siphon",
                            name: "Soul Siphon",
                            icon: "spell_shadow_lifedrain02",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount drained by your Drain Life spell by an additional {value1}% for each Affliction effect on the target, up to a maximum of {value2}% additional effect.",
                                {
                                    value1: [2, 4],
                                    value2: [24, 60]
                                }
                            ]
                        },
                        {
                            id: "improved_curse_of_agony",
                            name: "Improved Curse of Agony",
                            icon: "spell_shadow_curseofsargeras",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Curse of Agony by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "fel_concentration",
                            name: "Fel Concentration",
                            icon: "spell_shadow_fingerofdeath",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to avoid interruption caused by damage while channeling the Drain Life, Drain Mana, or Drain Soul spell.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "amplify_curse",
                            name: "Amplify Curse",
                            icon: "spell_shadow_contagion",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your next Curse of Doom or Curse of Agony by 50%, or your next Curse of Exhaustion by an additional 20%.  Lasts 30 sec."
                            ]
                        },
                        {
                            id: "grim_reach",
                            name: "Grim Reach",
                            icon: "spell_shadow_callofbone",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Affliction spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "nightfall",
                            name: "Nightfall",
                            icon: "spell_shadow_twilight",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Corruption and Drain Life spells a {value}% chance to cause you to enter a Shadow Trance state after damaging the opponent.  The Shadow Trance state reduces the casting time of your next Shadow Bolt spell by 100%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "empowered_corruption",
                            name: "Empowered Corruption",
                            icon: "spell_shadow_abominationexplosion",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Corruption spell gains an additional {value}% of your bonus spell damage effects.",
                                {
                                    value: [12, 24, 36]
                                }
                            ]
                        },
                        {
                            id: "shadow_embrace",
                            name: "Shadow Embrace",
                            icon: "spell_shadow_shadowembrace",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Corruption, Curse of Agony, Siphon Life and Seed of Corruption spells also cause the Shadow Embrace effect, which reduces physical damage caused by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "siphon_life",
                            name: "Siphon Life",
                            icon: "spell_shadow_requiem",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Transfers 15 health from the target to the caster every 3 sec.  Lasts 30 sec."
                            ]
                        },
                        {
                            id: "curse_of_exhaustion",
                            name: "Curse of Exhaustion",
                            icon: "spell_shadow_grimward",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "amplify_curse",
                            description: [
                                "Reduces the target's movement speed by 30% for 12 sec.  Only one Curse per Warlock can be active on any one target."
                            ]
                        },
                        {
                            id: "shadow_mastery",
                            name: "Shadow Mastery",
                            icon: "spell_shadow_shadetruesight",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "siphon_life",
                            description: [
                                "Increases the damage dealt or life drained by your Shadow spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "contagion",
                            name: "Contagion",
                            icon: "spell_shadow_painfulafflictions",
                            row: 6,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of Curse of Agony, Corruption and Seed of Corruption by {value1}% and reduces the chance your Affliction spells will be dispelled by an additional {value2}%.",
                                {
                                    value1: [1, 2, 3, 4, 5],
                                    value2: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "dark_pact",
                            name: "Dark Pact",
                            icon: "spell_shadow_darkritual",
                            row: 6,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Drains 305 of your pet's Mana, returning 100% to you."
                            ]
                        },
                        {
                            id: "improved_howl_of_terror",
                            name: "Improved Howl of Terror",
                            icon: "spell_shadow_deathscream",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Howl of Terror spell by {value} sec.",
                                {
                                    value: [0.8, 1.5]
                                }
                            ]
                        },
                        {
                            id: "malediction",
                            name: "Malediction",
                            icon: "spell_shadow_curseofachimonde",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage bonus effect of your Curse of the Elements spell by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "unstable_affliction",
                            name: "Unstable Affliction",
                            icon: "spell_shadow_unstableaffliction_3",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "contagion",
                            description: [
                                "Shadow energy slowly destroys the target, causing 660 damage over 18 sec.  In addition, if the Unstable Affliction is dispelled it will cause 990 damage to the dispeller and silence them for 5 sec."
                            ]
                        }
                    ],
                    // warlock - tbc
                    Demonology: [
                        {
                            id: "improved_healthstone",
                            name: "Improved Healthstone",
                            icon: "inv_stone_04",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Health restored by your Healthstone by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_imp",
                            name: "Improved Imp",
                            icon: "spell_shadow_summonimp",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Imp's Firebolt, Fire Shield, and Blood Pact spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "demonic_embrace",
                            name: "Demonic Embrace",
                            icon: "spell_shadow_metamorphosis",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina by {stamina}% but reduces your total Spirit by {spirit}%.",
                                {
                                    stamina: [3, 6, 9, 12, 15],
                                    spirit: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_health_funnel",
                            name: "Improved Health Funnel",
                            icon: "spell_shadow_lifedrain",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Health transferred by your Health Funnel spell by {value}% and reduces the initial health cost by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_voidwalker",
                            name: "Improved Voidwalker",
                            icon: "spell_shadow_summonvoidwalker",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your Voidwalker's Torment, Consume Shadows, Sacrifice and Suffering spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "fel_intellect",
                            name: "Fel Intellect",
                            icon: "spell_holy_magicalsentry",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the Intellect of your Imp, Voidwalker, Succubus, Felhunter and Felguard by {intellect}% and increases your maximum mana by {mana}%.",
                                {
                                    intellect: [5, 10, 15],
                                    mana: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "improved_succubus",
                            name: "Improved Succubus",
                            icon: "spell_shadow_summonsuccubus",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Succubus' Lash of Pain and Soothing Kiss spells by {effect}%, and increases the duration of your Succubus' Seduction and Lesser Invisibility spells by {duration}%.",
                                {
                                    effect: [10, 20, 30],
                                    duration: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "fel_domination",
                            name: "Fel Domination",
                            icon: "spell_nature_removecurse",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your next Imp, Voidwalker, Succubus, Felhunter or Felguard Summon spell has its casting time reduced by 5.5 sec and its Mana cost reduced by 50%."
                            ]
                        },
                        {
                            id: "fel_stamina",
                            name: "Fel Stamina",
                            icon: "spell_shadow_antishadow",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the Stamina of your Imp, Voidwalker, Succubus, Felhunter and Felguard by {stamina}% and increases your maximum health by {maxhealth}%.",
                                {
                                    stamina: [5, 10, 15],
                                    maxhealth: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "demonic_aegis",
                            name: "Demonic Aegis",
                            icon: "spell_shadow_ragingscream",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your Demon Armor and Fel Armor spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "master_summoner",
                            name: "Master Summoner",
                            icon: "spell_shadow_impphaseshift",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "fel_domination",
                            description: [
                                "Reduces the casting time of your Imp, Voidwalker, Succubus, Felhunter and Fel Guard Summoning spells by {casttime} sec and the Mana cost by {cost}%.",
                                {
                                    casttime: [2, 4],
                                    cost: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "unholy_power",
                            name: "Unholy Power",
                            icon: "spell_shadow_shadowworddominate",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Voidwalker, Succubus, Felhunter and Felguard's melee attacks and your Imp's Firebolt by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_enslave_demon",
                            name: "Improved Enslave Demon",
                            icon: "spell_shadow_enslavedemon",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Attack Speed and Casting Speed penalty of your Enslave Demon spell by {value}% and reduces the resist chance by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "demonic_sacrifice",
                            name: "Demonic Sacrifice",
                            icon: "spell_shadow_psychicscream",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, sacrifices your summoned demon to grant you an effect that lasts 30 min.  The effect is canceled if any Demon is summoned.<br><br>Imp: Increases your Fire damage by 15%.<br><br>Voidwalker: Restores 2% of total health every 4 sec.<br><br>Succubus: Increases your Shadow damage by 15%.<br><br>Felhunter: Restores 3% of total mana every 4 sec.<br><br>Felguard: Increases your Shadow damage by 10% and restores 2% of total mana every 4 sec."
                            ]
                        },
                        {
                            id: "master_conjuror",
                            name: "Master Conjuror",
                            icon: "inv_ammo_firetar",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the bonus Fire damage from Firestones and the Firestone effect by {value}% and increases the spell critical strike rating bonus of your Spellstone by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "mana_feed",
                            name: "Mana Feed",
                            icon: "spell_shadow_manafeed",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you gain mana from Drain Mana or Life Tap spells, your pet gains {value}% of the mana you gain.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "master_demonologist",
                            name: "Master Demonologist",
                            icon: "spell_shadow_shadowpact",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "unholy_power",
                            description: [
                                "Grants both the Warlock and the summoned demon an effect as long as that demon is active.<br><br>Imp - Reduces threat caused by {imp}%.<br><br>Voidwalker - Reduces physical damage taken by {voidsucc}%.<br><br>Succubus - Increases all damage caused by {voidsucc}%.<br><br>Felhunter - Increases all resistances by {felhunter} per level.<br><br>Felguard - Increases all damage caused by {felguard}% and all resistances by .{felguard} per level.",
                                {
                                    imp: [4, 8, 12, 16, 20],
                                    voidsucc: [2, 4, 6, 8, 10],
                                    felhunter: [".2", ".4", ".6", ".8", "1"],
                                    felguard: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "demonic_resilience",
                            name: "Demonic Resilience",
                            icon: "spell_shadow_demonicfortitude",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you'll be critically hit by melee and spells by {crit}% and reduces all damage your summoned demon takes by {damage}%.",
                                {
                                    crit: [1, 2, 3],
                                    damage: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "soul_link",
                            name: "Soul Link",
                            icon: "spell_shadow_gathershadows",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "demonic_sacrifice",
                            description: [
                                "When active, 20% of all damage taken by the caster is taken by your Imp, Voidwalker, Succubus, Felhunter, Felguard, or enslaved demon instead.  That damage cannot be prevented.  In addition, both the demon and master will inflict 5% more damage. Lasts as long as the demon is active and controlled."
                            ]
                        },
                        {
                            id: "demonic_knowledge",
                            name: "Demonic Knowledge",
                            icon: "spell_shadow_improvedvampiricembrace",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage by an amount equal to {value}% of the total of your active demon's Stamina plus Intellect.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "demonic_tactics",
                            name: "Demonic Tactics",
                            icon: "spell_shadow_demonictactics",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases melee and spell critical strike chance for you and your summoned demon by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "summon_felguard",
                            name: "Summon Felguard",
                            icon: "spell_shadow_summonfelguard",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summons a Felguard under the command of the Warlock."
                            ]
                        }
                    ],
                    // warlock - tbc
                    Destruction: [
                        {
                            id: "improved_shadow_bolt",
                            name: "Improved Shadow Bolt",
                            icon: "spell_shadow_shadowbolt",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Shadow Bolt spell by {damage}%, and your Shadow Bolt has a {chance}% chance to cause your target to be vulnerable to spell damage, increasing spell critical strike chance against that target by 5%. Effect lasts 30 sec.",
                                {
                                    damage: [2, 4, 6, 8, 10],
                                    chance: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "cataclysm",
                            name: "Cataclysm",
                            icon: "spell_fire_windsofwoe",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Destruction spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "bane",
                            name: "Bane",
                            icon: "spell_shadow_deathpact",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Shadow Bolt and Immolate spells by {value1} sec and your Soul Fire spell by {value2} sec.",
                                {
                                    value1: [0.1, 0.2, 0.3, 0.4, 0.5],
                                    value2: [0.4, 0.8, 1.2, 1.6, 2]
                                }
                            ]
                        },
                        {
                            id: "aftermath",
                            name: "Aftermath",
                            icon: "spell_fire_fire",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Destruction spells a {value}% chance to daze the target for 5 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_firebolt",
                            name: "Improved Firebolt",
                            icon: "spell_fire_firebolt",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Imp's Firebolt spell by {value} sec.",
                                {
                                    value: [0.25, 0.5]
                                }
                            ]
                        },
                        {
                            id: "improved_lash_of_pain",
                            name: "Improved Lash of Pain",
                            icon: "spell_shadow_curse",
                            row: 2,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Succubus' Lash of Pain spell by {value} sec.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "devastation",
                            name: "Devastation",
                            icon: "spell_fire_flameshock",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Destruction spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "shadowburn",
                            name: "Shadowburn",
                            icon: "spell_shadow_scourgebuild",
                            row: 2,
                            col: 3,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly blasts the target for 91 to 104 Shadow damage.  If the target dies within 5 sec of Shadowburn, and yields experience or honor, the caster gains a Soul Shard."
                            ]
                        },
                        {
                            id: "intensity",
                            name: "Intensity",
                            icon: "spell_fire_lavaspawn",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to resist interruption caused by damage while casting or channeling any Destruction spell.",
                                {
                                    value: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "destructive_reach",
                            name: "Destructive Reach",
                            icon: "spell_shadow_corpseexplode",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Destruction spells by {value1}% and reduces threat caused by Destruction spells by {value2}%.",
                                {
                                    value1: [10, 20],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_searing_pain",
                            name: "Improved Searing Pain",
                            icon: "spell_fire_soulburn",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Searing Pain spell by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "pyroclasm",
                            name: "Pyroclasm",
                            icon: "spell_fire_volcano",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "intensity",
                            description: [
                                "Gives your Rain of Fire, Hellfire, and Soul Fire spells a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [13, 26]
                                }
                            ]
                        },
                        {
                            id: "improved_immolate",
                            name: "Improved Immolate",
                            icon: "spell_fire_immolation",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the initial damage of your Immolate spell by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "ruin",
                            name: "Ruin",
                            icon: "spell_shadow_shadowwordpain",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "devastation",
                            description: [
                                "Increases the critical strike damage bonus of your Destruction spells by 100%."
                            ]
                        },
                        {
                            id: "nether_protection",
                            name: "Nether Protection",
                            icon: "spell_shadow_netherprotection",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "After being hit with a Shadow or Fire spell, you have a {value}% chance to become immune to Shadow and Fire spells for 4 sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "emberstorm",
                            name: "Emberstorm",
                            icon: "spell_fire_selfdestruct",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire spells by {value}% and reduces the cast time of your Incinerate spell by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "backlash",
                            name: "Backlash",
                            icon: "spell_fire_playingwithfire",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance with spells by an additional {value1}% and gives you a {value2}% chance when hit by a physical attack to reduce the cast time of your next Shadow Bolt or Incinerate spell by 100%.  This effect lasts 8 sec and will not occur more than once every 8 seconds.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "conflagrate",
                            name: "Conflagrate",
                            icon: "spell_fire_fireball",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "improved_immolate",
                            description: [
                                "Ignites a target that is already afflicted by your Immolate, dealing 249 to 316 Fire damage and consuming the Immolate spell."
                            ]
                        },
                        {
                            id: "soul_leech",
                            name: "Soul Leech",
                            icon: "spell_shadow_soulleech_3",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Shadow Bolt, Shadowburn, Soul Fire, Incinerate, Searing Pain and Conflagrate spells a {value}% chance to return health equal to 20% of the damage caused.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "shadow_and_flame",
                            name: "Shadow and Flame",
                            icon: "spell_shadow_shadowandflame",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Shadow Bolt and Incinerate spells gain an additional {value}% of your bonus spell damage effects.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "shadowfury",
                            name: "Shadowfury",
                            icon: "spell_shadow_shadowfury",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "shadow_and_flame",
                            description: [
                                "Shadowfury is unleashed, causing 357 to 422 Shadow damage and stunning all enemies within 8 yds for 2 sec."
                            ]
                        }
                    ]
                },
                warrior: {
                    // warrior - tbc
                    Arms: [
                        {
                            id: "improved_heroic_strike",
                            name: "Improved Heroic Strike",
                            icon: "ability_rogue_ambush",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Heroic Strike ability by {value}.",
                                {
                                    value: ["1 rage point", "2 rage points", "3 rage points"]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_rend",
                            name: "Improved Rend",
                            icon: "ability_gouge",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the bleed damage done by your Rend ability by {value}%.",
                                {
                                    value: [25, 50, 75]
                                }
                            ]
                        },
                        {
                            id: "improved_charge",
                            name: "Improved Charge",
                            icon: "ability_warrior_charge",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of rage generated by your Charge ability by {value}.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "iron_will",
                            name: "Iron Will",
                            icon: "spell_magic_magearmor",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to resist Stun and Charm effects by an additional {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_thunder_clap",
                            name: "Improved Thunder Clap",
                            icon: "ability_thunderclap",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Thunder Clap ability by {ragepoints} and increases the damage by {damage}% and the slowing effect by an additional {slow}%.",
                                {
                                    ragepoints: ["1 rage point", "2 rage points", "4 rage points"],
                                    damage: [40, 70, 100],
                                    slow: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_overpower",
                            name: "Improved Overpower",
                            icon: "inv_sword_05",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Overpower ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "anger_management",
                            name: "Anger Management",
                            icon: "spell_holy_blessingofstamina",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Generates 1 rage per 3 seconds while in combat."
                            ]
                        },
                        {
                            id: "deep_wounds",
                            name: "Deep Wounds",
                            icon: "ability_backstab",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your critical strikes cause the opponent to bleed, dealing {value}% of your melee weapon's average damage over 6 sec.",
                                {
                                    value: [16, 32, 48]
                                }
                            ]
                        },
                        {
                            id: "two_handed_weapon_specialization",
                            name: "Two-Handed Weapon Specialization",
                            icon: "inv_axe_09",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "impale",
                            name: "Impale",
                            icon: "ability_searingarrow",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "deep_wounds",
                            description: [
                                "Increases the critical strike damage bonus of your abilities by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "poleaxe_specialization",
                            name: "Poleaxe Specialization",
                            icon: "inv_axe_06",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with Axes and Polearms by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "death_wish",
                            name: "Death Wish",
                            icon: "spell_shadow_deathpact",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, increases your physical damage by 20% and makes you immune to Fear effects, but increases all damage taken by 5%.  Lasts 30 sec."
                            ]
                        },
                        {
                            id: "mace_specialization",
                            name: "Mace Specialization",
                            icon: "inv_mace_01",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your melee attacks a chance to stun your target for 3 sec and generate 7 rage when using a Mace.{value}",
                                {
                                    value: ["", "  More effective than Mace Specialization (Rank 1).", "  More effective than Mace Specialization (Rank 2).", "  More effective than Mace Specialization (Rank 3).", "  More effective than Mace Specialization (Rank 4)."]
                                }
                            ]
                        },
                        {
                            id: "sword_specialization",
                            name: "Sword Specialization",
                            icon: "inv_sword_27",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to get an extra attack on the same target after hitting your target with your Sword.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_intercept",
                            name: "Improved Intercept",
                            icon: "ability_rogue_sprint",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Intercept ability by {value} sec.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_hamstring",
                            name: "Improved Hamstring",
                            icon: "ability_shockwave",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Hamstring ability a {value}% chance to immobilize the target for 5 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_disciplines",
                            name: "Improved Disciplines",
                            icon: "ability_warrior_improveddisciplines",
                            row: 5,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Retaliation, Recklessness and Shield Wall abilities by {value1} min and increases their duration by {value2} sec.",
                                {
                                    value1: [4, 7, 10],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "blood_frenzy",
                            name: "Blood Frenzy",
                            icon: "ability_warrior_bloodfrenzy",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Rend and Deep Wounds abilities also increase all physical damage caused to that target by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "mortal_strike",
                            name: "Mortal Strike",
                            icon: "ability_warrior_savageblow",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "death_wish",
                            description: [
                                "A vicious strike that deals weapon damage plus 85 and wounds the target, reducing the effectiveness of any healing by 50% for 10 sec."
                            ]
                        },
                        {
                            id: "second_wind",
                            name: "Second Wind",
                            icon: "ability_hunter_harass",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Whenever you are struck by a Stun or Immobilize effect you will generate {value1} rage and {value2}% of your total health over 10 sec.",
                                {
                                    value1: [10, 20],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_mortal_strike",
                            name: "Improved Mortal Strike",
                            icon: "ability_warrior_savageblow",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "mortal_strike",
                            description: [
                                "Reduces the cooldown of your Mortal Strike ability by {cooldown} sec and increases the damage it causes by {damage}%.",
                                {
                                    cooldown: [0.2, 0.4, 0.6, 0.8, 1],
                                    damage: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "endless_rage",
                            name: "Endless Rage",
                            icon: "ability_warrior_endlessrage",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You generate 25% more rage from damage dealt."
                            ]
                        }
                    ],
                    // warrior - tbc
                    Fury: [
                        {
                            id: "booming_voice",
                            name: "Booming Voice",
                            icon: "spell_nature_purge",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the area of effect and duration of your Battle Shout, Demoralizing Shout and Commanding Shout by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "cruelty",
                            name: "Cruelty",
                            icon: "ability_rogue_eviscerate",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_demoralizing_shout",
                            name: "Improved Demoralizing Shout",
                            icon: "ability_warrior_warcry",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power reduction of your Demoralizing Shout by {value}%.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "unbridled_wrath",
                            name: "Unbridled Wrath",
                            icon: "spell_nature_stoneclawtotem",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a chance to generate an additional rage point when you deal melee damage with a weapon.{value}",
                                {
                                    value: ["", "  Effect occurs more often than Unbridled Wrath (Rank 1).", "  Effect occurs more often than Unbridled Wrath (Rank 2).", "  Effect occurs more often than Unbridled Wrath (Rank 3).", "  Effect occurs more often than Unbridled Wrath (Rank 4)."]
                                }
                            ]
                        },
                        {
                            id: "improved_cleave",
                            name: "Improved Cleave",
                            icon: "ability_warrior_cleave",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the bonus damage done by your Cleave ability by {value}%.",
                                {
                                    value: [40, 80, 120]
                                }
                            ]
                        },
                        {
                            id: "piercing_howl",
                            name: "Piercing Howl",
                            icon: "spell_shadow_deathscream",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes all enemies within 10 yards to be Dazed, reducing movement speed by 50% for 6 sec."
                            ]
                        },
                        {
                            id: "blood_craze",
                            name: "Blood Craze",
                            icon: "spell_shadow_summonimp",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Regenerates {value}% of your total Health over 6 sec after being the victim of a critical strike.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "commanding_presence",
                            name: "Commanding Presence",
                            icon: "spell_nature_focusedmind",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Battle Shout and the health bonus of your Commanding Shout by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwield",
                            row: 3,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your offhand weapon by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_execute",
                            name: "Improved Execute",
                            icon: "inv_sword_48",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the rage cost of your Execute ability by {value}.",
                                {
                                    value: [2, 5]
                                }
                            ]
                        },
                        {
                            id: "enrage",
                            name: "Enrage",
                            icon: "spell_shadow_unholyfrenzy",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% melee damage bonus for 12 sec up to a maximum of 12 swings after being the victim of a critical strike.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_slam",
                            name: "Improved Slam",
                            icon: "ability_warrior_decisivestrike",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the casting time of your Slam ability by {value} sec.",
                                {
                                    value: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "sweeping_strikes",
                            name: "Sweeping Strikes",
                            icon: "ability_rogue_slicedice",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your next 5 melee attacks strike an additional nearby opponent."
                            ]
                        },
                        {
                            id: "weapon_mastery",
                            name: "Weapon Mastery",
                            icon: "ability_warrior_weaponmastery",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance for your attacks to be dodged by {value1}% and reduces the duration of all Disarm effects used against you by {value2}%.  This does not stack with other Disarm duration reducing effects.",
                                {
                                    value1: [1, 2],
                                    value2: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_berserker_rage",
                            name: "Improved Berserker Rage",
                            icon: "spell_nature_ancestralguardian",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "The Berserker Rage ability will generate {value} rage when used.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "flurry",
                            name: "Flurry",
                            icon: "ability_ghoulfrenzy",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "enrage",
                            description: [
                                "Increases your attack speed by {value}% for your next 3 swings after dealing a melee critical strike.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "precision",
                            name: "Precision",
                            icon: "ability_marksmanship",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "bloodthirst",
                            name: "Bloodthirst",
                            icon: "spell_nature_bloodlust",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "sweeping_strikes",
                            description: [
                                "Instantly attack the target causing (Attack power * 50 / 100) damage.  In addition, the next 3 successful melee attacks will restore 1% of max health.  This effect lasts 8 sec.  Damage is based on your attack power."
                            ]
                        },
                        {
                            id: "improved_whirlwind",
                            name: "Improved Whirlwind",
                            icon: "ability_whirlwind",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Whirlwind ability by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_berserker_stance",
                            name: "Improved Berserker Stance",
                            icon: "ability_racial_avatar",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases attack power by {value}% and reduces threat caused by {value}% while in Berserker Stance.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "rampage",
                            name: "Rampage",
                            icon: "ability_warrior_rampage",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "bloodthirst",
                            description: [
                                "Increases ranged and melee critical hit chance of all party and raid members within 100 yds by 5%."
                            ]
                        }
                    ],
                    // warrior - tbc
                    Protection: [
                        {
                            id: "improved_bloodrage",
                            name: "Improved Bloodrage",
                            icon: "ability_racial_bloodrage",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the rage generated by your Bloodrage ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "tactical_mastery",
                            name: "Tactical Mastery",
                            icon: "spell_nature_enchantarmor",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You retain up to an additional {value1} of your rage points when you change stances.  Also greatly increases the threat generated by your Bloodthirst and Mortal Strike abilities when you are in Defensive Stance{value2}.",
                                {
                                    value1: [5, 10, 15],
                                    value2: ["", " (More effective than Rank 1)", " (More effective than Rank 2)"]
                                }
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_nature_mirrorimage",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Defense skill by {value}.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "shield_specialization",
                            name: "Shield Specialization",
                            icon: "inv_shield_06",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to block attacks with a shield by {block}% and has a {rage}% chance to generate 5 rage when a block, dodge, or parry occurs.",
                                {
                                    block: [1, 2, 3, 4, 5],
                                    rage: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "last_stand",
                            name: "Last Stand",
                            icon: "spell_holy_ashestoashes",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability temporarily grants you 30% of your maximum health for 20 sec.  After the effect expires, the health is lost."
                            ]
                        },
                        {
                            id: "improved_shield_block",
                            name: "Improved Shield Block",
                            icon: "ability_defend",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "shield_specialization",
                            description: [
                                "Allows your Shield Block ability to block an additional attack and increases the duration by 1 second."
                            ]
                        },
                        {
                            id: "improved_revenge",
                            name: "Improved Revenge",
                            icon: "ability_warrior_revenge",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Revenge ability a {value}% chance to stun the target for 3 sec.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "defiance",
                            name: "Defiance",
                            icon: "ability_warrior_innerrage",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the threat generated by your attacks by {value1}% while in Defensive Stance and increases your expertise by {value2}.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_sunder_armor",
                            name: "Improved Sunder Armor",
                            icon: "ability_warrior_sunder",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Sunder Armor and Devastate abilities by {value}.",
                                {
                                    value: ["1 rage point", "2 rage points", "3 rage points"]
                                }
                            ]
                        },
                        {
                            id: "improved_disarm",
                            name: "Improved Disarm",
                            icon: "ability_warrior_disarm",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Disarm ability by {value} sec.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "improved_taunt",
                            name: "Improved Taunt",
                            icon: "spell_nature_reincarnation",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Taunt ability by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_shield_wall",
                            name: "Improved Shield Wall",
                            icon: "ability_warrior_shieldwall",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect duration of your Shield Wall ability by {value} secs.",
                                {
                                    value: [3, 5]
                                }
                            ]
                        },
                        {
                            id: "concussion_blow",
                            name: "Concussion Blow",
                            icon: "ability_thunderbolt",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Stuns the opponent for 5 sec and deals (38 / 100 * Attack power) damage (based on attack power)."
                            ]
                        },
                        {
                            id: "improved_shield_bash",
                            name: "Improved Shield Bash",
                            icon: "ability_warrior_shieldbash",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Shield Bash ability a {value}% chance to silence the target for 3 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "shield_mastery",
                            name: "Shield Mastery",
                            icon: "ability_warrior_shieldmastery",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of damage absorbed by your shield by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "one_handed_weapon_specialization",
                            name: "One-Handed Weapon Specialization",
                            icon: "inv_sword_20",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases physical damage you deal when a one-handed melee weapon is equipped by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_defensive_stance",
                            name: "Improved Defensive Stance",
                            icon: "ability_warrior_defensivestance",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces all spell damage taken while in Defensive Stance by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "shield_slam",
                            name: "Shield Slam",
                            icon: "inv_shield_05",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "concussion_blow",
                            description: [
                                "Slam the target with your shield, causing 225 to 235 damage, modified by your shield block value, and dispels 1 magic effect on the target.  Also causes a high amount of threat."
                            ]
                        },
                        {
                            id: "focused_rage",
                            name: "Focused Rage",
                            icon: "ability_warrior_focusedrage",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the rage cost of your offensive abilities by {value}.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "vitality",
                            name: "Vitality",
                            icon: "inv_helmet_21",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina by {stamina}% and your total Strength by {strength}%.",
                                {
                                    stamina: [1, 2, 3, 4, 5],
                                    strength: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "devastate",
                            name: "Devastate",
                            icon: "inv_sword_11",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Sunder the target's armor causing the Sunder Armor effect.  In addition, causes 50% of weapon damage plus 15 for each application of Sunder Armor on the target.  The Sunder Armor effect can stack up to 5 times."
                            ]
                        }
                    ]
                }
            },
            wotlk: {
                deathknight: {
                    // deathknight - wotlk
                    Blood: [
                        {
                            id: "butchery",
                            name: "Butchery",
                            icon: "inv_axe_68",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Whenever you kill an enemy that grants experience or honor, you generate up to {kill} runic power.  In addition, you generate {incombat} runic power per 5 sec while in combat.",
                                {
                                    kill: [10, 20],
                                    incombat: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "subversion",
                            name: "Subversion",
                            icon: "spell_deathknight_subversion",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of Blood Strike, Scourge Strike, Heart Strike and Obliterate by {value1}%, and reduces threat generated while in Blood or Unholy Presence by {value2}%.",
                                {
                                    value1: [3, 6, 9],
                                    value2: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "blade_barrier",
                            name: "Blade Barrier",
                            icon: "ability_upgrademoonglaive",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Whenever your Blood Runes are on cooldown, you gain the Blade Barrier effect, which decreases damage taken by {value}% for the next 10 sec.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "bladed_armor",
                            name: "Bladed Armor",
                            icon: "inv_shoulder_36",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your attack power by {value} for every 180 armor value you have.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "scent_of_blood",
                            name: "Scent of Blood",
                            icon: "ability_rogue_bloodyeye",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a 15% chance after dodging, parrying or taking  direct damage to gain the Scent of Blood effect, causing your next {value} to generate 10 runic power.",
                                {
                                    value: ["melee hit", "2 melee hits", "3 melee hits"]
                                }
                            ]
                        },
                        {
                            id: "two_handed_weapon_specialization",
                            name: "Two-Handed Weapon Specialization",
                            icon: "inv_sword_68",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "rune_tap",
                            name: "Rune Tap",
                            icon: "spell_deathknight_runetap",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Converts 1 Blood Rune into 10% of your maximum health."
                            ]
                        },
                        {
                            id: "dark_conviction",
                            name: "Dark Conviction",
                            icon: "spell_deathknight_darkconviction",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to critically hit with weapons, spells and abilities by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "death_rune_mastery",
                            name: "Death Rune Mastery",
                            icon: "inv_sword_62",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Whenever you hit with Death Strike or Obliterate there is a 33% chance that the Frost and Unholy Runes will become Death Runes when they activate.  Death Runes count as a Blood, Frost or Unholy Rune.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_rune_tap",
                            name: "Improved Rune Tap",
                            icon: "spell_deathknight_runetap",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "rune_tap",
                            description: [
                                "Increases the health provided by Rune Tap by {value1}% and lowers its cooldown by {value2} sec.",
                                {
                                    value1: [33, 66, 100],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "spell_deflection",
                            name: "Spell Deflection",
                            icon: "spell_deathknight_spelldeflection",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a chance equal to your Parry chance of taking {value}% less damage from a direct damage spell.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "vendetta",
                            name: "Vendetta",
                            icon: "spell_deathknight_vendetta",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Heals you for up to {value}% of your maximum health whenever you kill a target that yields experience or honor.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "bloody_strikes",
                            name: "Bloody Strikes",
                            icon: "spell_deathknight_deathstrike",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of Blood Strike by {value1}% and Heart Strike by {value2}%, and increases the damage of Blood Boil by {value3}%.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [15, 30, 45],
                                    value3: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "veteran_of_the_third_war",
                            name: "Veteran of the Third War",
                            icon: "spell_misc_warsongfocus",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Strength by {value1}%, your Stamina by {value2}%, and your expertise by {value1}.",
                                {
                                    value1: [2, 4, 6],
                                    value2: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "mark_of_blood",
                            name: "Mark of Blood",
                            icon: "ability_hunter_rapidkilling",
                            row: 4,
                            col: 3,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Place a Mark of Blood on an enemy.  Whenever the marked enemy deals damage to a target, that target is healed for 4% of its maximum health.  Lasts for 20 sec or up to 20 hits."
                            ]
                        },
                        {
                            id: "bloody_vengeance",
                            name: "Bloody Vengeance",
                            icon: "ability_backstab",
                            row: 5,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "dark_conviction",
                            description: [
                                "Gives you a {value}% bonus to physical damage you deal for 30 sec after dealing a critical strike from a weapon swing, spell, or ability.  This effect stacks up to 3 times.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "abominations_might",
                            name: "Abomination's Might",
                            icon: "ability_warrior_intensifyrage",
                            row: 5,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the attack power by {value1}% of party and raid members within 100 yards.  Also increases your total Strength by {value2}%.",
                                {
                                    value1: [5, 10],
                                    value2: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "bloodworms",
                            name: "Bloodworms",
                            icon: "spell_shadow_soulleech",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your weapon hits have a {value}% chance to cause the target to spawn 2-4 Bloodworms.  Bloodworms attack your enemies, healing you as they do damage for 20 sec or until killed.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "unholy_frenzy",
                            name: "Unholy Frenzy",
                            icon: "spell_deathknight_bladedarmor",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Induces a friendly unit into a killing frenzy for 30 sec.  The target is Enraged, which increases their physical damage by 20%, but causes them to lose health equal to 1% of their maximum health every second."
                            ]
                        },
                        {
                            id: "improved_blood_presence",
                            name: "Improved Blood Presence",
                            icon: "spell_deathknight_bloodpresence",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "While in Frost Presence or Unholy Presence, you retain {value1}% healing from Blood Presence, and healing done to you is increased by {value2}% in Blood Presence.",
                                {
                                    value1: [2, 4],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_death_strike",
                            name: "Improved Death Strike",
                            icon: "spell_deathknight_butcher2",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Death Strike by {value1}%, increases its critical strike chance by {value2}%, and increases the healing granted by {value3}%.",
                                {
                                    value1: [15, 30],
                                    value2: [3, 6],
                                    value3: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "sudden_doom",
                            name: "Sudden Doom",
                            icon: "spell_shadow_painspike",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Blood Strikes and Heart Strikes have a {value}% chance to launch a free Death Coil at your target.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "vampiric_blood",
                            name: "Vampiric Blood",
                            icon: "spell_shadow_lifedrain",
                            row: 7,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Temporarily grants the Death Knight 15% of maximum health and increases the amount of health generated through spells and effects by 35% for 10 sec.  After the effect expires, the health is lost."
                            ]
                        },
                        {
                            id: "will_of_the_necropolis",
                            name: "Will of the Necropolis",
                            icon: "ability_creature_cursed_02",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Damage that would take you below 35% health or taken while you are at 35% health is reduced by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "heart_strike",
                            name: "Heart Strike",
                            icon: "inv_weapon_shortblade_40",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly strike the target and his nearest ally, causing 50% weapon damage plus 125 on the primary target, and 25% weapon damage plus 63 on the secondary target.  Each target takes 10% additional damage for each of your diseases active on that target."
                            ]
                        },
                        {
                            id: "might_of_mograine",
                            name: "Might of Mograine",
                            icon: "spell_deathknight_classicon",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Blood Boil, Blood Strike, Death Strike, and Heart Strike abilities by {value}%.",
                                {
                                    value: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "blood_gorged",
                            name: "Blood Gorged",
                            icon: "spell_nature_reincarnation",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "When you are above 75% health, you deal {value}% more damage.  In addition, your attacks ignore up to {value}% of your opponent's armor at all times.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "dancing_rune_weapon",
                            name: "Dancing Rune Weapon",
                            icon: "inv_sword_07",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summons a second rune weapon that fights on its own for 12 sec, doing the same attacks as the Death Knight but for 50% reduced damage and healing."
                            ]
                        }
                    ],
                    // deathknight - wotlk
                    Frost: [
                        {
                            id: "improved_icy_touch",
                            name: "Improved Icy Touch",
                            icon: "spell_deathknight_icetouch",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Icy Touch does an additional {damage}% damage and your Frost Fever reduces melee and ranged attack speed by an additional {speed}%.",
                                {
                                    damage: [5, 10, 15],
                                    speed: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "runic_power_mastery",
                            name: "Runic Power Mastery",
                            icon: "spell_arcane_arcane01",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum Runic Power by {value}.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value1}% and reduces the duration of all movement slowing effects by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "icy_reach",
                            name: "Icy Reach",
                            icon: "spell_frost_manarecharge",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Icy Touch, Chains of Ice and Howling Blast by {value} yards.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "black_ice",
                            name: "Black Ice",
                            icon: "spell_shadow_darkritual",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Frost and Shadow damage by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "nerves_of_cold_steel",
                            name: "Nerves of Cold Steel",
                            icon: "ability_dualwield",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with one-handed melee weapons by {value1}% and increases the damage done by your offhand weapon by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "icy_talons",
                            name: "Icy Talons",
                            icon: "spell_deathknight_icytalons",
                            row: 2,
                            col: 0,
                            ranks: 5,
                            requiresTalents: "improved_icy_touch",
                            description: [
                                "You leech heat from victims of your Frost Fever, so that when their melee attack speed is reduced, yours increases by 4% for the next 20 sec.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "lichborne",
                            name: "Lichborne",
                            icon: "spell_shadow_raisedead",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Draw upon unholy energy to become undead for 10 sec.  While undead, you are immune to Charm, Fear and Sleep effects."
                            ]
                        },
                        {
                            id: "annihilation",
                            name: "Annihilation",
                            icon: "inv_weapon_hand_18",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your melee special abilities by {value1}%.  In addition, there is a {value2}% chance that your Obliterate will do its damage without consuming diseases.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "killing_machine",
                            name: "Killing Machine",
                            icon: "inv_sword_122",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your melee attacks have a chance to make your next Icy Touch, Howling Blast or Frost Strike a critical strike.{value}",
                                {
                                    value: ["", "  Effect occurs more often than Killing Machine (Rank 1).", "  Effect occurs more often than Killing Machine (Rank 2).", "  Effect occurs more often than Killing Machine (Rank 3).", "  Effect occurs more often than Killing Machine (Rank 4)."]
                                }
                            ]
                        },
                        {
                            id: "chill_of_the_grave",
                            name: "Chill of the Grave",
                            icon: "spell_frost_frostshock",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Chains of Ice, Howling Blast, Icy Touch and Obliterate generate {value} additional runic power.",
                                {
                                    value: [2.5, 5]
                                }
                            ]
                        },
                        {
                            id: "endless_winter",
                            name: "Endless Winter",
                            icon: "spell_shadow_twilight",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your strength is increased by {value1}% and {value2}.",
                                {
                                    value1: [2, 4],
                                    value2: ["the cost of your Mind Freeze is reduced to 10 runic power", "your Mind Freeze no longer costs runic power"]
                                }
                            ]
                        },
                        {
                            id: "frigid_dreadplate",
                            name: "Frigid Dreadplate",
                            icon: "inv_chest_mail_04",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance melee attacks will hit you by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "glacier_rot",
                            name: "Glacier Rot",
                            icon: "spell_nature_removedisease",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Diseased enemies take {value}% more damage from your Icy Touch, Howling Blast and Frost Strike.",
                                {
                                    value: [7, 13, 20]
                                }
                            ]
                        },
                        {
                            id: "deathchill",
                            name: "Deathchill",
                            icon: "spell_shadow_soulleech_2",
                            row: 4,
                            col: 3,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, makes your next Icy Touch, Howling Blast, Frost Strike or Obliterate a critical hit if used within 30 sec."
                            ]
                        },
                        {
                            id: "improved_icy_talons",
                            name: "Improved Icy Talons",
                            icon: "spell_deathknight_icytalons",
                            row: 5,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "icy_talons",
                            description: [
                                "Increases the melee haste of all party and raid members within 100 yds by 20% and your haste by an additional 5%."
                            ]
                        },
                        {
                            id: "merciless_combat",
                            name: "Merciless Combat",
                            icon: "inv_sword_112",
                            row: 5,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Icy Touch, Howling Blast, Obliterate and Frost Strike do an additional {value}% damage when striking targets with less than 35% health.",
                                {
                                    value: [6, 12]
                                }
                            ]
                        },
                        {
                            id: "rime",
                            name: "Rime",
                            icon: "spell_frost_freezingbreath",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Icy Touch and Obliterate by {value}% and casting Obliterate has a {value}% chance to reset the cooldown on Howling Blast and cause your next Howling Blast to consume no runes.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "chilblains",
                            name: "Chilblains",
                            icon: "spell_frost_wisp",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Victims of your Frost Fever disease are Chilled, reducing movement speed by {value}% for 10 sec.",
                                {
                                    value: [15, 30, 50]
                                }
                            ]
                        },
                        {
                            id: "hungering_cold",
                            name: "Hungering Cold",
                            icon: "inv_staff_15",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Purges the earth around the Death Knight of all heat.  Enemies within 10 yards are trapped in ice, preventing them from performing any action for 10 sec and infecting them with Frost Fever.  Enemies are considered Frozen, but any damage other than diseases will break the ice."
                            ]
                        },
                        {
                            id: "improved_frost_presence",
                            name: "Improved Frost Presence",
                            icon: "spell_deathknight_frostpresence",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "While in Blood Presence or Unholy Presence, you retain {value1}% stamina from Frost Presence, and damage done to you is decreased by an additional {value2}% in Frost Presence.",
                                {
                                    value1: [4, 8],
                                    value2: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "threat_of_thassarian",
                            name: "Threat of Thassarian",
                            icon: "ability_dualwieldspecialization",
                            row: 7,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When dual-wielding, your Death Strikes, Obliterates, Plague Strikes, Rune Strikes, Blood Strikes and Frost Strikes have a {value}% chance to also deal damage with your offhand weapon.",
                                {
                                    value: [30, 60, 100]
                                }
                            ]
                        },
                        {
                            id: "blood_of_the_north",
                            name: "Blood of the North",
                            icon: "inv_weapon_shortblade_79",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases Blood Strike and Frost Strike damage by {value1}%.  In addition, whenever you hit with Blood Strike or Pestilence there is a {value2}% chance that the Blood Rune will become a Death Rune when it activates.  Death Runes count as a Blood, Frost or Unholy Rune.",
                                {
                                    value1: [3, 6, 10],
                                    value2: [30, 60, 100]
                                }
                            ]
                        },
                        {
                            id: "unbreakable_armor",
                            name: "Unbreakable Armor",
                            icon: "inv_armor_helm_plate_naxxramas_raidwarrior_c_01",
                            row: 7,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reinforces your armor with a thick coat of ice, increasing your armor by 25% and increasing your Strength by 20% for 20 sec."
                            ]
                        },
                        {
                            id: "acclimation",
                            name: "Acclimation",
                            icon: "classic_spell_fire_elementaldevastation",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you are hit by a spell, you have a {value}% chance to boost your resistance to that type of magic for 18 sec.  Stacks up to 3 times.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "frost_strike",
                            name: "Frost Strike",
                            icon: "spell_deathknight_empowerruneblade2",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly strike the enemy, causing 55% weapon damage plus 48 as Frost damage."
                            ]
                        },
                        {
                            id: "guile_of_gorefiend",
                            name: "Guile of Gorefiend",
                            icon: "inv-sword_53",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Blood Strike, Frost Strike, Howling Blast and Obliterate abilities by {value1}%, and increases the duration of your Icebound Fortitude by {value2} secs.",
                                {
                                    value1: [15, 30, 45],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "tundra_stalker",
                            name: "Tundra Stalker",
                            icon: "spell_nature_tranquility",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your spells and abilities deal {value1}% more damage to targets infected with Frost Fever.  Also increases your expertise by {value2}.",
                                {
                                    value1: [3, 6, 9, 12, 15],
                                    value2: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "howling_blast",
                            name: "Howling Blast",
                            icon: "spell_frost_arcticwinds",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Blast the target with a frigid wind dealing 198 to 214 Frost damage to all enemies within 10 yards."
                            ]
                        }
                    ],
                    // deathknight - wotlk
                    Unholy: [
                        {
                            id: "vicious_strikes",
                            name: "Vicious Strikes",
                            icon: "spell_deathknight_plaguestrike",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance by {chance}% and critical strike damage bonus by {bonus}% of your Plague Strike and Scourge Strike.",
                                {
                                    chance: [3, 6],
                                    bonus: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "virulence",
                            name: "Virulence",
                            icon: "spell_shadow_burningspirit",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with your spells by {value1}% and reduces the chance that your damage over time diseases can be cured by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_nature_mirrorimage",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Dodge chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "epidemic",
                            name: "Epidemic",
                            icon: "spell_shadow_shadowwordpain",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of Blood Plague and Frost Fever by {value} sec.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "morbidity",
                            name: "Morbidity",
                            icon: "spell_shadow_deathanddecay",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage and healing of Death Coil by {value}% and reduces the cooldown on Death and Decay by {value} sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "unholy_command",
                            name: "Unholy Command",
                            icon: "spell_deathknight_strangulate",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Death Grip ability by {value} sec.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "ravenous_dead",
                            name: "Ravenous Dead",
                            icon: "spell_deathknight_gnaw_ghoul",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Strength by {value1}% and the contribution your Ghouls get from your Strength and Stamina by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "outbreak",
                            name: "Outbreak",
                            icon: "spell_shadow_plaguecloud",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of Plague Strike by {value1}% and Scourge Strike by {value2}%.",
                                {
                                    value1: [10, 20, 30],
                                    value2: [7, 13, 20]
                                }
                            ]
                        },
                        {
                            id: "necrosis",
                            name: "Necrosis",
                            icon: "inv_weapon_shortblade_60",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your auto attacks deal an additional {value}% Shadow damage.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "corpse_explosion",
                            name: "Corpse Explosion",
                            icon: "ability_creature_disease_02",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Cause a corpse or your ghoul to explode for 166 Shadow damage to all enemies within 10 yards.  Will use a nearby corpse if the target is not a corpse.  Does not affect mechanical or elemental corpses."
                            ]
                        },
                        {
                            id: "on_a_pale_horse",
                            name: "On a Pale Horse",
                            icon: "spell_deathknight_summondeathcharger",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "You become as hard to stop as death itself.  The duration of all Stun and Fear effects used against you is reduced by {value}%, and your mounted speed is increased by {value}%.  This does not stack with other movement speed increasing effects.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "blood_caked_blade",
                            name: "Blood-Caked Blade",
                            icon: "ability_criticalstrike",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your auto attacks have a {value}% chance to cause a Blood-Caked Strike, which hits for 25% weapon damage plus 12.5% for each of your diseases on the target.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "night_of_the_dead",
                            name: "Night of the Dead",
                            icon: "spell_deathknight_armyofthedead",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown on Raise Dead by {value1} sec and the cooldown on Army of the Dead by {value2} min.  Also reduces the damage your pet takes from creature area of effect attacks by {value1}%.",
                                {
                                    value1: [45, 90],
                                    value2: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "unholy_blight",
                            name: "Unholy Blight",
                            icon: "spell_shadow_contagion",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes the victims of your Death Coil to be surrounded by a vile swarm of unholy insects, taking 10% of the damage done by the Death Coil over 10 sec, and preventing any diseases on the victim from being dispelled."
                            ]
                        },
                        {
                            id: "impurity",
                            name: "Impurity",
                            icon: "spell_shadow_shadowandflame",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "{value}",
                                {
                                    value: ["The attack power bonus of your spells is increased by 4%.", "The attack power bonus of your spells is increased by 8%.", "The attack power bonus of your spells is increased by 12%.", "The attack power bonus of your spells is increased by 16%.", "Your spells receive an additional 20% benefit from your attack power."]
                                }
                            ]
                        },
                        {
                            id: "dirge",
                            name: "Dirge",
                            icon: "spell_shadow_shadesofdarkness",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Death Strike, Plague Strike and Scourge Strike generate {value} additional runic power.",
                                {
                                    value: [2.5, 5]
                                }
                            ]
                        },
                        {
                            id: "desecration",
                            name: "Desecration",
                            icon: "spell_shadow_shadowfiend",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Plague Strikes and Scourge Strikes cause the Desecrated Ground effect.  Targets in the area are slowed by {value}% by the grasping arms of the dead while standing on the unholy ground.  Lasts 20 sec.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "magic_suppression",
                            name: "Magic Suppression",
                            icon: "spell_shadow_antimagicshell",
                            row: 5,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You take {value1}% less damage from all magic.  In addition, your Anti-Magic Shell absorbs an additional {value2}% of spell damage.",
                                {
                                    value1: [2, 4, 6],
                                    value2: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "reaping",
                            name: "Reaping",
                            icon: "spell_shadow_shadetruesight",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Whenever you hit with Blood Strike or Pestilence there is a {value}% chance that the Blood Rune becomes a Death Rune when it activates.  Death Runes count as a Blood, Frost or Unholy Rune.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "master_of_ghouls",
                            name: "Master of Ghouls",
                            icon: "spell_shadow_animatedead",
                            row: 5,
                            col: 3,
                            ranks: 1,
                            requiresTalents: "night_of_the_dead",
                            description: [
                                "Reduces the cooldown on Raise Dead by 60 sec, and the Ghoul summoned by your Raise Dead spell is considered a pet under your control.  Unlike normal Death Knight Ghouls, your pet does not have a limited duration."
                            ]
                        },
                        {
                            id: "desolation",
                            name: "Desolation",
                            icon: "spell_shadow_unholyfrenzy",
                            row: 6,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Blood Strikes cause you to deal {value}% additional damage with all attacks for the next 20 sec.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "anti_magic_zone",
                            name: "Anti-Magic Zone",
                            icon: "spell_deathknight_antimagiczone",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "magic_suppression",
                            description: [
                                "Places a large, stationary Anti-Magic Zone that reduces spell damage done to party or raid members inside it by 75%.  The Anti-Magic Zone lasts for 10 sec or until it absorbs (10000 + 2 * Attack power) spell damage."
                            ]
                        },
                        {
                            id: "improved_unholy_presence",
                            name: "Improved Unholy Presence",
                            icon: "spell_deathknight_unholypresence",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "While in Blood Presence or Frost Presence, you retain {value1}% increased movement speed from Unholy Presence, and your runes finish their cooldowns {value2}% faster in Unholy Presence.",
                                {
                                    value1: [8, 15],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "ghoul_frenzy",
                            name: "Ghoul Frenzy",
                            icon: "ability_ghoulfrenzy",
                            row: 6,
                            col: 3,
                            ranks: 1,
                            requiresTalents: "master_of_ghouls",
                            description: [
                                "Grants your pet 25% haste for 30 sec and  heals it for 60% of its health over the duration."
                            ]
                        },
                        {
                            id: "crypt_fever",
                            name: "Crypt Fever",
                            icon: "spell_nature_nullifydisease",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your diseases also cause Crypt Fever, which increases disease damage taken by the target by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "bone_shield",
                            name: "Bone Shield",
                            icon: "inv_chest_leather_13",
                            row: 7,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The Death Knight is surrounded by 3 whirling bones.  While at least 1 bone remains, he takes 20% less damage from all sources and deals 2% more damage with all attacks, spells and abilities.  Each damaging attack that lands consumes 1 bone.  Lasts 5 min."
                            ]
                        },
                        {
                            id: "wandering_plague",
                            name: "Wandering Plague",
                            icon: "spell_shadow_callofbone",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When your diseases damage an enemy, there is a chance equal to your melee critical strike chance that they will cause {value}% additional damage to the target and all enemies within 8 yards.  Ignores any target under the effect of a spell that is cancelled by taking damage.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "ebon_plaguebringer",
                            name: "Ebon Plaguebringer",
                            icon: "ability_creature_cursed_03",
                            row: 8,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "crypt_fever",
                            description: [
                                "Your Crypt Fever morphs into Ebon Plague, which increases magic damage taken by {value1}% in addition to increasing disease damage taken.  Improves your critical strike chance with weapons and spells by {value2}% at all times.",
                                {
                                    value1: [4, 9, 13],
                                    value2: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "scourge_strike",
                            name: "Scourge Strike",
                            icon: "spell_deathknight_scourgestrike",
                            row: 8,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "An unholy strike that deals 70% of weapon damage as Physical damage plus 238.  In addition, for each of your diseases on your target, you deal an additional 12% of the Physical damage done as Shadow damage."
                            ]
                        },
                        {
                            id: "rage_of_rivendare",
                            name: "Rage of Rivendare",
                            icon: "inv_weapon_halberd14",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your spells and abilities deal {value1}% more damage to targets infected with Blood Plague.  Also increases your expertise by {value2}.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "summon_gargoyle",
                            name: "Summon Gargoyle",
                            icon: "ability_hunter_pet_bat",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "A Gargoyle flies into the area and bombards the target with Nature damage modified by the Death Knight's attack power.  Persists for 30 sec."
                            ]
                        }
                    ]
                },
                druid: {
                    // druid - wotlk
                    Balance: [
                        {
                            id: "starlight_wrath",
                            name: "Starlight Wrath",
                            icon: "spell_nature_abolishmagic",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Wrath and Starfire spells by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "genesis",
                            name: "Genesis",
                            icon: "spell_arcane_arcane03",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage and healing done by your periodic spell damage and healing effects by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "moonglow",
                            name: "Moonglow",
                            icon: "spell_nature_sentinal",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Moonfire, Starfire, Starfall, Wrath, Healing Touch, Nourish, Regrowth and Rejuvenation spells by {value}%.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "natures_majesty",
                            name: "Nature's Majesty",
                            icon: "inv_staff_01",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Wrath, Starfire, Starfall, Nourish and Healing Touch spells by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_moonfire",
                            name: "Improved Moonfire",
                            icon: "spell_nature_starfall",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage and critical strike chance of your Moonfire spell by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "brambles",
                            name: "Brambles",
                            icon: "spell_nature_thorns",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Damage from your Thorns and Entangling Roots increased by {value1}% and damage done by your Treants increased by {value2}%. In addition, damage from your Treants and attacks done to you while you have Barkskin active have a {value2}% chance to daze the target for 3 sec.",
                                {
                                    value1: [25, 50, 75],
                                    value2: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "natures_grace",
                            name: "Nature's Grace",
                            icon: "spell_nature_naturesblessing",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "natures_majesty",
                            description: [
                                "All non-periodic spell criticals have a {value}% chance to grace you with a blessing of nature, increasing your spell casting speed by 20% for 3 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "natures_splendor",
                            name: "Nature's Splendor",
                            icon: "spell_nature_natureguardian",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "natures_majesty",
                            description: [
                                "Increases the duration of your Moonfire and Rejuvenation spells by 3 sec, your Regrowth spell by 6 sec, and your Insect Swarm and Lifebloom spells by 2 sec."
                            ]
                        },
                        {
                            id: "natures_reach",
                            name: "Nature's Reach",
                            icon: "spell_nature_naturetouchgrow",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Balance spells and Faerie Fire (Feral) ability by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "vengeance",
                            name: "Vengeance",
                            icon: "spell_nature_purge",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Starfire, Starfall, Moonfire, and Wrath spells by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "celestial_focus",
                            name: "Celestial Focus",
                            icon: "spell_arcane_starfire",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Starfire, Hibernate and Hurricane by {value1}% and increases your total spell haste by {value2}%.",
                                {
                                    value1: [23, 46, 70],
                                    value2: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "lunar_guidance",
                            name: "Lunar Guidance",
                            icon: "ability_druid_lunarguidance",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell power by {value}% of your total Intellect.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "insect_swarm",
                            name: "Insect Swarm",
                            icon: "spell_nature_insectswarm",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The enemy target is swarmed by insects, decreasing their chance to hit by 3% and causing 144 Nature damage over 12 sec."
                            ]
                        },
                        {
                            id: "improved_insect_swarm",
                            name: "Improved Insect Swarm",
                            icon: "spell_nature_insectswarm",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "insect_swarm",
                            description: [
                                "Increases your damage done by your Wrath spell to targets afflicted by your Insect Swarm by {value}%, and increases the critical strike chance of your Starfire spell by {value}% on targets afflicted by your Moonfire spell.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "dreamstate",
                            name: "Dreamstate",
                            icon: "ability_druid_dreamstate",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Regenerate mana equal to {value}% of your Intellect every 5 sec, even while casting.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "moonfury",
                            name: "Moonfury",
                            icon: "spell_nature_moonglow",
                            row: 5,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Starfire, Moonfire and Wrath spells by {value}%.",
                                {
                                    value: [3, 6, 10]
                                }
                            ]
                        },
                        {
                            id: "balance_of_power",
                            name: "Balance of Power",
                            icon: "ability_druid_balanceofpower",
                            row: 5,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with all spells by {hit}% and reduces your damage taken from all spells by {damage}%.",
                                {
                                    hit: [2, 4],
                                    damage: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "moonkin_form",
                            name: "Moonkin Form",
                            icon: "spell_nature_forceofnature",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Shapeshift into Moonkin Form.  While in this form the armor contribution from items is increased by 370%, damage taken while stunned is reduced by 15%, and all party and raid members within 100 yards have their spell critical chance increased by 5%.  Single target spell critical strikes in this form instantly regenerate 2% of your total mana.  The Moonkin can not cast healing or resurrection spells while shapeshifted.<br><br>The act of shapeshifting frees the caster of Polymorph and Movement Impairing effects."
                            ]
                        },
                        {
                            id: "improved_moonkin_form",
                            name: "Improved Moonkin Form",
                            icon: "ability_druid_improvedmoonkinform",
                            row: 6,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "moonkin_form",
                            description: [
                                "Your Moonkin Aura also causes affected targets to gain {haste}% haste and you to gain {spirit}% of your spirit as additional spell damage.",
                                {
                                    haste: [1, 2, 3],
                                    spirit: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_faerie_fire",
                            name: "Improved Faerie Fire",
                            icon: "spell_nature_faeriefire",
                            row: 6,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Faerie Fire spell also increases the chance the target will be hit by spell attacks by {value}%, and increases the critical strike chance of your damage spells by {value}% on targets afflicted by Faerie Fire.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "owlkin_frenzy",
                            name: "Owlkin Frenzy",
                            icon: "ability_druid_owlkinfrenzy",
                            row: 7,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "moonkin_form",
                            description: [
                                "Attacks done to you while in Moonkin form have a {value}% chance to cause you to go into a Frenzy, increasing your damage by 10%, cause you to be immune to pushback while casting Balance spells and restore 2% base mana every 2 sec. Lasts 10 sec.",
                                {
                                    value: [5, 10, 15]
                                }

                            ]
                        },
                        {
                            id: "wrath_of_cenarius",
                            name: "Wrath of Cenarius",
                            icon: "ability_druid_twilightswrath",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Starfire spell gains an additional {starfire}% and your Wrath gains an additional {wrath}% of your bonus damage effects.",
                                {
                                    starfire: [4, 8, 12, 16, 20],
                                    wrath: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "eclipse",
                            name: "Eclipse",
                            icon: "ability_druid_eclipse",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you critically hit with Starfire, you have a {wrath}% chance of increasing damage done by Wrath by 40%. When you critically hit with Wrath, you have a {starfire}% chance of increasing your critical strike chance with Starfire by 40%. Each effect lasts 15 sec and each has a separate 30 sec cooldown.  Both effects cannot occur simultaneously.",
                                {
                                    wrath: [33, 66, 100],
                                    starfire: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "typhoon",
                            name: "Typhoon",
                            icon: "ability_druid_typhoon",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "moonkin_form",
                            description: [
                                "You summon a violent Typhoon that does 400 Nature damage when in contact with hostile targets, knocking them back and dazing them for 6 sec."
                            ]
                        },
                        {
                            id: "force_of_nature",
                            name: "Force of Nature",
                            icon: "ability_druid_forceofnature",
                            row: 8,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summons 3 treants to attack enemy targets for 30 sec."
                            ]
                        },
                        {
                            id: "gale_winds",
                            name: "Gale Winds",
                            icon: "ability_druid_galewinds",
                            row: 8,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases damage done by your Hurricane and Typhoon spells by {damage}%, and increases the range of your Cyclone spell by {cyclone} yards.",
                                {
                                    damage: [15, 30],
                                    cyclone: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "earth_and_moon",
                            name: "Earth and Moon",
                            icon: "ability_druid_earthandsky",
                            row: 9,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Wrath and Starfire spells have a 100% chance to  apply the Earth and Moon effect, which increases spell damage taken by {dmgtaken}% for 12 sec.  Also increases your spell damage by {spelldmg}%.",
                                {
                                    dmgtaken: [4, 9, 13],
                                    spelldmg: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "starfall",
                            name: "Starfall",
                            icon: "ability_druid_starfall",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You summon a flurry of stars from the sky on all targets within 30 yards of the caster, each dealing 145 to 167 Arcane damage. Also causes 26 Arcane damage to all other enemies within 5 yards of the enemy target. Maximum 20 stars. Lasts 10 sec.  Shapeshifting into an animal form or mounting cancels the effect. Any effect which causes you to lose control of your character will suppress the starfall effect."
                            ]
                        }
                    ],
                    // druid - wotlk
                    "Feral Combat": [
                        {
                            id: "ferocity",
                            name: "Ferocity",
                            icon: "ability_hunter_pet_hyena",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Maul, Swipe, Claw, Rake and Mangle abilities by {value} Rage or Energy.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "feral_aggression",
                            name: "Feral Aggression",
                            icon: "ability_druid_demoralizingroar",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the Attack Power reduction of your Demoralizing Roar by {reduction}% and the damage caused by your Ferocious Bite by {damage}%.",
                                {
                                    reduction: [8, 16, 24, 32, 40],
                                    damage: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "feral_instinct",
                            name: "Feral Instinct",
                            icon: "ability_ambush",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Swipe ability by {value}% and reduces the chance enemies have to detect you while Prowling.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "savage_fury",
                            name: "Savage Fury",
                            icon: "ability_druid_ravage",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage caused by your Claw, Rake, Mangle (Cat), Mangle (Bear), and Maul abilities by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "thick_hide",
                            name: "Thick Hide",
                            icon: "inv_misc_pelt_bear_03",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your Armor contribution from cloth and leather items by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "feral_swiftness",
                            name: "Feral Swiftness",
                            icon: "spell_nature_spiritwolf",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your movement speed by {speed}% in Cat Form and increases your chance to dodge while in Cat Form, Bear Form and Dire Bear Form by {dodge}%.",
                                {
                                    speed: [15, 30],
                                    dodge: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "survival_instincts",
                            name: "Survival Instincts",
                            icon: "ability_druid_tigersroar",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability temporarily grants you 30% of your maximum health for 20 sec while in Bear Form, Cat Form, or Dire Bear Form.  After the effect expires, the health is lost."
                            ]
                        },
                        {
                            id: "sharpened_claws",
                            name: "Sharpened Claws",
                            icon: "inv_misc_monsterclaw_04",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance while in Bear, Dire Bear or Cat Form by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "shredding_attacks",
                            name: "Shredding Attacks",
                            icon: "spell_shadow_vampiricaura",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the energy cost of your Shred ability by {shred} and the rage cost of your Lacerate ability by {lacerate}.",
                                {
                                    shred: [9, 18],
                                    lacerate: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "predatory_strikes",
                            name: "Predatory Strikes",
                            icon: "ability_hunter_pet_cat",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your melee attack power in Cat, Bear and Dire Bear Forms by {level}% of your level and {weapon}% of any attack power on your equipped weapon.  In addition, your finishing moves have a {instant}% chance per combo point to make your next Nature spell with a base casting time less than 10 sec. become an instant cast spell.",
                                {
                                    level: [50, 100, 150],
                                    weapon: [7, 14, 20],
                                    instant: [7, 13, 20]
                                }
                            ]
                        },
                        {
                            id: "primal_fury",
                            name: "Primal Fury",
                            icon: "ability_racial_cannibalize",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "sharpened_claws",
                            description: [
                                "Gives you a {value}% chance to gain an additional 5 Rage anytime you get a critical strike while in Bear and Dire Bear Form and your critical strikes from Cat Form abilities that add combo points have a {value}% chance to add an additional combo point.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "primal_precision",
                            name: "Primal Precision",
                            icon: "ability_druid_primalprecision",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: "sharpened_claws",
                            description: [
                                "Increases your expertise by {expertise}, and you are refunded {refund}% of the energy cost of a finishing move if it fails to land.",
                                {
                                    expertise: [5, 10],
                                    refund: [40, 80]
                                }
                            ]
                        },
                        {
                            id: "brutal_impact",
                            name: "Brutal Impact",
                            icon: "ability_druid_bash",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the stun duration of your Bash and Pounce abilities by {stun} sec and decreases the cooldown of Bash by {cooldown} sec.",
                                {
                                    stun: [0.5, 1],
                                    cooldown: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "feral_charge",
                            name: "Feral Charge",
                            icon: "ability_hunter_pet_bear",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Teaches Feral Charge (Bear) and Feral Charge (Cat).<br><br>Feral Charge (Bear) - Causes you to charge an enemy, immobilizing and interrupting any spell being cast for 4 sec. This ability can be used in Bear Form and Dire Bear Form. 15 second cooldown.<br><br>Feral Charge (Cat) - Causes you to leap behind an enemy, dazing them for 3 sec. 30 second cooldown."
                            ]
                        },
                        {
                            id: "nurturing_instinct",
                            name: "Nurturing Instinct",
                            icon: "ability_druid_healinginstincts",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your healing spells by up to {agi}% of your Agility, and increases healing done to you by {cat}% while in Cat form.",
                                {
                                    agi: [35, 70],
                                    cat: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "natural_reaction",
                            name: "Natural Reaction",
                            icon: "ability_bullrush",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your dodge while in Bear Form or Dire Bear Form by {dodge}%, and you regenerate {rage} rage every time you dodge while in Bear Form or Dire Bear Form.",
                                {
                                    dodge: [2, 4, 6],
                                    rage: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "heart_of_the_wild",
                            name: "Heart of the Wild",
                            icon: "spell_holy_blessingofagility",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "predatory_strikes",
                            description: [
                                "Increases your Intellect by {intellect}%.  In addition, while in Bear or Dire Bear Form your Stamina is increased by {value}% and while in Cat Form your attack power is increased by {value}%.",
                                {
                                    intellect: [4, 8, 12, 16, 20],
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "survival_of_the_fittest",
                            name: "Survival of the Fittest",
                            icon: "ability_druid_enrage",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all attributes by {attributes}%, reduces the chance you'll be critically hit by melee attacks by {attributes}%, and increases your armor contribution from cloth and leather items in Bear Form and Dire Bear Form by {armor}%.",
                                {
                                    attributes: [2, 4, 6],
                                    armor: [11, 22, 33]
                                }
                            ]
                        },
                        {
                            id: "leader_of_the_pack",
                            name: "Leader of the Pack",
                            icon: "spell_nature_unyeildingstamina",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "While in Cat, Bear or Dire Bear Form, the Leader of the Pack increases ranged and melee critical chance of all party and raid members within 100 yards by 5%."
                            ]
                        },
                        {
                            id: "improved_leader_of_the_pack",
                            name: "Improved Leader of the Pack",
                            icon: "spell_nature_unyeildingstamina",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "leader_of_the_pack",
                            description: [
                                "Your Leader of the Pack ability also causes affected targets to heal themselves for {heal}% of their total health when they critically hit with a melee or ranged attack.  The healing effect cannot occur more than once every 6 sec.  In addition, you gain {mana}% of your maximum mana when you benefit from this heal.",
                                {
                                    heal: [2, 4],
                                    mana: [4, 8]
                                }
                            ]
                        },
                        {
                            id: "primal_tenacity",
                            name: "Primal Tenacity",
                            icon: "ability_druid_primaltenacity",
                            row: 6,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of fear effects by {value}%, reduces all damage taken while stunned by {value}% while in Cat Form.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "protector_of_the_pack",
                            name: "Protector of the Pack",
                            icon: "ability_druid_challangingroar",
                            row: 7,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "leader_of_the_pack",
                            description: [
                                "Increases your attack power by {ap}% and reduces the damage you take by {damage}%, while in Bear or Dire Bear Form.",
                                {
                                    ap: [2, 4, 6],
                                    damage: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "predatory_instincts",
                            name: "Predatory Instincts",
                            icon: "ability_druid_predatoryinstincts",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "While in Cat Form increases your damage from melee critical strikes by {damage}% and reduces the damage taken from area of effect attacks by {avoidance}%.",
                                {
                                    damage: [3, 7, 10],
                                    avoidance: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "infected_wounds",
                            name: "Infected Wounds",
                            icon: "ability_druid_infectedwound",
                            row: 7,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Shred, Maul, and Mangle attacks cause an Infected Wound in the target. The Infected Wound reduces the movement speed of the target by {movement}% and the attack speed by {attackspeed}%. Lasts 12 sec.",
                                {
                                    movement: [16, 34, 50],
                                    attackspeed: [6, 14, 20]
                                }
                            ]
                        },
                        {
                            id: "king_of_the_jungle",
                            name: "King of the Jungle",
                            icon: "ability_druid_kingofthejungle",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "While using your Enrage ability in Bear Form or Dire Bear Form, your damage is increased by {damage}%, and your Tiger's Fury ability also instantly restores {value} energy.  In addition, the mana cost of Bear Form, Cat Form, and Dire Bear Form is reduced by {value}%.",
                                {
                                    damage: [5, 10, 15],
                                    value: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "mangle",
                            name: "Mangle",
                            icon: "ability_druid_mangle2",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "leader_of_the_pack",
                            description: [
                                "Mangle the target, inflicting damage and causing the target to take additional damage from bleed effects for 1 min. This ability can be used in Cat Form or Dire Bear Form."
                            ]
                        },
                        {
                            id: "improved_mangle",
                            name: "Improved Mangle",
                            icon: "ability_druid_mangle2",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "mangle",
                            description: [
                                "Reduces the cooldown of your Mangle (Bear) ability by {bear} sec., and reduces the energy cost of your Mangle (Cat) ability by {cat}.",
                                {
                                    bear: [0.5, 1, 1.5],
                                    cat: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "rend_and_tear",
                            name: "Rend and Tear",
                            icon: "ability_druid_primalagression",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases damage done by your Maul and Shred attacks on bleeding targets by {damage}%, and increases the critical strike chance of your Ferocious Bite ability on bleeding targets by {crit}%.",
                                {
                                    damage: [4, 8, 12, 16, 20],
                                    crit: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "primal_gore",
                            name: "Primal Gore",
                            icon: "ability_druid_rake",
                            row: 9,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "rend_and_tear",
                            description: [
                                "Grants the periodic damage from your Lacerate and Rip abilities the ability to critically hit."
                            ]
                        },
                        {
                            id: "berserk",
                            name: "Berserk",
                            icon: "ability_druid_berserk",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability causes your Mangle (Bear) ability to hit up to 3 targets and have no cooldown, and reduces the energy cost of all your Cat Form abilities by 50%.  Lasts 15 sec.  You cannot use Tiger's Fury while Berserk is active.<br><br>Clears the effect of Fear and makes you immune to Fear for the duration."
                            ]
                        }
                    ],
                    // druid - wotlk
                    Restoration: [
                        {
                            id: "improved_mark_of_the_wild",
                            name: "Improved Mark of the Wild",
                            icon: "spell_nature_regeneration",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effects of your Mark of the Wild and Gift of the Wild spells by {value1}%, and increases all of your total attributes by {value2}%.",
                                {
                                    value1: [20, 40],
                                    value2: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "natures_focus",
                            name: "Nature's Focus",
                            icon: "spell_nature_healingwavegreater",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks  while casting Healing Touch, Wrath, Entangling Roots, Cyclone, Nourish, Regrowth and Tranquility by {value}%.",
                                {
                                    value: [23, 46, 70]
                                }
                            ]
                        },
                        {
                            id: "furor",
                            name: "Furor",
                            icon: "spell_holy_blessingofstamina",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you {value1}% chance to gain 10 Rage when you shapeshift into Bear and Dire Bear Form, and you keep up to {value1} of your Energy when you shapeshift into Cat Form, and increases your total Intellect while in Moonkin form by {value2}%.",
                                {
                                    value1: [20, 40, 60, 80, 100],
                                    value2: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "naturalist",
                            name: "Naturalist",
                            icon: "spell_nature_healingtouch",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Healing Touch spell by {value1} sec and increases the damage you deal with physical attacks in all forms by {value2}%.",
                                {
                                    value1: [0.1, 0.2, 0.3, 0.4, 0.5],
                                    value2: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "subtlety",
                            name: "Subtlety",
                            icon: "ability_eyeoftheowl",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your restoration spells by {value}% and reduces the chance your helpful spells, Moonfire, and Insect Swarm will be dispelled by {value}%.",
                                {
                                    threat: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "natural_shapeshifter",
                            name: "Natural Shapeshifter",
                            icon: "spell_nature_wispsplode",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all shapeshifting by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "intensity",
                            name: "Intensity",
                            icon: "spell_frost_windwalkon",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value1}% of your Mana regeneration to continue while casting and causes your Enrage ability to instantly generate {value2} rage.",
                                {
                                    value1: [17, 33, 50],
                                    value2: [4, 7, 10],
                                }
                            ]
                        },
                        {
                            id: "omen_of_clarity",
                            name: "Omen of Clarity",
                            icon: "spell_nature_crystalball",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Each of the Druid's damage spells, healing spells, and auto attacks has a chance of causing the caster to enter a Clearcasting state.  The Clearcasting state reduces the Mana, Rage or Energy cost of your next damage, healing spell or offensive ability by 100%."
                            ]
                        },
                        {
                            id: "master_shapeshifter",
                            name: "Master Shapeshifter",
                            icon: "ability_druid_mastershapeshifter",
                            row: 2,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "natural_shapeshifter",
                            description: [
                                "Grants an effect which lasts while the Druid is within the respective shapeshift form.<br><br>Bear Form - Increases physical damage by {value}%.<br><br>Cat Form - Increases critical strike chance by {value}%.<br><br>Moonkin Form - Increases spell damage by {value}%.<br><br>Tree of Life Form - Increases healing by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "tranquil_spirit",
                            name: "Tranquil Spirit",
                            icon: "spell_holy_elunesgrace",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Healing Touch, Nourish and Tranquility spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_rejuvenation",
                            name: "Improved Rejuvenation",
                            icon: "spell_nature_rejuvenation",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Rejuvenation spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "natures_swiftness",
                            name: "Nature's Swiftness",
                            icon: "spell_nature_ravenform",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "intensity",
                            description: [
                                "When activated, your next Nature spell with a base casting time less than 10 sec. becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "gift_of_nature",
                            name: "Gift of Nature",
                            icon: "spell_nature_protectionformnature",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of all healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_tranquility",
                            name: "Improved Tranquility",
                            icon: "spell_nature_tranquility",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces threat caused by Tranquility by {value1}%, and reduces the cooldown by {value2}%.",
                                {
                                    value1: [50, 100],
                                    value2: [30, 60]
                                }
                            ]
                        },
                        {
                            id: "empowered_touch",
                            name: "Empowered Touch",
                            icon: "ability_druid_empoweredtouch",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Healing Touch spell gains an additional {value1}% and your Nourish spell gains an additional {value2}% of your bonus healing effects.",
                                {
                                    value1: [20, 40],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "natures_bounty",
                            name: "Nature's Bounty",
                            icon: "spell_nature_resistnature",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "improved_rejuvenation",
                            description: [
                                "Increases the critical effect chance of your Regrowth and Nourish spells by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "living_spirit",
                            name: "Living Spirit",
                            icon: "spell_nature_giftofthewaterspirit",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Spirit by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "swiftmend",
                            name: "Swiftmend",
                            icon: "inv_relics_idolofrejuvenation",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "gift_of_nature",
                            description: [
                                "Consumes a Rejuvenation or Regrowth effect on a friendly target to instantly heal them an amount equal to 12 sec. of Rejuvenation or 18 sec. of Regrowth."
                            ]
                        },
                        {
                            id: "natural_perfection",
                            name: "Natural Perfection",
                            icon: "ability_druid_naturalperfection",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your critical strike chance with all spells is increased by {crit}% and critical strikes against you give you the Natural Perfection effect reducing all damage taken by {damage}%.  Stacks up to 3 times.  Lasts 8 sec.",
                                {
                                    crit: [1, 2, 3],
                                    damage: [2, 3, 4]
                                }
                            ]
                        },
                        {
                            id: "empowered_rejuvenation",
                            name: "Empowered Rejuvenation",
                            icon: "ability_druid_empoweredrejuvination",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "The bonus healing effects of your healing over time spells is increased by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "living_seed",
                            name: "Living Seed",
                            icon: "ability_druid_giftoftheearthmother",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you critically heal your target with Swiftmend, Regrowth, Nourish or Healing Touch spell you have a {value}% chance to plant a Living Seed on the target for 30% of the amount healed. The Living Seed will bloom when the target is next attacked. Lasts 15 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "revitalize",
                            name: "Revitalize",
                            icon: "ability_druid_replenish",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Rejuvenation and Wild Growth spells have a {value}% chance to restore 8 Energy, 4 Rage, 1% Mana or 16 Runic Power per tick.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "tree_of_life",
                            name: "Tree of Life",
                            icon: "ability_druid_treeoflife",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "empowered_rejuvenation",
                            description: [
                                "Shapeshift into the Tree of Life.  While in this form you increase healing received by 25% of your total Spirit for all party members within 45 yards, your movement speed is reduced by 20%, and you can only cast Swiftmend, Innervate, Nature's Swiftness, Rebirth, Barkskin, poison removing and healing over time spells, but the mana cost of these spells is reduced by 20%.  The act of shapeshifting frees the caster of Polymorph and Movement Impairing effects."
                            ]
                        },
                        {
                            id: "improved_tree_of_life",
                            name: "Improved Tree of Life",
                            icon: "ability_druid_improvedtreeform",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "tree_of_life",
                            description: [
                                "Increases your armor contribution from items while in Tree of Life Form by {armor}%, and increases your healing spell power by {healingsp}% of your spirit while in Tree of Life Form.",
                                {
                                    armor: [67, 133, 200],
                                    healingsp: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_barkskin",
                            name: "Improved Barkskin",
                            icon: "spell_nature_stoneclawtotem",
                            row: 9,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Grants {value1}% additional armor contribution from cloth and leather items while in Travel Form or while not shapeshifted, increases the damage reduction granted by your Barkskin spell by {value2}% and reduces the chance your Barkskin is dispelled by {value3}%.",
                                {
                                    value1: [80, 160],
                                    value2: [5, 10],
                                    value3: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "gift_of_the_earthmother",
                            name: "Gift of the Earthmother",
                            icon: "ability_druid_manatree",
                            row: 9,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total spell haste by {value}% and reduces your global cooldown by {value}% when casting Lifebloom.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "wild_growth",
                            name: "Wild Growth",
                            icon: "ability_druid_flourish",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "tree_of_life",
                            description: [
                                "Heals up to 5 friendly party or raid members within 15 yards of the target for 686 over 7 sec. The amount healed is applied quickly at first, and slows down as the Wild Growth reaches its full duration."
                            ]
                        }
                    ]
                },
                hunter: {
                    // hunter - wotlk
                    "Beast Mastery": [
                        {
                            id: "improved_aspect_of_the_hawk",
                            name: "Improved Aspect of the Hawk",
                            icon: "spell_nature_ravenform",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "While Aspect of the Hawk or Dragonhawk is active, all normal ranged attacks have a 10% chance of increasing ranged attack speed by {value}% for 12 sec.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "endurance_training",
                            name: "Endurance Training",
                            icon: "spell_nature_reincarnation",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the health of your pet by {value1}% and your total health by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "focused_fire",
                            name: "Focused Fire",
                            icon: "ability_hunter_silenthunter",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All damage caused by you is increased by {value1}% while your pet is active and the critical strike chance of your pet's special abilities is increased by {value2}% while Kill Command is active.",
                                {
                                    value1: [1, 2],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_aspect_of_the_monkey",
                            name: "Improved Aspect of the Monkey",
                            icon: "ability_hunter_aspectofthemonkey",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the Dodge bonus of your Aspect of the Monkey and Aspect of the Dragonhawk by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "thick_hide",
                            name: "Thick Hide",
                            icon: "inv_misc_pelt_bear_03",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the armor rating of your pets by {value1}% and your armor contribution from items by {value2}%.",
                                {
                                    value1: [7, 14, 20],
                                    value2: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_revive_pet",
                            name: "Improved Revive Pet",
                            icon: "ability_hunter_beastsoothe",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Revive Pet's casting time is reduced by {value1} sec, mana cost is reduced by {value2}%, and increases the health your pet returns with by an additional {value3}%.",
                                {
                                    value1: [3, 6],
                                    value2: [20, 40],
                                    value3: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "pathfinding",
                            name: "Pathfinding",
                            icon: "ability_mount_jungletiger",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the speed bonus of your Aspect of the Cheetah and Aspect of the Pack by {value1}%, and increases your speed while mounted by {value2}%. The mounted movement speed increase does not stack with other effects.",
                                {
                                    value1: [4, 8],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "aspect_mastery",
                            name: "Aspect Mastery",
                            icon: "ability_hunter_aspectmastery",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Aspect of the Viper - Reduces the damage penalty by 10%.<br><br>Aspect of the Monkey - Reduces the damage done to you while active by 5%.<br><br>Aspect of the Hawk - Increases the attack power bonus by 30%.<br><br>Aspect of the Dragonhawk - Combines the bonuses from Aspect of the Monkey and Hawk."
                            ]
                        },
                        {
                            id: "unleashed_fury",
                            name: "Unleashed Fury",
                            icon: "ability_bullrush",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your pets by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_mend_pet",
                            name: "Improved Mend Pet",
                            icon: "ability_hunter_mendpet",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives the Mend Pet spell a {value}% chance of cleansing 1 Curse, Disease, Magic or Poison effect from the pet each tick.",
                                {
                                    value: [15, 50]
                                }
                            ]
                        },
                        {
                            id: "ferocity",
                            name: "Ferocity",
                            icon: "inv_misc_monsterclaw_04",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your pets by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "spirit_bond",
                            name: "Spirit Bond",
                            icon: "ability_druid_demoralizingroar",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "While your pet is active, you and your pet will regenerate {value}% of total health every 10 sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "intimidation",
                            name: "Intimidation",
                            icon: "ability_devour",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Command your pet to intimidate the target on the next successful melee attack, causing a high amount of threat and stunning the target for 3 sec."
                            ]
                        },
                        {
                            id: "bestial_discipline",
                            name: "Bestial Discipline",
                            icon: "spell_nature_abolishmagic",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the Focus regeneration of your pets by {value}%.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "animal_handler",
                            name: "Animal Handler",
                            icon: "ability_hunter_animalhandler",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your pet's attack power by {attackpower}%, and increases the duration of your Master's Call effect by {duration} sec.",
                                {
                                    attackpower: [5, 10],
                                    duration: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "frenzy",
                            name: "Frenzy",
                            icon: "inv_misc_monsterclaw_03",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "ferocity",
                            description: [
                                "Gives your pet a {value}% chance to gain a 30% attack speed increase for 8 sec after dealing a critical strike.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "ferocious_inspiration",
                            name: "Ferocious Inspiration",
                            icon: "ability_hunter_ferociousinspiration",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When your pet scores a critical hit, all party members have all damage increased by {value}% for 10 sec.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "bestial_wrath",
                            name: "Bestial Wrath",
                            icon: "ability_druid_ferociousbite",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "intimidation",
                            description: [
                                "Send your pet into a rage causing 50% additional damage for 10 sec.  While enraged, the beast does not feel pity or remorse or fear and it cannot be stopped unless killed."
                            ]
                        },
                        {
                            id: "catlike_reflexes",
                            name: "Catlike Reflexes",
                            icon: "ability_hunter_catlikereflexes",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to dodge by {hunterdodge}% and your pet's chance to dodge by an additional {petdodge}%. In addition, reduces the cooldown of your Kill Command ability by {cooldown} sec.",
                                {
                                    hunterdodge: [1, 2, 3],
                                    petdodge: [3, 6, 9],
                                    cooldown: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "invigoration",
                            name: "Invigoration",
                            icon: "ability_hunter_invigeration",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "ferocious_inspiration",
                            description: [
                                "When your pet scores a critical hit with a special ability, you have a {value}% chance to instantly regenerate 1% mana.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "serpents_swiftness",
                            name: "Serpent's Swiftness",
                            icon: "ability_hunter_serpentswiftness",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases ranged combat attack speed by {value}% and your pet's melee attack speed by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "longevity",
                            name: "Longevity",
                            icon: "ability_hunter_longevity",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Bestial Wrath, Intimidation and Pet Special Abilities by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "the_beast_within",
                            name: "The Beast Within",
                            icon: "ability_hunter_beastwithin",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "bestial_wrath",
                            description: [
                                "Go into a rage, increasing your damage by 30%.  Your pet also goes into a rage, causing 50% additional damage for 18 sec.  While enraged, the beast does not feel pity or remorse or fear and it cannot be stopped unless killed."
                            ]
                        },
                        {
                            id: "cobra_strikes",
                            name: "Cobra Strikes",
                            icon: "ability_hunter_cobrastrikes",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "serpents_swiftness",
                            description: [
                                "You have a {value}% chance when you critically hit with Arcane Shot, Steady Shot or Kill Shot to cause your pet's next 2 special attacks to critically hit.",
                                {
                                    value: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "kindred_spirits",
                            name: "Kindred Spirits",
                            icon: "ability_hunter_separationanxiety",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your pet's damage by {petdamage}% and you and your pet's movement speed by {petspeed}% while your pet is active. This does not stack with other movement speed increasing effects.",
                                {
                                    petdamage: [4, 8, 12, 16, 20],
                                    petspeed: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "beast_mastery",
                            name: "Beast Mastery",
                            icon: "ability_hunter_beastmastery",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You master the art of Beast training, teaching you the ability to tame Exotic pets and increasing your total amount of Pet Skill Points by 4."
                            ]
                        }
                    ],
                    // hunter - wotlk
                    Marksmanship: [
                        {
                            id: "improved_concussive_shot",
                            name: "Improved Concussive Shot",
                            icon: "spell_frost_stun",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Concussive Shot's daze effect by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "focused_aim",
                            name: "Focused Aim",
                            icon: "ability_hunter_focusedaim",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Steady Shot by {value1}%, and increases your chance to hit by {value2}%.",
                                {
                                    value1: [23, 46, 70],
                                    value2: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "lethal_shots",
                            name: "Lethal Shots",
                            icon: "ability_searingarrow",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance with ranged weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "careful_aim",
                            name: "Careful Aim",
                            icon: "ability_hunter_zenarchery",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your ranged attack power by an amount equal to {value}% of your total Intellect.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_hunters_mark",
                            name: "Improved Hunter's Mark",
                            icon: "ability_hunter_snipershot",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the bonus attack power granted by your Hunter's Mark ability by {attackpower}%, and reduces the mana cost of your Hunter's Mark ability by {cost}%.",
                                {
                                    attackpower: [10, 20, 30],
                                    cost: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "mortal_shots",
                            name: "Mortal Shots",
                            icon: "ability_piercedamage",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your ranged abilities by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "go_for_the_throat",
                            name: "Go for the Throat",
                            icon: "ability_hunter_goforthethroat",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your ranged critical hits cause your pet to generate {value} Focus.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_arcane_shot",
                            name: "Improved Arcane Shot",
                            icon: "ability_impalingbolt",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Arcane Shot by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "aimed_shot",
                            name: "Aimed Shot",
                            icon: "inv_spear_07",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "mortal_shots",
                            description: [
                                "An aimed shot that increases ranged damage by 870 and reduces healing done to that target by 50%. Lasts 10 sec."
                            ]
                        },
                        {
                            id: "rapid_killing",
                            name: "Rapid Killing",
                            icon: "ability_hunter_rapidkilling",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Rapid Fire ability by {cooldown} min.  In addition, after killing an opponent that yields experience or honor, your next Aimed Shot, Arcane Shot or Chimera Shot causes {damage}% additional damage.  Lasts 20 sec.",
                                {
                                    cooldown: [1, 2],
                                    damage: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_stings",
                            name: "Improved Stings",
                            icon: "ability_hunter_quickshot",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Serpent Sting and Wyvern Sting by {value}% and the mana drained by your Viper Sting by {value}%.  In addition, reduces the chance your Sting damage over time effects will be dispelled by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "efficiency",
                            name: "Efficiency",
                            icon: "spell_frost_wizardmark",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Shots and Stings by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "concussive_barrage",
                            name: "Concussive Barrage",
                            icon: "spell_arcane_starfire",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your successful Chimera Shot and Multi-Shot attacks have a {value}% chance to Daze the target for 4 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "readiness",
                            name: "Readiness",
                            icon: "ability_hunter_readiness",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability immediately finishes the cooldown on your other Hunter abilities except Bestial Wrath."
                            ]
                        },
                        {
                            id: "barrage",
                            name: "Barrage",
                            icon: "ability_upgrademoonglaive",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Multi-Shot, Aimed Shot and Volley spells by {value}%.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "combat_experience",
                            name: "Combat Experience",
                            icon: "ability_hunter_combatexperience",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your total Agility and Intellect by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "ranged_weapon_specialization",
                            name: "Ranged Weapon Specialization",
                            icon: "inv_weapon_rifle_06",
                            row: 5,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with ranged weapons by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "piercing_shots",
                            name: "Piercing Shots",
                            icon: "ability_hunter_piercingshots",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your critical Aimed, Steady and Chimera Shots cause the target to bleed for {value}% of the damage dealt over 8 sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "trueshot_aura",
                            name: "Trueshot Aura",
                            icon: "ability_trueshot",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "readiness",
                            description: [
                                "Increases the attack power of party and raid members within 100 yards by 10%. Lasts until cancelled."
                            ]
                        },
                        {
                            id: "improved_barrage",
                            name: "Improved Barrage",
                            icon: "ability_upgrademoonglaive",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "barrage",
                            description: [
                                "Increases the critical strike chance of your Multi-Shot and Aimed Shot abilities by {crit}% and reduces the pushback suffered from damaging attacks while channeling Volley by {pushback}%.",
                                {
                                    crit: [4, 8, 12],
                                    pushback: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "master_marksman",
                            name: "Master Marksman",
                            icon: "ability_hunter_mastermarksman",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance by {crit}%, and reduces the Mana cost of your Steady Shot, Aimed Shot, and Chimera Shot by {cost}%.",
                                {
                                    crit: [1, 2, 3, 4, 5],
                                    cost: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "rapid_recuperation",
                            name: "Rapid Recuperation",
                            icon: "ability_hunter_rapidregeneration",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "You gain {rapidfire}% of your mana every 3 sec while under the effect of Rapid Fire, and you gain {rapidkilling}% of your mana every 2 sec for 6 sec when you gain Rapid Killing.",
                                {
                                    rapidfire: [2, 4],
                                    rapidkilling: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "wild_quiver",
                            name: "Wild Quiver",
                            icon: "ability_hunter_wildquiver",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a {value}% chance to shoot an additional shot when doing damage with your auto shot, dealing 80% weapon nature damage. Wild Quiver consumes no ammo.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "silencing_shot",
                            name: "Silencing Shot",
                            icon: "ability_theblackarrow",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "master_marksman",
                            description: [
                                "A shot that deals 50% weapon damage and Silences the target for 3 sec. Non-player victim spellcasting is also interruped for 3 sec."
                            ]
                        },
                        {
                            id: "improved_steady_shot",
                            name: "Improved Steady Shot",
                            icon: "ability_hunter_improvedsteadyshot",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Steady Shot hits have a {value}% chance to increase the damage done by your next Aimed Shot, Arcane Shot or Chimera Shot by 15%, and reduce the mana cost of your next Aimed Shot, Arcane Shot or Chimera Shot by 20%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "marked_for_death",
                            name: "Marked for Death",
                            icon: "ability_hunter_assassinate",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your damage done by your shots and the damage done by your pet's special abilities by {damage}% on marked targets, and increases the critical strike damage bonus of your Aimed Shot, Arcane Shot, Steady Shot, Kill Shot and Chimera Shot by {crit}%.",
                                {
                                    damage: [1, 2, 3, 4, 5],
                                    crit: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "chimera_shot",
                            name: "Chimera Shot",
                            icon: "ability_hunter_chimerashot2",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You deal 125% weapon damage, refreshing the current Sting on your target and triggering an effect:<br><br>Serpent Sting - Instantly deals 40% of the damage done by your Serpent Sting.<br><br>Viper Sting - Instantly restores mana to you equal to 60% of the total amount drained by your Viper Sting.<br><br>Scorpid Sting - Attempts to Disarm the target for 10 sec. This effect cannot occur more than once per 1 minute."
                            ]
                        }
                    ],
                    // hunter - wotlk
                    Survival: [
                        {
                            id: "improved_tracking",
                            name: "Improved Tracking",
                            icon: "ability_hunter_improvedtracking",
                            row: 0,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "While tracking Beasts, Demons, Dragonkin, Elementals, Giants, Humanoids and Undead, all damage done to those types by the Hunter is increased by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "hawk_eye",
                            name: "Hawk Eye",
                            icon: "ability_townwatch",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your ranged weapons by {value} yards.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "savage_strikes",
                            name: "Savage Strikes",
                            icon: "ability_racial_bloodrage",
                            row: 0,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of Raptor Strike, Mongoose Bite and Counterattack by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "surefooted",
                            name: "Surefooted",
                            icon: "ability_kick",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of movement impairing effects by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "entrapment",
                            name: "Entrapment",
                            icon: "spell_nature_stranglevines",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When your Frost Trap or Snake Trap are triggered you entrap all afflicted targets, preventing them from moving for {value} sec.",
                                {
                                    value: [2, 3, 4]
                                }
                            ]
                        },
                        {
                            id: "trap_mastery",
                            name: "Trap Mastery",
                            icon: "ability_ensnare",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Frost Trap and Freezing Trap - Increases the duration by {value}%.<br><br>Immolation Trap, Explosive Trap and Black Arrow - Increases the periodic damage done by {value}%.<br><br>Snake Trap - Increases the number of snakes summoned by {snakes}.",
                                {
                                    value: [10, 20, 30],
                                    snakes: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "survival_instincts",
                            name: "Survival Instincts",
                            icon: "ability_hunter_survivalinstincts",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by {value}% and increases the critical strike chance of your Arcane Shot, Steady Shot, and Explosive Shot by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "survivalist",
                            name: "Survivalist",
                            icon: "spell_shadow_twilight",
                            row: 2,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Stamina by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "scatter_shot",
                            name: "Scatter Shot",
                            icon: "ability_golemstormbolt",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "A short-range shot that deals 50% weapon damage and disorients the target for 4 sec. Any damage caused will remove the effect. Turns off your attack when used."
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {parry}%, and reduces the duration of all Disarm effects used against you by {disarm}%.  This does not stack with other Disarm duration reducing effects.",
                                {
                                    parry: [1, 2, 3],
                                    disarm: [16, 25, 50]
                                }
                            ]
                        },
                        {
                            id: "survival_tactics",
                            name: "Survival Tactics",
                            icon: "ability_rogue_feigndeath",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance your Feign Death ability and all trap spells will be resisted by {value}%, and reduces the cooldown of your Disengage ability by {value} sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "tnt",
                            name: "T.N.T.",
                            icon: "inv_misc_bomb_05",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Explosive Shot,  Explosive Trap, Black Arrow and Immolation Trap by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "lock_and_load",
                            name: "Lock and Load",
                            icon: "ability_hunter_lockandload",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a {trap}% chance when you trap a target with Freezing Trap, Freezing Arrow or Frost Trap and a {dot}% chance when you deal periodic damage with your Immolation Trap, Explosive Trap or Black Arrow to cause your next 2 Arcane Shot or Explosive Shot spells to trigger no cooldown, cost no mana and consume no ammo. This effect has a 22 sec cooldown.",
                                {
                                    trap: [33, 66, 100],
                                    dot: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "hunter_vs_wild",
                            name: "Hunter vs. Wild",
                            icon: "ability_hunter_huntervswild",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "survivalist",
                            description: [
                                "Increases you and your pet's attack power and ranged attack power equal to {value}% of your total Stamina.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "killer_instinct",
                            name: "Killer Instinct",
                            icon: "spell_holy_blessingofstamina",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance with all attacks by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "counterattack",
                            name: "Counterattack",
                            icon: "ability_warrior_challange",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "deflection",
                            description: [
                                "A strike that becomes active after parrying an opponent's attack.  This attack deals 40 damage and immobilizes the target for 5 sec.  Counterattack cannot be blocked, dodged, or parried."
                            ]
                        },
                        {
                            id: "lightning_reflexes",
                            name: "Lightning Reflexes",
                            icon: "spell_nature_invisibilty",
                            row: 5,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Agility by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "resourcefulness",
                            name: "Resourcefulness",
                            icon: "ability_hunter_resourcefulness",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all traps, melee abilities and Black Arrow by {cost}% and reduces the cooldown of all traps and Black Arrow by {cooldown} sec.",
                                {
                                    cost: [20, 40, 60],
                                    cooldown: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "expose_weakness",
                            name: "Expose Weakness",
                            icon: "ability_rogue_findweakness",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "lightning_reflexes",
                            description: [
                                "Your ranged criticals have a {value}% chance to to grant you Expose Weakness. Expose Weakness increases your attack power by 25% of your Agility for 7 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "wyvern_sting",
                            name: "Wyvern Sting",
                            icon: "inv_spear_02",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "killer_instinct",
                            description: [
                                "A stinging shot that puts the target to sleep for 30 sec.  Any damage will cancel the effect.  When the target wakes up, the Sting causes 300 Nature damage over 6 sec.  Only one Sting per Hunter can be active on the target at a time."
                            ]
                        },
                        {
                            id: "thrill_of_the_hunt",
                            name: "Thrill of the Hunt",
                            icon: "ability_hunter_thrillofthehunt",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to regain 40% of the mana cost of any shot when it critically hits.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "master_tactician",
                            name: "Master Tactician",
                            icon: "ability_hunter_mastertactitian",
                            row: 7,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your successful ranged attacks have a 10% chance to increase your critical strike chance with all attacks by {value}% for 8 sec.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "noxious_stings",
                            name: "Noxious Stings",
                            icon: "ability_hunter_potentvenom",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "wyvern_sting",
                            description: [
                                "If Wyvern Sting is dispelled, the dispeller is also afflicted by Wyvern Sting lasting {duration}% of the duration remaining, and increases all damage done by you on targets afflicted by your Serpent Sting by {damage}%.",
                                {
                                    duration: [16, 25, 50],
                                    damage: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "point_of_no_escape",
                            name: "Point of No Escape",
                            icon: "ability_hunter_pointofnoescape",
                            row: 8,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of all of your attacks on targets affected by your Frost Trap, Freezing Trap and Freezing Arrow by {value}%.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "black_arrow",
                            name: "Black Arrow",
                            icon: "spell_shadow_painspike",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Fires a Black Arrow at the target, increasing all damage done by you to the target by 6% and dealing (Ranged attack power * 0.1 + 448 * 5) Shadow damage over 15 sec. Black Arrow shares a cooldown with Trap spells."
                            ]
                        },
                        {
                            id: "sniper_training",
                            name: "Sniper Training",
                            icon: "ability_hunter_longshots",
                            row: 8,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Kill Shot ability by {chance}%, and while standing still for 6 sec, you gain Sniper Training increasing the damage done by your Steady Shot, Aimed Shot, Black Arrow and Explosive Shot by {damage}% for 15 sec.",
                                {
                                    chance: [5, 10, 15],
                                    damage: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "hunting_party",
                            name: "Hunting Party",
                            icon: "ability_hunter_huntingparty",
                            row: 9,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "thrill_of_the_hunt",
                            description: [
                                "Increases your total Agility by an additional {agility}%, and your Arcane Shot, Explosive Shot and Steady Shot critical strikes have a {chance}% chance to grant up to 10 party or raid members mana regeneration equal to 1% of the maximum mana per 5 sec. Lasts for 15 sec.",
                                {
                                    agility: [1, 2, 3],
                                    chance: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "explosive_shot",
                            name: "Explosive Shot",
                            icon: "ability_hunter_explosiveshot",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "black_arrow",
                            description: [
                                "You fire an explosive charge into the enemy target, dealing (Ranged attack power * 0.14 + 144)-(Ranged attack power * 0.14 + 172) Fire damage. The charge will blast the target every second for an additional 2 sec."
                            ]
                        }
                    ]
                },
                mage: {
                    // mage - wotlk
                    Arcane: [
                        {
                            id: "arcane_subtlety",
                            name: "Arcane Subtlety",
                            icon: "spell_holy_dispelmagic",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces your target's resistance to all your spells by {resistance} and reduces the threat caused by your Arcane spells by {threat}%.",
                                {
                                    resistance: [5, 10],
                                    threat: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "arcane_focus",
                            name: "Arcane Focus",
                            icon: "spell_holy_devotion",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance that the opponent can resist your Arcane spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "arcane_stability",
                            name: "Arcane Stability",
                            icon: "spell_nature_starfall",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Arcane Missiles and Arcane Blast by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "arcane_fortitude",
                            name: "Arcane Fortitude",
                            icon: "spell_arcane_arcaneresilience",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your armor by an amount equal to {value}% of your Intellect.",
                                {
                                    value: [50, 100, 150]
                                }
                            ]
                        },
                        {
                            id: "magic_absorption",
                            name: "Magic Absorption",
                            icon: "spell_nature_astralrecalgroup",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases all resistances by {resistance} and causes all spells you fully resist to restore {mana}% of your total mana.  1 sec. cooldown.",
                                {
                                    resistance: [2, 4, 6, 8, 10],
                                    mana: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "arcane_concentration",
                            name: "Arcane Concentration",
                            icon: "spell_shadow_manaburn",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance of entering a Clearcasting state after any damage spell hits a target.  The Clearcasting state reduces the mana cost of your next damage spell by 100%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "magic_attunement",
                            name: "Magic Attunement",
                            icon: "spell_nature_abolishmagic",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Arcane spells by {range} yards and the effect of your Amplify Magic and Dampen Magic spells by {effect}%.",
                                {
                                    range: [3, 6],
                                    effect: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "spell_impact",
                            name: "Spell Impact",
                            icon: "spell_nature_wispsplode",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Arcane Explosion, Arcane Blast, Blast Wave, Fire Blast, Scorch, Fireball, Ice Lance and Cone of Cold spells by an additional {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "student_of_the_mind",
                            name: "Student of the Mind",
                            icon: "ability_mage_studentofthemind",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Spirit by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "focus_magic",
                            name: "Focus Magic",
                            icon: "spell_arcane_studentofmagic",
                            row: 2,
                            col: 3,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the target's chance to critically hit with spells by 3%.  When the target critically hits the caster's chance to critically hit with spells is increased by 3% for 10 sec.  Cannot be cast on self."
                            ]
                        },
                        {
                            id: "arcane_shielding",
                            name: "Arcane Shielding",
                            icon: "spell_shadow_detectlesserinvisibility",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the mana lost per point of damage taken when Mana Shield is active by {mana}% and increases the resistances granted by Mage Armor by {resistance}%.",
                                {
                                    mana: [17, 33],
                                    resistance: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_counterspell",
                            name: "Improved Counterspell",
                            icon: "spell_frost_iceshock",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Counterspell also silences the target for {value} sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "arcane_meditation",
                            name: "Arcane Meditation",
                            icon: "spell_shadow_siphonmana",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value}% of your mana regeneration to continue while casting.",
                                {
                                    value: [17, 33, 50]
                                }
                            ]
                        },
                        {
                            id: "torment_the_weak",
                            name: "Torment the Weak",
                            icon: "ability_mage_tormentoftheweak",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Frostbolt, Fireball, Frostfire Bolt, Pyroblast, Arcane Missiles, Arcane Blast, and Arcane Barrage abilities deal {value}% more damage to snared or slowed targets.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "improved_blink",
                            name: "Improved Blink",
                            icon: "spell_arcane_blink",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of Blink by {cost}% and for 4 sec after casting your chance to be hit by all attacks and spells is reduced by {hit}%.",
                                {
                                    cost: [25, 50],
                                    hit: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "presence_of_mind",
                            name: "Presence of Mind",
                            icon: "spell_nature_enchantarmor",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, your next Mage spell with a casting time less than 10 sec becomes an instant cast spell."
                            ]
                        },
                        {
                            id: "arcane_mind",
                            name: "Arcane Mind",
                            icon: "spell_shadow_charm",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Intellect by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "prismatic_cloak",
                            name: "Prismatic Cloak",
                            icon: "spell_arcane_prismaticcloak",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by {damagetaken}% and reduces the fade time of your Invisibility spell by {fade} sec.",
                                {
                                    damagetaken: [2, 4, 6],
                                    fade: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "arcane_instability",
                            name: "Arcane Instability",
                            icon: "spell_shadow_teleport",
                            row: 5,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "presence_of_mind",
                            description: [
                                "Increases your spell damage and critical strike chance by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "arcane_potency",
                            name: "Arcane Potency",
                            icon: "spell_arcane_arcanepotency",
                            row: 5,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "presence_of_mind",
                            description: [
                                "Increases the critical strike chance of your next damaging spell by {value}% after gaining Clearcasting or Presence of Mind.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "arcane_empowerment",
                            name: "Arcane Empowerment",
                            icon: "spell_nature_starfall",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Arcane Missiles spell gains an additional {spelldamage}% of your bonus spell damage effects, but mana cost is increased by {mana}%.",
                                {
                                    spelldamage: [15, 30, 45],
                                    mana: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "arcane_power",
                            name: "Arcane Power",
                            icon: "spell_nature_lightning",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "arcane_instability",
                            description: [
                                "When activated, your spells deal 30% more damage while costing 30% more mana to cast.  This effect lasts 15 sec."
                            ]
                        },
                        {
                            id: "incanters_absorption",
                            name: "Incanter's Absorption",
                            icon: "ability_mage_incantersabsorbtion",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When your Mana Shield, Frost Ward, Fire Ward, or Ice Barrier absorbs damage your spell damage is increased by {value}% of the amount absorbed for 10 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "arcane_flows",
                            name: "Arcane Flows",
                            icon: "ability_mage_potentspirit",
                            row: 7,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "arcane_power",
                            description: [
                                "Reduces the cooldown of your Presence of Mind, Arcane Power and Invisibility spells by {others}% and the cooldown of your Evocation spell by {evocation} min.",
                                {
                                    others: [15, 30],
                                    evocation: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "mind_mastery",
                            name: "Mind Mastery",
                            icon: "spell_arcane_mindmastery",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases spell damage by up to {value}% of your total Intellect.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "slow",
                            name: "Slow",
                            icon: "spell_nature_slow",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces target's movement speed by 60%, increases the time between ranged attacks by 60% and increases casting time by 30%.  Lasts 15 sec.  Slow can only affect one target at a time."
                            ]
                        },
                        {
                            id: "missile_barrage",
                            name: "Missile Barrage",
                            icon: "ability_mage_missilebarrage",
                            row: 8,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your Arcane Blast a {arcaneblast}% chance, and your Arcane Barrage, Fireball, Frostbolt and Frostfire Bolt spells a {others}% chance to reduce the channeled duration of the next Arcane Missiles spell by 2.5 secs, reduce the mana cost by 100%, and missiles will fire every .5 secs.",
                                {
                                    arcaneblast: [8, 16, 24, 32, 40],
                                    others: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "netherwind_presence",
                            name: "Netherwind Presence",
                            icon: "ability_mage_netherwindpresence",
                            row: 9,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell haste by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "spell_power",
                            name: "Spell Power",
                            icon: "spell_arcane_arcanetorrent",
                            row: 9,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases critical strike damage bonus of all spells by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "arcane_barrage",
                            name: "Arcane Barrage",
                            icon: "ability_mage_arcanebarrage",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Launches several missiles at the enemy target, causing 401 to 485 Arcane damage."
                            ]
                        }
                    ],
                    // mage - wotlk
                    Fire: [
                        {
                            id: "improved_fire_blast",
                            name: "Improved Fire Blast",
                            icon: "spell_fire_fireball",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Fire Blast spell by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "incineration",
                            name: "Incineration",
                            icon: "spell_fire_flameshock",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Fire Blast, Scorch, Arcane Blast and Cone of Cold spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_fireball",
                            name: "Improved Fireball",
                            icon: "spell_fire_flamebolt",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Fireball spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "ignite",
                            name: "Ignite",
                            icon: "spell_fire_incinerate",
                            row: 1,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your critical strikes from Fire damage spells cause the target to burn for an additional {value}% of your spell's damage over 4 sec.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "burning_determination",
                            name: "Burning Determination",
                            icon: "spell_fire_totemofwrath",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "When Interrupted or Silenced you have a {value}% chance to become immune to the next Interrupt or Silence mechanic.  Lasts 20 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "world_in_flames",
                            name: "World in Flames",
                            icon: "ability_mage_worldinflames",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Flamestrike, Pyroblast, Blast Wave, Dragon's Breath, Living Bomb, Blizzard and Arcane Explosion spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "flame_throwing",
                            name: "Flame Throwing",
                            icon: "spell_fire_flare",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of all Fire spells except Frostfire Bolt by {value} yards.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "impact",
                            name: "Impact",
                            icon: "spell_fire_meteorstorm",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your damaging spells a {value}% chance to cause the next Fire Blast you cast to stun the target for 2 sec.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "pyroblast",
                            name: "Pyroblast",
                            icon: "spell_fire_fireball02",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Hurls an immense fiery boulder that causes 148 to 195 Fire damage and an additional 56 Fire damage over 12 sec."
                            ]
                        },
                        {
                            id: "burning_soul",
                            name: "Burning Soul",
                            icon: "spell_fire_fire",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Fire spells by {pushback}% and reduces the threat caused by your Fire spells by {threat}%.",
                                {
                                    pushback: [35, 70],
                                    threat: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_scorch",
                            name: "Improved Scorch",
                            icon: "spell_fire_soulburn",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to critically hit with Scorch, Fireball and Frostfire Bolt by an additional {crit}% and your damaging Scorch spells have a {chance}% chance to cause your target to be vulnerable to spell damage, increasing spell critical strike chance against that target by 5% and lasts 30 sec.",
                                {
                                    crit: [1, 2, 3],
                                    chance: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "molten_shields",
                            name: "Molten Shields",
                            icon: "spell_fire_firearmor",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Causes your Fire Ward and Frost Ward spells to have a {reflect}% chance to reflect the warded spell while active. In addition, your Molten Armor has a {affect}% chance to affect ranged and spell attacks.",
                                {
                                    reflect: [15, 30],
                                    affect: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "master_of_elements",
                            name: "Master of Elements",
                            icon: "spell_fire_masterofelements",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your spell criticals will refund {value}% of their base mana cost.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "playing_with_fire",
                            name: "Playing with Fire",
                            icon: "spell_fire_playingwithfire",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all spell damage caused by {value}% and all spell damage taken by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "critical_mass",
                            name: "Critical Mass",
                            icon: "spell_nature_wispheal",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "blast_wave",
                            name: "Blast Wave",
                            icon: "spell_holy_excorcism_02",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "pyroblast",
                            description: [
                                "A wave of flame radiates outward from the caster, damaging all enemies caught within the blast for 160 to 192 Fire damage, knocking them back and dazing them for 6 sec."
                            ]
                        },
                        {
                            id: "blazing_speed",
                            name: "Blazing Speed",
                            icon: "spell_fire_burningspeed",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance when hit by a melee or ranged attack to increase your movement speed by 50% and dispel all movement impairing effects.  This effect lasts 8 sec.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "fire_power",
                            name: "Fire Power",
                            icon: "spell_fire_immolation",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "pyromaniac",
                            name: "Pyromaniac",
                            icon: "spell_fire_burnout",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases chance to critically hit by {crit}% and allows {regen}% of your mana regeneration to continue while casting.",
                                {
                                    crit: [1, 2, 3],
                                    regen: [17, 33, 50]
                                }
                            ]
                        },
                        {
                            id: "combustion",
                            name: "Combustion",
                            icon: "spell_fire_sealoffire",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "critical_mass",
                            description: [
                                "When activated, this spell increases your critical strike damage bonus with Fire damage spells by 50%, and causes each of your Fire damage spell hits to increase your critical strike chance with Fire damage spells by 10%.  This effect lasts until you have caused 3 non-periodic critical strikes with Fire spells."
                            ]
                        },
                        {
                            id: "molten_fury",
                            name: "Molten Fury",
                            icon: "spell_fire_moltenblood",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases damage of all spells against targets with less than 35% health by {value}%.",
                                {
                                    value: [6, 12]
                                }
                            ]
                        },
                        {
                            id: "fiery_payback",
                            name: "Fiery Payback",
                            icon: "ability_mage_fierypayback",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "When below 35% health all damage taken is reduced by {damage}% and your Pyroblast spell's cast time is reduced by {casttime} secs while the cooldown is increased by {cd} secs.  In addition, melee and ranged attacks made against you have a {disarm}% chance to disarm your attacker's main hand and ranged weapons.",
                                {
                                    damage: [10, 20],
                                    casttime: [1.75, 3.5],
                                    cd: [2.5, 5],
                                    disarm: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "empowered_fire",
                            name: "Empowered Fire",
                            icon: "spell_fire_flamebolt",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Fireball, Frostfire Bolt and Pyroblast spells by an amount equal to 5% of your spell power.  In addition, each time your Ignite talent causes damage, you have a {chance}% chance to regain 2% of your base mana.",
                                {
                                    damage: [5, 10, 15],
                                    chance: [33, 67, 100]
                                }
                            ]
                        },
                        {
                            id: "firestarter",
                            name: "Firestarter",
                            icon: "ability_mage_firestarter",
                            row: 8,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "dragons_breath",
                            description: [
                                "Your damaging Blast Wave and Dragon's Breath spells have a {value}% chance to make your next Flamestrike spell instant cast and cost no mana.  Lasts 10 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "dragons_breath",
                            name: "Dragon's Breath",
                            icon: "inv_misc_head_dragon_01",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "combustion",
                            description: [
                                "Targets in a cone in front of the caster take 382 to 442 Fire damage and are Disoriented and Snared for 5 sec.  Any direct damaging attack will revive targets.  Turns off your attack when used."
                            ]
                        },
                        {
                            id: "hot_streak",
                            name: "Hot Streak",
                            icon: "ability_mage_hotstreak",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Any time you score 2 non-periodic spell criticals in a row using Fireball, Fire Blast, Scorch, Living Bomb, or Frostfire Bolt, you have a {value}% chance the next Pyroblast spell cast within 10 sec will be instant cast.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "burnout",
                            name: "Burnout",
                            icon: "ability_mage_burnout",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your spell critical damage bonus with all spells by {bonus}% but your non-periodic spell criticals cost an additional {cost}% of the spell's cost.",
                                {
                                    bonus: [10, 20, 30, 40, 50],
                                    cost: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "living_bomb",
                            name: "Living Bomb",
                            icon: "ability_mage_livingbomb",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The target becomes a Living Bomb, taking 612 Fire damage over 12 sec.  After 12 sec or when the spell is dispelled, the target explodes dealing 306 Fire damage to all enemies within 10 yards."
                            ]
                        }
                    ],
                    // mage - wotlk
                    Frost: [
                        {
                            id: "frostbite",
                            name: "Frostbite",
                            icon: "spell_frost_frostarmor",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Chill effects a {value}% chance to freeze the target for 5 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_frostbolt",
                            name: "Improved Frostbolt",
                            icon: "spell_frost_frostbolt02",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Frostbolt spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "ice_floes",
                            name: "Ice Floes",
                            icon: "spell_frost_icefloes",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Frost Nova, Cone of Cold, Ice Block and Icy Veins spells by {value}%.",
                                {
                                    value: [7, 14, 20]
                                }
                            ]
                        },
                        {
                            id: "ice_shards",
                            name: "Ice Shards",
                            icon: "spell_frost_iceshard",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Frost spells by {value}%.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "frost_warding",
                            name: "Frost Warding",
                            icon: "spell_frost_frostward",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the armor and resistances given by your Frost Armor and Ice Armor spells by {armor}%.  In addition, gives your Frost Ward and Fire Ward a {ward}% chance to negate the warded damage spell and restore mana equal to the damage caused.",
                                {
                                    armor: [25, 50],
                                    ward: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "precision_frost",
                            name: "Precision",
                            icon: "spell_ice_magicdamage",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost and increases your chance to hit with spells by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "permafrost",
                            name: "Permafrost",
                            icon: "spell_frost_wisp",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Chill effects by {chill} sec, reduces the target's speed by an additional {speed}%, and reduces the target's healing received by {healing}%.",
                                {
                                    chill: [1, 2, 3],
                                    speed: [4, 7, 10],
                                    healing: [7, 13, 20]
                                }
                            ]
                        },
                        {
                            id: "piercing_ice",
                            name: "Piercing Ice",
                            icon: "spell_frost_frostbolt",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Frost spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "icy_veins",
                            name: "Icy Veins",
                            icon: "spell_frost_coldhearted",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Hastens your spellcasting, increasing spell casting speed by 20% and reduces the pushback suffered from damaging attacks while casting by 100%.  Lasts 20 sec."
                            ]
                        },
                        {
                            id: "improved_blizzard",
                            name: "Improved Blizzard",
                            icon: "spell_frost_icestorm",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Adds a chill effect to your Blizzard spell.  This effect lowers the target's movement speed by {value}%.  Lasts 1.50 sec.",
                                {
                                    value: [25, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "arctic_reach",
                            name: "Arctic Reach",
                            icon: "spell_shadow_darkritual",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Frostbolt, Ice Lance, Deep Freeze and Blizzard spells and the radius of your Frost Nova and Cone of Cold spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "frost_channeling",
                            name: "Frost Channeling",
                            icon: "spell_frost_stun",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all spells by {value}% and reduces the threat caused by your Frost spells by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "shatter",
                            name: "Shatter",
                            icon: "spell_frost_frostshock",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of all your spells against frozen targets by {value}%.",
                                {
                                    value: [17, 34, 50]
                                }
                            ]
                        },
                        {
                            id: "cold_snap",
                            name: "Cold Snap",
                            icon: "spell_frost_wizardmark",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this spell finishes the cooldown on all Frost spells you recently cast."
                            ]
                        },
                        {
                            id: "improved_cone_of_cold",
                            name: "Improved Cone of Cold",
                            icon: "spell_frost_glacier",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by your Cone of Cold spell by {value}%.",
                                {
                                    value: [15, 25, 35]
                                }
                            ]
                        },
                        {
                            id: "frozen_core",
                            name: "Frozen Core",
                            icon: "spell_frost_frozencore",
                            row: 4,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the damage taken from all spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "cold_as_ice",
                            name: "Cold as Ice",
                            icon: "ability_mage_coldasice",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "cold_snap",
                            description: [
                                "Reduces the cooldown of your Cold Snap, Ice Barrier and Summon Water Elemental spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "winters_chill",
                            name: "Winter's Chill",
                            icon: "spell_frost_chillingblast",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to critically hit with Frostbolt by an additional {crit}% and gives your Frost damage spells a {effect}% chance to apply the Winter's Chill effect, which increases the chance spells will critically hit the target by 1% for 15 sec.  Stacks up to 5 times.",
                                {
                                    crit: [1, 2, 3],
                                    effect: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "shattered_barrier",
                            name: "Shattered Barrier",
                            icon: "ability_mage_shattershield",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "ice_barrier",
                            description: [
                                "Gives your Ice Barrier spell a {value}% chance to freeze all enemies within 10 yds for 8 sec when it is destroyed.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "ice_barrier",
                            name: "Ice Barrier",
                            icon: "spell_ice_lament",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "cold_snap",
                            description: [
                                "Instantly shields you, absorbing 455 damage.  Lasts 1 min.  While the shield holds, spellcasting will not be delayed by damage."
                            ]
                        },
                        {
                            id: "arctic_winds",
                            name: "Arctic Winds",
                            icon: "spell_frost_arcticwinds",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases all Frost damage you cause by {value}% and reduces the chance melee and ranged attacks will hit you by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "empowered_frostbolt",
                            name: "Improved Frostbolt",
                            icon: "spell_frost_frostbolt02",
                            row: 7,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Frostbolt spell by an amount equal to {bonus}% of your spell power and reduces the cast time by {cast} sec.",
                                {
                                    bonus: [5, 10],
                                    cast: [0.1, 0.2]
                                }
                            ]
                        },
                        {
                            id: "fingers_of_frost",
                            name: "Fingers of Frost",
                            icon: "ability_mage_wintersgrasp",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Chill effects a {value}% chance to grant you the Fingers of Frost effect, which treats your next 2 spells cast as if the target were Frozen.  Lasts 15 sec.",
                                {
                                    value: [7, 15]
                                }
                            ]
                        },
                        {
                            id: "brain_freeze",
                            name: "Brain Freeze",
                            icon: "ability_mage_brainfreeze",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Frost damage spells with chilling effects have a {value}% chance to cause your next Fireball or Frostfire Bolt spell to be instant cast and cost no mana.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "summon_water_elemental",
                            name: "Summon Water Elemental",
                            icon: "spell_frost_summonwaterelemental_2",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summon a Water Elemental to fight for the caster for 45 sec."
                            ]
                        },
                        {
                            id: "enduring_winter",
                            name: "Enduring Winter",
                            icon: "spell_frost_summonwaterelemental_2",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "summon_water_elemental",
                            description: [
                                "Increases the duration of your Summon Water Elemental spell by {duration} sec and your Frostbolt spell has a {regen}% chance to grant up to 10 party or raid members mana regeneration equal to 1% of their maximum mana per 5 sec for 15 sec.  This effect cannot occur more often than once every 6 sec.",
                                {
                                    duration: [5, 10, 15],
                                    regen: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "chilled_to_the_bone",
                            name: "Chilled to the Bone",
                            icon: "ability_mage_chilledtothebone",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage caused by your Frostbolt, Frostfire Bolt and Ice Lance spells by {damage}% and reduces the movement speed of all chilled targets by an additional {chilled}%.",
                                {
                                    damage: [1, 2, 3, 4, 5],
                                    chilled: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "deep_freeze",
                            name: "Deep Freeze",
                            icon: "ability_mage_deepfreeze",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Stuns the target for 5 sec.  Only usable on Frozen targets.  Deals 1469 to 1741 damage to targets permanently immune to stuns."
                            ]
                        }
                    ]
                },
                paladin: {
                    // paladin - wotlk
                    Holy: [
                        {
                            id: "spiritual_focus",
                            name: "Spiritual Focus",
                            icon: "spell_arcane_blink",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Flash of Light and Holy Light by {value}%.",
                                {
                                    value: [14, 28, 42, 56, 70]
                                }
                            ]
                        },
                        {
                            id: "seals_of_the_pure",
                            name: "Seals of the Pure",
                            icon: "ability_thunderbolt",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Seal of Righteousness, Seal of Vengeance and Seal of Corruption and their Judgement effects by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "healing_light",
                            name: "Healing Light",
                            icon: "spell_holy_holybolt",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Holy Light, Flash of Light and the effectiveness of Holy Shock spells by {value}%.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "divine_intellect",
                            name: "Divine Intellect",
                            icon: "spell_nature_sleep",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Intellect by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "unyielding_faith",
                            name: "Unyielding Faith",
                            icon: "spell_holy_unyieldingfaith",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of all Fear and Disorient effects by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "aura_mastery",
                            name: "Aura Mastery",
                            icon: "spell_holy_auramastery",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the radius of your Auras to 40 yards."
                            ]
                        },
                        {
                            id: "illumination",
                            name: "Illumination",
                            icon: "spell_holy_greaterheal",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "After getting a critical effect from your Flash of Light, Holy Light, or Holy Shock heal spell you have a {value}% chance to gain mana equal to 30% of the base cost of the spell.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_lay_on_hands",
                            name: "Improved Lay on Hands",
                            icon: "spell_holy_layonhands",
                            row: 2,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Grants the target of your Lay on Hands spell {dmg}% reduced physical damage taken for 15 sec.  In addition, the cooldown for your Lay on Hands spell is reduced by {cd} min.",
                                {
                                    dmg: [10, 20],
                                    cd: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_concentration_aura",
                            name: "Improved Concentration Aura",
                            icon: "spell_holy_mindsooth",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Concentration Aura by an additional {effect}% and while any Aura is active reduces the duration of any Silence or Interrupt effect used against an affected group member by {duration}%.  The duration reduction does not stack with any other effects.",
                                {
                                    effect: [5, 10, 15],
                                    duration: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_blessing_of_wisdom",
                            name: "Improved Blessing of Wisdom",
                            icon: "spell_holy_sealofwisdom",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Blessing of Wisdom spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "blessed_hands",
                            name: "Blessed Hands",
                            icon: "ability_paladin_blessedhands",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of Hand of Freedom, Hand of Sacrifice and Hand of Salvation by {cost}%, increases the effectiveness of Hand of Salvation by {salvation}% and the effectiveness of Hand of Sacrifice by an additional {sacrifice}%.",
                                {
                                    cost: [15, 30],
                                    salvation: [50, 100],
                                    sacrifice: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "pure_of_heart",
                            name: "Pure of Heart",
                            icon: "spell_holy_pureofheart",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of Curse, Disease and Poison effects by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "divine_favor",
                            name: "Divine Favor",
                            icon: "spell_holy_heal",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "illumination",
                            description: [
                                "When activated, gives your next Flash of Light, Holy Light, or Holy Shock spell a 100% critical effect chance."
                            ]
                        },
                        {
                            id: "sanctified_light",
                            name: "Sanctified Light",
                            icon: "spell_holy_healingaura",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy Light and Holy Shock spells by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "purifying_power",
                            name: "Purifying Power",
                            icon: "spell_holy_purifyingpower",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Cleanse, Purify and Consecration spells by {value1}% and reduces the cooldown of your Exorcism and Holy Wrath spells by {value2}%.",
                                {
                                    value1: [5, 10],
                                    value2: [17, 33]
                                }
                            ]
                        },
                        {
                            id: "holy_power",
                            name: "Holy Power",
                            icon: "spell_holy_power",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "lights_grace",
                            name: "Light's Grace",
                            icon: "spell_holy_lightsgrace",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Holy Light spell a {value}% chance to reduce the cast time of your next Holy Light spell by 0.5 sec.  This effect lasts 15 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "holy_shock",
                            name: "Holy Shock",
                            icon: "spell_holy_searinglight",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "divine_favor",
                            description: [
                                "Blasts the target with Holy energy, causing 314 to 340 Holy damage to an enemy, or 481 to 519 healing to an ally."
                            ]
                        },
                        {
                            id: "blessed_life",
                            name: "Blessed Life",
                            icon: "spell_holy_blessedlife",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "All attacks against you have a {value}% chance to cause half damage.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "sacred_cleansing",
                            name: "Sacred Cleansing",
                            icon: "ability_paladin_sacredcleansing",
                            row: 7,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Cleanse spell has a {value}% chance to increase the target's resistance to Disease, Magic and Poison by 30% for 10 sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "holy_guidance",
                            name: "Holy Guidance",
                            icon: "spell_holy_holyguidance",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your spell power by {value}% of your total Intellect.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "divine_illumination",
                            name: "Divine Illumination",
                            icon: "spell_holy_divineillumination",
                            row: 8,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all spells by 50% for 15 sec."
                            ]
                        },
                        {
                            id: "judgements_of_the_pure",
                            name: "Judgements of the Pure",
                            icon: "ability_paladin_judgementofthepure",
                            row: 8,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Seal and Judgement spells by {damage}%, and your Judgement spells increase your casting and melee haste by {haste}% for 1 min.",
                                {
                                    damage: [5, 10, 15, 20, 25],
                                    haste: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "infusion_of_light",
                            name: "Infusion of Light",
                            icon: "ability_paladin_infusionoflight",
                            row: 9,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "holy_shock",
                            description: [
                                "Your Holy Shock critical hits reduce the cast time of your next Flash of Light by {cast} sec or increase the critical chance of your next Holy Light by {crit}%.  In addition, causes your Flash of Light to heal targets with Sacred Shield for an additional {heal}% over 12 sec.",
                                {
                                    cast: [0.75, 1.5],
                                    crit: [10, 20],
                                    heal: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "enlightened_judgements",
                            name: "Enlightened Judgements",
                            icon: "ability_paladin_enlightenedjudgements",
                            row: 9,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Judgement of Light and Judgement of Wisdom spells by {range} yards and increases your chance to hit by {hit}%.",
                                {
                                    range: [15, 30],
                                    hit: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "beacon_of_light",
                            name: "Beacon of Light",
                            icon: "ability_paladin_beaconoflight",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "The target becomes a Beacon of Light to all members of your party or raid within a 60 yard radius.  Any heals you cast on party or raid members will also heal the Beacon for 100% of the amount healed.  Only one target can be the Beacon of Light at a time. Lasts 1 min."
                            ]
                        }
                    ],
                    // paladin - wotlk
                    Protection: [
                        {
                            id: "divinity",
                            name: "Divinity",
                            icon: "spell_holy_blindingheal",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases all healing done by you and all healing effects on you by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "divine_strength",
                            name: "Divine Strength",
                            icon: "ability_golemthunderclap",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Strength by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "stoicism",
                            name: "Stoicism",
                            icon: "spell_holy_stoicism",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of all Stun effects by an additional {value}% and reduces the chance your helpful spells and damage over time effects will be dispelled by an additional {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "guardians_favor",
                            name: "Guardian's Favor",
                            icon: "spell_holy_sealofprotection",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Hand of Protection by {value1} and increases the duration of your Hand of Freedom by {value2} sec.",
                                {
                                    value1: ["60 sec", "2 min"],
                                    value2: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to dodge by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "divine_sacrifice",
                            name: "Divine Sacrifice",
                            icon: "spell_holy_powerwordbarrier",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "30% of all damage taken by party members within 30 yards is redirected to the Paladin (up to a maximum of 40% of the Paladin's health times the number of party members).  Damage which reduces the Paladin below 20% health will break the effect.  Lasts 10 sec."
                            ]
                        },
                        {
                            id: "improved_righteous_fury",
                            name: "Improved Righteous Fury",
                            icon: "spell_holy_sealoffury",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "While Righteous Fury is active, all damage taken is reduced by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value1}% and reduces the duration of all movement slowing effects by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "divine_guardian",
                            name: "Divine Guardian",
                            icon: "spell_holy_powerwordbarrier",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: "divine_sacrifice",
                            description: [
                                "When Divine Sacrifice is activated, your party and raid members within 30 yards take {value1}% reduced damage for 6 sec.  In addition, increases the duration of your Sacred Shield by {value2}% and the amount absorbed by {value1}%.",
                                {
                                    value1: [10, 20],
                                    value2: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_hammer_of_justice",
                            name: "Improved Hammer of Justice",
                            icon: "spell_holy_sealofmight",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Hammer of Justice spell by {value} sec.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_devotion_aura",
                            name: "Improved Devotion Aura",
                            icon: "spell_holy_devotionaura",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the armor bonus of your Devotion Aura by {value}% and increases the amount healed on any target affected by any of your Auras by {value2}%.",
                                {
                                    value1: [17, 34, 50],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "blessing_of_sanctuary",
                            name: "Blessing of Sanctuary",
                            icon: "spell_nature_lightningshield",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Places a Blessing on the friendly target, reducing damage taken from all sources by 3% for 10 min and increasing strength and stamina by 10%.  In addition, when the target blocks, parries, or dodges a melee attack the target will gain 2% of maximum displayed mana.  Players may only have one Blessing on them per Paladin at any one time."
                            ]
                        },
                        {
                            id: "reckoning",
                            name: "Reckoning",
                            icon: "spell_holy_blessingofstrength",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance after blocking or being hit by any damaging attack that the next 4 weapon swings within 8 sec will generate an additional attack.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "sacred_duty",
                            name: "Sacred Duty",
                            icon: "spell_holy_divineintervention",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina by {value1}%, reduces the cooldown of your Divine Shield and Divine Protection spells by {value2} sec.",
                                {
                                    value1: [2, 4],
                                    value2: [30, 60]
                                }
                            ]
                        },
                        {
                            id: "one_handed_weapon_specialization",
                            name: "One-Handed Weapon Specialization",
                            icon: "inv_sword_20",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all damage you deal when a one-handed melee weapon is equipped by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "spiritual_attunement",
                            name: "Spiritual Attunement",
                            icon: "spell_holy_revivechampion",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "A passive ability that gives the Paladin mana when healed by other friendly targets' spells.  The amount of mana gained is equal to {value}% of the amount healed.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "holy_shield",
                            name: "Holy Shield",
                            icon: "classic_spell_holy_blessingofprotection",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "blessing_of_sanctuary",
                            description: [
                                "Increases chance to block by 30% for 10 sec and deals 79 Holy damage for each attack blocked while active.  Each block expends a charge.  8 charges."
                            ]
                        },
                        {
                            id: "ardent_defender",
                            name: "Ardent Defender",
                            icon: "spell_holy_ardentdefender",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Damage that takes you below 35% health is reduced by {value1}%.  In addition, attacks which would otherwise kill you cause you to be healed by up to {value2}% of your maximum health (amount healed based on defense).  This healing effect cannot occur more often than once every 2 min.",
                                {
                                    value1: [7, 13, 20],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "redoubt",
                            name: "Redoubt",
                            icon: "ability_defend",
                            row: 7,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your block value by {block}% and damaging melee and ranged attacks against you have a 10% chance to increase your chance to block by {block}%.  Lasts 10 sec or 5 blocks.",
                                {
                                    block: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "combat_expertise",
                            name: "Combat Expertise",
                            icon: "spell_holy_weaponmastery",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your expertise by {value}, total Stamina and chance to critically hit by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "touched_by_light",
                            name: "Touched by the Light",
                            icon: "ability_paladin_touchedbylight",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell power by an amount equal to {value1}% of your Strength and increases the amount healed by your critical heals by {value2}%.",
                                {
                                    value1: [20, 40, 60],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "avengers_shield",
                            name: "Avenger's Shield",
                            icon: "spell_holy_avengersshield",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "holy_shield",
                            description: [
                                "Hurls a holy shield at the enemy, dealing (440 + 0.07 * Spell power + 0.07 * Attack power) to (536 + 0.07 * Spell power + 0.07 * Attack power) Holy damage, Dazing them and then jumping to additional nearby enemies.  Affects 3 total targets.  Lasts 10 sec."
                            ]
                        },
                        {
                            id: "guarded_by_the_light",
                            name: "Guarded by the Light",
                            icon: "ability_paladin_gaurdedbythelight",
                            row: 8,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces spell damage taken by {value1}% and gives a {value2}% chance to refresh the duration of your Divine Plea when you hit an enemy.  In addition, your Divine Plea spell is {value2}% less likely to be dispelled.",
                                {
                                    value1: [3, 6],
                                    value2: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "shield_of_the_templar",
                            name: "Shield of the Templar",
                            icon: "ability_paladin_shieldofthetemplar",
                            row: 9,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "avengers_shield",
                            description: [
                                "Reduces all damage taken by {damage}% and grants your Avenger's Shield a {chance}% chance to silence your targets for 3 sec.",
                                {
                                    damage: [1, 2, 3],
                                    chance: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "judgements_of_the_just",
                            name: "Judgements of the Just",
                            icon: "ability_paladin_judgementsofthejust",
                            row: 9,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Hammer of Justice by {value1} sec, increases the duration of your Seal of Justice effect by {value2} sec and your Judgement spells also reduce the melee attack speed of the target by {value3}%.",
                                {
                                    value1: [5, 10],
                                    value2: [0.5, 1],
                                    value3: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "hammer_of_the_righteous",
                            name: "Hammer of the Righteous",
                            icon: "ability_paladin_hammeroftherighteous",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Hammer the current target and up to 2 additional nearby targets, causing 4 times your main hand damage per second as Holy damage."
                            ]
                        }
                    ],
                    // paladin - wotlk
                    Retribution: [
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "benediction",
                            name: "Benediction",
                            icon: "spell_frost_windwalkon",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of all instant cast spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_judgements",
                            name: "Improved Judgements",
                            icon: "spell_holy_righteousfury",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Judgement spells by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "heart_of_the_crusader",
                            name: "Heart of the Crusader",
                            icon: "spell_holy_holysmite",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "In addition to the normal effect, your Judgement spells will also increase the critical strike chance of all attacks made against that target by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "improved_blessing_of_might",
                            name: "Improved Blessing of Might",
                            icon: "spell_holy_fistofjustice",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the attack power bonus of your Blessing of Might by {value}%.",
                                {
                                    value: [12, 25]
                                }
                            ]
                        },
                        {
                            id: "vindication",
                            name: "Vindication",
                            icon: "spell_holy_vindication",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives the Paladin's damaging attacks a chance to reduce the target's attack power by {value} for 10 sec.",
                                {
                                    value: [287, 574]
                                }
                            ]
                        },
                        {
                            id: "conviction",
                            name: "Conviction",
                            icon: "spell_holy_retributionaura",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with all spells and attacks by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "seal_of_command",
                            name: "Seal of Command",
                            icon: "ability_warrior_innerrage",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "All melee attacks deal (0.36 * Mainhand weapon min damage) to (0.36 * Mainhand weapon max damage) additional Holy damage.  When used with attacks or abilities that strike a single target, this additional Holy damage will strike up to 2 additional targets.  Lasts 30 min.<br><br>Unleashing this Seal's energy will judge an enemy, instantly causing (0.19 * Mainhand weapon min damage + 0.08 * Attack power + 0.13 * Spell power) to (0.19 * Mainhand weapon max damage + 0.08 * Attack power + 0.13 * Spell power) Holy damage."
                            ]
                        },
                        {
                            id: "pursuit_of_justice",
                            name: "Pursuit of Justice",
                            icon: "spell_holy_persuitofjustice",
                            row: 2,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of all Disarm effects by {value1}% and increases movement and mounted movement speed by {value2}%.  This does not stack with other movement speed increasing effects.",
                                {
                                    value1: [25, 50],
                                    value2: [8, 15]
                                }
                            ]
                        },
                        {
                            id: "eye_for_an_eye",
                            name: "Eye for an Eye",
                            icon: "spell_holy_eyeforaneye",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All criticals against you cause {value}% of the damage taken to the attacker as well.  The damage caused by Eye for an Eye will not exceed 50% of the Paladin's total health.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "sanctity_of_battle",
                            name: "Sanctity of Battle",
                            icon: "spell_holy_holysmite",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to critically hit with all spells and attacks by {value1}% and increases the damage caused by Exorcism and Crusader Strike by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "crusade",
                            name: "Crusade",
                            icon: "spell_holy_crusade",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused by {value}% and all damage caused against Humanoids, Demons, Undead and Elementals by an additional {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "two_handed_weapon_specialization",
                            name: "Two-Handed Weapon Specialization",
                            icon: "inv_hammer_04",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "sanctified_retribution",
                            name: "Sanctified Retribution",
                            icon: "spell_holy_mindvision",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the damage caused by Retribution Aura by 50% and all damage caused by friendly targets affected by any of your Auras is increased by 3%."
                            ]
                        },
                        {
                            id: "vengeance",
                            name: "Vengeance",
                            icon: "ability_racial_avatar",
                            row: 5,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "conviction",
                            description: [
                                "Gives you a {value}% bonus to Physical and Holy damage you deal for 30 sec after dealing a critical strike from a weapon swing, spell, or ability.  This effect stacks up to 3 times.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "divine_purpose",
                            name: "Divine Purpose",
                            icon: "spell_holy_divinepurpose",
                            row: 5,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces your chance to be hit by spells and ranged attacks by {value1}% and gives your Hand of Freedom spell a {value2}% chance to remove any Stun effects on the target.",
                                {
                                    value1: [2, 4],
                                    value2: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "the_art_of_war",
                            name: "The Art of War",
                            icon: "ability_paladin_artofwar",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Judgement, Crusader Strike and Divine Storm abilities by {value1}% and when your melee attacks critically hit {value2}.",
                                {
                                    value1: [5, 10],
                                    value2: ["the cast time of your next Flash of Light or Exorcism is reduced by 0.75 sec", "your next Flash of Light  or Exorcism spell becomes instant cast"]
                                }
                            ]
                        },
                        {
                            id: "repentance",
                            name: "Repentance",
                            icon: "spell_holy_prayerofhealing",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Puts the enemy target in a state of meditation, incapacitating them for up to 1 min, and removing the effect of Righteous Vengeance.  Any damage caused will awaken the target.  Usable against Demons, Dragonkin, Giants, Humanoids and Undead."
                            ]
                        },
                        {
                            id: "judgements_of_the_wise",
                            name: "Judgements of the Wise",
                            icon: "ability_paladin_judgementofthewise",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your damaging Judgement spells have a {value}% chance to grant the Replenishment effect to up to 10 party or raid members mana regeneration equal to 1% of their maximum mana per 5 sec for 15 sec, and to immediately grant you 25% of your base mana.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "fanaticism",
                            name: "Fanaticism",
                            icon: "spell_holy_fanaticism",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "repentance",
                            description: [
                                "Increases the critical strike chance of all Judgements capable of a critical hit by {value1}% and reduces threat caused by all actions by {value2}% except when under the effects of Righteous Fury.",
                                {
                                    value1: [6, 12, 18],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "sanctified_wrath",
                            name: "Sanctified Wrath",
                            icon: "ability_paladin_sanctifiedwrath",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of Hammer of Wrath by {value1}%, reduces the cooldown of Avenging Wrath by {value2} secs and while affected by Avenging Wrath {value1}% of all damage caused bypasses damage reduction effects.",
                                {
                                    value1: [25, 50],
                                    value2: [30, 60]
                                }
                            ]
                        },
                        {
                            id: "swift_retribution",
                            name: "Swift Retribution",
                            icon: "ability_paladin_swiftretribution",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your auras also increase casting, ranged and melee attack speeds by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "crusader_strike",
                            name: "Crusader Strike",
                            icon: "spell_holy_crusaderstrike",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "An instant strike that causes 75% weapon damage."
                            ]
                        },
                        {
                            id: "sheath_of_light",
                            name: "Sheath of Light",
                            icon: "ability_paladin_sheathoflight",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell power by an amount equal to {value1}% of your attack power and your critical healing spells heal the target for {value2}% of the healed amount over 12 seconds.",
                                {
                                    value1: [10, 20, 30],
                                    value2: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "righteous_vengeance",
                            name: "Righteous Vengeance",
                            icon: "ability_paladin_righteousvengeance",
                            row: 9,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When your Judgement, Crusader Strike and Divine Storm spells deal a critical strike, your target will take {value}% additional damage over 8 sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "divine_storm",
                            name: "Divine Storm",
                            icon: "ability_paladin_divinestorm",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "An instant weapon attack that causes 110% of weapon damage to up to 4 enemies within 8 yards.  The Divine Storm heals up to 3 party or raid members totaling 25% of the damage caused."
                            ]
                        }
                    ]
                },
                priest: {
                    // priest - wotlk
                    Discipline: [
                        {
                            id: "unbreakable_will",
                            name: "Unbreakable Will",
                            icon: "spell_magic_magearmor",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of Stun, Fear, and Silence effects done to you by an additional {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "twin_disciplines",
                            name: "Twin Disciplines",
                            icon: "spell_holy_sealofvengeance",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage and healing done by your instant spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "silent_resolve",
                            name: "Silent Resolve",
                            icon: "spell_nature_manaregentotem",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your Holy and Discipline spells by {value1}% and reduces the chance your helpful spells and damage over time effects will be dispelled by {value2}%.",
                                {
                                    value1: [7, 14, 20],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_inner_fire",
                            name: "Improved Inner Fire",
                            icon: "spell_holy_innerfire",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Inner Fire spell by {value1}%, and increases the total number of charges by {value2}.",
                                {
                                    value1: [15, 30, 45],
                                    value2: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "improved_power_word_fortitude",
                            name: "Improved Power Word: Fortitude",
                            icon: "spell_holy_wordfortitude",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Power Word: Fortitude and Prayer of Fortitude spells by {value1}%, and increases your total Stamina by {value2}%.",
                                {
                                    value1: [15, 30],
                                    value2: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "martyrdom",
                            name: "Martyrdom",
                            icon: "spell_nature_tranquility",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value1}% chance to gain the Focused Casting effect that lasts for 6 sec after being the victim of a melee or ranged critical strike.  The Focused Casting effect reduces the pushback suffered from damaging attacks while casting Priest spells and decreases the duration of Interrupt effects by {value}%.",
                                {
                                    value1: [50, 100],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "meditation",
                            name: "Meditation",
                            icon: "spell_nature_sleep",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Allows {value}% of your mana regeneration to continue while casting.",
                                {
                                    value: [17, 33, 50]
                                }
                            ]
                        },
                        {
                            id: "inner_focus",
                            name: "Inner Focus",
                            icon: "spell_frost_windwalkon",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, reduces the mana cost of your next spell by 100% and increases its critical effect chance by 25% if it is capable of a critical effect."
                            ]
                        },
                        {
                            id: "improved_power_word_shield",
                            name: "Improved Power Word: Shield",
                            icon: "spell_holy_powerwordshield",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage absorbed by your Power Word: Shield by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "absolution",
                            name: "Absolution",
                            icon: "spell_holy_absolution",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Dispel Magic, Cure Disease, Abolish Disease and Mass Dispel spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "mental_agility",
                            name: "Mental Agility",
                            icon: "ability_hibernation",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your instant cast spells by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_mana_burn",
                            name: "Improved Mana Burn",
                            icon: "spell_shadow_manaburn",
                            row: 3,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Mana Burn spell by {value} sec.",
                                {
                                    value: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "reflective_shield",
                            name: "Reflective Shield",
                            icon: "spell_holy_powerwordshield",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Causes {value}% of the damage you absorb with Power Word: Shield to reflect back at the attacker.  This damage causes no threat.",
                                {
                                    value: [22, 45]
                                }
                            ]
                        },
                        {
                            id: "mental_strength",
                            name: "Mental Strength",
                            icon: "spell_nature_enchantarmor",
                            row: 4,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your total Intellect by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "soul_warding",
                            name: "Soul Warding",
                            icon: "spell_holy_pureofheart",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "improved_power_word_shield",
                            description: [
                                "Reduces the cooldown of your Power Word: Shield ability by 4 sec, and reduces the mana cost of your Power Word: Shield by 15%."
                            ]
                        },
                        {
                            id: "focused_power",
                            name: "Focused Power",
                            icon: "spell_shadow_focusedpower",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases damage and healing done by your spells by {value1}%. In addition, your Mass Dispel cast time is reduced by {value2} sec.",
                                {
                                    value1: [2, 4],
                                    value2: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "enlightenment",
                            name: "Enlightenment",
                            icon: "spell_arcane_mindmastery",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Spirit by {value}% and increases your spell haste by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "focused_will",
                            name: "Focused Will",
                            icon: "spell_arcane_focusedpower",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell critical effect chance by {value1}%, and after taking a critical hit you gain the Focused Will effect, reducing all damage taken by {value2}% and increasing healing effects on you by {value3}%.  Stacks up to 3 times.  Lasts 8 sec.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [2, 3, 4],
                                    value3: [3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "power_infusion",
                            name: "Power Infusion",
                            icon: "spell_holy_powerinfusion",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "mental_strength",
                            description: [
                                "Infuses the target with power, increasing spell casting speed by 20% and reducing the mana cost of all spells by 20%.  Lasts 15 sec."
                            ]
                        },
                        {
                            id: "improved_flash_heal",
                            name: "Improved Flash Heal",
                            icon: "spell_holy_chastise",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Flash Heal by {value1}%, and increases the critical effect chance of your Flash Heal by {value2}% on friendly targets at or below 50% health.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "renewed_hope",
                            name: "Renewed Hope",
                            icon: "spell_holy_holyprotection",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Flash Heal, Greater Heal and Penance (Heal) spells by {value1}% on targets afflicted by the Weakened Soul effect, and you have a {value2}% chance to reduce all damage taken by 3% for 1 min to all friendly party and raid targets when you cast Power Word: Shield. This effect has a 2 sec cooldown.",
                                {
                                    value1: [2, 4],
                                    value2: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "rapture",
                            name: "Rapture",
                            icon: "spell_holy_rapture",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When your Power Word: Shield is completely absorbed or dispelled you are instantly energized with {mana}% of your total mana, and you have a {resource}% chance to energize your shielded target with 2% total mana, 8 rage, 16 energy or 32 runic power. This effect can only occur once every 12 sec.",
                                {
                                    mana: [1.5, 2, 2.5],
                                    resource: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "aspiration",
                            name: "Aspiration",
                            icon: "spell_holy_aspiration",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Inner Focus, Power Infusion, Pain Suppression and Penance spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "divine_aegis",
                            name: "Divine Aegis",
                            icon: "spell_holy_devineaegis",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Critical heals create a protective shield on the target, absorbing {value}% of the amount healed. Lasts 12 sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "pain_suppression",
                            name: "Pain Suppression",
                            icon: "spell_holy_painsupression",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly reduces a friendly target's threat by 5%, reduces all damage taken by 40% and increases resistance to Dispel mechanics by 65% for 8 sec."
                            ]
                        },
                        {
                            id: "grace",
                            name: "Grace",
                            icon: "spell_holy_hopeandgrace",
                            row: 8,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Flash Heal, Greater Heal, and Penance spells have a {value}% chance to bless the target with Grace, increasing all healing received from the Priest by 3%. This effect will stack up to 3 times. Effect lasts 15 sec. Grace can only be active on one target at a time.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "borrowed_time",
                            name: "Borrowed Time",
                            icon: "spell_holy_borrowedtime",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Grants {haste}% spell haste for your next spell after casting Power Word: Shield, and increases the amount absorbed by your Power Word: Shield equal to {absorbed}% of your spell power.",
                                {
                                    haste: [5, 10, 15, 20, 25],
                                    absorbed: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "penance",
                            name: "Penance",
                            icon: "spell_holy_penance",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Launches a volley of holy light at the target, causing 240 Holy damage to an enemy, or 670 to 756 healing to an ally instantly and every 1 sec for 2 sec."
                            ]
                        }
                    ],
                    // priest - wotlk
                    Holy: [
                        {
                            id: "healing_focus",
                            name: "Healing Focus",
                            icon: "spell_holy_healingfocus",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting any healing spell by {value}%.",
                                {
                                    value: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "improved_renew",
                            name: "Improved Renew",
                            icon: "spell_holy_renew",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Renew spell by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "holy_specialization",
                            name: "Holy Specialization",
                            icon: "spell_holy_sealofsalvation",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Holy spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "spell_warding",
                            name: "Spell Warding",
                            icon: "spell_holy_spellwarding",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces all spell damage taken by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "divine_fury",
                            name: "Divine Fury",
                            icon: "spell_holy_sealofwrath",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Smite, Holy Fire, Heal and Greater Heal spells by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "desperate_prayer",
                            name: "Desperate Prayer",
                            icon: "spell_holy_restoration",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly heals the caster for 263 to 325."
                            ]
                        },
                        {
                            id: "blessed_recovery",
                            name: "Blessed Recovery",
                            icon: "spell_holy_blessedrecovery",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "After being struck by a melee or ranged critical hit, Blessed Recovery heals you for {value}% of the damage taken over 6 sec.  Additional critical hits taken during the effect increase the healing received.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "inspiration",
                            name: "Inspiration",
                            icon: "spell_holy_layonhands",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces your target's physical damage taken by {value}% for 15 sec after getting a critical effect from your Flash Heal, Heal, Greater Heal, Binding Heal, Penance, Prayer of Mending, Prayer of Healing, or Circle of Healing spell.",
                                {
                                    value: [3, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "holy_reach",
                            name: "Holy Reach",
                            icon: "spell_holy_purify",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Smite and Holy Fire spells and the radius of your Prayer of Healing, Holy Nova, Divine Hymn and Circle of Healing spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_healing",
                            name: "Improved Healing",
                            icon: "spell_holy_heal02",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Lesser Heal, Heal, Greater Heal, Divine Hymn and Penance spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "searing_light",
                            name: "Searing Light",
                            icon: "spell_holy_searinglightpriest",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "divine_fury",
                            description: [
                                "Increases the damage of your Smite, Holy Fire, Holy Nova and Penance spells by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "healing_prayers",
                            name: "Healing Prayers",
                            icon: "spell_holy_prayerofhealing02",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Prayer of Healing and Prayer of Mending spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "spirit_of_redemption",
                            name: "Spirit of Redemption",
                            icon: "inv_enchant_essenceeternallarge",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases total Spirit by 5% and upon death, the priest becomes the Spirit of Redemption for 15 sec.  The Spirit of Redemption cannot move, attack, be attacked or targeted by any spells or effects.  While in this form the priest can cast any healing spell free of cost.  When the effect ends, the priest dies."
                            ]
                        },
                        {
                            id: "spiritual_guidance",
                            name: "Spiritual Guidance",
                            icon: "spell_holy_spiritualguidence",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases spell power by {value}% of your total Spirit.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "surge_of_light",
                            name: "Surge of Light",
                            icon: "spell_holy_surgeoflight",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your spell criticals have a {value}% chance to cause your next Smite or Flash Heal spell to be instant cast, cost no mana but be incapable of a critical hit.  This effect lasts 10 sec.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "spiritual_healing",
                            name: "Spiritual Healing",
                            icon: "spell_nature_moonglow",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "holy_concentration",
                            name: "Holy Concentration",
                            icon: "spell_holy_fanaticism",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your mana regeneration from spirit is increased by {value}% for 8 sec after you critically heal with Flash Heal, Greater Heal, Binding Heal or Empowered Renew.",
                                {
                                    value: [16, 32, 50]
                                }
                            ]
                        },
                        {
                            id: "lightwell",
                            name: "Lightwell",
                            icon: "spell_holy_summonlightwell",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "spirit_of_redemption",
                            description: [
                                "Creates a Holy Lightwell.  Friendly players can click the Lightwell to restore 1 health over 6 sec.  Attacks done to you equal to 30% of your total health will cancel the effect. Lightwell lasts for 3 min or 10 charges."
                            ]
                        },
                        {
                            id: "blessed_resilience",
                            name: "Blessed Resilience",
                            icon: "spell_holy_blessedresillience",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your healing spells by {value1}%, and critical hits made against you have a {value2}% chance to prevent you from being critically hit again for 6 sec.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "body_and_soul",
                            name: "Body and Soul",
                            icon: "spell_holy_symbolofhope",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "When you cast Power Word: Shield, you increase the target's movement speed by {value1}% for 4 sec, and you have a {value2}% chance when you cast Abolish Disease on yourself to also cleanse 1 poison effect in addition to diseases.",
                                {
                                    value1: [30, 60],
                                    value2: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "empowered_healing",
                            name: "Empowered Healing",
                            icon: "spell_holy_greaterheal",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Greater Heal spell gains an additional {value1}% and your Flash Heal and Binding Heal gain an additional {value2}% of your bonus healing effects.",
                                {
                                    value1: [8, 16, 24, 32, 40],
                                    value2: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "serendipity",
                            name: "Serendipity",
                            icon: "spell_holy_serendipity",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you heal with Binding Heal or Flash Heal, the cast time of your next Greater Heal or Prayer of Healing spell is reduced by {value}%. Stacks up to 3 times. Lasts 20 sec.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "empowered_renew",
                            name: "Empowered Renew",
                            icon: "ability_paladin_infusionoflight",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Renew spell gains an additional {value}% of your bonus healing effects, and your Renew will instantly heal the target for {value}% of the total periodic effect.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "circle_of_healing",
                            name: "Circle of Healing",
                            icon: "spell_holy_circleofrenewal",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Heals up to 5 friendly party or raid members within 15 yards of the target for 347 to 383."
                            ]
                        },
                        {
                            id: "test_of_faith",
                            name: "Test of Faith",
                            icon: "spell_holy_testoffaith",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases healing by {value}% on friendly targets at or below 50% health.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "divine_providence",
                            name: "Divine Providence",
                            icon: "spell_holy_divineprovidence",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by Circle of Healing, Binding Heal, Holy Nova, Prayer of Healing, Divine Hymn and Prayer of Mending by {value1}%, and reduces the cooldown of your Prayer of Mending by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "guardian_spirit",
                            name: "Guardian Spirit",
                            icon: "spell_holy_guardianspirit",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Calls upon a guardian spirit to watch over the friendly target. The spirit increases the healing received by the target by 40%, and also prevents the target from dying by sacrificing itself.  This sacrifice terminates the effect but heals the target of 50% of their maximum health. Lasts 10 sec."
                            ]
                        }
                    ],
                    // priest - wotlk
                    Shadow: [
                        {
                            id: "spirit_tap",
                            name: "Spirit Tap",
                            icon: "spell_shadow_requiem",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to gain a 100% bonus to your Spirit after killing a target that yields experience or honor.  For the duration, your mana will regenerate at a 83% rate while casting.  Lasts 15 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_spirit_tap",
                            name: "Improved Spirit Tap",
                            icon: "spell_shadow_requiem",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "spirit_tap",
                            description: [
                                "Your Mind Blast and Shadow Word: Death critical strikes have a 100% chance and your Mind Flay critical strikes have a 50% chance to increase your total Spirit by {spirit}%. For the duration, your mana will regenerate at a {rate}% rate while casting. Lasts 8 sec.",
                                {
                                    spirit: [5, 10],
                                    rate: [17, 33]
                                }
                            ]
                        },
                        {
                            id: "darkness",
                            name: "Darkness",
                            icon: "spell_shadow_twilight",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Shadow spell damage by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "shadow_affinity",
                            name: "Shadow Affinity",
                            icon: "spell_shadow_shadowward",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your Shadow spells by {value1}%, and you receive {value2}% of your base mana when your Shadow Word: Pain or Vampiric Touch spells are dispelled.",
                                {
                                    value1: [8, 16, 25],
                                    value2: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "improved_shadow_word_pain",
                            name: "Improved Shadow Word: Pain",
                            icon: "spell_shadow_shadowwordpain",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Shadow Word: Pain spell by {value}%.",
                                {
                                    value: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "shadow_focus",
                            name: "Shadow Focus",
                            icon: "spell_shadow_burningspirit",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with your Shadow spells by {value1}%, and reduces the mana cost of your Shadow spells by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_psychic_scream",
                            name: "Improved Psychic Scream",
                            icon: "spell_shadow_psychicscream",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Psychic Scream spell by {value} sec.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_mind_blast",
                            name: "Improved Mind Blast",
                            icon: "spell_shadow_unholyfrenzy",
                            row: 2,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Mind Blast spell by {value1} sec., and while in Shadowform your Mind Blast also has a {value2}% chance to reduce all healing done to the target by 20% for 10 sec.",
                                {
                                    value1: [0.5, 1, 1.5, 2, 2.5],
                                    value2: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "mind_flay",
                            name: "Mind Flay",
                            icon: "spell_shadow_siphonmana",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Assault the target's mind with Shadow energy, causing 45 Shadow damage over 3 sec and slowing their movement speed by 50%."
                            ]
                        },
                        {
                            id: "veiled_shadows",
                            name: "Veiled Shadows",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the cooldown of your Fade ability by {value} sec, and reduces the cooldown of your Shadowfiend ability by {value2}.",
                                {
                                    value1: [3, 6],
                                    value2: ["1 minute", "2 minutes"]
                                }
                            ]
                        },
                        {
                            id: "shadow_reach",
                            name: "Shadow Reach",
                            icon: "spell_shadow_chilltouch",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your offensive Shadow spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "shadow_weaving",
                            name: "Shadow Weaving",
                            icon: "spell_shadow_blackplague",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Shadow damage spells have a {value}% chance to increase the Shadow damage you deal by 2% for 15 sec.  Stacks up to 5 times.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "silence",
                            name: "Silence",
                            icon: "spell_shadow_impphaseshift",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "improved_psychic_scream",
                            description: [
                                "Silences the target, preventing them from casting spells for 5 sec.  Non-player victim spellcasting is also interrupted for 3 sec."
                            ]
                        },
                        {
                            id: "vampiric_embrace",
                            name: "Vampiric Embrace",
                            icon: "spell_shadow_unsummonbuilding",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Fills you with the embrace of Shadow energy, causing you to be healed for 15% and other party members to be healed for 3% of any single-target Shadow spell damage you deal for 30 min."
                            ]
                        },
                        {
                            id: "improved_vampiric_embrace",
                            name: "Improved Vampiric Embrace",
                            icon: "spell_shadow_improvedvampiricembrace",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "vampiric_embrace",
                            description: [
                                "Increases the healing received from Vampiric Embrace by {value}%.",
                                {
                                    value: [33, 67]
                                }
                            ]
                        },
                        {
                            id: "focused_mind",
                            name: "Focused Mind",
                            icon: "spell_nature_focusedmind",
                            row: 4,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Mind Blast, Mind Control, Mind Flay and Mind Sear spells by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "mind_melt",
                            name: "Mind Melt",
                            icon: "spell_shadow_skull",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Mind Blast, Mind Flay and Mind Sear spells by {value1}%, and increases the periodic critical strike chance of your Vampiric Touch, Devouring Plague and Shadow Word: Pain spells by {value2}%.",
                                {
                                    value1: [2, 4],
                                    value2: [3, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_devouring_plague",
                            name: "Improved Devouring Plague",
                            icon: "spell_shadow_devouringplague",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the periodic damage done by your Devouring Plague by {value1}%, and when you cast Devouring Plague you instantly deal damage equal to {value2}% of its total periodic effect.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "shadowform",
                            name: "Shadowform",
                            icon: "spell_shadow_shadowform",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "vampiric_embrace",
                            description: [
                                "Assume a Shadowform, increasing your Shadow damage by 15%, reducing all damage done to you by 15% and threat generated by 30%.  However, you may not cast Holy spells while in this form except Cure Disease and Abolish Disease.  Grants the periodic damage from your Shadow Word: Pain, Devouring Plague, and Vampiric Touch spells the ability to critically hit for 100% increased damage and grants Devouring Plague and Vampiric Touch the ability to benefit from haste."
                            ]
                        },
                        {
                            id: "shadow_power",
                            name: "Shadow Power",
                            icon: "spell_shadow_shadowpower",
                            row: 6,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Mind Blast, Mind Flay, and Shadow Word: Death spells by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_shadowform",
                            name: "Improved Shadowform",
                            icon: "spell_shadow_summonvoidwalker",
                            row: 7,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "shadowform",
                            description: [
                                "Your Fade ability now has a {fade}% chance to remove all movement impairing effects when used while in Shadowform, and reduces casting or channeling time lost when damaged by {pushback}% when casting any Shadow spell while in Shadowform.",
                                {
                                    fade: [50, 100],
                                    pushback: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "misery",
                            name: "Misery",
                            icon: "spell_shadow_misery",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Shadow Word: Pain, Mind Flay and Vampiric Touch spells also increase the chance for harmful spells to hit by {value1}% lasting 24 sec, and increases the benefit from spell power gained by your Mind Blast, Mind Flay and Mind Sear spells by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "psychic_horror",
                            name: "Psychic Horror",
                            icon: "spell_shadow_psychichorrors",
                            row: 8,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You terrify the target, causing them to tremble in horror for 3 sec and drop their main hand and ranged weapons for 10 sec."
                            ]
                        },
                        {
                            id: "vampiric_touch",
                            name: "Vampiric Touch",
                            icon: "spell_holy_stoicism",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "shadowform",
                            description: [
                                "Causes 450 Shadow damage over 15 sec to your target and causes up to 10 party or raid members to gain 1% of their maximum mana per 5 sec when you deal damage from Mind Blast. In addition, if the Vampiric Touch is dispelled it will cause 720 damage to the afflicted target."
                            ]
                        },
                        {
                            id: "pain_and_suffering",
                            name: "Pain and Suffering",
                            icon: "spell_shadow_painandsuffering",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your Mind Flay has a {refresh}% chance to refresh the duration of your Shadow Word: Pain on the target, and reduces the damage you take from your own Shadow Word: Death by {damage}%.",
                                {
                                    refresh: [33, 66, 100],
                                    damage: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "twisted_faith",
                            name: "Twisted Faith",
                            icon: "spell_shadow_mindtwisting",
                            row: 9,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your spell power by {spellpower}% of your total Spirit, and your damage done by your Mind Flay and Mind Blast is increased by {damage}% if your target is afflicted by your Shadow Word: Pain.",
                                {
                                    spellpower: [4, 8, 12, 16, 20],
                                    damage: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "dispersion",
                            name: "Dispersion",
                            icon: "spell_shadow_dispersion",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "vampiric_touch",
                            description: [
                                "You disperse into pure Shadow energy, reducing all damage taken by 90%.  You are unable to attack or cast spells, but you regenerate 6% mana every 1 sec for 6 sec. Dispersion can be cast while stunned, feared or silenced and clears all snare and movement impairing effects when cast, and makes you immune to them while dispersed."
                            ]
                        }
                    ]
                },
                rogue: {
                    // rogue - wotlk
                    Assassination: [
                        {
                            id: "improved_eviscerate",
                            name: "Improved Eviscerate",
                            icon: "ability_rogue_eviscerate",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Eviscerate ability by {value}%.",
                                {
                                    value: [7, 14, 20]
                                }
                            ]
                        },
                        {
                            id: "remorseless_attacks",
                            name: "Remorseless Attacks",
                            icon: "ability_fiegndead",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "After killing an opponent that yields experience or honor, gives you a {value}% increased critical strike chance on your next Sinister Strike, Hemorrhage, Backstab, Mutilate, Ambush, or Ghostly Strike.  Lasts 20 sec.",
                                {
                                    value: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "malice",
                            name: "Malice",
                            icon: "ability_racial_bloodrage",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your critical strike chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "ruthlessness",
                            name: "Ruthlessness",
                            icon: "ability_druid_disembowel",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your melee finishing moves a {value}% chance to add a combo point to your target.",
                                {
                                    value: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "blood_spatter",
                            name: "Blood Spatter",
                            icon: "ability_rogue_bloodsplatter",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage caused by your Garrote and Rupture abilities by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "puncturing_wounds",
                            name: "Puncturing Wounds",
                            icon: "ability_backstab",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Backstab ability by {backstab}%, and the critical strike chance of your Mutilate ability by {mutilate}%.",
                                {
                                    backstab: [10, 20, 30],
                                    mutilate: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "vigor",
                            name: "Vigor",
                            icon: "spell_nature_earthbindtotem",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your maximum Energy by 10."
                            ]
                        },
                        {
                            id: "improved_expose_armor",
                            name: "Improved Expose Armor",
                            icon: "ability_warrior_riposte",
                            row: 2,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the energy cost of your Expose Armor ability by {value}.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "lethality",
                            name: "Lethality",
                            icon: "ability_criticalstrike",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "malice",
                            description: [
                                "Increases the critical strike damage bonus of all combo point-generating abilities that do not require stealth by {value}%.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "vile_poisons",
                            name: "Vile Poisons",
                            icon: "ability_rogue_feigndeath",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by your poisons and Envenom ability by {value1}% and gives your damage over time poisons an additional {value2}% chance to resist dispel effects.",
                                {
                                    value1: [7, 14, 20],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_poisons",
                            name: "Improved Poisons",
                            icon: "ability_poisons",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the chance to apply Deadly Poison to your target by {value1}% and the frequency of applying Instant Poison to your target by {value2}%.",
                                {
                                    value1: [4, 8, 12, 16, 20],
                                    value2: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "fleet_footed",
                            name: "Fleet Footed",
                            icon: "ability_rogue_fleetfooted",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of all movement impairing effects by {duration}% and increases your movement speed by {speed}%.  This does not stack with other movement speed increasing effects.",
                                {
                                    duration: [15, 30],
                                    speed: [8, 15]
                                }
                            ]
                        },
                        {
                            id: "cold_blood",
                            name: "Cold Blood",
                            icon: "spell_ice_lament",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, increases the critical strike chance of your next offensive ability by 100%."
                            ]
                        },
                        {
                            id: "improved_kidney_shot",
                            name: "Improved Kidney Shot",
                            icon: "ability_rogue_kidneyshot",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "While affected by your Kidney Shot ability, the target receives an additional {value}% damage from all sources.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "quick_recovery",
                            name: "Quick Recovery",
                            icon: "ability_rogue_quickrecovery",
                            row: 4,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "All healing effects on you are increased by {healing}%.  In addition, your finishing moves refund {cost}% of their Energy cost when they fail to hit.",
                                {
                                    healing: [10, 20],
                                    cost: [40, 80]
                                }
                            ]
                        },
                        {
                            id: "seal_fate",
                            name: "Seal Fate",
                            icon: "spell_shadow_chilltouch",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "cold_blood",
                            description: [
                                "Your critical strikes from abilities that add combo points have a {value}% chance to add an additional combo point.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "murder",
                            name: "Murder",
                            icon: "spell_shadow_deathscream",
                            row: 5,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases all damage caused by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "deadly_brew",
                            name: "Deadly Brew",
                            icon: "ability_rogue_deadlybrew",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "When you apply Instant, Wound or Mind-Numbing poison to a target, you have a {value}% chance to apply Crippling poison.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "overkill",
                            name: "Overkill",
                            icon: "ability_hunter_rapidkilling",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "While stealthed, and for 20 seconds after breaking stealth, you regenerate 30% additional energy."
                            ]
                        },
                        {
                            id: "deadened_nerves",
                            name: "Deadened Nerves",
                            icon: "ability_rogue_deadenednerves",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "focused_attacks",
                            name: "Focused Attacks",
                            icon: "ability_rogue_focusedattacks",
                            row: 7,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your melee critical strikes have a {value}% chance to give you 2 energy.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "find_weakness",
                            name: "Find Weakness",
                            icon: "ability_rogue_findweakness",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Offensive ability damage increased by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "master_poisoner",
                            name: "Master Poisoner",
                            icon: "ability_creature_poison_06",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical hit chance of all attacks made against any target you have poisoned by {crit}%, reduces the duration of all Poison effects applied to you by {duration}%, and gives Envenom a {envenom}% chance not to consume Deadly Poison.",
                                {
                                    crit: [1, 2, 3],
                                    duration: [17, 34, 50],
                                    envenom: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "mutilate",
                            name: "Mutilate",
                            icon: "ability_rogue_shadowstrikes",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "overkill",
                            description: [
                                "Instantly attacks with both weapons for 100% weapon damage plus an additional 44 with each weapon.  Damage is increased by 20% against Poisoned targets.  Awards 2 combo points."
                            ]
                        },
                        {
                            id: "turn_the_tables",
                            name: "Turn the Tables",
                            icon: "ability_rogue_turnthetables",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Whenever anyone in your party or raid blocks, dodges, or parries an attack your chance to critically hit with all combo moves is increased by {value}% for 8 sec.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "cut_to_the_chase",
                            name: "Cut to the Chase",
                            icon: "ability_rogue_cuttothechase",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Eviscerate and Envenom abilities have a {value}% chance to refresh your Slice and Dice duration to its 5 combo point maximum.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "hunger_for_blood",
                            name: "Hunger For Blood",
                            icon: "ability_rogue_hungerforblood",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Enrages you, increasing all damage caused by 5%.  Requires a bleed effect to be active on the target.  Lasts 1 min."
                            ]
                        }
                    ],
                    // rogue - wotlk
                    Combat: [
                        {
                            id: "improved_gouge",
                            name: "Improved Gouge",
                            icon: "ability_gouge",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect duration of your Gouge ability by {value} sec.",
                                {
                                    value: [0.5, 1, 1.5]
                                }
                            ]
                        },
                        {
                            id: "improved_sinister_strike",
                            name: "Improved Sinister Strike",
                            icon: "spell_shadow_ritualofsacrifice",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Energy cost of your Sinister Strike ability by {value}.",
                                {
                                    value: [3, 5]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwield",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your offhand weapon by {value}%.",
                                {
                                    value: [10, 20, 30, 40, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_slice_and_dice",
                            name: "Improved Slice and Dice",
                            icon: "ability_rogue_slicedice",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Slice and Dice ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "precision",
                            name: "Precision",
                            icon: "ability_marksmanship",
                            row: 1,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with weapon and poison attacks by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "endurance",
                            name: "Endurance",
                            icon: "spell_shadow_shadowward",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Sprint and Evasion abilities by {cooldown} sec and increases your total Stamina by {stamina}%.",
                                {
                                    cooldown: [30, 60],
                                    stamina: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "riposte",
                            name: "Riposte",
                            icon: "ability_warrior_challange",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "deflection",
                            description: [
                                "A strike that becomes active after parrying an opponent's attack.  This attack deals 150% weapon damage and slows their melee attack speed by 20% for 30 sec.  Awards 1 combo point."
                            ]
                        },
                        {
                            id: "close_quarters_combat",
                            name: "Close Quarters Combat",
                            icon: "inv_weapon_shortblade_05",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "dual_wield_specialization",
                            description: [
                                "Increases your chance to get a critical strike with Daggers and Fist Weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_kick",
                            name: "Improved Kick",
                            icon: "ability_kick",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Kick ability a {value}% chance to silence the target for 2 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_sprint",
                            name: "Improved Sprint",
                            icon: "ability_rogue_sprint",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives a {value}% chance to remove all Movement Impairing effects when you activate your Sprint ability.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "lightning_reflexes",
                            name: "Lightning Reflexes",
                            icon: "spell_nature_invisibilty",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your Dodge chance by {dodge}% and gives you {haste}% melee haste.",
                                {
                                    dodge: [2, 4, 6],
                                    haste: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "aggression",
                            name: "Aggression",
                            icon: "ability_racial_avatar",
                            row: 3,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Sinister Strike, Backstab, and Eviscerate abilities by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "mace_specialization",
                            name: "Mace Specialization",
                            icon: "inv_mace_01",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your attacks with maces ignore up to {value}% of your opponent's armor.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "blade_flurry",
                            name: "Blade Flurry",
                            icon: "ability_warrior_punishingblow",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your attack speed by 20%.  In addition, attacks strike an additional nearby opponent.  Lasts 15 sec."
                            ]
                        },
                        {
                            id: "hack_and_slash",
                            name: "Hack and Slash",
                            icon: "inv_sword_27",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to get an extra attack on the same target after hitting your target with your Sword or Axe.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "weapon_expertise",
                            name: "Weapon Expertise",
                            icon: "spell_holy_blessingofstrength",
                            row: 5,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "blade_flurry",
                            description: [
                                "Increases your expertise by {value}.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "blade_twisting",
                            name: "Blade Twisting",
                            icon: "ability_rogue_bladetwisting",
                            row: 5,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt by Sinister Strike and Backstab by {damage}%, and your damaging melee attacks have a 10% chance to Daze the target for {daze} sec.",
                                {
                                    damage: [5, 10],
                                    daze: [4, 8]
                                }
                            ]
                        },
                        {
                            id: "vitality",
                            name: "Vitality",
                            icon: "ability_warrior_revenge",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your Energy regeneration rate by {value}%.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "adrenaline_rush",
                            name: "Adrenaline Rush",
                            icon: "spell_shadow_shadowworddominate",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases your Energy regeneration rate by 100% for 15 sec."
                            ]
                        },
                        {
                            id: "nerves_of_steel",
                            name: "Nerves of Steel",
                            icon: "ability_rogue_nervesofsteel",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces damage taken while affected by Stun and Fear effects by {value}%.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "throwing_specialization",
                            name: "Throwing Specialization",
                            icon: "ability_rogue_throwingspecialization",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of Throw and Deadly Throw by {range} yards and gives your Deadly Throw a {interrupt}% chance to interrupt the target for 3 sec.",
                                {
                                    range: [2, 4],
                                    interrupt: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "combat_potency",
                            name: "Combat Potency",
                            icon: "inv_weapon_shortblade_38",
                            row: 7,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives your successful off-hand melee attacks a 20% chance to generate {value} Energy.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "unfair_advantage",
                            name: "Unfair Advantage",
                            icon: "ability_rogue_unfairadvantage",
                            row: 8,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Whenever you dodge an attack you gain an Unfair Advantage, striking back for {value}% of your main hand weapon's damage.  This cannot occur more than once per second.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "surprise_attacks",
                            name: "Surprise Attacks",
                            icon: "ability_rogue_surpriseattack",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "adrenaline_rush",
                            description: [
                                "Your finishing moves can no longer be dodged, and the damage dealt by your Sinister Strike, Backstab, Shiv, Hemorrhage and Gouge abilities is increased by 10%."
                            ]
                        },
                        {
                            id: "savage_combat",
                            name: "Savage Combat",
                            icon: "ability_creature_disease_03",
                            row: 8,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your total attack power by {value}% and all physical damage caused to enemies you have poisoned is increased by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "prey_on_the_weak",
                            name: "Prey on the Weak",
                            icon: "ability_rogue_preyontheweak",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your critical strike damage is increased by {value}% when the target has less health than you (as a percentage of total health).",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "killing_spree",
                            name: "Killing Spree",
                            icon: "ability_rogue_murderspree",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Step through the shadows from enemy to enemy within 10 yards, attacking an enemy every .5 secs with both weapons until 5 assaults are made, and increasing all damage done by 20% for the duration.  Can hit the same target multiple times.  Cannot hit invisible or stealthed targets."
                            ]
                        }
                    ],
                    // rogue - wotlk
                    Subtlety: [
                        {
                            id: "relentless_strikes",
                            name: "Relentless Strikes",
                            icon: "ability_warrior_decisivestrike",
                            row: 0,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your finishing moves have a {value}% chance per combo point to restore 25 energy.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "master_of_deception",
                            name: "Master of Deception",
                            icon: "spell_shadow_charm",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance enemies have to detect you while in Stealth mode.{value}",
                                {
                                    value: ["", "  More effective than Master of Deception (Rank 1).", "  More effective than Master of Deception (Rank 2)."]
                                }
                            ]
                        },
                        {
                            id: "opportunity",
                            name: "Opportunity",
                            icon: "ability_warrior_warcry",
                            row: 0,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage dealt with your Backstab, Mutilate, Garrote and Ambush abilities by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "sleight_of_hand",
                            name: "Sleight of Hand",
                            icon: "ability_rogue_feint",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you are critically hit by melee and ranged attacks by {value1}% and increases the threat reduction of your Feint ability by {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "dirty_tricks",
                            name: "Dirty Tricks",
                            icon: "ability_sap",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Blind and Sap abilities by {value1} yards and reduces the energy cost of your Blind and Sap abilities by {value2}%.",
                                {
                                    value1: [2, 5],
                                    value2: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "camouflage",
                            name: "Camouflage",
                            icon: "ability_stealth",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your speed while stealthed by {value1}% and reduces the cooldown of your Stealth ability by {value2} sec.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "elusiveness",
                            name: "Elusiveness",
                            icon: "spell_magic_lesserinvisibilty",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Vanish and Blind abilities by {value1} sec and your Cloak of Shadows ability by {value2} sec.",
                                {
                                    value1: [30, 60],
                                    value2: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "ghostly_strike",
                            name: "Ghostly Strike",
                            icon: "spell_shadow_curse",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "A strike that deals 125% weapon damage (180% if a dagger is equipped) and increases your chance to dodge by 15% for 7 sec.  Awards 1 combo point."
                            ]
                        },
                        {
                            id: "serrated_blades",
                            name: "Serrated Blades",
                            icon: "inv_sword_17",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Causes your attacks to ignore up to {armor}% of your target's Armor and increases the damage dealt by your Rupture ability by {rupture}%.",
                                {
                                    armor: [3, 6, 9],
                                    rupture: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "setup",
                            name: "Setup",
                            icon: "spell_nature_mirrorimage",
                            row: 3,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to add a combo point to your target after dodging their attack or fully resisting one of their spells.  This cannot happen more than once per second.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "initiative",
                            name: "Initiative",
                            icon: "spell_shadow_fumble",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to add an additional combo point to your target when using your Ambush, Garrote, or Cheap Shot ability.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_ambush",
                            name: "Improved Ambush",
                            icon: "ability_rogue_ambush",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Ambush ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "heightened_senses",
                            name: "Heightened Senses",
                            icon: "ability_ambush",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your Stealth detection and reduces the chance you are hit by spells and ranged attacks by {value1}%.{value2}",
                                {
                                    value1: [2, 4],
                                    value2: ["", "  More effective than Heightened Senses (Rank 1)."]
                                }
                            ]
                        },
                        {
                            id: "preparation",
                            name: "Preparation",
                            icon: "spell_shadow_antishadow",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability immediately finishes the cooldown on your Evasion, Sprint, Vanish, Cold Blood and Shadowstep abilities."
                            ]
                        },
                        {
                            id: "dirty_deeds",
                            name: "Dirty Deeds",
                            icon: "spell_shadow_summonsuccubus",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the Energy cost of your Cheap Shot and Garrote abilities by {value}.  Additionally, your special abilities cause {value}% more damage against targets below 35% health.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "hemorrhage",
                            name: "Hemorrhage",
                            icon: "spell_shadow_lifedrain",
                            row: 4,
                            col: 3,
                            ranks: 1,
                            requiresTalents: "serrated_blades",
                            description: [
                                "An instant strike that deals 110% weapon damage (160% if a dagger is equipped) and causes the target to hemorrhage, increasing any Physical damage dealt to the target by up to 13.  Lasts 10 charges or 15 sec.  Awards 1 combo point."
                            ]
                        },
                        {
                            id: "master_of_subtlety",
                            name: "Master of Subtlety",
                            icon: "ability_rogue_masterofsubtlety",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Attacks made while stealthed and for 6 seconds after breaking stealth cause an additional {value}% damage.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "deadliness",
                            name: "Deadliness",
                            icon: "inv_weapon_crossbow_11",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your attack power by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "enveloping_shadows",
                            name: "Enveloping Shadows",
                            icon: "ability_rogue_envelopingshadows",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the damage taken by area of effect attacks by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "premeditation",
                            name: "Premeditation",
                            icon: "spell_shadow_possession",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "preparation",
                            description: [
                                "When used, adds 2 combo points to your target.  You must add to or use those combo points within 20 sec or the combo points are lost."
                            ]
                        },
                        {
                            id: "cheat_death",
                            name: "Cheat Death",
                            icon: "ability_rogue_cheatdeath",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a {value}% chance that an attack which would otherwise kill you will instead reduce you to 10% of your maximum health. In addition, all damage taken will be reduced by up to 90% for 3 sec (modified by resilience).  This effect cannot occur more than once per minute.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "sinister_calling",
                            name: "Sinister Calling",
                            icon: "ability_rogue_sinistercalling",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "premeditation",
                            description: [
                                "Increases your total Agility by {agility}% and increases the percentage damage bonus of Backstab and Hemorrhage by an additional {damage}%.",
                                {
                                    agility: [3, 6, 9, 12, 15],
                                    damage: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "waylay",
                            name: "Waylay",
                            icon: "ability_rogue_waylay",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Ambush and Backstab hits have a {value}% chance to unbalance a target, increasing the time between their melee and ranged attacks by 20%, and reducing movement speed by 50% for 8 sec.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "honor_among_thieves",
                            name: "Honor Among Thieves",
                            icon: "ability_rogue_honoramongstthieves",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When anyone in your group critically hits with a damage or healing spell or ability, you have a {value}% chance to gain a combo point on your current target.  This effect cannot occur more than once every second.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "shadowstep",
                            name: "Shadowstep",
                            icon: "ability_rogue_shadowstep",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Attempts to step through the shadows and reappear behind your enemy and increases movement speed by 70% for 3 sec.  The damage of your next ability is increased by 20% and the threat caused is reduced by 50%.  Lasts 10 sec."
                            ]
                        },
                        {
                            id: "filthy_tricks",
                            name: "Filthy Tricks",
                            icon: "ability_rogue_wrongfullyaccused",
                            row: 8,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown by {other} sec and energy cost by {other} of your Tricks of the Trade, Distract and Shadowstep abilities and reduces the cooldown of Preparation by {preparation} min.",
                                {
                                    other: [5, 10],
                                    preparation: [1.5, 3]
                                }
                            ]
                        },
                        {
                            id: "slaughter_from_the_shadows",
                            name: "Slaughter from the Shadows",
                            icon: "ability_rogue_slaughterfromtheshadows",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the energy cost of your Backstab and Ambush abilities by {cost} and the energy cost of your Hemorrhage by {other}, and increases all damage done by {other}%.",
                                {
                                    cost: [4, 8, 12, 16, 20],
                                    other: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "shadow_dance",
                            name: "Shadow Dance",
                            icon: "ability_rogue_shadowdance",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Enter the Shadow Dance for 6 sec, allowing the use of Sap, Garrote, Ambush, Cheap Shot, Premeditation, Pickpocket and Disarm Trap regardless of being stealthed."
                            ]
                        }
                    ]
                },
                shaman: {
                    // shaman - wotlk
                    Elemental: [
                        {
                            id: "convection",
                            name: "Convection",
                            icon: "spell_nature_wispsplode",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Shock, Lightning Bolt, Chain Lightning, Lava Burst, and Wind Shear spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "concussion",
                            name: "Concussion",
                            icon: "spell_fire_fireball",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Lightning Bolt, Chain Lightning, Thunderstorm, Lava Burst and Shock spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "call_of_flame",
                            name: "Call of Flame",
                            icon: "spell_fire_immolation",
                            row: 1,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire Totems and Fire Nova by {value1}%, and damage done by your Lava Burst spell by {value2}%.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "elemental_warding",
                            name: "Elemental Warding",
                            icon: "spell_nature_spiritarmor",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "elemental_devastation",
                            name: "Elemental Devastation",
                            icon: "classic_spell_fire_elementaldevastation",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your non-periodic offensive spell crits will increase your chance to get a critical strike with melee attacks by {value}% for 10 sec.",
                                {
                                    value: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "reverberation",
                            name: "Reverberation",
                            icon: "spell_frost_frostward",
                            row: 2,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Shock spells and Wind Shear by {value} sec.",
                                {
                                    value: [0.2, 0.4, 0.6, 0.8, 1]
                                }
                            ]
                        },
                        {
                            id: "elemental_focus",
                            name: "Elemental Focus",
                            icon: "spell_shadow_manaburn",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "After landing a non-periodic critical strike with a Fire, Frost, or Nature damage spell, you enter a Clearcasting state.  The Clearcasting state reduces the mana cost of your next 2 damage or healing spells by 40%."
                            ]
                        },
                        {
                            id: "elemental_fury",
                            name: "Elemental Fury",
                            icon: "spell_fire_volcano",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Searing and Magma Totems and your Fire, Frost, and Nature spells by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_fire_nova",
                            name: "Improved Fire Nova",
                            icon: "spell_fire_sealoffire",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire Nova by {value1}% and reduces the cooldown by {value2} sec.",
                                {
                                    value1: [10, 20],
                                    value2: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "eye_of_the_storm",
                            name: "Eye of the Storm",
                            icon: "spell_shadow_soulleech_2",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Lightning Bolt, Chain Lightning, Lava Burst and Hex spells by {value}%.",
                                {
                                    value: [23, 46, 70]
                                }
                            ]
                        },
                        {
                            id: "elemental_reach",
                            name: "Elemental Reach",
                            icon: "spell_nature_stormreach",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Lightning Bolt, Chain Lightning, Fire Nova, and Lava Burst spells by {value1} yards, increases the radius of your Thunderstorm spell by {value2}%, and increases the range of your Flame Shock by {value3} yards.",
                                {
                                    value1: [3, 6],
                                    value2: [10, 20],
                                    value3: [7, 15]
                                }
                            ]
                        },
                        {
                            id: "call_of_thunder",
                            name: "Call of Thunder",
                            icon: "spell_nature_callstorm",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "elemental_focus",
                            description: [
                                "Increases the critical strike chance of your Lightning Bolt, Chain Lightning and Thunderstorm spells by an additional 5%."
                            ]
                        },
                        {
                            id: "unrelenting_storm",
                            name: "Unrelenting Storm",
                            icon: "spell_nature_unrelentingstorm",
                            row: 4,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Regenerate mana equal to {value}% of your Intellect every 5 sec, even while casting.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "elemental_precision",
                            name: "Elemental Precision",
                            icon: "spell_nature_elementalprecision_1",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with Fire, Frost and Nature spells by {value1}% and reduces the threat caused by Fire, Frost and Nature spells by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "lightning_mastery",
                            name: "Lightning Mastery",
                            icon: "spell_lightning_lightningbolt01",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: "elemental_fury",
                            description: [
                                "Reduces the cast time of your Lightning Bolt, Chain Lightning, and Lava Burst spells by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "elemental_mastery",
                            name: "Elemental Mastery",
                            icon: "spell_nature_wispheal",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "call_of_thunder",
                            description: [
                                "When activated, your next Lightning Bolt, Chain Lightning or Lava Burst spell becomes an instant cast spell. In addition, you gain 15% spell haste for 15 sec. Elemental Mastery shares a cooldown with Nature's Swiftness."
                            ]
                        },
                        {
                            id: "storm_earth_and_fire",
                            name: "Storm, Earth and Fire",
                            icon: "spell_shaman_stormearthfire",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Chain Lightning spell by {value1} sec, your Earthbind Totem also has a {value2}% chance to root targets for 5 sec when cast and the periodic damage done by your Flame Shock is increased by {value3}%.",
                                {
                                    value1: [".75", 1.5, 2.5],
                                    value2: [33, 66, 100],
                                    value3: [20, 40, 60]
                                }
                            ]
                        },
                        {
                            id: "booming_echoes",
                            name: "Booming Echoes",
                            icon: "spell_fire_blueflamering",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Flame Shock and Frost Shock spells by an additional {value1} sec., and increases the direct damage done by your Flame Shock and Frost Shock spells by an additional {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "elemental_oath",
                            name: "Elemental Oath",
                            icon: "spell_shaman_elementaloath",
                            row: 7,
                            col: 1,
                            ranks: 2,
                            requiresTalents: "elemental_mastery",
                            description: [
                                "While Clearcasting from Elemental Focus is active, you deal {value1}% more spell damage. In addition, party and raid members within 100 yards receive a {value2}% bonus to their spell critical strike chance.",
                                {
                                    value1: [5, 10],
                                    value2: [3, 5]
                                }
                            ]
                        },
                        {
                            id: "lightning_overload",
                            name: "Lightning Overload",
                            icon: "spell_nature_lightningoverload",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Lightning Bolt and Chain Lightning spells a {value}% chance to cast a second, similar spell on the same target at no additional cost that causes half damage and no threat.",
                                {
                                    value: [11, 22, 33]
                                }
                            ]
                        },
                        {
                            id: "astral_shift",
                            name: "Astral Shift",
                            icon: "spell_shaman_astralshift",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When stunned, feared or silenced you shift into the Astral Plane reducing all damage taken by {value}% for the duration of the stun, fear or silence effect.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "totem_of_wrath",
                            name: "Totem of Wrath",
                            icon: "spell_fire_totemofwrath",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summons a Totem of Wrath with 5 health at the feet of the caster.  The totem increases spell power by 100 for all party and raid members, and increases the critical strike chance of all attacks by 3% against all enemies within 40 yards.  Lasts 5 min."
                            ]
                        },
                        {
                            id: "lava_flows",
                            name: "Lava Flows",
                            icon: "spell_shaman_lavaflow",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Lava Burst spell by an additional {value1}%, and when your Flame Shock is dispelled your spell casting speed is increased by {value2}% for 6 sec.",
                                {
                                    value1: [6, 12, 24],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "shamanism",
                            name: "Shamanism",
                            icon: "spell_unused2",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Lightning Bolt and Chain Lightning spells gain an additional {lightning}% and your Lava Burst gains an additional {burst}% of your bonus damage effects.",
                                {
                                    lightning: [4, 8, 12, 16, 20],
                                    burst: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "thunderstorm",
                            name: "Thunderstorm",
                            icon: "spell_shaman_thunderstorm",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You call down a bolt of lightning, energizing you and damaging nearby enemies within 10 yards. Restores 8% mana to you and deals 566 to 644 Nature damage to all nearby enemies, knocking them back 20 yards. This spell is usable while stunned."
                            ]
                        }
                    ],
                    // shaman - wotlk
                    Enhancement: [
                        {
                            id: "enhancing_totems",
                            name: "Enhancing Totems",
                            icon: "spell_nature_earthbindtotem",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Strength of Earth and Flametongue Totems by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "earths_grasp",
                            name: "Earth's Grasp",
                            icon: "spell_nature_stoneclawtotem",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the health of your Stoneclaw Totem by {health}% and the radius of your Earthbind Totem by {radius}%, and reduces the cooldown of both totems by {value}%.",
                                {
                                    health: [25, 50],
                                    radius: [10, 20],
                                    cooldown: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "ancestral_knowledge",
                            name: "Ancestral Knowledge",
                            icon: "spell_shadow_grimward",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Intellect by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "guardian_totems",
                            name: "Guardian Totems",
                            icon: "spell_nature_stoneskintotem",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of armor increased by your Stoneskin Totem by {damage}% and reduces the cooldown of your Grounding Totem by {cooldown} sec.",
                                {
                                    damage: [10, 20],
                                    cooldown: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "thundering_strikes",
                            name: "Thundering Strikes",
                            icon: "ability_thunderbolt",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Improves your chance to get a critical strike with all spells and attacks by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_ghost_wolf",
                            name: "Improved Ghost Wolf",
                            icon: "spell_nature_spiritwolf",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Ghost Wolf spell by {value} sec.",
                                {
                                    value: [1, 2]
                                }
                            ]
                        },
                        {
                            id: "improved_shields",
                            name: "Improved Shields",
                            icon: "spell_nature_lightningshield",
                            row: 1,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Lightning Shield orbs by {value}%, increases the amount of mana gained from your Water Shield orbs by {value}% and increases the amount of healing done by your Earth Shield orbs by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "elemental_weapons",
                            name: "Elemental Weapons",
                            icon: "spell_fire_flametounge",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage caused by your Windfury Weapon effect by {windfury}%, increases the spell damage on your Flametongue Weapon by {flameearth}% and increases the bonus healing on your Earthliving Weapon by {flameearth}%.",
                                {
                                    windfury: [13, 27, 40],
                                    flameearth: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "shamanistic_focus",
                            name: "Shamanistic Focus",
                            icon: "spell_nature_elementalabsorption",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your Shock spells by 45%."
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_nature_mirrorimage",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to dodge by an additional {dodge}%, and reduces the duration of all Disarm effects used against you by {disarm}%. This does not stack with other Disarm duration reducing effects.",
                                {
                                    dodge: [1, 2, 3],
                                    disarm: [16, 25, 50],
                                }
                            ]
                        },
                        {
                            id: "flurry",
                            name: "Flurry",
                            icon: "ability_ghoulfrenzy",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "thundering_strikes",
                            description: [
                                "Increases your attack speed by {value}% for your next 3 swings after dealing a critical strike.",
                                {
                                    value: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Stamina by {armor}%, and reduces the duration of movement slowing effects on you by 10%.",
                                {
                                    armor: [2, 4, 6, 8, 10],
                                    slow: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_windfury_totem",
                            name: "Improved Windfury Totem",
                            icon: "spell_nature_windfury",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the melee haste granted by your Windfury totem by {value}%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "spirit_weapons",
                            name: "Spirit Weapons",
                            icon: "ability_parry",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Gives a chance to parry enemy melee attacks and reduces the threat generated by 30%."
                            ]
                        },
                        {
                            id: "mental_dexterity",
                            name: "Mental Dexterity",
                            icon: "spell_nature_bloodlust",
                            row: 4,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your Attack Power by {value}% of your Intellect.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "unleashed_rage",
                            name: "Unleashed Rage",
                            icon: "spell_nature_unleashedrage",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your expertise by {expertise}, and increases all party and raid members' attack power by {attackpower}% while within 100 yards of the Shaman.",
                                {
                                    expertise: [3, 6, 9],
                                    attackpower: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "weapon_mastery",
                            name: "Weapon Mastery",
                            icon: "ability_hunter_swiftstrike",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with all weapons by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "frozen_power",
                            name: "Frozen Power",
                            icon: "spell_fire_bluecano",
                            row: 5,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Lightning Bolt, Chain Lightning, Lava Lash and Shock spells by {damage}% on targets afflicted by your Frostbrand Attack effect, and your Frost Shock has a {root}% chance to root the target in ice for 5 sec. when used on targets at or further than 15 yards from you.",
                                {
                                    damage: [5, 10],
                                    root: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwieldspecialization",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "dual_wield",
                            description: [
                                "Increases your chance to hit while dual wielding by an additional {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "dual_wield",
                            name: "Dual Wield",
                            icon: "ability_dualwield",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "spirit_weapons",
                            description: [
                                "Allows one-hand and off-hand weapons to be equipped in the off-hand."
                            ]
                        },
                        {
                            id: "stormstrike",
                            name: "Stormstrike",
                            icon: "ability_shaman_stormstrike",
                            row: 6,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly attack with both weapons.  In addition, the next 2 sources of Nature damage dealt to the target are increased by 20%.  Lasts 12 sec."
                            ]
                        },
                        {
                            id: "static_shock",
                            name: "Static Shock",
                            icon: "spell_shaman_staticshock",
                            row: 7,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a {value}% chance to hit your target with a Lightning Shield orb charge when you deal damage with melee attacks and abilities, and your Lightning Shield gains {value} additional charges.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "lava_lash",
                            name: "Lava Lash",
                            icon: "ability_shaman_lavalash",
                            row: 7,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "dual_wield",
                            description: [
                                "You charge your off-hand weapon with lava, instantly dealing 100% off-hand Weapon damage. Damage is increased by 25% if your off-hand weapon is enchanted with Flametongue."
                            ]
                        },
                        {
                            id: "improved_stormstrike",
                            name: "Improved Stormstrike",
                            icon: "spell_shaman_improvedstormstrike",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "stormstrike",
                            description: [
                                "When you Stormstrike, you have a {value}% chance to immediately grant you 20% of your base mana.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "mental_quickness",
                            name: "Mental Quickness",
                            icon: "spell_nature_mentalquickness",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your instant cast Shaman spells by {cost}% and increases your spell power by an amount equal to {attackpower}% of your attack power.",
                                {
                                    cost: [2, 4, 6],
                                    attackpower: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "shamanistic_rage",
                            name: "Shamanistic Rage",
                            icon: "spell_nature_shamanrage",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by 30% and gives your successful melee attacks a chance to regenerate mana equal to 15% of your attack power. This spell is usable while stunned.  Lasts 15 sec."
                            ]
                        },
                        {
                            id: "earthen_power",
                            name: "Earthen Power",
                            icon: "spell_nature_earthelemental_totem",
                            row: 8,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Earthbind Totem's pulses have a {earthbind}% chance to also remove all snare effects from you and nearby friendly targets, and your Earth Shock reduces enemy attack speed by an additional {earthshock}%.",
                                {
                                    earthbind: [50, 100],
                                    earthshock: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "maelstrom_weapon",
                            name: "Maelstrom Weapon",
                            icon: "spell_shaman_maelstromweapon",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "When you deal damage with a melee weapon, you have a chance {value} reduce the cast time of your next Lightning Bolt, Chain Lightning, Lesser Healing Wave, Healing Wave, Chain Heal, or Hex spell by 20%. Stacks up to 5 times. Lasts 30 sec.",
                                {
                                    value: ["to", "(higher than rank 1) to", "(higher than rank 2) to", "(higher than rank 3) to", "(higher than rank 4) to"]
                                }
                            ]
                        },
                        {
                            id: "feral_spirit",
                            name: "Feral Spirit",
                            icon: "spell_shaman_feralspirit",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summons two Spirit Wolves under the command of the Shaman, lasting 45 sec."
                            ]
                        }
                    ],
                    // shaman - wotlk
                    Restoration: [
                        {
                            id: "improved_healing_wave",
                            name: "Improved Healing Wave",
                            icon: "spell_nature_magicimmunity",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Healing Wave spell by {value} sec.",
                                {
                                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                                }
                            ]
                        },
                        {
                            id: "totemic_focus",
                            name: "Totemic Focus",
                            icon: "spell_nature_moonglow",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your totems by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_reincarnation",
                            name: "Improved Reincarnation",
                            icon: "spell_nature_reincarnation",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Reincarnation spell by {value1} min and increases the amount of health and mana recovered when reincarnating by an additional {value2}%.",
                                {
                                    value1: [7, 15],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "healing_grace",
                            name: "Healing Grace",
                            icon: "spell_nature_healingtouch",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the threat generated by your healing spells by {value1}% and reduces the chance your helpful spells and damage over time effects will be dispelled by {value2}%.",
                                {
                                    value1: [5, 10, 15],
                                    value2: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "tidal_focus",
                            name: "Tidal Focus",
                            icon: "spell_frost_manarecharge",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the mana cost of your healing spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_water_shield",
                            name: "Improved Water Shield",
                            icon: "ability_shaman_watershield",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You have a {value1}% chance to instantly gain mana as if you consumed a Water Shield Orb when you gain a critical effect from your Healing Wave or Riptide spells, a {value2}% chance when you gain a critical effect from your Lesser Healing Wave spell, and a {value3}% chance when you gain a critical effect from your Chain Heal spell.",
                                {
                                    value1: [33, 66, 100],
                                    value2: [20, 40, 60],
                                    value3: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "healing_focus",
                            name: "Healing Focus",
                            icon: "spell_nature_healingwavelesser",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting any Shaman healing spell by {value}%.",
                                {
                                    value: [23, 46, 70]
                                }
                            ]
                        },
                        {
                            id: "tidal_force",
                            name: "Tidal Force",
                            icon: "spell_frost_frostbolt",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your Healing Wave, Lesser Healing Wave and Chain Heal by 60%. Each critical heal reduces the chance by 20%. Lasts 20 sec."
                            ]
                        },
                        {
                            id: "ancestral_healing",
                            name: "Ancestral Healing",
                            icon: "spell_nature_undyingstrength",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces your target's physical damage taken by {value}% for 15 sec after getting a critical effect from one of your healing spells.",
                                {
                                    value: [3, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "restorative_totems",
                            name: "Restorative Totems",
                            icon: "spell_nature_manaregentotem",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Mana Spring Totem by {value1}%, and increases the amount healed by your Healing Stream Totem by {value2}%.",
                                {
                                    value1: [7, 12, 20],
                                    value2: [15, 30, 45]
                                }
                            ]
                        },
                        {
                            id: "tidal_mastery",
                            name: "Tidal Mastery",
                            icon: "spell_nature_tranquility",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your healing and lightning spells by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "healing_way",
                            name: "Healing Way",
                            icon: "classic_spell_nature_healingway",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Healing Wave spell by {value}%.",
                                {
                                    value: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "natures_swiftness",
                            name: "Nature's Swiftness",
                            icon: "spell_nature_ravenform",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, your next Nature spell with a base casting time less than 10 sec. becomes an instant cast spell. Nature's Swiftness shares a cooldown with Elemental Mastery."
                            ]
                        },
                        {
                            id: "focused_mind",
                            name: "Focused Mind",
                            icon: "spell_nature_focusedmind",
                            row: 4,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of any Silence or Interrupt effects used against the Shaman by {value}%. This effect does not stack with other similar effects.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "purification",
                            name: "Purification",
                            icon: "spell_frost_wizardmark",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your healing spells by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "natures_guardian",
                            name: "Nature's Guardian",
                            icon: "spell_nature_natureguardian",
                            row: 6,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Whenever a damaging attack brings you below 30% health, your maximum health is increased by {value}% for 10 sec and your threat level towards the attacker is reduced.  30 second cooldown.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "mana_tide_totem",
                            name: "Mana Tide Totem",
                            icon: "spell_frost_summonwaterelemental",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "restorative_totems",
                            description: [
                                "Summons a Mana Tide Totem with 10% of the caster's health at the feet of the caster for 12 sec that restores 6% of total mana every 3 seconds to group members within 30 yards."
                            ]
                        },
                        {
                            id: "cleanse_spirit",
                            name: "Cleanse Spirit",
                            icon: "ability_shaman_cleansespirit",
                            row: 6,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "purification",
                            description: [
                                "Cleanse the spirit of a friendly target, removing 1 poison effect, 1 disease effect, and 1 curse effect."
                            ]
                        },
                        {
                            id: "blessing_of_the_eternals",
                            name: "Blessing of the Eternals",
                            icon: "spell_shaman_blessingofeternals",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical effect chance of your spells by {value1}%, and increases the chance to apply the Earthliving heal over time effect on the target by {value2}% when they are at or under 35% total health.",
                                {
                                    value1: [2, 4],
                                    value2: [40, 80]
                                }
                            ]
                        },
                        {
                            id: "improved_chain_heal",
                            name: "Improved Chain Heal",
                            icon: "spell_nature_healingwavegreater",
                            row: 7,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount healed by your Chain Heal spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "natures_blessing",
                            name: "Nature's Blessing",
                            icon: "spell_nature_natureblessing",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your healing by an amount equal to {value}% of your Intellect.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "ancestral_awakening",
                            name: "Ancestral Awakening",
                            icon: "spell_shaman_ancestralawakening",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you critically heal with your Healing Wave, Lesser Healing Wave or Riptide you summon an Ancestral spirit to aid you, instantly healing the lowest percentage health friendly party or raid target within 40 yards for {value}% of the amount healed.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "earth_shield",
                            name: "Earth Shield",
                            icon: "spell_nature_skinofearth",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Protects the target with an earthen shield, reducing casting or channeling time lost when damaged by 30%  and causing attacks to heal the shielded target for 150.  This effect can only occur once every few seconds.  6 charges.  Lasts 10 min.  Earth Shield can only be placed on one target at a time and only one Elemental Shield can be active on a target at a time."
                            ]
                        },
                        {
                            id: "improved_earth_shield",
                            name: "Improved Earth Shield",
                            icon: "spell_nature_skinofearth",
                            row: 8,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "earth_shield",
                            description: [
                                "Increases the amount of charges for your Earth Shield by {value1}, and increases the healing done by your Earth Shield by {value2}%.",
                                {
                                    value1: [1, 2],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "tidal_waves",
                            name: "Tidal Waves",
                            icon: "spell_shaman_tidalwaves",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "When you cast Chain Heal or Riptide, you have a {value1}% chance to lower the cast time of your Healing Wave spell by 30% and increase the critical effect chance of your Lesser Healing Wave spell by 25%, until two such spells have been cast. In addition, your Healing Wave gains an additional {value2}% of your bonus healing effects and your Lesser Healing Wave gains an additional {value3}% of your bonus healing effects.",
                                {
                                    value1: [20, 40, 60, 80, 100],
                                    value2: [4, 8, 12, 16, 20],
                                    value3: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "riptide",
                            name: "Riptide",
                            icon: "spell_nature_riptide",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Heals a friendly target for 639 to 691 and another 665 over 15 sec.  Your next Chain Heal cast on that primary target within 15 sec will consume the healing over time effect and increase the amount of the Chain Heal by 25%."
                            ]
                        }
                    ]
                },
                warlock: {
                    // warlock - wotlk
                    Affliction: [
                        {
                            id: "improved_curse_of_agony",
                            name: "Improved Curse of Agony",
                            icon: "spell_shadow_curseofsargeras",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Curse of Agony by {value}%.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "suppression",
                            name: "Suppression",
                            icon: "spell_shadow_unsummonbuilding",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with spells by {value1}%, and reduces the mana cost of your Affliction spells by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "improved_corruption",
                            name: "Improved Corruption",
                            icon: "spell_shadow_abominationexplosion",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Corruption by {value1}%, and increases the critical strike chance of your Seed of Corruption by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_curse_of_weakness",
                            name: "Improved Curse of Weakness",
                            icon: "spell_shadow_curseofmannoroth",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of attack power reduced by your Curse of Weakness by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_drain_soul",
                            name: "Improved Drain Soul",
                            icon: "spell_shadow_haunting",
                            row: 1,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Returns {value1}% of your maximum mana if the target is killed by you while you drain its soul.  In addition, your Affliction spells generate {value2}% less threat.",
                                {
                                    value1: [7, 15],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_life_tap",
                            name: "Improved Life Tap",
                            icon: "spell_shadow_burningspirit",
                            row: 1,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Mana awarded by your Life Tap spell by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "soul_siphon",
                            name: "Soul Siphon",
                            icon: "spell_shadow_lifedrain02",
                            row: 1,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount drained by your Drain Life and Drain Soul spells by an additional {value1}% for each Affliction effect on the target, up to a maximum of {value2}% additional effect.",
                                {
                                    value1: [3, 6],
                                    value2: [9, 18]
                                }
                            ]
                        },
                        {
                            id: "improved_fear",
                            name: "Improved Fear",
                            icon: "spell_shadow_possession",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Causes your Fear spell to inflict a Nightmare on the target when the fear effect ends. The Nightmare effect reduces the target's movement speed by {value}% for 5 sec.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "fel_concentration",
                            name: "Fel Concentration",
                            icon: "spell_shadow_fingerofdeath",
                            row: 2,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting Drain Life, Drain Mana, Drain Soul, Unstable Affliction, and Haunt by {value}%.",
                                {
                                    value: [23, 46, 70]
                                }
                            ]
                        },
                        {
                            id: "amplify_curse",
                            name: "Amplify Curse",
                            icon: "spell_shadow_contagion",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Reduces the global cooldown of your Curses by 0.5 sec."
                            ]
                        },
                        {
                            id: "grim_reach",
                            name: "Grim Reach",
                            icon: "spell_shadow_callofbone",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Affliction spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "nightfall",
                            name: "Nightfall",
                            icon: "spell_shadow_twilight",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Corruption and Drain Life spells a {value}% chance to cause you to enter a Shadow Trance state after damaging the opponent.  The Shadow Trance state reduces the casting time of your next Shadow Bolt spell by 100%.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "empowered_corruption",
                            name: "Empowered Corruption",
                            icon: "spell_shadow_abominationexplosion",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Corruption spell by an amount equal to {value}% of your spell power.",
                                {
                                    value: [12, 24, 36]
                                }
                            ]
                        },
                        {
                            id: "shadow_embrace",
                            name: "Shadow Embrace",
                            icon: "spell_shadow_shadowembrace",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Shadow Bolt and Haunt spells apply the Shadow Embrace effect, increasing all shadow periodic damage dealt to the target by you by {value1}%, and reduces all periodic healing done to the target by {value2}%. Lasts for 12 sec. Stacks up to 3  times.",
                                {
                                    value1: [1, 2, 3, 4, 5],
                                    value2: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "siphon_life",
                            name: "Siphon Life",
                            icon: "spell_shadow_requiem",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When you deal damage with your Corruption spell, you are instantly healed for 40% of the damage done. In addition, the damage done by your Corruption, Seed of Corruption and Unstable Affliction damage over time effects is increased by 5%."
                            ]
                        },
                        {
                            id: "curse_of_exhaustion",
                            name: "Curse of Exhaustion",
                            icon: "spell_shadow_grimward",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "amplify_curse",
                            description: [
                                "Reduces the target's movement speed by 30% for 12 sec.  Only one Curse per Warlock can be active on any one target."
                            ]
                        },
                        {
                            id: "improved_felhunter",
                            name: "Improved Felhunter",
                            icon: "spell_shadow_summonfelhunter",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your Felhunter regains {value1}% of its maximum mana each time it hits with its Shadow Bite ability and the cooldown on that ability is reduced by {value2} sec.  In addition, increases the effect of your Felhunter's Fel Intelligence by {value3}%.",
                                {
                                    value1: [4, 8],
                                    value2: [2, 4],
                                    value3: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "shadow_mastery",
                            name: "Shadow Mastery",
                            icon: "spell_shadow_shadetruesight",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "siphon_life",
                            description: [
                                "Increases the damage dealt or life drained by your Shadow spells and your Felhunter's Shadow Bite ability by {value}%.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "eradication",
                            name: "Eradication",
                            icon: "ability_warlock_eradication",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you deal damage with Corruption, you have 6% chance to increase your spell casting speed by {value}% for 10 sec.",
                                {
                                    value: [6, 12, 20]
                                }
                            ]
                        },
                        {
                            id: "contagion",
                            name: "Contagion",
                            icon: "spell_shadow_painfulafflictions",
                            row: 6,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of Curse of Agony, Corruption and Seed of Corruption by {value1}% and reduces the chance your helpful Affliction spells and damage over time effects will be dispelled by an additional {value2}%.",
                                {
                                    value1: [1, 2, 3, 4, 5],
                                    value2: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "dark_pact",
                            name: "Dark Pact",
                            icon: "spell_shadow_darkritual",
                            row: 6,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Drains 305 of your summoned demon's Mana, returning 100% to you."
                            ]
                        },
                        {
                            id: "improved_howl_of_terror",
                            name: "Improved Howl of Terror",
                            icon: "spell_shadow_deathscream",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Howl of Terror spell by {value} sec.",
                                {
                                    value: [0.8, 1.5]
                                }
                            ]
                        },
                        {
                            id: "malediction",
                            name: "Malediction",
                            icon: "spell_shadow_curseofachimonde",
                            row: 7,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage by {value1}%, and increases the periodic critical strike chance of your Corruption and Unstable Affliction spells by {value2}%.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "deaths_embrace",
                            name: "Death's Embrace",
                            icon: "spell_shadow_deathsembrace",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the amount drained by your Drain Life by {value1}% while your health is at or below 20% health, and increases the damage done by your Shadow spells by {value2}% when your target is at or below 35% health.",
                                {
                                    value1: [10, 20, 30],
                                    value2: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "unstable_affliction",
                            name: "Unstable Affliction",
                            icon: "spell_shadow_unstableaffliction_3",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "contagion",
                            description: [
                                "Shadow energy slowly destroys the target, causing 550 damage over 15 sec.  In addition, if the Unstable Affliction is dispelled it will cause 990 damage to the dispeller and silence them for 5 sec. Only one Unstable Affliction or Immolate per Warlock can be active on any one target."
                            ]
                        },
                        {
                            id: "pandemic",
                            name: "Pandemic",
                            icon: "spell_shadow_unstableaffliction_2",
                            row: 8,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "unstable_affliction",
                            description: [
                                "Grants the periodic damage from your Corruption and Unstable Affliction spells the ability to critically hit for 100% increased damage, and increases the critical strike damage bonus of your Haunt spell by 100%."
                            ]
                        },
                        {
                            id: "everlasting_affliction",
                            name: "Everlasting Affliction",
                            icon: "ability_warlock_everlastingaffliction",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Corruption and Unstable Affliction spells gain an additional {value1}% of your bonus spell damage, and your Drain Life, Drain Soul, Shadow Bolt, and Haunt spells have a {value2}% chance to reset the duration of your Corruption spell on the target.",
                                {
                                    value1: [1, 2, 3, 4, 5],
                                    value2: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "haunt",
                            name: "Haunt",
                            icon: "ability_warlock_haunt",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You send a ghostly soul into the target, dealing 405 to 473 Shadow damage and increasing all damage done by your Shadow damage-over-time effects on the target by 20% for 12 sec. When the Haunt spell ends or is dispelled, the soul returns to you, healing you for 100% of the damage it did to the target."
                            ]
                        }
                    ],
                    // warlock - wotlk
                    Demonology: [
                        {
                            id: "improved_healthstone",
                            name: "Improved Healthstone",
                            icon: "inv_stone_04",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Health restored by your Healthstone by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_imp",
                            name: "Improved Imp",
                            icon: "spell_shadow_summonimp",
                            row: 0,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effect of your Imp's Firebolt, Fire Shield, and Blood Pact spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "demonic_embrace",
                            name: "Demonic Embrace",
                            icon: "spell_shadow_metamorphosis",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Stamina by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "fel_synergy",
                            name: "Fel Synergy",
                            icon: "spell_shadow_felmending",
                            row: 0,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "You have a {value}% chance to heal your pet for 15% of the amount of spell damage done by you.",
                                {
                                    value: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_health_funnel",
                            name: "Improved Health Funnel",
                            icon: "spell_shadow_lifedrain",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of Health transferred by your Health Funnel spell by {effectiveness}% and reduces the health cost by {effectiveness}%. In addition, your summoned Demon takes {damage}% less damage while under the effect of your Health Funnel.",
                                {
                                    effectiveness: [10, 20],
                                    damage: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "demonic_brutality",
                            name: "Demonic Brutality",
                            icon: "spell_shadow_summonvoidwalker",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your Voidwalker's Torment, Consume Shadows, Sacrifice and Suffering spells by {effectiveness}%, and increases the attack power bonus on your Felguard's Demonic Frenzy effect by {apbonus}%.",
                                {
                                    effectiveness: [10, 20, 30],
                                    apbonus: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "fel_vitality",
                            name: "Fel Vitality",
                            icon: "spell_holy_magicalsentry",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the Stamina and Intellect of your Imp, Voidwalker, Succubus, Felhunter and Felguard by {stat}% and increases your maximum health and mana by {hpmana}%.",
                                {
                                    stat: [5, 10, 15],
                                    hpmana: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "improved_succubus",
                            name: "Improved Succubus",
                            icon: "spell_shadow_summonsuccubus",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cast time of your Succubus' Seduction by {casttime}%, and increases the duration of your Succubus' Seduction and Lesser Invisibility spells by {duration}%.",
                                {
                                    casttime: [22, 44, 66],
                                    duration: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "soul_link",
                            name: "Soul Link",
                            icon: "spell_shadow_gathershadows",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When active, 20% of all damage taken by the caster is taken by your Imp, Voidwalker, Succubus, Felhunter, Felguard, or enslaved demon instead.  That damage cannot be prevented. Lasts as long as the demon is active and controlled."
                            ]
                        },
                        {
                            id: "fel_domination",
                            name: "Fel Domination",
                            icon: "spell_nature_removecurse",
                            row: 2,
                            col: 2,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your next Imp, Voidwalker, Succubus, Felhunter or Felguard Summon spell has its casting time reduced by 5.5 sec and its Mana cost reduced by 50%."
                            ]
                        },
                        {
                            id: "demonic_aegis",
                            name: "Demonic Aegis",
                            icon: "spell_shadow_ragingscream",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the effectiveness of your Demon Armor and Fel Armor spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "unholy_power",
                            name: "Unholy Power",
                            icon: "spell_shadow_shadowworddominate",
                            row: 3,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "soul_link",
                            description: [
                                "Increases the damage done by your Voidwalker, Succubus, Felhunter and Felguard's melee attacks and your Imp's Firebolt by {value}%.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "master_summoner",
                            name: "Master Summoner",
                            icon: "spell_shadow_impphaseshift",
                            row: 3,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "fel_domination",
                            description: [
                                "Reduces the casting time of your Imp, Voidwalker, Succubus, Felhunter and Fel Guard Summoning spells by {casttime} sec and the Mana cost by {cost}%.",
                                {
                                    casttime: [2, 4],
                                    cost: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "mana_feed",
                            name: "Mana Feed",
                            icon: "spell_shadow_manafeed",
                            row: 4,
                            col: 0,
                            ranks: 1,
                            requiresTalents: "unholy_power",
                            description: [
                                "When you gain mana from Drain Mana or Life Tap spells, your summoned demon gains 100% of the mana you gain."
                            ]
                        },
                        {
                            id: "master_conjuror",
                            name: "Master Conjuror",
                            icon: "inv_ammo_firetar",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the combat ratings gained from your conjured Firestone and Spellstone by {value}%.",
                                {
                                    value: [150, 300]
                                }
                            ]
                        },
                        {
                            id: "master_demonologist",
                            name: "Master Demonologist",
                            icon: "spell_shadow_shadowpact",
                            row: 5,
                            col: 1,
                            ranks: 5,
                            requiresTalents: "unholy_power",
                            description: [
                                "Grants both the Warlock and the summoned demon an effect as long as that demon is active.<br><br>Imp - Increases your Fire damage by {impfelguardsucc}%, and increases the critical effect chance of your Fire spells by {impfelguardsucc}%.<br><br>Voidwalker - Reduces Physical damage taken by {voidfelhunter}%.<br><br>Succubus - Increases your Shadow damage by {impfelguardsucc}%, and increases the critical effect chance of your Shadow spells by {impfelguardsucc}%.<br><br>Felhunter - Reduces all spell damage taken by {voidfelhunter}%.<br><br>Felguard - Increases all damage done by {impfelguardsucc}%, and reduces all damage taken by {impfelguardsucc}%.",
                                {
                                    impfelguardsucc: [1, 2, 3, 4, 5],
                                    voidfelhunter: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "molten_core",
                            name: "Molten Core",
                            icon: "ability_warlock_moltencore",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the duration of your Immolate by {duration} sec, and you have a {moltencore}% chance to gain the Molten Core effect when your Corruption deals damage. The Molten Core effect empowers your next 3 Incinerate or Soul Fire spells cast within 15 sec.<br><br>Incinerate - Increases damage done by {damage}% and reduces cast time by {inccasttime}%.<br><br>Soul Fire - Increases damage done by {damage}% and increases critical strike chance by {sfcrit}%.",
                                {
                                    duration: [3, 6, 9],
                                    moltencore: [4, 8, 12],
                                    damage: [6, 12, 18],
                                    inccasttime: [10, 20, 30],
                                    sfcrit: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "demonic_resilience",
                            name: "Demonic Resilience",
                            icon: "spell_shadow_demonicfortitude",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you'll be critically hit by melee and spells by {crit}% and reduces all damage your summoned demon takes by {damage}%.",
                                {
                                    crit: [1, 2, 3],
                                    damage: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "demonic_empowerment",
                            name: "Demonic Empowerment",
                            icon: "ability_warlock_demonicempowerment",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "master_demonologist",
                            description: [
                                "Grants the Warlock's summoned demon Empowerment.<br><br>Imp - Increases the Imp's spell critical strike chance by 20% for 30 sec.<br><br>Voidwalker - Increases the Voidwalker's health by 20%, and its threat generated from spells and attacks by 20% for 20 sec.<br><br>Succubus - Instantly vanishes, causing the demon to go into an improved Invisibility state. The vanish effect removes all stuns, snares and movement impairing effects from the demon.<br><br>Felhunter - Dispels all magical effects from the Felhunter.<br><br>Felguard - Increases the Felguard's attack speed by 20% and breaks all stun, snare and movement impairing effects and makes your Felguard immune to them for 15 sec."
                            ]
                        },
                        {
                            id: "demonic_knowledge",
                            name: "Demonic Knowledge",
                            icon: "spell_shadow_improvedvampiricembrace",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage by an amount equal to {value}% of the total of your active demon's Stamina plus Intellect.",
                                {
                                    value: [4, 8, 12]
                                }
                            ]
                        },
                        {
                            id: "demonic_tactics",
                            name: "Demonic Tactics",
                            icon: "spell_shadow_demonictactics",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases melee and spell critical strike chance for you and your summoned demon by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "decimation",
                            name: "Decimation",
                            icon: "spell_fire_fireball02",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "When you Shadowbolt, Incinerate or Soul Fire a target that is at or below 35% health, the cast time of Soul Fire spell is reduced by {value}% for 10 sec. Soul Fires cast under the effect of Decimation cost no shard.",
                                {
                                    value: [20, 40]
                                }
                            ]
                        },
                        {
                            id: "improved_demonic_tactics",
                            name: "Improved Demonic Tactics",
                            icon: "ability_warlock_improveddemonictactics",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "demonic_tactics",
                            description: [
                                "Increases your summoned demon's critical strike chance equal to {value}% of your critical strike chance.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "summon_felguard",
                            name: "Summon Felguard",
                            icon: "spell_shadow_summonfelguard",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Summons a Felguard under the command of the Warlock."
                            ]
                        },
                        {
                            id: "nemesis",
                            name: "Nemesis",
                            icon: "spell_shadow_demonicempathy",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Demonic Empowerment, Metamorphosis, and Fel Domination spells by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "demonic_pact",
                            name: "Demonic Pact",
                            icon: "spell_shadow_demonicpact",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your spell damage by {value}%, and your pet's criticals apply the Demonic Pact effect to your party or raid members. Demonic Pact increases spell power by {value}% of your Spell Damage for 45 sec. This effect has a 1 sec cooldown. Does not work on Enslaved demons.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "metamorphosis",
                            name: "Metamorphosis",
                            icon: "spell_shadow_demonform",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You transform into a Demon for 30 sec.  This form increases your armor by 600%, damage by 20%, reduces the chance you'll be critically hit by melee attacks by 6% and reduces the duration of stun and snare effects by 50%.  You gain some unique demon abilities in addition to your normal abilities. 3 minute cooldown."
                            ]
                        }
                    ],
                    // warlock - wotlk
                    Destruction: [
                        {
                            id: "improved_shadow_bolt",
                            name: "Improved Shadow Bolt",
                            icon: "spell_shadow_shadowbolt",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Shadow Bolt spell by {damage}%, and your Shadow Bolt has a {chance}% chance to cause your target to be vulnerable to spell damage, increasing spell critical strike chance against that target by 5%. Effect lasts 30 sec.",
                                {
                                    damage: [2, 4, 6, 8, 10],
                                    chance: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "bane",
                            name: "Bane",
                            icon: "spell_shadow_deathpact",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Reduces the casting time of your Shadow Bolt, Chaos Bolt and Immolate spells by {value1} sec and your Soul Fire spell by {value2} sec.",
                                {
                                    value1: [0.1, 0.2, 0.3, 0.4, 0.5],
                                    value2: [0.4, 0.8, 1.2, 1.6, 2]
                                }
                            ]
                        },
                        {
                            id: "aftermath",
                            name: "Aftermath",
                            icon: "spell_fire_fire",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the periodic damage done by your Immolate by {value1}%, and your Conflagrate has a {value2}% chance to daze the target for 5 sec.",
                                {
                                    value1: [3, 6],
                                    value2: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "molten_skin",
                            name: "Molten Skin",
                            icon: "ability_mage_moltenarmor",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces all damage taken by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "cataclysm",
                            name: "Cataclysm",
                            icon: "spell_fire_windsofwoe",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the Mana cost of your Destruction spells by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "demonic_power",
                            name: "Demonic Power",
                            icon: "spell_fire_firebolt",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Succubus' Lash of Pain spell by {value1} sec. and reduces the casting time of your Imp's Firebolt spell by {value2} sec.",
                                {
                                    value1: [3, 6],
                                    value2: [0.25, 0.50]
                                }
                            ]
                        },
                        {
                            id: "shadowburn",
                            name: "Shadowburn",
                            icon: "spell_shadow_scourgebuild",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly blasts the target for 91 to 104 Shadow damage.  If the target dies within 5 sec of Shadowburn, and yields experience or honor, the caster gains a Soul Shard."
                            ]
                        },
                        {
                            id: "ruin",
                            name: "Ruin",
                            icon: "spell_shadow_shadowwordpain",
                            row: 2,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your Destruction spells and your Imp's Firebolt spell by {value}%.",
                                {
                                    value: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "intensity",
                            name: "Intensity",
                            icon: "spell_fire_lavaspawn",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the pushback suffered from damaging attacks while casting or channeling any Destruction spell by {value}%.",
                                {
                                    value: [35, 70]
                                }
                            ]
                        },
                        {
                            id: "destructive_reach",
                            name: "Destructive Reach",
                            icon: "spell_shadow_corpseexplode",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the range of your Destruction spells by {value}% and reduces threat caused by Destruction spells by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_searing_pain",
                            name: "Improved Searing Pain",
                            icon: "spell_fire_soulburn",
                            row: 3,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Searing Pain spell by {value}%.",
                                {
                                    value: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "backlash",
                            name: "Backlash",
                            icon: "spell_fire_playingwithfire",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "intensity",
                            description: [
                                "Increases your critical strike chance with spells by an additional {value1}% and gives you a {value2}% chance when hit by a physical attack to reduce the cast time of your next Shadow Bolt or Incinerate spell by 100%.  This effect lasts 8 sec and will not occur more than once every 8 seconds.",
                                {
                                    value1: [1, 2, 3],
                                    value2: [8, 16, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_immolate",
                            name: "Improved Immolate",
                            icon: "spell_fire_immolation",
                            row: 4,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Immolate spell by {value}%.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "devastation",
                            name: "Devastation",
                            icon: "spell_fire_flameshock",
                            row: 4,
                            col: 2,
                            ranks: 1,
                            requiresTalents: "ruin",
                            description: [
                                "Increases the critical strike chance of your Destruction spells by 5%."
                            ]
                        },
                        {
                            id: "nether_protection",
                            name: "Nether Protection",
                            icon: "spell_shadow_netherprotection",
                            row: 5,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "After being hit with a spell, you have a {value}% chance to gain Nether Protection, reducing all damage by that spell school by 30% for 8 sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "emberstorm",
                            name: "Emberstorm",
                            icon: "spell_fire_selfdestruct",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Fire spells by {value1}% and reduces the cast time of your Incinerate spell by {value2}%.",
                                {
                                    value1: [3, 6, 9, 12, 15],
                                    value2: [0.05, 0.10, 0.15, 0.20, 0.25]
                                }
                            ]
                        },
                        {
                            id: "conflagrate",
                            name: "Conflagrate",
                            icon: "spell_fire_fireball",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "improved_immolate",
                            description: [
                                "Consumes an Immolate or Shadowflame effect on the enemy target to instantly deal damage equal to 60% of your Immolate or Shadowflame, and causes an additional 40% damage over 6 sec."
                            ]
                        },
                        {
                            id: "soul_leech",
                            name: "Soul Leech",
                            icon: "spell_shadow_soulleech_3",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Shadow Bolt, Shadowburn, Chaos Bolt, Soul Fire, Incinerate, Searing Pain and Conflagrate spells a {value}% chance to return health equal to 20% of the damage caused.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "pyroclasm",
                            name: "Pyroclasm",
                            icon: "spell_fire_volcano",
                            row: 6,
                            col: 3,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "When you critically strike with Searing Pain or Conflagrate, your Fire and Shadow spell damage is increased by {value}% for 10 sec.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "shadow_and_flame",
                            name: "Shadow and Flame",
                            icon: "spell_shadow_shadowandflame",
                            row: 7,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your Shadow Bolt, Shadowburn, Chaos Bolt and Incinerate spells gain an additional {value}% of your bonus spell damage effects.",
                                {
                                    value: [4, 8, 12, 16, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_soul_leech",
                            name: "Improved Soul Leech",
                            icon: "ability_warlock_improvedsoulleech",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: "soul_leech",
                            description: [
                                "Your Soul Leech effect also restores mana to you and your summoned demon equal to {value1}% of maximum mana, and has a {value2}% chance to grant up to 10 party or raid members mana regeneration equal to 1% of maximum mana per 5 sec. Lasts for 15 sec.",
                                {
                                    value1: [1, 2],
                                    value2: [50, 100]
                                }
                            ]
                        },
                        {
                            id: "backdraft",
                            name: "Backdraft",
                            icon: "ability_warlock_backdraft",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: "conflagrate",
                            description: [
                                "When you cast Conflagrate, the cast time and global cooldown of your next three non-channeled, non-instant Destruction spells is reduced by {value}%. Lasts 15 sec.",
                                {
                                    value: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "shadowfury",
                            name: "Shadowfury",
                            icon: "spell_shadow_shadowfury",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Shadowfury is unleashed, causing 357 to 422 Shadow damage and stunning all enemies within 8 yds for 3 sec."
                            ]
                        },
                        {
                            id: "empowered_imp",
                            name: "Empowered Imp",
                            icon: "ability_warlock_empoweredimp",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Imp by {value1}%, and all critical hits done by your Imp have a {value2}% chance to increase your spell critical hit chance for your next spell by 100%. This effect lasts 8 sec.",
                                {
                                    value1: [10, 20, 30],
                                    value2: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "fire_and_brimstone",
                            name: "Fire and Brimstone",
                            icon: "ability_warlock_fireandbrimstone",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Incinerate and Chaos Bolt spells to targets afflicted by your Immolate by {value1}%, and the critical strike chance of your Conflagrate spell is increased by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "chaos_bolt",
                            name: "Chaos Bolt",
                            icon: "ability_warlock_chaosbolt",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Sends a bolt of chaotic fire at the enemy, dealing 864 to 1089 Fire damage. Chaos Bolt cannot be resisted, and pierces through all absorption effects."
                            ]
                        }
                    ]
                },
                warrior: {
                    // warrior - wotlk
                    Arms: [
                        {
                            id: "improved_heroic_strike",
                            name: "Improved Heroic Strike",
                            icon: "ability_rogue_ambush",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Heroic Strike ability by {value}.",
                                {
                                    value: ["1 rage point", "2 rage points", "3 rage points"]
                                }
                            ]
                        },
                        {
                            id: "deflection",
                            name: "Deflection",
                            icon: "ability_parry",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Parry chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_rend",
                            name: "Improved Rend",
                            icon: "ability_gouge",
                            row: 0,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the bleed damage done by your Rend ability by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "improved_charge",
                            name: "Improved Charge",
                            icon: "ability_warrior_charge",
                            row: 1,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the amount of rage generated by your Charge ability by {value}.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "iron_will",
                            name: "Iron Will",
                            icon: "spell_magic_magearmor",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the duration of all Stun and Charm effects used against you by {value}%.",
                                {
                                    value: [7, 14, 20]
                                }
                            ]
                        },
                        {
                            id: "tactical_mastery",
                            name: "Tactical Mastery",
                            icon: "spell_nature_enchantarmor",
                            row: 1,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "You retain up to an additional {value1} of your rage points when you change stances.  Also greatly increases the threat generated by your Bloodthirst and Mortal Strike abilities when you are in Defensive Stance{value2}.",
                                {
                                    value1: [5, 10, 15],
                                    value2: ["", " (More effective than Rank 1)", " (More effective than Rank 2)"]
                                }
                            ]
                        },
                        {
                            id: "improved_overpower",
                            name: "Improved Overpower",
                            icon: "inv_sword_05",
                            row: 2,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Overpower ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "anger_management",
                            name: "Anger Management",
                            icon: "spell_holy_blessingofstamina",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Generates 1 rage per 3 seconds."
                            ]
                        },
                        {
                            id: "impale",
                            name: "Impale",
                            icon: "ability_searingarrow",
                            row: 2,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike damage bonus of your abilities by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "deep_wounds",
                            name: "Deep Wounds",
                            icon: "ability_backstab",
                            row: 2,
                            col: 3,
                            ranks: 3,
                            requiresTalents: "impale",
                            description: [
                                "Your critical strikes cause the opponent to bleed, dealing {value}% of your melee weapon's average damage over 6 sec.",
                                {
                                    value: [16, 32, 48]
                                }
                            ]
                        },
                        {
                            id: "two_handed_weapon_specialization",
                            name: "Two-Handed Weapon Specialization",
                            icon: "inv_axe_09",
                            row: 3,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "taste_for_blood",
                            name: "Taste for Blood",
                            icon: "ability_rogue_hungerforblood",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Whenever your Rend ability causes damage, you have a {value}% chance of allowing the use of your Overpower ability for 9 sec.  1 charge.  This effect will not occur more than once every 6 sec.",
                                {
                                    value: [33, 66, 100]
                                }
                            ]
                        },
                        {
                            id: "poleaxe_specialization",
                            name: "Poleaxe Specialization",
                            icon: "inv_axe_06",
                            row: 4,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike and the critical damage caused with Axes and Polearms by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "sweeping_strikes",
                            name: "Sweeping Strikes",
                            icon: "ability_rogue_slicedice",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your next 5 melee attacks strike an additional nearby opponent."
                            ]
                        },
                        {
                            id: "mace_specialization",
                            name: "Mace Specialization",
                            icon: "inv_mace_01",
                            row: 4,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your attacks with maces ignore up to {value}% of your opponent's armor.",
                                {
                                    value: [3, 6, 9, 12, 15]
                                }
                            ]
                        },
                        {
                            id: "sword_specialization",
                            name: "Sword Specialization",
                            icon: "inv_sword_27",
                            row: 4,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a {value}% chance to get an extra attack on the same target after hitting your target with your Sword.  This effect cannot occur more than once every 6 seconds.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "weapon_mastery",
                            name: "Weapon Mastery",
                            icon: "ability_warrior_weaponmastery",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance for your attacks to be dodged by {value1}% and reduces the duration of all Disarm effects used against you by {value2}%.  This does not stack with other Disarm duration reducing effects.",
                                {
                                    value1: [1, 2],
                                    value2: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "improved_hamstring",
                            name: "Improved Hamstring",
                            icon: "ability_shockwave",
                            row: 5,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Gives your Hamstring ability a {value}% chance to immobilize the target for 5 sec.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "trauma",
                            name: "Trauma",
                            icon: "ability_warrior_bloodnova",
                            row: 5,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your melee critical strikes increase the effectiveness of Bleed effects on the target by {value}% for 1 min.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "second_wind",
                            name: "Second Wind",
                            icon: "ability_hunter_harass",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Whenever you are struck by a Stun or Immobilize effect you will generate {value1} rage and {value2}% of your total health over 10 sec.",
                                {
                                    value1: [10, 20],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "mortal_strike",
                            name: "Mortal Strike",
                            icon: "ability_warrior_savageblow",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "sweeping_strikes",
                            description: [
                                "A vicious strike that deals weapon damage plus 85 and wounds the target, reducing the effectiveness of any healing by 50% for 10 sec."
                            ]
                        },
                        {
                            id: "strength_of_arms",
                            name: "Strength of Arms",
                            icon: "ability_warrior_offensivestance",
                            row: 6,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your total Strength and Stamina by {value}% and your Expertise by {value}.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_slam",
                            name: "Improved Slam",
                            icon: "ability_warrior_decisivestrike",
                            row: 6,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Decreases the swing time of your Slam ability by {value} sec.",
                                {
                                    value: [0.5, 1]
                                }
                            ]
                        },
                        {
                            id: "juggernaut",
                            name: "Juggernaut",
                            icon: "ability_warrior_bullrush",
                            row: 7,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your Charge ability is now usable while in combat, but the cooldown on Charge is increased by 5 sec. Following a Charge, your next Slam or Mortal Strike has an additional 25% chance to critically hit if used within 10 sec."
                            ]
                        },
                        {
                            id: "improved_mortal_strike",
                            name: "Improved Mortal Strike",
                            icon: "ability_warrior_savageblow",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "mortal_strike",
                            description: [
                                "Increases the damage caused by your Mortal Strike ability by {damage}% and reduces the cooldown by {cooldown} sec.",
                                {
                                    damage: [3, 6, 10],
                                    cooldown: [0.3, 0.7, 1]
                                }
                            ]
                        },
                        {
                            id: "unrelenting_assault",
                            name: "Unrelenting Assault",
                            icon: "ability_warrior_unrelentingassault",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Overpower and Revenge abilities by {value1} secs and increases the damage done by both abilities by {value2}%.  In addition, if you strike a player with Overpower while they are casting, their magical damage and healing will be reduced by {value3}% for 6 sec.",
                                {
                                    value1: [2, 4],
                                    value2: [10, 20],
                                    value3: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "sudden_death",
                            name: "Sudden Death",
                            icon: "ability_warrior_improveddisciplines",
                            row: 8,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your melee hits have a {value1}% chance of allowing the use of Execute regardless of the target's health state.  In addition, you keep at least {value2} rage after using Execute.",
                                {
                                    value1: [3, 6, 9],
                                    value2: [3, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "endless_rage",
                            name: "Endless Rage",
                            icon: "ability_warrior_endlessrage",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You generate 25% more rage from damage dealt."
                            ]
                        },
                        {
                            id: "blood_frenzy",
                            name: "Blood Frenzy",
                            icon: "ability_warrior_bloodfrenzy",
                            row: 8,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your melee attack speed by {value1}%.  In addition your Rend and Deep Wounds abilities also increase all physical damage caused to that target by {value2}%.",
                                {
                                    value1: [5, 10],
                                    value2: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "wrecking_crew",
                            name: "Wrecking Crew",
                            icon: "ability_warrior_trauma",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Your melee critical hits Enrage you, increasing all damage caused by {value}% for 12 sec.  This effect does not stack with Enrage.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "bladestorm",
                            name: "Bladestorm",
                            icon: "ability_warrior_bladestorm",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Instantly Whirlwind up to 4 nearby targets and for the next 6 sec you will perform a whirlwind attack every 1 sec.  While under the effects of Bladestorm, you can move but cannot perform any other abilities but you do not feel pity or remorse or fear and you cannot be stopped unless killed."
                            ]
                        }
                    ],
                    // warrior - wotlk
                    Fury: [
                        {
                            id: "armored_to_the_teeth",
                            name: "Armored to the Teeth",
                            icon: "inv_shoulder_22",
                            row: 0,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your attack power by {value} for every 108 armor value you have.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "booming_voice",
                            name: "Booming Voice",
                            icon: "spell_nature_purge",
                            row: 0,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the area of effect and duration of your Battle Shout, Demoralizing Shout and Commanding Shout by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "cruelty",
                            name: "Cruelty",
                            icon: "ability_rogue_eviscerate",
                            row: 0,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to get a critical strike with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "improved_demoralizing_shout",
                            name: "Improved Demoralizing Shout",
                            icon: "ability_warrior_warcry",
                            row: 1,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power reduction of your Demoralizing Shout by {value}%.",
                                {
                                    value: [8, 16, 24, 32, 40]
                                }
                            ]
                        },
                        {
                            id: "unbridled_wrath",
                            name: "Unbridled Wrath",
                            icon: "spell_nature_stoneclawtotem",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a chance to generate an additional rage point when you deal melee damage with a weapon.{value}",
                                {
                                    value: ["", "  Effect occurs more often than Unbridled Wrath (Rank 1).", "  Effect occurs more often than Unbridled Wrath (Rank 2).", "  Effect occurs more often than Unbridled Wrath (Rank 3).", "  Effect occurs more often than Unbridled Wrath (Rank 4)."]
                                }
                            ]
                        },
                        {
                            id: "improved_cleave",
                            name: "Improved Cleave",
                            icon: "ability_warrior_cleave",
                            row: 2,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the bonus damage done by your Cleave ability by {value}%.",
                                {
                                    value: [40, 80, 120]
                                }
                            ]
                        },
                        {
                            id: "piercing_howl",
                            name: "Piercing Howl",
                            icon: "spell_shadow_deathscream",
                            row: 2,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Causes all enemies within 10 yards to be Dazed, reducing movement speed by 50% for 6 sec."
                            ]
                        },
                        {
                            id: "blood_craze",
                            name: "Blood Craze",
                            icon: "spell_shadow_summonimp",
                            row: 2,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Regenerates {value}% of your total Health over 6 sec after being the victim of a critical strike.",
                                {
                                    value: [2, 4, 6]
                                }
                            ]
                        },
                        {
                            id: "commanding_presence",
                            name: "Commanding Presence",
                            icon: "spell_nature_focusedmind",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the melee attack power bonus of your Battle Shout and the health bonus of your Commanding Shout by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "dual_wield_specialization",
                            name: "Dual Wield Specialization",
                            icon: "ability_dualwield",
                            row: 3,
                            col: 0,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your offhand weapon by {value}%.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "improved_execute",
                            name: "Improved Execute",
                            icon: "inv_sword_48",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the rage cost of your Execute ability by {value}.",
                                {
                                    value: [2, 5]
                                }
                            ]
                        },
                        {
                            id: "enrage",
                            name: "Enrage",
                            icon: "spell_shadow_unholyfrenzy",
                            row: 3,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Gives you a 30% chance to receive a {value}% damage bonus for 12 sec after being the victim of a damaging attack. This effect does not stack with Wrecking Crew.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "precision",
                            name: "Precision",
                            icon: "ability_marksmanship",
                            row: 4,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to hit with melee weapons by {value}%.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "death_wish",
                            name: "Death Wish",
                            icon: "spell_shadow_deathpact",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated you become enraged, increasing your physical damage by 20% but increasing all damage taken by 5%.  Lasts 30 sec."
                            ]
                        },
                        {
                            id: "improved_intercept",
                            name: "Improved Intercept",
                            icon: "ability_rogue_sprint",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Intercept ability by {value} sec.",
                                {
                                    value: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_berserker_rage",
                            name: "Improved Berserker Rage",
                            icon: "spell_nature_ancestralguardian",
                            row: 5,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "The Berserker Rage ability will generate {value} rage when used.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "flurry",
                            name: "Flurry",
                            icon: "ability_ghoulfrenzy",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your attack speed by {value}% for your next 3 swings after dealing a melee critical strike.",
                                {
                                    value: [5, 10, 15, 20, 25]
                                }
                            ]
                        },
                        {
                            id: "intensify_rage",
                            name: "Intensify Rage",
                            icon: "ability_warrior_endlessrage",
                            row: 6,
                            col: 0,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Bloodrage, Berserker Rage, Recklessness and Death Wish abilities by {value}%.",
                                {
                                    value: [11, 22, 33]
                                }
                            ]
                        },
                        {
                            id: "bloodthirst",
                            name: "Bloodthirst",
                            icon: "spell_nature_bloodlust",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "death_wish",
                            description: [
                                "Instantly attack the target causing (Attack power * 50 / 100) damage.  In addition, the next 3 successful melee attacks will restore 1% of max health.  This effect lasts 8 sec.  Damage is based on your attack power."
                            ]
                        },
                        {
                            id: "improved_whirlwind",
                            name: "Improved Whirlwind",
                            icon: "ability_whirlwind",
                            row: 6,
                            col: 3,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the damage of your Whirlwind ability by {value}%.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "furious_attacks",
                            name: "Furious Attacks",
                            icon: "ability_warrior_furiousresolve",
                            row: 7,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Your normal melee attacks have a chance to reduce all healing done to the target by 25% for 10 sec.  This can stack up to 2 times.{value}",
                                {
                                    value: ["", "  This occurs more often than Furious Attacks (Rank 1)."]
                                }
                            ]
                        },
                        {
                            id: "improved_berserker_stance",
                            name: "Improved Berserker Stance",
                            icon: "ability_racial_avatar",
                            row: 7,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases Strength by {value1}% and reduces threat caused by {value2}% while in Berserker Stance.",
                                {
                                    value1: [4, 8, 12, 16, 20],
                                    value2: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "heroic_fury",
                            name: "Heroic Fury",
                            icon: "ability_heroicleap",
                            row: 8,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Removes any Immobilization effects and refreshes the cooldown of your Intercept ability."
                            ]
                        },
                        {
                            id: "rampage",
                            name: "Rampage",
                            icon: "ability_warrior_rampage",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "bloodthirst",
                            description: [
                                "Increases ranged and melee critical hit chance of all party and raid members within 100 yds by 5%."
                            ]
                        },
                        {
                            id: "blood_surge",
                            name: "Bloodsurge",
                            icon: "ability_warrior_bloodsurge",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: "bloodthirst",
                            description: [
                                "Your Heroic Strike, Bloodthirst, and Whirlwind hits have a {value}% chance of making your next Slam instant for 5 sec.",
                                {
                                    value: [7, 13, 20]
                                }
                            ]
                        },
                        {
                            id: "unending_fury",
                            name: "Unending Fury",
                            icon: "ability_warrior_intensifyrage",
                            row: 9,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases the damage done by your Slam, Whirlwind and Bloodthirst abilities by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "titans_grip",
                            name: "Titan's Grip",
                            icon: "ability_warrior_titansgrip",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Allows you to equip two-handed axes, maces and swords in one hand.  While you have a two-handed weapon equipped in one hand, your physical damage done is reduced by 10%."
                            ]
                        }
                    ],
                    // warrior - wotlk
                    Protection: [
                        {
                            id: "improved_bloodrage",
                            name: "Improved Bloodrage",
                            icon: "ability_racial_bloodrage",
                            row: 0,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases the rage generated by your Bloodrage ability by {value}%.",
                                {
                                    value: [25, 50]
                                }
                            ]
                        },
                        {
                            id: "shield_specialization",
                            name: "Shield Specialization",
                            icon: "inv_shield_06",
                            row: 0,
                            col: 1,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your chance to block attacks with a shield by {block}% and has a {rage}% chance to generate 5 rage when a block, dodge, or parry occurs.",
                                {
                                    block: [1, 2, 3, 4, 5],
                                    rage: [20, 40, 60, 80, 100]
                                }
                            ]
                        },
                        {
                            id: "improved_thunder_clap",
                            name: "Improved Thunder Clap",
                            icon: "ability_thunderclap",
                            row: 0,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the cost of your Thunder Clap ability by {ragepoints} and increases the damage by {damage}% and the slowing effect by an additional {slow}%.",
                                {
                                    ragepoints: ["1 rage point", "2 rage points", "4 rage points"],
                                    damage: [10, 20, 30],
                                    slow: [4, 7, 10]
                                }
                            ]
                        },
                        {
                            id: "incite",
                            name: "Incite",
                            icon: "ability_warrior_incite",
                            row: 1,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases the critical strike chance of your Heroic Strike, Thunder Clap and Cleave abilities by {value}%.",
                                {
                                    value: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "anticipation",
                            name: "Anticipation",
                            icon: "spell_nature_mirrorimage",
                            row: 1,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your Dodge chance by {value}%.",
                                {
                                    value: [1, 2, 3, 4, 5]
                                }
                            ]
                        },
                        {
                            id: "last_stand",
                            name: "Last Stand",
                            icon: "spell_holy_ashestoashes",
                            row: 2,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "When activated, this ability temporarily grants you 30% of your maximum health for 20 sec.  After the effect expires, the health is lost."
                            ]
                        },
                        {
                            id: "improved_revenge",
                            name: "Improved Revenge",
                            icon: "ability_warrior_revenge",
                            row: 2,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases damage of your Revenge ability by {value1}% and causes Revenge to strike an additional target{value2}.",
                                {
                                    value1: [30, 60],
                                    value2: [" for 50% damage", ""]
                                }
                            ]
                        },
                        {
                            id: "shield_mastery",
                            name: "Shield Mastery",
                            icon: "ability_warrior_shieldmastery",
                            row: 2,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Increases your block value by {value1}% and reduces the cooldown of your Shield Block ability by {value2} sec.",
                                {
                                    value1: [15, 30],
                                    value2: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "toughness",
                            name: "Toughness",
                            icon: "spell_holy_devotion",
                            row: 2,
                            col: 3,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases your armor value from items by {value1}% and reduces the duration of all movement slowing effects by {value2}%.",
                                {
                                    value1: [2, 4, 6, 8, 10],
                                    value2: [6, 12, 18, 24, 30]
                                }
                            ]
                        },
                        {
                            id: "improved_spell_reflection",
                            name: "Improved Spell Reflection",
                            icon: "ability_warrior_shieldreflection",
                            row: 3,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the chance you'll be hit by spells by {value}% and when the ability is used it will reflect the first spell cast against the {value} closest party members within 20 yards.",
                                {
                                    value: [2, 4]
                                }
                            ]
                        },
                        {
                            id: "improved_disarm",
                            name: "Improved Disarm",
                            icon: "ability_warrior_disarm",
                            row: 3,
                            col: 1,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Disarm ability by {value1} sec and causes the target to take an additional {value2}% damage while disarmed.",
                                {
                                    value1: [10, 20],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "puncture",
                            name: "Puncture",
                            icon: "ability_warrior_sunder",
                            row: 3,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the rage cost of your Sunder Armor and Devastate abilities by {value}.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "improved_disciplines",
                            name: "Improved Disciplines",
                            icon: "ability_warrior_shieldwall",
                            row: 4,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces the cooldown of your Shield Wall, Retaliation and Recklessness abilities by {value} secs.",
                                {
                                    value: [30, 60]
                                }
                            ]
                        },
                        {
                            id: "concussion_blow",
                            name: "Concussion Blow",
                            icon: "ability_thunderbolt",
                            row: 4,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Stuns the opponent for 5 sec and deals (38 / 100 * Attack power) damage (based on attack power)."
                            ]
                        },
                        {
                            id: "gag_order",
                            name: "Gag Order",
                            icon: "ability_warrior_shieldbash",
                            row: 4,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Gives your Shield Bash and Heroic Throw abilities a {value1}% chance to silence the target for 3 sec and increases the damage of your Shield Slam ability by {value2}%.",
                                {
                                    value1: [50, 100],
                                    value2: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "one_handed_weapon_specialization",
                            name: "One-Handed Weapon Specialization",
                            icon: "inv_sword_20",
                            row: 5,
                            col: 2,
                            ranks: 5,
                            requiresTalents: null,
                            description: [
                                "Increases physical damage you deal when a one-handed melee weapon is equipped by {value}%.",
                                {
                                    value: [2, 4, 6, 8, 10]
                                }
                            ]
                        },
                        {
                            id: "improved_defensive_stance",
                            name: "Improved Defensive Stance",
                            icon: "ability_warrior_defensivestance",
                            row: 6,
                            col: 0,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "While in Defensive Stance all spell damage is reduced by {value1}% and when you Block, Parry or Dodge an attack you have a {value2}% chance to become Enraged, increasing Physical damage caused by {value3}% for 12 sec.",
                                {
                                    value1: [3, 6],
                                    value2: [50, 100],
                                    value3: [5, 10]
                                }
                            ]
                        },
                        {
                            id: "vigilance",
                            name: "Vigilance",
                            icon: "ability_warrior_vigilance",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "concussion_blow",
                            description: [
                                "Focus your protective gaze on a group or raid target, reducing their damage taken by 3% and transfers 10% of the threat they cause to you.  In addition, each time they are hit by an attack your Taunt cooldown is refreshed.  Lasts 30 min.  This effect can only be on one target at a time."
                            ]
                        },
                        {
                            id: "focused_rage",
                            name: "Focused Rage",
                            icon: "ability_warrior_focusedrage",
                            row: 6,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Reduces the rage cost of your offensive abilities by {value}.",
                                {
                                    value: [1, 2, 3]
                                }
                            ]
                        },
                        {
                            id: "vitality",
                            name: "Vitality",
                            icon: "inv_helmet_21",
                            row: 7,
                            col: 1,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Increases your total Strength by {value1}%, Stamina by {value2}% and your Expertise by {value1}.",
                                {
                                    value1: [2, 4, 6],
                                    value2: [3, 6, 9]
                                }
                            ]
                        },
                        {
                            id: "safeguard",
                            name: "Safeguard",
                            icon: "ability_warrior_safeguard",
                            row: 7,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Reduces damage taken by the target of your Intervene ability by {value}% for 6 sec.",
                                {
                                    value: [15, 30]
                                }
                            ]
                        },
                        {
                            id: "warbringer",
                            name: "Warbringer",
                            icon: "ability_warrior_warbringer",
                            row: 8,
                            col: 0,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Your Charge, Intercept and Intervene abilities are now usable while in combat and in any stance.  In addition, your Intervene ability will remove all movement impairing effects."
                            ]
                        },
                        {
                            id: "devastate",
                            name: "Devastate",
                            icon: "inv_sword_11",
                            row: 8,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Sunder the target's armor causing the Sunder Armor effect.  In addition, causes 120% of weapon damage plus 58 for each application of Sunder Armor on the target.  The Sunder Armor effect can stack up to 5 times."
                            ]
                        },
                        {
                            id: "critical_block",
                            name: "Critical Block",
                            icon: "ability_warrior_criticalblock",
                            row: 8,
                            col: 2,
                            ranks: 3,
                            requiresTalents: null,
                            description: [
                                "Your successful blocks have a {value1}% chance to block double the normal amount and increases your chance to critically hit with your Shield Slam ability by an additional {value2}%.",
                                {
                                    value1: [20, 40, 60],
                                    value2: [5, 10, 15]
                                }
                            ]
                        },
                        {
                            id: "sword_and_board",
                            name: "Sword and Board",
                            icon: "ability_warrior_swordandboard",
                            row: 9,
                            col: 1,
                            ranks: 3,
                            requiresTalents: "devastate",
                            description: [
                                "Increases the critical strike chance of your Devastate ability by {crit}% and when your Devastate or Revenge ability deals damage it has a {other}% chance of refreshing the cooldown of your Shield Slam ability and reducing its cost by 100% for 5 sec.",
                                {
                                    crit: [5, 10, 15],
                                    other: [10, 20, 30]
                                }
                            ]
                        },
                        {
                            id: "damage_shield",
                            name: "Damage Shield",
                            icon: "inv_shield_31",
                            row: 9,
                            col: 2,
                            ranks: 2,
                            requiresTalents: null,
                            description: [
                                "Whenever you take damage from or block a melee attack you cause damage equal to {value}% of your block value.",
                                {
                                    value: [10, 20]
                                }
                            ]
                        },
                        {
                            id: "shockwave",
                            name: "Shockwave",
                            icon: "ability_warrior_shockwave",
                            row: 10,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "Sends a wave of force in front of the warrior, causing (75 / 100 * Attack power) damage (based on attack power) and stunning all enemy targets within 10 yards in a frontal cone for 4 sec."
                            ]
                        }
                    ]
                }
            },
            cataclysm: {
                deathknight: {
                    // deathknight - cataclysm
                    Blood: [
                    ],
                    // deathknight - cataclysm
                    Frost: [
                    ],
                    // deathknight - cataclysm
                    Unholy: [
                    ]
                },
                druid: {
                    // druid - cataclysm
                    Balance: [
                    ],
                    // druid - cataclysm
                    "Feral Combat": [
                    ],
                    // druid - cataclysm
                    Restpration: [
                    ]
                },
                hunter: {
                    // hunter - cataclysm
                    "Beast Mastery": [
                        {
                            id: "beast_mastery",
                            name: "Beast Mastery",
                            icon: "ability_hunter_beastmastery",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: null,
                            description: [
                                "You master the art of Beast training, teaching you the ability to tame Exotic pets and increasing your total amount of Pet Skill Points by 4."
                            ]
                        }
                    ],
                    // hunter - cataclysm
                    Marksmanship: [
                        {
                            id: "chimera_shot",
                            name: "Chimera Shot",
                            icon: "ability_hunter_chimerashot2",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "master_marksman",
                            description: [
                                "An instant shot that causes ranged weapon Nature damage plus (Ranged attack power * 0.732 + 0), refreshing the duration of your Serpent Sting and healing you for 5% of your total health."
                            ]
                        }
                    ],
                    // hunter - cataclysm
                    Survival: [
                        {
                            id: "black_arrow",
                            name: "Black Arrow",
                            icon: "spell_shadow_painspike",
                            row: 6,
                            col: 1,
                            ranks: 1,
                            requiresTalents: "wyvern_sting",
                            description: [
                                "Fires a Black Arrow at the target, dealing 2852 Shadow damage over 20 sec. Black Arrow shares a cooldown with other Fire Trap spells."
                            ]
                        }
                    ]
                },
                mage: {
                    // mage - cataclysm
                    Arcane: [
                    ],
                    // mage - cataclysm
                    Fire: [
                    ],
                    // mage - cataclysm
                    Frost: [
                    ]
                },
                paladin: {
                    // paladin - cataclysm
                    Holy: [
                    ],
                    // paladin - cataclysm
                    Protection: [
                    ],
                    // paladin - cataclysm
                    Retribution: [
                    ]
                },
                priest: {
                    // priest - cataclysm
                    Discipline: [
                    ],
                    // priest - cataclysm
                    Holy: [
                    ],
                    // priest - cataclysm
                    Shadow: [
                    ]
                },
                rogue: {
                    // rogue - cataclysm
                    Assassination: [
                    ],
                    // rogue - cataclysm
                    Combat: [
                    ],
                    // rogue - cataclysm
                    Subtlety: [
                    ]
                },
                shaman: {
                    // shaman - cataclysm
                    Elemental: [
                    ],
                    // shaman - cataclysm
                    Enhancement: [
                    ],
                    // shaman - cataclysm
                    Restoration: [
                    ]
                },
                warlock: {
                    // warlock - cataclysm
                    Affliction: [
                    ],
                    // warlock - cataclysm
                    Demonology: [
                    ],
                    // warlock - cataclysm
                    Destruction: [
                    ]
                },
                warrior: {
                    // warrior - cataclysm
                    Arms: [
                    ],
                    // warrior - cataclysm
                    Fury: [
                    ],
                    // warrior - cataclysm
                    Protection: [
                    ]
                }
            },
            custom: {
                /* Your custom layout */
            }
        };
        /* END OF BaseTalents definition */

        // ==============================
        // Talent Definitions by Version
        // ==============================

        const talentsAttributedByVersion = {
            1.4: cloneDeep(baseTalents.vanilla),
            1.6: cloneDeep(baseTalents.vanilla),
            1.7: cloneDeep(baseTalents.vanilla),
            1.8: cloneDeep(baseTalents.vanilla),
            1.9: cloneDeep(baseTalents.vanilla),
            1.10: cloneDeep(baseTalents.vanilla),
            1.11: cloneDeep(baseTalents.vanilla),
            1.12: cloneDeep(baseTalents.vanilla),
            1.13: cloneDeep(baseTalents.vanilla),
            "1.16.0t": cloneDeep(baseTalents.vanilla),
            "1.16.1t": cloneDeep(baseTalents.vanilla),
            "1.17.2t": cloneDeep(baseTalents.vanilla),
            "1.0.0e": cloneDeep(baseTalents.tbc),
            2.4: cloneDeep(baseTalents.tbc),
            "3.2.0": cloneDeep(baseTalents.wotlk),
            "3.3.5": cloneDeep(baseTalents.wotlk),
            "4.3.5": cloneDeep(baseTalents.cataclysm),
            "custom1": cloneDeep(baseTalents.custom)
        };

        // Remove "Moonkin Form" from 1.12 Balance tree
        /*
                talentsAttributedByVersion["1.12"].druid.Balance = talentsAttributedByVersion["1.12"].druid.Balance.filter(
                    t => t.id !== "moonkin_form"
                );
                */

        removeTalentsById("1.7", "druid", "Balance", [
            "natural_shapeshifter",
            "natural_weapons",
            "moonkin_form"
        ]);

        moveTalent("1.7", "druid", "Balance", "natures_reach", 1, 2);
        moveTalent("1.7", "druid", "Balance", "vengeance", 5, 1);
        moveTalent("1.7", "druid", "Balance", "improved_starfire", 2, 0);
        moveTalent("1.7", "druid", "Balance", "moonfury", 4, 0);

        replaceTalent("1.7", "druid", "Balance", "improved_thorns", {
            row: 3,
            col: 0,
            ranks: 5,
            description: [
                "Gives your Thorns spell a {value}% chance to cause the target to take an additional 100% damage.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Balance", "omen_of_clarity", {
            icon: "spell_shadow_manaburn",
            requiresTalents: null
        });

        replaceTalent("1.7", "druid", "Balance", "vengeance", {
            row: 5,
            col: 1,
            requiresTalents: "natures_grace"
        });

        replaceTalent("1.7", "druid", "Balance", "moonglow", {
            row: 3,
            col: 1,
            ranks: 5,
            requiresTalents: "improved_moonfire"
        });

        bulkInsertTalents("1.7", "druid", "Balance", [
            {
                id: "swiftshifting",
                name: "Swiftshifting",
                icon: "spell_nature_wispsplode",
                row: 1,
                col: 3,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Reduces the delay before using spells and abilities by {value} seconds after having shapeshifted.",
                    {
                        value: [0.5, 1, 1.5]
                    }
                ]
            },
            {
                id: "weapon_balance",
                name: "Weapon Balance",
                icon: "inv_staff_01",
                row: 4,
                col: 2,
                ranks: 5,
                requiresTalents: "omen_of_clarity",
                description: [
                    "Increases the damage you deal with melee weapons by {value}%.",
                    {
                        value: [2, 4, 6, 8, 10]
                    }
                ]
            },
            {
                id: "hurricane",
                name: "Hurricane",
                icon: "spell_nature_cyclone",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Creates a violent storm in the area surrounding the caster, causing 53 Nature damage to all nearby enemies every 1 second, and reducing the attack speed of all nearby enemies by 20%. Lasts 10 seconds."
                ]
            }
        ]);

        removeTalentsById("1.7", "druid", "Feral Combat", [
            "faerie_fire_feral",
            "leader_of_the_pack"
        ]);

        replaceTalent("1.7", "druid", "Feral Combat", "feral_aggression_old", {
            description: [
                "Increases the Attack Power reduction of your Demoralizing Roar by {value}%.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "feral_instinct", {
            name: "Improved Prowl",
            row: 2,
            col: 0,
            description: [
                "Reduces the chance enemies have to detect you while Prowling.",
                "Reduces the chance enemies have to detect you while Prowling. More effective than Improved Prowl (Rank 1).",
                "Reduces the chance enemies have to detect you while Prowling. More effective than Improved Prowl (Rank 2).",
                "Reduces the chance enemies have to detect you while Prowling. More effective than Improved Prowl (Rank 3).",
                "Reduces the chance enemies have to detect you while Prowling. More effective than Improved Prowl (Rank 4)."
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "brutal_impact", {
            name: "Improved Bash",
            description: [
                "Increases the stun duration of your Bash ability by 0.5 seconds.",
                "Increases the stun duration of your Bash ability by 1 second."
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "thick_hide", {
            row: 4,
            col: 0,
            description: [
                "Increases your Armor rating from items while in Bear form by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "feline_swiftness", {
            row: 4,
            col: 2,
            ranks: 1,
            description: [
                "Increases your movement speed by 30% while in Cat form. Only active outdoors."
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "feral_charge", {
            description: [
                "Causes you to charge an enemy, stopping its movement and interrupting any spell being cast for 4 seconds."
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "sharpened_claws", {
            row: 1,
            col: 2,
            ranks: 5,
            description: [
                "Increases your critical strike chance while in Bear or Cat form by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "blood_frenzy", {
            row: 2,
            col: 2,
            ranks: 5,
            description: [
                "Your critical strikes from Cat form abilities that add combo points have a {value}% chance to add an additional combo point.",
                {
                    value: [20, 40, 60, 80, 100]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "primal_fury", {
            row: 2,
            col: 3,
            ranks: 5,
            description: [
                "Gives you a {value}% chance to gain an additional 5 Rage anytime you get a critical strike while in Bear form.",
                {
                    value: [20, 40, 60, 80, 100]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "improved_shred", {
            description: [
                "Reduces the Energy cost of your Shred ability by {value}.",
                {
                    value: [5, 10]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "predatory_strikes", {
            ranks: 5,
            description: [
                "Increases the Attack Power bonus from your Cat form ability by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "savage_fury", {
            name: "Improved Ravage",
            row: 5,
            col: 2,
            description: [
                "Increases the critical strike chance of your Ravage ability by {value}%.",
                {
                    value: [5, 10]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Feral Combat", "heart_of_the_wild", {
            name: "Strength of the Wild",
            ranks: 4,
            description: [
                "Increases your Strength while in Bear or Cat form by {value}%.",
                {
                    value: [3, 6, 9, 12]
                }
            ]
        });

        bulkInsertTalents("1.7", "druid", "Feral Combat", [
            {
                id: "faerie_fire_cat",
                name: "Faerie Fire (Cat)",
                icon: "spell_nature_faeriefire",
                row: 3,
                col: 2,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Decrease the armor of the target by 175 for 40 seconds. While affected, the target cannot stealth or turn invisible."
                ]
            },
            {
                id: "faerie_fire_bear",
                name: "Faerie Fire (Bear)",
                icon: "spell_nature_faeriefire",
                row: 3,
                col: 3,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Decrease the armor of the target by 175 for 40 seconds. While affected, the target cannot stealth or turn invisible."
                ]
            },
            {
                id: "primal_instinct",
                name: "Primal Instinct",
                icon: "spell_nature_forceofnature",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Reduces the Mana cost of your shapeshifting abilities by 25%."
                ]
            },
            {
                id: "improved_pounce",
                name: "Improved Pounce",
                icon: "ability_druid_supriseattack",
                row: 6,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Gives your Pounce ability a {value}% chance to add an additional combo point to the target.",
                    {
                        value: [50, 100]
                    }
                ]
            }
        ]);

        removeTalentsById("1.7", "druid", "Restoration", [
            "insect_swarm",
            "tranquil_spirit",
            "swiftmend"
        ]);

        replaceTalent("1.7", "druid", "Restoration", "improved_mark_of_the_wild", {
            description: [
                "Increases the effects of your Mark of the Wild spell by {value}%.",
                {
                    value: [7, 14, 21, 28, 35]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "furor", {
            description: [
                "Gives you a {value}% chance to gain 10 Rage when you shapeshift into Bear Form.",
                {
                    value: [20, 40, 60, 80, 100]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "natures_focus", {
            row: 1,
            col: 0,
            description: [
                "Gives you a {value}% chance to avoid interruption caused by damage while casting the Healing Touch or Regrowth spells.",
                {
                    value: [12, 24, 36, 48, 60]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "improved_healing_touch", {
            row: 1,
            col: 1,
            description: [
                "Reduces the mana cost of your Healing Touch spell by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "natures_swiftness", {
            requiresTalents: "natures_focus"
        });

        replaceTalent("1.7", "druid", "Restoration", "improved_enrage", {
            requiresTalents: "furor",
            description: [
                "Reduces the time required to generate Rage from your Enrage ability by {value} seconds and slightly reduces the Armor penalty.",
                {
                    value: [2, 4]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "reflection", {
            row: 3,
            col: 1,
            ranks: 5,
            description: [
                "Allows {value}% of your Mana regeneration to continue while casting.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "gift_of_nature", {
            row: 2,
            col: 2,
            ranks: 1,
            requiresTalents: null,
            description: [
                "Increases the effect of your Healing Touch, Rejuvenation, Regrowth, and Tranquility spells by 5%."
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "improved_rejuvenation", {
            ranks: 5,
            description: [
                "Increases the effect of your Rejuvenation spell by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.7", "druid", "Restoration", "subtlety", {
            row: 4,
            col: 2,
            requiresTalents: "gift_of_nature",
            description: [
                "Reduces the threat generated by your healing spells by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        bulkInsertTalents("1.7", "druid", "Restoration", [
            {
                id: "combat_endurance",
                name: "Combat Endurance",
                icon: "spell_nature_ancestralguardian",
                row: 2,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Allows {value}% of your Health regeneration to work while in combat.",
                    {
                        value: [2, 4, 6, 8, 10]
                    }
                ]
            },
            {
                id: "intensity_old",
                name: "Intensity",
                icon: "spell_shadow_detectinvisibility",
                row: 2,
                col: 3,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Gives you a {value}% chance to gain 40 Energy when you shapeshift into Cat form.",
                    {
                        value: [20, 40, 60, 80, 100]
                    }
                ]
            },
            {
                id: "innervate",
                name: "Innervate",
                icon: "spell_nature_lightning",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "reflection",
                description: [
                    "Increases the target's Mana regeneration by 400% and allows 100% of the target's Mana regeneration to continue while casting.  Lasts 20 seconds."
                ]
            }
        ]);

        removeTalentsById("1.6", "hunter", "Beast Mastery", ["bestial_wrath"]);

        replaceTalent("1.6", "hunter", "Beast Mastery", "thick_hide", {
            row: 3,
            col: 0,
            ranks: 5,
            description: [
                "Increases the Armor rating of your pets by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.6", "hunter", "Beast Mastery", "improved_revive_pet", {
            row: 2,
            col: 0,
            description: [
                "Reduces the casting time of your Revive Pet spell by {value}%.",
                {
                    value: [2, 4]
                }
            ]
        });

        replaceTalent("1.6", "hunter", "Beast Mastery", "pathfinding", {
            icon: "ability_mount_whitetiger",
            row: 2,
            col: 3,
            ranks: 5,
            requiresTalents: null,
            description: [
                "Increases the speed bonus of your Aspect of the Cheetah and Aspect of the Pack by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.6", "hunter", "Beast Mastery", "improved_mend_pet", {
            description: [
                "Increases the amount healed by your Mend Pet spell by {value}%.",
                {
                    value: [5, 10]
                }
            ]
        });

        replaceTalent("1.6", "hunter", "Beast Mastery", "intimidation", {
            row: 4,
            col: 0,
            description: [
                "Increases the threat caused by your pet by 50% for 10 seconds."
            ]
        });

        replaceTalent("1.6", "hunter", "Beast Mastery", "spirit_bond_old", {
            row: 6,
            col: 1,
            ranks: 1,
            requiresTalents: "improved_mend_pet",
            description: ["Every time your pet strikes an enemy, you gain 20 health."]
        });

        replaceTalent("1.6", "hunter", "Beast Mastery", "bestial_discipline", {
            row: 1,
            col: 2,
            ranks: 5,
            description: [
                "Increases the maximum Focus of your pets by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        /*
                insertTalent("1.6", "hunter", "Beast Mastery", {
                    id: "spirit_bond_old",
                    name: "Spirit Bond",
                    icon: "classic_ability_druid_demoralizingroar",
                    row: 6,
                    col: 1,
                    ranks: 1,
                    requiresTalents: "improved_mend_pet",
                    description: [
                        "Every time your pet strikes an enemy, you gain 20 health."
                    ]
                });
                */

        /*
                bulkInsertTalents("1.6", "hunter", "Beast Mastery", [
                {
                    id: "improved_raptor_strike",
                    name: "Improved Raptor Strike",
                    icon: "ability_meleedamage",
                    row: 0,
                    col: 2,
                    ranks: 5,
                    requiresTalents: null,
                    description: [
                        "Reduces the cooldown of your Raptor Strike by {value} second(s).",
                        { 
                        value: [0.2, 0.4, 0.6, 0.8, 1] 
                        }
                    ]
                },
                {
                    id: "spirit_bond_old",
                    name: "Spirit Bond",
                    icon: "classic_ability_druid_demoralizingroar",
                    row: 6,
                    col: 1,
                    ranks: 1,
                    requiresTalents: "improved_mend_pet",
                    description: [
                        "Every time your pet strikes an enemy, you gain 20 health."
                    ]
                }
                ]);
                */

        replaceTalent("1.6", "hunter", "Marksmanship", "hawk_eye", {
            row: 4,
            col: 1
        });

        replaceTalent("1.6", "hunter", "Marksmanship", "barrage", {
            row: 2,
            col: 3,
            ranks: 2,
            description: [
                "Increases the damage done by your Multi-Shot and Volley spells by {value}%.",
                {
                    value: [5, 10]
                }
            ]
        });

        replaceTalent("1.6", "hunter", "Marksmanship", "trueshot_aura", {
            requiresTalents: "hawk_eye"
        });

        replaceTalent("1.6", "hunter", "Marksmanship", "scatter_shot", {
            description: [
                "A short-range shot that deals 50% weapon damage and confuses the target for 4 sec. Any damage caused will remove the effect."
            ]
        });

        /*
                const survival = talentsAttributedByVersion["1.6"].hunter.Survival;

                talentsAttributedByVersion["1.6"].hunter.Survival = survival.filter(
                    t => t.id !== "monster_slaying" && t.id !== "humanoid_slaying" && t.id !== "killer_instinct"
                );
                */

        removeTalentsById("1.6", "hunter", "Survival", [
            "monster_slaying",
            "humanoid_slaying",
            "savage_strikes",
            "clever_traps",
            "survivalist",
            "improved_feign_death",
            "killer_instinct"
        ]);

        /*
                const moveTalent = (id, row, col) => {
                    const talent = talentsAttributedByVersion["1.6"].hunter.Survival.find(t => t.id === id);
                    if (talent) {
                        talent.row = row;
                        talent.col = col;
                    }
                };

                moveTalent("deflection", 3, 3);
                */

        /*
                replaceTalent("1.6", "hunter", "Survival", "savage_strikes", {
                    row: 5,
                    col: 2,
                    icon: "ability_gouge",
                    name: "Savage Strikes (Updated)"
                    });
                */

        // moveTalent("1.6", "hunter", "Survival", "deflection", 3, 3);

        replaceTalent("1.6", "hunter", "Survival", "deflection", {
            row: 3,
            col: 3,
            requiresTalents: "deterrence"
        });

        /*
                insertTalent("1.6", "hunter", "Survival", {
                id: "precision",
                name: "Precision",
                icon: "ability_rogue_ambush",
                row: 0,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases your chance to hit with melee weapons by {value}%.",
                    { value: [1, 2, 3, 4, 5] }
                ]
                });
                */

        bulkInsertTalents("1.6", "hunter", "Survival", [
            {
                id: "precision",
                name: "Precision",
                icon: "ability_rogue_ambush",
                row: 0,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases your chance to hit with melee weapons by {value}%.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            },
            {
                id: "improved_raptor_strike",
                name: "Improved Raptor Strike",
                icon: "ability_meleedamage",
                row: 0,
                col: 2,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Reduces the cooldown of your Raptor Strike by {value} second(s).",
                    {
                        value: [0.2, 0.4, 0.6, 0.8, 1]
                    }
                ]
            },
            {
                id: "lightning_reflexes_old",
                name: "Lightning Reflexes",
                icon: "spell_nature_invisibilty",
                row: 1,
                col: 1,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases your Dodge chance by {value}%.",
                    {
                        value: [1, 2, 3]
                    }
                ]
            },
            {
                id: "improved_immolation_trap",
                name: "Improved Immolation Trap",
                icon: "spell_fire_flameshock",
                row: 2,
                col: 0,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the damage done by your Immolation Trap by {value}%.",
                    {
                        value: [3, 6, 9, 12, 15]
                    }
                ]
            },
            {
                id: "improved_mongoose_bite",
                name: "Improved Mongoose Bite",
                icon: "ability_hunter_swiftstrike",
                row: 2,
                col: 1,
                ranks: 5,
                requiresTalents: "lightning_reflexes_old",
                description: [
                    "Increases the damage done by your Mongoose Bite ability by {value}%.",
                    {
                        value: [4, 8, 12, 16, 20]
                    }
                ]
            },
            {
                id: "improved_freezing_trap",
                name: "Improved Freezing Trap",
                icon: "spell_frost_chainsofice",
                row: 3,
                col: 0,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the duration of your Freezing Trap by {value} seconds.",
                    {
                        value: [2, 4, 6]
                    }
                ]
            },
            {
                id: "improved_disengage",
                name: "Improved Disengage",
                icon: "ability_rogue_feint",
                row: 3,
                col: 1,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the amount of Threat reduced by your Disengage ability by {value}%.",
                    {
                        value: [10, 20]
                    }
                ]
            },
            {
                id: "improved_frost_trap",
                name: "Improved Frost Trap",
                icon: "spell_frost_freezingbreath",
                row: 4,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the duration of your Frost Trap's movement slowing effect by {value} seconds.",
                    {
                        value: [1.5, 3]
                    }
                ]
            },
            {
                id: "savage_strikes_old",
                name: "Savage Strikes",
                icon: "spell_holy_blessingofstamina",
                row: 4,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases your critical strike chance with melee weapons by {value}%.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            },
            {
                id: "improved_explosive_trap",
                name: "Improved Explosive Trap",
                icon: "spell_fire_selfdestruct",
                row: 5,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the initial damage done by your Explosive Trap by {value}%.",
                    {
                        value: [30, 60]
                    }
                ]
            },
            {
                id: "melee_specialization",
                name: "Melee Specialization",
                icon: "inv_axe_02",
                row: 5,
                col: 2,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the damage you deal with melee weapons by {value}%.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            },
            {
                id: "lacerate",
                name: "Lacerate",
                icon: "ability_gouge",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "savage_strikes_old",
                description: [
                    "Wounds the target, causing them to bleed for 77 damage over 21 seconds."
                ]
            }
        ]);

        removeTalentsById("1.10", "mage", "Arcane", [
            "magic_absorption",
            "arcane_resilience"
        ]);

        bulkInsertTalents("1.10", "mage", "Arcane", [
            {
                id: "evocation",
                name: "Evocation",
                icon: "spell_nature_purge",
                row: 2,
                col: 2,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "While channeling this spell, your mana regeneration is active and increased by 1500%.  Lasts 8 sec."
                ]
            }
        ]);

        replaceTalent("1.10", "mage", "Arcane", "arcane_subtlety", {
            ranks: 3,
            description: [
                "Reduces the threat generated by your offensive arcane spells by {value}%.",
                {
                    value: [20, 30, 40]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "arcane_focus", {
            description: [
                "Reduces the chance that the opponent can resist your arcane spells by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "wand_specialization", {
            row: 1,
            col: 1,
            ranks: 5,
            description: [
                "Increases your damage with Wands by {value}%.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "magic_attunement", {
            name: "Improved Dampen Magic",
            description: [
                "Increases the effect of your Dampen Magic spell by {value}%.",
                {
                    value: [25, 50]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "improved_arcane_explosion", {
            ranks: 5,
            description: [
                "Reduces the casting time of your Arcane Explosion by {value} seconds.",
                {
                    value: [0.3, 0.6, 0.9, 1.2, 1.5]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "improved_mana_shield", {
            description: [
                "Increases the damage absorbed by your Mana Shield by {value}%.",
                {
                    value: [50, 75]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "arcane_meditation", {
            ranks: 5,
            requiresTalents: "evocation",
            description: [
                "Allows {value}% of your Mana regeneration to continue while casting.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "arcane_mind", {
            requiresTalents: "evocation",
            ranks: 4,
            description: [
                "Increases your maximum Mana by {value}%.",
                {
                    value: [2, 4, 6, 8]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Arcane", "arcane_power", {
            description: [
                "When activated, your spells deal 35% more damage while costing 35% more mana to cast.  This effect lasts 15 sec."
            ]
        });

        removeTalentsById("1.10", "mage", "Fire", [
            "master_of_elements"
        ]);

        replaceTalent("1.10", "mage", "Fire", "flame_throwing", {
            col: 3
        });

        replaceTalent("1.10", "mage", "Fire", "improved_fire_blast", {
            ranks: 5,
            description: [
                "Reduces the cooldown of your Fire Blast spell by {value}.",
                {
                    value: ["0.5 seconds", "0.8 seconds", "1 second", "1.3 seconds", "1.5 seconds"]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Fire", "improved_flamestrike", {
            col: 2
        });

        replaceTalent("1.10", "mage", "Fire", "pyroblast", {
            col: 1,
            requiresTalents: "improved_fireball",
            description: [
                "Hurls an immense fiery boulder that causes 148 to 195 fire damage and an additional 56 damage over 12 seconds."
            ]
        });

        replaceTalent("1.10", "mage", "Fire", "burning_soul", {
            ranks: 3,
            description: [
                "Gives your fire spells a {value}% chance to not lose casting time when you take damage.",
                {
                    value: [25, 50, 65]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Fire", "improved_scorch", {
            ranks: 5,
            description: [
                "Burns the target for an additional {value}% of your Scorch spell damage over 4 seconds.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Fire", "blast_wave", {
            requiresTalents: "improved_flamestrike",
            description: [
                "A wave of flame radiates outward from the caster, damaging all enemies caught within the blast for 160 to 192 fire damage, and dazing them for 6 seconds."
            ]
        });

        replaceTalent("1.10", "mage", "Fire", "fire_power", {
            col: 1,
            requiresTalents: "critical_mass",
            description: [
                "Increases the damage done by your fire spells by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Fire", "combustion", {
            requiresTalents: "fire_power",
            description: [
                "When activated, this spell gives your next fire damage spell a 100% critical strike chance."
            ]
        });

        removeTalentsById("1.10", "mage", "Frost", [
            "elemental_precision"
        ]);

        replaceTalent("1.10", "mage", "Frost", "frost_warding", {
            name: "Improved Frost Ward",
            row: 3,
            col: 3,
            ranks: 1,
            description: [
                "50% of the damage absorbed by your Frost Ward is added to your mana."
            ]
        });

        replaceTalent("1.10", "mage", "Frost", "frostbite", {
            row: 5,
            col: 2,
            ranks: 5,
            description: [
                "Gives your chill effects a {value}% chance to freeze the target for 5 seconds.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Frost", "permafrost", {
            row: 0,
            col: 2,
            ranks: 5,
            description: [
                "Increases the duration of your chill effects by {value}.",
                {
                    value: ["1 second", "1.5 seconds", "2 seconds", "2.5 seconds", "3 seconds"]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Frost", "cold_snap", {
            description: [
                "When activated, this spell finishes the cooldown on all of your cold spells."
            ]
        });

        replaceTalent("1.10", "mage", "Frost", "frost_channeling", {
            requiresTalents: "cold_snap",
            description: [
                "Reduces the mana cost of your frost spells by {value}%.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Frost", "winters_chill", {
            row: 1,
            col: 1,
            ranks: 3,
            description: [
                "Increases the power of your chill effects by slowing the target's movement by an additional {value}%.",
                {
                    value: [4, 7, 10]
                }
            ]
        });

        replaceTalent("1.10", "mage", "Frost", "ice_barrier", {
            description: [
                "Instantly shields you, absorbing 455 damage. Lasts 1 minute. While the shield holds, spells will not be interrupted."
            ]
        });

        replaceTalent("3.2.0", "mage", "Fire", "burning_determination", {
            description: [
                "When Interrupted or Silenced you have a {value}% chance to become immune to the next Interrupt or Silence mechanic.  Lasts 10 sec.",
                {
                    value: [50, 100]
                }
            ]
        });

        removeTalentsById("1.8", "paladin", "Holy", [
            "healing_light",
            "consecration",
            "unyielding_faith",
            "lasting_judgement",
            "holy_power"
        ]);

        bulkInsertTalents("1.8", "paladin", "Holy", [
            {
                id: "improved_holy_light",
                name: "Improved Holy Light",
                icon: "spell_holy_holybolt",
                row: 0,
                col: 2,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the amount healed by your Holy Light spell by {value}%.",
                    {
                        value: [4, 8, 12]
                    }
                ]
            },
            {
                id: "revelation",
                name: "Revelation",
                icon: "inv_misc_book_07",
                row: 1,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Reduces the cooldown of your Lay on Hands and Divine Intervention spells by {value} minutes.",
                    {
                        value: [10, 20]
                    }
                ]
            },
            {
                id: "improved_flash_of_light",
                name: "Improved Flash of Light",
                icon: "spell_holy_flashheal",
                row: 2,
                col: 3,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Reduces the Mana cost of your Flash of Light spell by {value}%.",
                    {
                        value: [4, 8, 12]
                    }
                ]
            },
            {
                id: "improved_concentration_aura",
                name: "Improved Concentration Aura",
                icon: "spell_holy_mindsooth",
                row: 3,
                col: 0,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the effect of your Concentration Aura by an additional {value}%.",
                    {
                        value: [5, 10, 15]
                    }
                ]
            },
            {
                id: "improved_seal_of_light",
                name: "Improved Seal of Light",
                icon: "spell_holy_healingaura",
                row: 4,
                col: 2,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the amount healed by your Seal of Light by {value1}% and the duration of your Judgement of Light by {value2} seconds.",
                    {
                        value1: [3, 6, 9, 12, 15],
                        value2: [6, 12, 18, 24, 30]
                    }
                ]
            },
            {
                id: "sanctity_aura",
                name: "Sanctity Aura",
                icon: "spell_holy_mindvision",
                row: 4,
                col: 1,
                ranks: 1,
                requiresTalents: "improved_seal_of_righteousness",
                description: [
                    "Increases Holy damage done by party members within 30 yards by 10%.  Players may only have one Aura on them per Paladin at any one time."
                ]
            }
        ]);

        replaceTalent("1.8", "paladin", "Holy", "divine_strength", {
            row: 5,
            col: 2
        });

        replaceTalent("1.8", "paladin", "Holy", "divine_intellect", {
            name: "Divine Wisdom",
            row: 3,
            requiresTalents: "improved_blessing_of_wisdom",
            description: [
                "Increases your total Mana by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Holy", "spiritual_focus", {
            row: 0
        });

        replaceTalent("1.8", "paladin", "Holy", "improved_seal_of_righteousness", {
            row: 2,
            col: 1,
            description: [
                "Increases the damage done by your Seal of Righteousness by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Holy", "improved_lay_on_hands", {
            row: 0,
            col: 0,
            description: [
                "Gives the target of your Lay on Hands spell a {value}% bonus to their armor value from items for 1 minute.",
                {
                    value: [15, 30]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Holy", "illumination", {
            row: 1,
            description: [
                "After getting a critical effect from your Flash of Light or Holy Light spell, gives you a {value}% chance to gain Mana equal to the base cost of the spell.",
                {
                    value: [20, 40, 60, 80, 100]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Holy", "improved_blessing_of_wisdom", {
            row: 1,
            ranks: 5,
            description: [
                "Increases the effect of your Blessing of Wisdom spell by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Holy", "divine_favor", {
            row: 2,
            col: 0,
            requiresTalents: null,
            description: [
                "When activated, gives your next Flash of Light or Holy Light spell a 100% critical effect chance.",
                {
                    value: [20, 40, 60, 80, 100]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Holy", "holy_shock", {
            requiresTalents: "sanctity_aura",
            description: [
                "Blasts the target with Holy energy, causing 205 to 219 Holy damage."
            ]
        });

        removeTalentsById("1.8", "paladin", "Protection", [
            "precision",
            "guardians_favor",
            "blessing_of_kings",
            "improved_righteous_fury",
            "anticipation",
            "improved_hammer_of_justice",
            "improved_concentration_aura"
        ]);

        bulkInsertTalents("1.8", "paladin", "Protection", [
            {
                id: "improved_blessing_of_protection",
                name: "Improved Blessing of Protection",
                icon: "spell_holy_sealofprotection",
                row: 1,
                col: 1,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Reduces the cooldown of your Blessing of Protection by {value} seconds.",
                    {
                        value: [60, 120]
                    }
                ]
            },
            {
                id: "improved_seal_of_fury",
                name: "Improved Seal of Fury",
                icon: "spell_holy_sealoffury",
                row: 2,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the amount of threat generated by your Seal of Fury and Judgement of Fury by {value}%.",
                    {
                        value: [3, 6, 9, 12, 15]
                    }
                ]
            },
            {
                id: "improved_blessing_of_freedom",
                name: "Improved Blessing of Freedom",
                icon: "spell_holy_sealofvalor",
                row: 2,
                col: 3,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the duration of your Blessing of Freedom by {value}.",
                    {
                        value: ["1 second", "2 seconds", "3 seconds", "4 seconds", "5 seconds"]
                    }
                ]
            },
            {
                id: "improved_seal_of_justice",
                name: "Improved Seal of Justice",
                icon: "spell_holy_sealofwrath",
                row: 3,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the frequency that your Seal of Justice stuns the opponent by {value} per minute.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            },
            {
                id: "improved_blessing_of_salvation",
                name: "Improved Blessing of Salvation",
                icon: "spell_holy_sealofsalvation",
                row: 4,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the duration of your Blessing of Salvation by {value} minutes.",
                    {
                        value: [5, 10]
                    }
                ]
            },
            {
                id: "repentance",
                name: "Repentance",
                icon: "spell_holy_prayerofhealing",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "improved_seal_of_justice",
                description: [
                    "Puts the enemy target in a state of meditation for up to 6 seconds. Any damage caused will awaken the target. Only works against Humanoids."
                ]
            }
        ]);

        replaceTalent("1.8", "paladin", "Protection", "redoubt", {
            description: [
                "Increases your chance to block attacks with your shield by {value}% after being the victim of a critical strike.  Lasts 10 seconds or 5 blocks.",
                {
                    value: [6, 12, 18, 24, 30]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Protection", "toughness", {
            col: 2
        });

        replaceTalent("1.8", "paladin", "Protection", "shield_specialization", {
            ranks: 5,
            requiresTalents: null,
            description: [
                "Increases the amount of damage absorbed by your shield by {value}%.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Protection", "blessing_of_sanctuary", {
            row: 2,
            col: 0,
            description: [
                "Places a Blessing on the friendly target, reducing damage dealt from all sources by 7 for 5 minutes. Players may only have one Blessing on them per Paladin at any one time."
            ]
        });

        replaceTalent("1.8", "paladin", "Protection", "reckoning", {
            col: 0
        });

        replaceTalent("1.8", "paladin", "Protection", "one_handed_weapon_specialization", {
            description: [
                "Increases the damage you deal with one-handed melee weapons by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Protection", "holy_shield", {
            row: 4,
            col: 2,
            requiresTalents: "shield_specialization",
            description: [
                "Increases chance to block by 30% for 10 seconds and deals 40 Holy damage for each attack blocked while active. Each block expends a charge. 4 charges."
            ]
        });

        removeTalentsById("1.8", "paladin", "Retribution", [
            "improved_judgement",
            "vindication",
            "pursuit_of_justice",
            "eye_for_an_eye",
            "sanctity_aura",
            "repentance"
        ]);

        bulkInsertTalents("1.8", "paladin", "Retribution", [
            {
                id: "anticipation",
                name: "Anticipation",
                icon: "spell_magic_lesserinvisibilty",
                row: 2,
                col: 3,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases your Defense skill by {value}.",
                    {
                        value: [2, 4, 6, 8, 10]
                    }
                ]
            },
            {
                id: "precision",
                name: "Precision",
                icon: "ability_rogue_ambush",
                row: 4,
                col: 0,
                ranks: 3,
                requiresTalents: "deflection",
                description: [
                    "Increases your chance to hit with melee weapons by {value}%.",
                    {
                        value: [1, 2, 3]
                    }
                ]
            },
            {
                id: "consecration",
                name: "Consecration",
                icon: "spell_holy_innerfire",
                row: 4,
                col: 2,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Consecrates the land beneath the Paladin, doing 120 Holy damage over 8 seconds to enemies who enter the area."
                ]
            },
            {
                id: "blessing_of_kings",
                name: "Blessing of Kings",
                icon: "spell_magic_magearmor",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Places a Blessing on the friendly target, increasing total stats by 10% for 5 minutes. Players may only have one Blessing on them per Paladin at any one time."
                ]
            }
        ]);

        replaceTalent("1.8", "paladin", "Retribution", "improved_blessing_of_might", {
            description: [
                "Increases the Attack Power bonus of your Blessing of Might by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Retribution", "benediction", {
            description: [
                "Reduces the Mana cost of your Retribution spells by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Retribution", "improved_seal_of_the_crusader", {
            col: 2,
            ranks: 5,
            description: [
                "Increases the Attack Power bonus of your Seal of the Crusader and the Holy damage increase of your Judgement of the Crusader by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Retribution", "deflection", {
            row: 2,
            col: 0
        });

        replaceTalent("1.8", "paladin", "Retribution", "conviction", {
            row: 5,
            col: 1,
            requiresTalents: "vengeance"
        });

        replaceTalent("1.8", "paladin", "Retribution", "seal_of_command", {
            description: [
                "Fills the Paladin with the spirit of command for 30 seconds, giving the Paladin a chance to deal additional Holy damage equal to the damage of the Paladin's weapon.  Only one Seal can be active on the Paladin at any one time.<br><br>Unleashing this Seal's energy will judge an enemy for 30 seconds, causing 24 Holy damage any time the enemy becomes stunned. Only one Judgement per Paladin can be active at any one time."
            ]
        });

        replaceTalent("1.8", "paladin", "Retribution", "improved_retribution_aura", {
            ranks: 5,
            requiresTalents: "seal_of_command",
            description: [
                "Increases the damage done by your Retribution Aura by {value}%.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Retribution", "two_handed_weapon_specialization", {
            row: 1,
            col: 1,
            ranks: 5,
            description: [
                "Increases the damage you deal with two-handed melee weapons by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.8", "paladin", "Retribution", "vengeance", {
            row: 2,
            col: 1,
            requiresTalents: null,
            description: [
                "Gives you a {value}% bonus to Physical and Holy damage you deal for 8 seconds after dealing a critical strike.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        removeTalentsById("1.9", "priest", "Discipline", [
            "power_infusion"
        ]);

        replaceTalent("1.9", "priest", "Discipline", "unbreakable_will", {
            description: [
                "Increases your chance to resist Stun, Fear, and Silence effects by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "wand_specialization", {
            row: 1,
            col: 0
        });

        replaceTalent("1.9", "priest", "Discipline", "silent_resolve", {
            row: 0,
            col: 2,
            description: [
                "Reduces the threat generated by your damage spells by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "improved_power_word_fortitude", {
            col: 3,
            description: [
                "Increases the effect of your Power Word: Fortitude spell by {value}%.",
                {
                    value: [15, 30]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "improved_power_word_shield", {
            description: [
                "Reduces the duration of your Power Word: Shield's Weakened Soul effect by {value} seconds.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "martyrdom", {
            col: 1,
            description: [
                "Gives you a {value}% chance to gain the Focused Casting effect that lasts for 6 seconds after being the victim of a critical strike. The Focused Casting effect prevents you from losing casting time when taking damage.",
                {
                    value: [50, 100]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "inner_focus", {
            row: 4,
            col: 2,
            requiresTalents: "mental_agility",
            description: [
                "When activated, reduces the Mana cost of your next spell by 100% and increases its critical effect chance by 25% if it is capable of a critical effect."
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "meditation", {
            row: 4,
            col: 1,
            ranks: 5,
            description: [
                "Allows {value}% of your Mana regeneration to continue while casting.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "improved_inner_fire", {
            description: [
                "Increases the effects of your Inner Fire spell by {value}%.",
                {
                    value: [15, 30, 45]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "mental_agility", {
            row: 2,
            col: 2
        });

        replaceTalent("1.9", "priest", "Discipline", "improved_mana_burn", {
            description: [
                "Reduces the casting time of your Mana Burn spell by {value} seconds.",
                {
                    value: [0.3, 0.6]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Discipline", "mental_strength", {
            row: 3,
            col: 1
        });

        replaceTalent("1.9", "priest", "Discipline", "divine_spirit", {
            icon: "spell_holy_holyprotection",
            row: 6,
            col: 1,
            requiresTalents: "meditation",
            description: [
                "Holy power infuses the target, increasing their Spirit by 23 for 30 minutes."
            ]
        });

        bulkInsertTalents("1.9", "priest", "Discipline", [
            {
                id: "focused_casting",
                name: "Focused Casting",
                icon: "spell_arcane_blink",
                row: 2,
                col: 1,
                ranks: 1,
                requiresTalents: "martyrdom",
                description: [
                    "While active, you no longer lose casting time from taking damage. Lasts 8 seconds."
                ]
            }
        ]);

        removeTalentsById("1.9", "priest", "Holy", [
            "healing_focus",
            "spell_warding",
            "blessed_recovery",
            "holy_reach",
            "searing_light",
            "spiritual_guidance",
            "lightwell"
        ]);

        replaceTalent("1.9", "priest", "Holy", "improved_renew", {
            ranks: 5,
            description: [
                "Increases the amount healed by your Renew spell by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Holy", "divine_fury", {
            row: 4,
            col: 0,
            requiresTalents: "holy_fire",
            description: [
                "Reduces the casting time of your Smite and Holy Fire spells by {value} seconds.",
                {
                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Holy", "holy_nova", {
            icon: "spell_holy_holybolt",
            row: 6,
            col: 1,
            description: [
                "Causes an explosion of holy light around the caster, causing 80 to 88 Holy damage to all targets within 10 yards. The effect also temporarily reduces your threat level against nearby targets for 5 seconds."
            ]
        });

        replaceTalent("1.9", "priest", "Holy", "inspiration", {
            col: 2,
            ranks: 5,
            description: [
                "Increases your target's armor value from items by {value}% for 15 seconds after getting a critical effect from your Flash Heal, Heal, Greater Heal, or Prayer of Healing spell.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Holy", "improved_healing", {
            ranks: 5,
            description: [
                "Reduces the Mana cost of your Lesser Heal, Heal, and Greater Heal spells by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Holy", "improved_prayer_of_healing", {
            col: 3
        });

        replaceTalent("1.9", "priest", "Holy", "spirit_of_redemption", {
            col: 2,
            description: [
                "Upon death, summons a Spirit of Redemption that heals nearby friendly targets for 318 to 360 and another 343 over 21 seconds."
            ]
        });

        replaceTalent("1.9", "priest", "Holy", "spiritual_healing", {
            row: 1,
            col: 2
        });

        bulkInsertTalents("1.9", "priest", "Holy", [
            {
                id: "improved_smite",
                name: "Improved Smite",
                icon: "spell_holy_holysmite",
                row: 1,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the damage of your Smite spell by {value}%.",
                    {
                        value: [2, 4, 6, 8, 10]
                    }
                ]
            },
            {
                id: "holy_fire",
                name: "Holy Fire",
                icon: "spell_holy_searinglight",
                row: 2,
                col: 0,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Consumes the enemy in flames that cause 90 to 116 Fire damage and an additional 28 Fire damage over 8 seconds."
                ]
            },
            {
                id: "subtlety",
                name: "Subtlety",
                icon: "ability_eyeoftheowl",
                row: 2,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Reduces the threat generated by your healing spells by {value}%.",
                    {
                        value: [4, 8, 12, 16, 20]
                    }
                ]
            },
            {
                id: "improved_flash_heal",
                name: "Improved Flash Heal",
                icon: "spell_holy_flashheal",
                row: 3,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Gives you a {value}% chance to avoid interruption caused by damage while casting Flash Heal.",
                    {
                        value: [35, 70]
                    }
                ]
            },
            {
                id: "master_healer",
                name: "Master Healer",
                icon: "spell_holy_healingaura",
                row: 5,
                col: 1,
                ranks: 5,
                requiresTalents: "improved_healing",
                description: [
                    "Reduces the casting time of your Heal and Greater Heal spells by {value} seconds.",
                    {
                        value: [0.1, 0.2, 0.3, 0.4, 0.5]
                    }
                ]
            }
        ]);

        removeTalentsById("1.9", "priest", "Shadow", [
            "improved_vampiric_embrace"
        ]);

        replaceTalent("1.9", "priest", "Shadow", "shadow_affinity", {
            ranks: 5,
            description: [
                "Reduces the threat generated by your Shadow spells by {value}%.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Shadow", "mind_flay", {
            description: [
                "Assault the target's mind with Shadow energy, causing 75 damage over 3 seconds and slowing the target to 50% of their movement speed."
            ]
        });

        replaceTalent("1.9", "priest", "Shadow", "improved_fade", {
            description: [
                "Increases the duration of your Fade ability by {value} seconds.",
                {
                    value: [5, 10]
                }
            ]
        });

        replaceTalent("1.9", "priest", "Shadow", "shadow_reach", {
            col: 3
        });

        replaceTalent("1.9", "priest", "Shadow", "shadow_weaving", {
            row: 4,
            col: 1
        });

        replaceTalent("1.9", "priest", "Shadow", "silence", {
            description: [
                "Silence the target, preventing them from casting spells for 5 seconds."
            ]
        });

        replaceTalent("1.9", "priest", "Shadow", "vampiric_embrace", {
            col: 2,
            requiresTalents: "mind_flay"
        });

        replaceTalent("1.9", "priest", "Shadow", "darkness", {
            col: 1,
            requiresTalents: "shadow_weaving"
        });

        replaceTalent("1.9", "priest", "Shadow", "shadowform", {
            requiresTalents: null,
            description: [
                "Assume a Shadowform, increasing your Shadow damage by 15% and reducing Physical damage done to you by 15%. However, you may only cast Shadow and Discipline spells while in this form."
            ]
        });

        removeTalentsById("1.11", "rogue", "Assassination", [
            "improved_poisons"
        ]);

        replaceTalent("1.11", "rogue", "Assassination", "remorseless_attacks", {
            ranks: 5,
            description: [
                "After killing an opponent that yields experience, gives you a {value}% increased critical strike chance on your next Sinister Strike, Backstab, Ambush, or Ghostly Strike.",
                {
                    value: [8, 16, 24, 32, 40]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Assassination", "murder", {
            description: [
                "Increases your chance to hit while using your Sap, Ambush, Garrote, or Cheap Shot abilities by {value}%.",
                {
                    value: [3, 5]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Assassination", "relentless_strikes", {
            requiresTalents: "ruthlessness"
        });

        replaceTalent("1.11", "rogue", "Assassination", "improved_expose_armor", {
            ranks: 3,
            description: [
                "Increases the armor reduced by your Expose Armor ability by {value}%.",
                {
                    value: [15, 30, 45]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Assassination", "lethality", {
            description: [
                "Increases the critical strike damage bonus of your Sinister Strike, Gouge, Backstab, Ambush, Ghostly Strike, or Hemorrhage ability by 30%.",
                {
                    value: [6, 12, 18, 24, 30]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Assassination", "vile_poisons", {
            description: [
                "Increases the damage dealt by your poisons by {value}%.",
                {
                    value1: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Assassination", "improved_kidney_shot", {
            row: 4,
            col: 0,
            description: [
                "Reduces the cooldown of your Kidney Shot ability by {value} seconds.",
                {
                    value: [2, 4, 5]
                }
            ]
        });

        bulkInsertTalents("1.11", "rogue", "Assassination", [
            {
                id: "improved_instant_poison",
                name: "Improved Instant Poison",
                icon: "ability_poisons",
                row: 3,
                col: 2,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the chance to apply Instant Poison to your target by {value}%.",
                    {
                        value: [2, 4, 6, 8, 10]
                    }
                ]
            },
            {
                id: "improved_deadly_poison",
                name: "Improved Deadly Poison",
                icon: "ability_rogue_dualweild",
                row: 4,
                col: 2,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the chance to apply Deadly Poison to your target by {value}%.",
                    {
                        value: [3, 6, 9, 12, 15]
                    }
                ]
            }
        ]);

        replaceTalent("1.11", "rogue", "Combat", "endurance", {
            name: "Improved Evasion",
            description: [
                "Increases the effect duration of your Evasion ability by {value} seconds.",
                {
                    value: [2, 4]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Combat", "improved_sprint", {
            ranks: 3,
            description: [
                "Reduces the cooldown of your Sprint ability by {value} seconds.",
                {
                    value: [30, 60, 90]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Combat", "mace_specialization", {
            description: [
                "Gives you a {value}% chance to stun your target for 3 seconds with a mace.",
                {
                    value: [1, 2, 3, 4, 6]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Combat", "weapon_expertise", {
            name: "Throwing Weapon Specialization",
            icon: "inv_throwingknife_01",
            requiresTalents: null,
            description: [
                "Increases the range of your throwing weapons by {value} yards.",
                {
                    value: [3, 6]
                }
            ]
        });

        removeTalentsById("1.11", "rogue", "Subtlety", [
            "sleight_of_hand",
            "serrated_blades",
            "heightened_senses",
            "dirty_deeds",
            "deadliness"
        ]);

        replaceTalent("1.11", "rogue", "Subtlety", "opportunity", {
            row: 1
        });

        replaceTalent("1.11", "rogue", "Subtlety", "elusiveness", {
            ranks: 5,
            description: [
                "Reduces the cooldown of your Evasion, Vanish, and Blind abilities by {value}.",
                {
                    value: ["15 seconds", "30 seconds", "45 seconds", "1 minute", "1.3 minutes"]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Subtlety", "camouflage", {
            row: 0,
            description: [
                "Increases your speed while stealthed by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Subtlety", "ghostly_strike", {
            description: [
                "A strike that deals 125% weapon damage and increases your chance to dodge by 15% for 7 seconds. Awards 1 combo point."
            ]
        });

        replaceTalent("1.11", "rogue", "Subtlety", "improved_ambush", {
            requiresTalents: "opportunity"
        });

        replaceTalent("1.11", "rogue", "Subtlety", "setup", {
            row: 5,
            col: 1,
            requiresTalents: "ghostly_strike",
            description: [
                "Gives you a {value}% chance to add a combo point to your target after dodging their attack.",
                {
                    value: [15, 30, 45]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Subtlety", "improved_sap", {
            col: 2,
            description: [
                "Adds a {value}% chance to return to stealth mode after using your Sap ability.",
                {
                    value: [30, 60, 90]
                }
            ]
        });

        replaceTalent("1.11", "rogue", "Subtlety", "preparation", {
            col: 2
        });

        replaceTalent("1.11", "rogue", "Subtlety", "hemorrhage", {
            row: 5,
            col: 2,
            description: [
                "An instant strike that damages the opponent and causes the target to hermorrhage, increasing any Physical damage dealt to the target by up to 3. Lasts 30 charges or 15 seconds. Awards 1 combo point."
            ]
        });

        replaceTalent("1.11", "rogue", "Subtlety", "premeditation", {
            requiresTalents: null,
            description: [
                "When used, adds 2 combo points to your target. The target must become engaged in combat within 5 seconds or the combo points are lost."
            ]
        });

        bulkInsertTalents("1.11", "rogue", "Subtlety", [
            {
                id: "rapid_concealment",
                name: "Rapid Concealment",
                icon: "ability_ambush",
                row: 0,
                col: 0,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Reduces the cooldown of your Stealth ability by {value}.",
                    {
                        value: ["1 second", "2 seconds", "3 seconds", "4 seconds", "5 seconds"]
                    }
                ]
            },
            {
                id: "improved_garrote",
                name: "Improved Garrote",
                icon: "ability_rogue_garrote",
                row: 2,
                col: 3,
                ranks: 2,
                requiresTalents: "opportunity",
                description: [
                    "Increases the duration of your Garrote ability by {value1} seconds, but reduces the damage by {value1}%.",
                    {
                        value1: [3, 6],
                        value1: [5, 10]
                    }
                ]
            },
            {
                id: "improved_vanish",
                name: "Improved Vanish",
                icon: "ability_vanish",
                row: 3,
                col: 0,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases your movement speed while vanished by {value}%.",
                    {
                        value: [10, 20, 30]
                    }
                ]
            },
            {
                id: "improved_rupture",
                name: "Improved Rupture",
                icon: "ability_rogue_rupture",
                row: 3,
                col: 3,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the damage of dealt by your Rupture ability by {value}%.",
                    {
                        value: [10, 20, 30]
                    }
                ]
            },
            {
                id: "improved_distract",
                name: "Improved Distract",
                icon: "ability_rogue_distract",
                row: 4,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the radius of your Distract ability by {value} yards.",
                    {
                        value: [3, 5]
                    }
                ]
            },
            {
                id: "improved_cheap_shot",
                name: "Improved Cheap Shot",
                icon: "ability_cheapshot",
                row: 4,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Reduces the Energy cost of your Cheap Shot ability by {value}.",
                    {
                        value: [10, 20]
                    }
                ]
            }
        ]);

        removeTalentsById("1.10", "shaman", "Elemental", [
            "earths_grasp",
            "elemental_warding",
            "improved_fire_totems",
            "eye_of_the_storm",
            "elemental_devastation",
            "storm_reach"
        ]);

        replaceTalent("1.10", "shaman", "Elemental", "convection", {
            row: 1,
            col: 2,
            requiresTalents: "concussion",
            description: [
                "Reduces the Mana cost of your Shock spells by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Elemental", "concussion", {
            description: [
                "Increases the damage done by your Shock spells by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Elemental", "call_of_flame", {
            row: 1,
            col: 1,
            ranks: 5,
            description: [
                "Increases the damage done by your Fire Totems by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Elemental", "reverberation", {
            row: 2,
            col: 2,
            requiresTalents: "convection",
            description: [
                "Reduces the cooldown of your Shock spells by {value}.",
                {
                    value: ["0.2 seconds", "0.4 seconds", "0.6 seconds", "0.8 seconds", "1 second"]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Elemental", "call_of_thunder", {
            row: 2,
            col: 1,
            description: [
                "Increases the critical strike chance of your Lightning spells by {value}%.",
                {
                    value: [1, 2, 3, 4, 6]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Elemental", "elemental_fury", {
            requiresTalents: "call_of_thunder",
            description: [
                "Increases the critical strike damage done by your Fire, Frost, and Nature spells by 100%."
            ]
        });

        replaceTalent("1.10", "shaman", "Elemental", "lightning_mastery", {
            row: 5,
            col: 0,
            requiresTalents: null,
            description: [
                "Reduces the cast time of your Lightning Bolt and Chain Lightning spells by {value}.",
                {
                    value: ["0.2 seconds", "0.4 seconds", "0.6 seconds", "0.8 seconds", "1 second"]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Elemental", "elemental_mastery", {
            description: [
                "When activated, this spell gives your next Fire, Frost, or Nature damage spell a 100% critical strike chance."
            ]
        });

        bulkInsertTalents("1.10", "shaman", "Elemental", [
            {
                id: "improved_lightning_bolt",
                name: "Improved Lightning Bolt",
                icon: "spell_nature_lightning",
                row: 0,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Reduces the Mana cost of your Lightning Bolt spell by {value}%.",
                    {
                        value: [3, 6, 9, 12, 15]
                    }
                ]
            },
            {
                id: "improved_stoneclaw_totem",
                name: "Improved Stoneclaw Totem",
                icon: "spell_nature_stoneclawtotem",
                row: 1,
                col: 0,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the Health of your Stoneclaw Totem by {value}%.",
                    {
                        value: [5, 10, 15, 20, 25]
                    }
                ]
            },
            {
                id: "improved_searing_totem",
                name: "Improved Searing Totem",
                icon: "spell_fire_searingtotem",
                row: 1,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the duration of your Searing Totem by {value}%.",
                    {
                        value: [10, 20]
                    }
                ]
            },
            {
                id: "improved_fire_nova_totem",
                name: "Improved Fire Nova Totem",
                icon: "spell_fire_sealoffire",
                row: 3,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Reduces the delay before your Fire Nova Totem activates by {value}",
                    {
                        value: ["1 second", "2 seconds"]
                    }
                ]
            },
            {
                id: "improved_magma_totem",
                name: "Improved Magma Totem",
                icon: "spell_fire_selfdestruct",
                row: 4,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Reduces the Mana cost of your Magma Totem by {value}%.",
                    {
                        value: [10, 20]
                    }
                ]
            },
            {
                id: "improved_chain_lightning",
                name: "Improved Chain Lightning",
                icon: "spell_nature_chainlightning",
                row: 5,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the damage dealt by your Chain Lightning spell by {value}%.",
                    {
                        value: [5, 10]
                    }
                ]
            }
        ]);

        replaceTalent("1.10", "shaman", "Enhancement", "shield_specialization", {
            description: [
                "Increases your chance to block attacks with a shield by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Enhancement", "enhancing_totems", {
            name: "Improved Strength of Earth Totem",
            ranks: 3,
            description: [
                "Increases the amount of Strength raised by your Strength of Earth Totem by {value}%.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Enhancement", "anticipation", {
            description: [
                "Increases your defense skill by {value}.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Enhancement", "toughness", {
            row: 5,
            col: 1,
            requiresTalents: "parry",
        });

        replaceTalent("1.10", "shaman", "Enhancement", "parry", {
            row: 4,
            col: 1,
            description: [
                "Gives a chance to parry melee attacks."
            ]
        });

        replaceTalent("1.10", "shaman", "Enhancement", "stormstrike", {
            requiresTalents: null,
            description: [
                "Gives you an extra attack.  In addition, the next 2 sources of Nature damage dealt to the target are increased by 20%. Lasts 12 seconds."
            ]
        });

        bulkInsertTalents("1.10", "shaman", "Enhancement", [
            {
                id: "improved_rockbiter_weapon",
                name: "Improved Rockbiter Weapon",
                icon: "spell_nature_rockbiter",
                row: 3,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the Attack Power bonus of your Rockbiter Weapon by {value}%.",
                    {
                        value: [5, 10]
                    }
                ]
            },
            {
                id: "improved_flametongue_weapon",
                name: "Improved Flametongue Weapon",
                icon: "spell_fire_flametounge",
                row: 4,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the damage done by your Flametongue Weapon effect by {value}%.",
                    {
                        value: [5, 10]
                    }
                ]
            },
            {
                id: "improved_frostbrand_weapon",
                name: "Improved Frostbrand Weapon",
                icon: "spell_frost_frostbrand",
                row: 4,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the damage done by your Frostbrand Weapon effect by {value}%.",
                    {
                        value: [5, 10]
                    }
                ]
            },
            {
                id: "improved_windfury_weapon",
                name: "Improved Windfury Weapon",
                icon: "spell_nature_cyclone",
                row: 4,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the Attack Power bonus of your Windfury Weapon effect by {value}%.",
                    {
                        value: [11, 22]
                    }
                ]
            },
            {
                id: "improved_grounding_totem",
                name: "Improved Grounding Totem",
                icon: "spell_nature_nullward",
                row: 5,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the frequency that your Grounding Totem will absorb a spell by {value} seconds.",
                    {
                        value: [2, 4]
                    }
                ]
            },
            {
                id: "improved_grace_of_air_totem",
                name: "Improved Grace of Air Totem",
                icon: "spell_nature_windfury",
                row: 6,
                col: 2,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the amount of Agility raised by your Grace of Air Totem by {value}%.",
                    {
                        value: [5, 10, 15]
                    }
                ]
            }
        ]);

        removeTalentsById("1.10", "shaman", "Restoration", [
            "natures_guidance",
            "healing_focus",
            "totemic_mastery",
            "healing_grace",
            "restorative_totems",
            "healing_way"
        ]);

        replaceTalent("1.10", "shaman", "Restoration", "improved_healing_wave", {
            description: [
                "Reduces the casting time of your Healing Wave spell by {value} seconds.",
                {
                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Restoration", "improved_reincarnation", {
            name: "Improved Self-Reincarnation",
            description: [
                "Reduces the cooldown of your Self-Reincarnation spell by {value} minutes.",
                {
                    value: [10, 20]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Restoration", "ancestral_healing", {
            ranks: 5,
            description: [
                "Increases your target's armor value from items by {value}% for 15 seconds after getting a critical effect from one of your healing spells.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Restoration", "totemic_focus", {
            description: [
                "Reduces the Mana cost of your totems by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Restoration", "tidal_mastery", {
            description: [
                "Increases the critical effect chance of your healing and Nature damage spells by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.10", "shaman", "Restoration", "natures_swiftness", {
            requiresTalents: "tidal_mastery",
            description: [
                "When activated, your next Nature spell with a casting time less than 10 seconds becomes an instant cast spell."
            ]
        });

        replaceTalent("1.10", "shaman", "Restoration", "mana_tide_totem", {
            requiresTalents: "improved_mana_spring_totem",
            description: [
                "Summons a Mana Tide Totem with 5 health at the feet of the caster for 12 seconds that restores 140 mana every 3 seconds to group members within 20 yards."
            ]
        });

        bulkInsertTalents("1.10", "shaman", "Restoration", [
            {
                id: "eventide",
                name: "Eventide",
                icon: "spell_frost_stun",
                row: 2,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases the duration of your Healing Stream and Mana Spring totems by {value}%.",
                    {
                        value: [3, 6, 9, 12, 15]
                    }
                ]
            },
            {
                id: "improved_lesser_healing_wave",
                name: "Improved Lesser Healing Wave",
                icon: "spell_nature_healingwavelesser",
                row: 2,
                col: 2,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Gives you a {value}% chance to avoid interruption caused by damage while casting Lesser Healing Wave.",
                    {
                        value: [15, 30, 45, 60, 75]
                    }
                ]
            },
            {
                id: "combat_endurance",
                name: "Combat Endurance",
                icon: "spell_nature_ancestralguardian",
                row: 2,
                col: 3,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Allows 10% of your Health regeneration to work while in combat."
                ]
            },
            {
                id: "improved_healing_stream_totem",
                name: "Improved Healing Stream Totem",
                icon: "inv_spear_04",
                row: 3,
                col: 0,
                ranks: 5,
                requiresTalents: "eventide",
                description: [
                    "Increases the effect of your Healing Stream Totem by {value}%.",
                    {
                        value: [4, 8, 12, 16, 20]
                    }
                ]
            },
            {
                id: "improved_mana_spring_totem",
                name: "Improved Mana Spring Totem",
                icon: "spell_nature_manaregentotem",
                row: 4,
                col: 1,
                ranks: 5,
                requiresTalents: "eventide",
                description: [
                    "Increases the effect of your Mana Spring Totem by {value}%.",
                    {
                        value: [5, 10, 15, 20, 25]
                    }
                ]
            }
        ]);

        replaceTalent("1.5", "warlock", "Affliction", "improved_corruption", {
            description: [
                "Reduces the casting time of your Corruption spell by {value} seconds.",
                {
                    value: [0.4, 0.8, 1.2, 1.6, 2]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Affliction", "improved_drain_soul", {
            description: [
                "Gives you a {value}% chance to get a 100% increase to your Mana regeneration for 10 seconds if the target dies while while you drain its soul. In addition, your Mana may continue to regenerate while casting at 50% of normal.",
                {
                    value: [50, 100]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Affliction", "amplify_curse", {
            description: [
                "Increases the effect of your next Curse of Weakness or Curse of Agony by 50%, or your next Curse of Exhaustion by 20%."
            ]
        });

        replaceTalent("1.5", "warlock", "Affliction", "nightfall", {
            description: [
                "Gives your Corruption and Drain Life spells a {value}% chance to cause you to enter a Shadow Trance state after damaging the opponent. The Shadow Trance state reduces the casting time of your next Shadow Bolt spell by 100%.",
                {
                    value: [2, 3]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Affliction", "siphon_life", {
            description: [
                "Transfers 13 health from the target to the caster every 3 seconds. Lasts 30 seconds."
            ]
        });

        replaceTalent("1.5", "warlock", "Affliction", "curse_of_exhaustion", {
            description: [
                "Reduces the target's speed to 90% of normal for 12 seconds. Only one Curse per Warlock can be active on any one target."
            ]
        });

        removeTalentsById("1.5", "warlock", "Demonology", [
            "master_demonologist"
        ]);

        replaceTalent("1.5", "warlock", "Demonology", "improved_voidwalker", {
            description: [
                "Increases the effectiveness of your Voidwalker's Torment, Consume Shadows, and Suffering spells by {value}%.",
                {
                    value: [8, 16, 25]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Demonology", "improved_succubus", {
            description: [
                "Increases the effect of your Succubus' Last of Pain and Soothing Kiss spells by {value}%, and increases the duration of your Succubus' Seduction and Lesser Invisibility spells by {value}%.",
                {
                    value: [8, 16, 25]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Demonology", "fel_domination", {
            description: [
                "Your next Imp, Voidwalker, Succubus, or Felhunter Summon spell has its casting time reduced by 5.5 seconds and its Mana cost reduced by 50%."
            ]
        });

        replaceTalent("1.5", "warlock", "Demonology", "fel_stamina", {
            requiresTalents: "fel_intellect"
        });

        replaceTalent("1.5", "warlock", "Demonology", "master_summoner", {
            description: [
                "Reduces the casting time of your Imp, Voidwalker, Succubus, and Felhunter Summoning spells by {value} seconds.",
                {
                    value: [2, 4]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Demonology", "unholy_power", {
            row: 5,
            requiresTalents: "fel_stamina"
        });

        replaceTalent("1.5", "warlock", "Demonology", "improved_enslave_demon", {
            description: [
                "Reduces the Attack Speed and Casting Speed penalty of your Enslave Demon spell by {value}%.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Demonology", "demonic_sacrifice", {
            description: [
                "When activated, sacrifices your summoned demon to grant you an effect that lasts 30 minutes. The effect is cancelled if any Demon is summoned.<br><br>Imp: Increases your Fire damage by 15%.<br><br>Voidwalker: Increases your maximum Health by 15%.<br><br>Succubus: Increases your Shadow damage by 15%.<br><br>Felhunter: Increases your maximum Mana by 20%."
            ]
        });

        replaceTalent("1.5", "warlock", "Demonology", "improved_firestone", {
            description: [
                "Increases the damage done by your Firestone by {value}%.",
                {
                    value: [15, 30]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Demonology", "soul_link", {
            description: [
                "When active, 50% of all damage taken is split with your summoned demon. Lasts 30 seconds."
            ]
        });

        bulkInsertTalents("1.5", "warlock", "Demonology", [
            {
                id: "master_conjuror",
                name: "Master Conjuror",
                icon: "inv_misc_orb_04",
                row: 3,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Reduces the Mana cost and casting time of your Stone creation spells by {value}%.",
                    {
                        value: [20, 40]
                    }
                ]
            }
        ]);

        replaceTalent("1.5", "warlock", "Destruction", "improved_shadow_bolt", {
            description: [
                "Your Shadow Bolt critical strikes increase the next 4 sources of Shadow damage dealt to the target by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "bane", {
            description: [
                "Reduces the casting time of your Shadow Bolt and Immolate spells by {value} seconds.",
                {
                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "aftermath", {
            description: [
                "Gives your Destruction spells a {value}% chance to daze the target for 5 seconds.",
                {
                    value: [2, 4, 6, 8, 10]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "improved_firebolt", {
            description: [
                "Reduces the casting time of your Imp's Firebolt spell by {value}.",
                {
                    value: ["0.5 seconds", "1 second"]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "improved_lash_of_pain", {
            description: [
                "Reduces the cooldown of your Succubus' Lash of Pain spell by {value} seconds.",
                {
                    value: [3, 6]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "shadowburn", {
            description: [
                "Instantly blasts the target with 87 to 99 Shadow damage. Requires 1 Soul Shard. If the target dies from Shadowburn, and yields experience, the caster gains a Soul Shard."
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "intensity", {
            description: [
                "Gives you a {value}% chance to resist interruptiong caused by damage while channeling the Rain of Fire or Hellfire spell.",
                {
                    value: [35, 70]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "pyroclasm", {
            description: [
                "Gives your Rain of Fire and Hellfire spells a {value}% chance to stun the target for 3 seconds.",
                {
                    value: [13, 26]
                }
            ]
        });

        replaceTalent("1.5", "warlock", "Destruction", "emberstorm", {
            name: "Inferno"
        });

        replaceTalent("1.5", "warlock", "Destruction", "conflagrate", {
            description: [
                "Ignite a target that is already afflicted by Immolate, dealing 197 to 251 damage and consuming the Immolate spell."
            ]
        });

        replaceTalent("1.5", "warrior", "Arms", "improved_thunder_clap", {
            description: [
                "Increases the damage done by your Thunder Clap by {value}%.",
                {
                    value: [8, 16, 25]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Arms", "impale", {
            description: [
                "Increases the critical strike damage done by your abilities in Battle, Defensive, and Berserker stance by {value}%.",
                {
                    value: [10, 20]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Arms", "improved_hamstring", {
            ranks: 2,
            description: [
                "Increases the movement slow effect of your Hamstring ability by {value}%.",
                {
                    value: [10, 20]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Arms", "mortal_strike", {
            description: [
                "A vicious strike that deals 200% weapon damage and wounds the target, reducing the effectiveness of any healing by 50% for 10 seconds."
            ]
        });

        removeTalentsById("1.5", "warrior", "Fury", [
            "dual_wield_specialization"
        ]);

        replaceTalent("1.5", "warrior", "Fury", "booming_voice", {
            description: [
                "Increases the duration of your Battle Shout and Demoralizing Shout by {value}%.",
                {
                    value: [10, 20, 30, 40, 50]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "improved_demoralizing_shout", {
            description: [
                "Increases the attack power reduction of your Demoralizing Shout by {value}%.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "unbridled_wrath", {
            description: [
                "Gives you a {value}% chance to generate an additional Rage point when you deal melee damage.",
                {
                    value: [8, 16, 24, 32, 40]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "improved_cleave", {
            description: [
                "Increases the bonus damage done by your Cleave ability by {value}%.",
                {
                    value: [20, 40, 60]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "piercing_howl", {
            requiresTalents: "improved_demoralizing_shout",
            description: [
                "Causes all enemies near the warrior to be dazed for 6 seconds."
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "blood_craze", {
            description: [
                "Allows {value}% of your Health regeneration to work during combat for 20 seconds after being the victim of a critical strike.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "improved_battle_shout", {
            description: [
                "Increases the Attack Power bonus of your Battle Shout by {value}%.",
                {
                    value: [5, 10, 15, 20, 25]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "enrage", {
            description: [
                "Gives you a {value}% melee damage bonus for 4 swings any time you are the victim of a critical strike.",
                {
                    value: [8, 16, 24, 32, 40]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "improved_slam", {
            description: [
                "Decreases the casting time of your Slam ability by {value} seconds.",
                {
                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "death_wish", {
            description: [
                "When activated, increases your melee damage by 20% and makes you immune to fear, but lowers your defense against all types of damage by 20%. Lasts 30 seconds."
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "improved_intercept", {
            description: [
                "Reduces the cooldown of your Intercept ability by {value} seconds.",
                {
                    value: [5, 10]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "improved_berserker_rage", {
            description: [
                "Increases the duration of your Berserker Rage ability by {value} seconds.",
                {
                    value: [3, 6]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "flurry", {
            description: [
                "Increases your attack speed by {value}% for your next 3 swings after dealing a critical strike.",
                {
                    value: [10, 15, 20, 25, 30]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Fury", "bloodthirst", {
            description: [
                "Activates after dealing a killing blow. Your next melee weapon attack deals a 100% increased damage."
            ]
        });

        removeTalentsById("1.5", "warrior", "Protection", [
            "shield_slam"
        ]);

        bulkInsertTalents("1.5", "warrior", "Protection", [
            {
                id: "shield_discipline",
                name: "Shield Discipline",
                icon: "inv_shield_05",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "improved_shield_bash",
                description: [
                    "While active, increases the amount of damage absorbed by your shield by 50% and increases the damage done by your Shield Bash ability by 200%. Lasts 20 seconds."
                ]
            }
        ]);

        replaceTalent("1.5", "warrior", "Protection", "shield_specialization", {
            description: [
                "Increases your chance to block attacks with a shield by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_bloodrage", {
            description: [
                "Reduces the duration required to generate rage from your Bloodrage ability by {value} seconds.",
                {
                    value: [2, 4]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "iron_will", {
            description: [
                "Increases your chance to resist stun and charm effects by {value}%.",
                {
                    value: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "last_stand", {
            description: [
                "When activated, this ability temporarily grants you 30% of your maximum hit points for 20 seconds. After the effect expires, the hit points are lost."
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_shield_block", {
            description: [
                "Allows your Shield Block ability to block an additional attack, and increases the duration by {value}.",
                {
                    value: ["0.5 seconds", "1 second", "2 seconds"]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_revenge", {
            description: [
                "Gives your Revenge ability a {value}% chance to stun the target for 3 seconds.",
                {
                    value: [20, 30, 40]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_sunder_armor", {
            description: [
                "Increases the armor reduction of your Sunder Armor by {value}%.",
                {
                    value: [10, 20, 30]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_disarm", {
            description: [
                "Increases the duration of your Disarm ability by {value}.",
                {
                    value: ["1 second", "2 seconds", "3 seconds"]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_taunt", {
            col: 3,
            description: [
                "Reduces the cooldown of your Taunt ability by {value}.",
                {
                    value: ["1 second", "2 seconds"]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_shield_wall", {
            description: [
                "Increases the effect duration of your Shield Wall ability by {value} seconds.",
                {
                    value: [3, 5]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "concussion_blow", {
            col: 2,
            requiresTalents: "improved_revenge",
            description: [
                "A brutal strike that deals weapon damage and stuns the opponent for 5 seconds."
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "improved_shield_bash", {
            col: 1,
            description: [
                "Gives your Shield Bash ability a {value}% chance to silence the target for 3 seconds.",
                {
                    value: [50, 100]
                }
            ]
        });

        replaceTalent("1.5", "warrior", "Protection", "one_handed_weapon_specialization", {
            description: [
                "Increases the damage you deal with one-handed melee weapons by {value}%.",
                {
                    value: [1, 2, 3, 4, 5]
                }
            ]
        });

        // turtle wow changes (1.16.1)

        removeTalentsByIdOld("1.16.1t", "druid", "Feral Combat", [
            "faerie_fire_feral"
        ]);

        replaceTalentOld("1.16.1t", "druid", "Feral Combat", "feral_instinct", {
            ranks: 3,
            description: [
                "Increasing threat caused in Bear Form and Dire Bear Form by {value}% and reduces the chance enemies have to detect you while Prowling.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "druid", "Feral Combat", "thick_hide", {
            ranks: 3,
            description: [
                "Increases your Armor contribution from items by {value}%.",
                {
                    value: [3, 6, 10]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "druid", "Feral Combat", "blood_frenzy", {
            description: [
                "Increases the duration of Tiger's Fury by {value1} seconds and your Enrage now also instantly restores {value2} rage. In addition, Tiger’s Fury and Enrage increases your attack speed by {value3}% for {value3} seconds.",
                {
                    value1: [3, 6],
                    value2: [5, 10],
                    value3: [6, 12]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "druid", "Feral Combat", "primal_fury", {
            description: [
                "Gives you a {value}% chance to gain an additional 5 Rage anytime you get a critical strike while in Bear and Dire Bear Form and your critical strikes from Cat Form abilities that add combo points have a {value}% chance to add an additional combo point.",
                {
                    value: [50, 100]
                }
            ]
        });

        bulkInsertTalentsOld("1.16.1t", "druid", "Feral Combat", [
            {
                id: "berserk",
                name: "Berserk",
                icon: "ability_druid_berserk",
                row: 4,
                col: 2,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Removes all Fear effects and increases your energy regeneration rate by 100% while in Cat Form, and increases your total health by 20% while in Bear Form. After the effect ends, the health is lost. The effect lasts 20 seconds."
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "druid", "Restoration", [
            "improved_enrage",
            "insect_swarm"
        ]);

        replaceTalentOld("1.16.1t", "druid", "Restoration", "subtlety", {
            row: 1, 
            col: 2,
            description: [
                "Reduces the threat generated by your spells by {value}%.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "druid", "Restoration", "gift_of_nature", {
            requiresTalents: "swiftmend"
        });

        moveTalentOld("1.16.1t", "druid", "Restoration", "tranquil_spirit", 3, 3);
        moveTalentOld("1.16.1t", "druid", "Restoration", "improved_rejuvenation", 3, 1);
        moveTalentOld("1.16.1t", "druid", "Restoration", "swiftmend", 2, 2);

        replaceTalentOld("1.16.1t", "druid", "Restoration", "improved_regrowth", {
            col: 1,
            requiresTalents: "improved_rejuvenation"
        });

        bulkInsertTalentsOld("1.16.1t", "druid", "Restoration", [
            {
                id: "tree_of_life",
                name: "Tree of Life",
                icon: "ability_druid_treeoflife",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "improved_regrowth",
                description: [
                    "Shapeshift into the Tree of Life. While in this form you increase healing received by 20% of your total Spirit for all party members within 30 yards, your movement speed is reduced by 20%, and you cannot cast damaging spells or Healing Touch, but the mana cost of these spells is reduced by 20%.<br><br>The act of shapeshifting frees the caster of Polymorph and Movement Impairing effects."
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "hunter", "Beast Mastery", [
            "improved_aspect_of_the_hawk"
        ]);

        bulkInsertTalentsOld("1.16.1t", "hunter", "Beast Mastery", [
            {
                id: "improved_predator_aspects",
                name: "Improved Predator Aspects",
                icon: "spell_nature_ravenform",
                row: 0,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "While Aspect of the Hawk or Wolf is active, all normal ranged attacks and melee attacks have a {value}% chance of increasing attack speed by 30% for 12 sec. Hawk will apply ranged attack speed, while Wolf will apply melee attack speed.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            }
        ]);

        replaceTalentOld("1.16.1t", "hunter", "Beast Mastery", "improved_eyes_of_the_beast", {
            description: [
                "Increases the duration of Eyes of the Beast by {value1} seconds. While channeling this ability your tamed pet deals {value2}% additional damage and increases its focus generation by {value2}%.",
                {
                    value1: [30, 60],
                    value2: [15, 30]
                }
            ]
        });

        removeTalentsByIdOld("1.16.1t", "hunter", "Survival", [
            "monster_slaying",
            "humanoid_slaying"
        ]);

        bulkInsertTalentsOld("1.16.1t", "hunter", "Survival", [
            {
                id: "improved_slaying",
                name: "Improved Slaying",
                icon: "spell_holy_prayerofhealing",
                row: 0,
                col: 0,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases all damage caused against Beasts, Giants, Dragonkin, and Humanoid targets by {value}% and increases critical damage caused against Beasts, Giants, Dragonkin, and Humanoid targets by an additional {value}%.",
                    {
                        value: [1, 2, 3]
                    }
                ]
            },
            {
                id: "superior_strikes",
                name: "Superior Strikes",
                icon: "ability_meleedamage",
                row: 0,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Reduces the cooldown of your Raptor Strike and Mongoose Bite by {value} sec.",
                    {
                        value: [0.2, 0.4, 0.6, 0.8, 1]
                    }
                ]
            }
        ]);

        replaceTalentOld("1.16.1t", "mage", "Arcane", "improved_arcane_explosion", {
            name: "Arcane Impact",
            description: [
                "Increases the critical strike chance of your Arcane Explosion and Arcane Missiles spells by an additional {value}%.",
                {
                    value: [2, 4, 6]
                }
            ]
        });

        bulkInsertTalentsOld("1.16.1t", "mage", "Arcane", [
            {
                id: "arcane_potency",
                name: "Arcane Potency",
                icon: "inv_enchant_essencemagiclarge",
                row: 5,
                col: 2,
                ranks: 3,
                requiresTalents: "arcane_mind",
                description: [
                    "Increases the critical strike damage bonus of your Arcane spells by {value}%.",
                    {
                        value: [18, 36, 50]
                    }
                ]
            },
            {
                id: "brilliance_aura",
                name: "Brilliance Aura",
                icon: "inv_staff_07",
                row: 6,
                col: 2,
                ranks: 1,
                requiresTalents: "arcane_potency",
                description: [
                    "Gives Mana regeneration to party members equal to 15% of the Mage's mana regeneration within 30 yards. Lasts 30 minutes."
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "paladin", "Holy", [
            "consecration",
            "lasting_judgement"
        ]);

        bulkInsertTalentsOld("1.16.1t", "paladin", "Holy", [
            {
                id: "sanctity_aura",
                name: "Sanctity Aura",
                icon: "spell_holy_mindvision",
                row: 2,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Increases Holy damage done by party members within 30 yards by 10%.  Players may only have one Aura on them per Paladin at any one time."
                ]
            },
            {
                id: "improved_concentration_aura",
                name: "Improved Concentration Aura",
                icon: "spell_holy_mindsooth",
                row: 4,
                col: 2,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the effect of your Concentration Aura by an additional {value}% and gives all group members affected by the aura an additional {value}% chance to resist Silence and Interrupt effects.",
                    {
                        value: [5, 10, 15]
                    }
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "paladin", "Protection", [
            "blessing_of_kings",
            "improved_concentration_aura"
        ]);

        moveTalentOld("1.16.1t", "paladin", "Protection", "improved_righteous_fury", 2, 0);
        moveTalentOld("1.16.1t", "paladin", "Protection", "blessing_of_sanctuary", 2, 1);

        replaceTalentOld("1.16.1t", "paladin", "Protection", "redoubt", {
            description: [
                "Successful melee and ranged attacks against you have a {value1}% chance to increase your chance to block by {value2}%. Lasts 10 sec or 5 blocks.",
                {
                    value1: [2, 4, 6, 8, 10],
                    value2: [3, 6, 9, 12, 15]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "paladin", "Protection", "holy_shield", {
            row: 4,
            col: 1,
            requiresTalents: null
        });

        bulkInsertTalentsOld("1.16.1t", "paladin", "Protection", [
            {
                id: "improved_seal_of_justice",
                name: "Improved Seal of Justice",
                icon: "spell_holy_sealofwrath",
                row: 3,
                col: 2,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the chance your Seal of Justice will stun the opponent by {value1}% and your Judgement of Justice has a {value2}% chance to taunt your target to attack you but has no effect if the target is already attacking you.",
                    {
                        value1: [22, 33, 67],
                        value2: [33, 66, 100]
                    }
                ]
            },
            {
                id: "righteous_defense",
                name: "Righteous Defense",
                icon: "ability_warrior_swordandboard",
                row: 4,
                col: 0,
                ranks: 3,
                requiresTalents: "improved_righteous_fury",
                description: [
                    "While Righteous Fury is active, your damage taken is reduced by {value}%.",
                    {
                        value: [3, 6, 10]
                    }
                ]
            },
            {
                id: "ardent_defender",
                name: "Ardent Defender",
                icon: "spell_holy_ardentdefender",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "holy_shield",
                description: [
                    "When you have less than 35% health, all damage taken is reduced by 25%."
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "paladin", "Retribution", [
            "sanctity_aura"
        ]);

        replaceTalentOld("1.16.1t", "paladin", "Retribution", "improved_seal_of_the_crusader", {
            name: "Heart of the Crusader",
            description: [
                "Increases the melee attack power bonus of your Seal of the Crusader and the Holy damage increase of your Crusader Strike by {value}%.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        moveTalentOld("1.16.1t", "paladin", "Retribution", "seal_of_command", 4, 2);

        bulkInsertTalentsOld("1.16.1t", "paladin", "Retribution", [
            {
                id: "blessing_of_kings",
                name: "Blessing of Kings",
                icon: "spell_magic_magearmor",
                row: 2,
                col: 2,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Places a Blessing on the friendly target, increasing total stats by 10% for 5 min.  Players may only have one Blessing on them per Paladin at any one time."
                ]
            },
            {
                id: "sanctified_command",
                name: "Sanctified Command",
                icon: "ability_warrior_innerrage",
                row: 4,
                col: 3,
                ranks: 2,
                requiresTalents: "seal_of_command",
                description: [
                    "Gives your Seal of Command a {value1}% chance to resist dispel effects and your Judgement of Command will restore mana equal to {value2}% of the base mana cost of the Seal of Command to you and nearby party members.",
                    {
                        value1: [45, 90],
                        value2: [10, 20]
                    }
                ]
            }
        ]);
        
        removeTalentsByIdOld("1.16.1t", "priest", "Discipline", [
            "divine_spirit"
        ]);

        moveTalentOld("1.16.1t", "priest", "Discipline", "meditation", 2, 3);

        bulkInsertTalentsOld("1.16.1t", "priest", "Discipline", [
            {
                id: "reflective_shield",
                name: "Reflective Shield",
                icon: "classic_spell_holy_blessingofprotection",
                row: 4,
                col: 2,
                ranks: 1,
                requiresTalents: "improved_power_word_shield",
                description: [
                    "Causes 20% of the damage absorbed by your Power Word: Shield to reflect back at the attacker. This damage causes no threat."
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "priest", "Holy", [
            "lightwell"
        ]);

        bulkInsertTalentsOld("1.16.1t", "priest", "Holy", [
            {
                id: "proclaim_champion",
                name: "Proclaim Champion",
                icon: "spell_holy_proclaimchampion_02",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "spirit_of_redemption",
                description: [
                    "Proclaim the friendly target as your champion for 2 hours. Increases armor by 230, all resistances by 10 and allows the use of various Champion spells on that target. Only one Champion can be proclaimed at a time."
                ]
            }
        ]);

        replaceTalentOld("1.16.1t", "priest", "Shadow", "improved_vampiric_embrace", {
            name: "Vampiric Touch",
            description: [
                "Increases the percentage healed by Vampiric Embrace by an additional {value1}% and your Vampiric Embrace now causes all party members to also gain mana equal to {value2}% of any Shadow spell damage you deal.",
                {
                    value1: [2, 5],
                    value2: [1, 2]
                }
            ]
        });

        removeTalentsByIdOld("1.16.1t", "rogue", "Combat", [
            "dagger_specialization",
            "fist_weapon_specialization"
        ]);

        bulkInsertTalentsOld("1.16.1t", "rogue", "Combat", [
            {
                id: "close_quarters_combat",
                name: "Close Quarters Combat",
                icon: "inv_weapon_shortblade_05",
                row: 3,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases your chance to get a critical strike with Daggers and Fist Weapons by {value}%.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            },
            {
                id: "throwing_weapon_specialization",
                name: "Throwing Weapon Specialization",
                icon: "inv_throwingknife_01",
                row: 4,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the range of Throw and Deadly Throw by {value1} yards and gives your Deadly Throw a {value2}% chance to interrupt the target for 3 sec.",
                    {
                        value1: [3, 6],
                        value2: [50, 100]
                    }
                ]
            }
        ]);

        replaceTalentOld("1.16.1t", "rogue", "Subtlety", "improved_sap", {
            description: [
                "Gives you a {value}% chance to return to stealth mode after using your Sap ability.",
                {
                    value: [50, 100]
                }
            ]
        });

        removeTalentsByIdOld("1.16.1t", "shaman", "Enhancement", [
            "two_handed_axes_and_maces",
            "anticipation",
            "toughness",
            "parry"
        ]);

        moveTalentOld("1.16.1t", "shaman", "Enhancement", "improved_lightning_shield", 1, 2);
        moveTalentOld("1.16.1t", "shaman", "Enhancement", "improved_ghost_wolf", 1, 3);

        replaceTalentOld("1.16.1t", "shaman", "Enhancement", "stormstrike", {
            row: 4, 
            col: 2,
            requiresTalents: null
        });

        bulkInsertTalentsOld("1.16.1t", "shaman", "Enhancement", [
            {
                id: "thunderhead",
                name: "Thunderhead",
                icon: "spell_nature_swiftness",
                row: 2,
                col: 2,
                ranks: 1,
                requiresTalents: "improved_lightning_shield",
                description: [
                    "Allows your Lightning Shield to be cast on allies and reduces its mana cost by 20%."
                ]
            },
            {
                id: "ancestral_guidance",
                name: "Ancestral Guidance",
                icon: "spell_nature_ancestralguardian",
                row: 2,
                col: 3,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases your armor value from items by {value1}% and chance to dodge by an additional {value2}%.",
                    {
                        value1: [2, 4, 6, 8, 10],
                        value2: [1, 2, 3, 4, 5]
                    }
                ]
            },
            {
                id: "spirit_armor",
                name: "Spirit Armor",
                icon: "spell_nature_spiritarmor",
                row: 3,
                col: 2,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the armor gained from Shields by {value}%.",
                    {
                        value: [10, 20, 30]
                    }
                ]
            },
            {
                id: "bloodlust",
                name: "Bloodlust",
                icon: "spell_nature_bloodlust",
                row: 6,
                col: 1,
                ranks: 1,
                requiresTalents: "elemental_weapons",
                description: [
                    "Increases melee, ranged, and spell casting speed by 15% for a party member within 30 yards. Lasts 15 sec."
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "warlock", "Affliction", [
            "improved_drain_life",
            "improved_drain_mana"
        ]);

        bulkInsertTalentsOld("1.16.1t", "warlock", "Affliction", [
            {
                id: "soul_siphon",
                name: "Soul Siphon",
                icon: "spell_shadow_lifedrain02",
                row: 1,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the Health drained by your Drain Life spell by {value1}% and causes {value2}% of the mana drained by your Drain Mana spell to damage the opponent.",
                    {
                        value1: [5, 10],
                        value2: [15, 30]
                    }
                ]
            }
        ]);

        removeTalentsByIdOld("1.16.1t", "warlock", "Demonology", [
            "improved_healthstone",
            "improved_firestone",
            "improved_spellstone"
        ]);

        replaceTalentOld("1.16.1t", "warlock", "Demonology", "fel_intellect", {
            ranks: 3,
            description: [
                "Increases the maximum Mana of your Imp, Voidwalker, Succubus, and Felhound by {value}%.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "warlock", "Demonology", "fel_stamina", {
            ranks: 3,
            description: [
                "Increases the maximum Health of your Imp, Voidwalker, Succubus, and Felhound by {value}%.",
                {
                    value: [5, 10, 15]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "warlock", "Demonology", "improved_enslave_demon", {
            ranks: 2,
            description: [
                "Reduces the Attack Speed and Casting Speed penalty of your Enslave Demon spell by {value}%, reduces the resist chance by {value}%.",
                {
                    value: [10, 20]
                }
            ]
        });

        bulkInsertTalentsOld("1.16.1t", "warlock", "Demonology", [
            {
                id: "master_conjuror",
                name: "Master Conjuror",
                icon: "inv_stone_04",
                row: 0,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Increases the amount of Health restored by your Healthstone by {value1}% and increases the bonuses and effects of your Firestones and Spellstones by {value2}%.",
                    {
                        value1: [10, 20],
                        value2: [15, 30]
                    }
                ]
            },
            {
                id: "demonic_aegis",
                name: "Demonic Aegis",
                icon: "spell_shadow_ragingscream",
                row: 2,
                col: 3,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases the effectiveness of your Demon Skin and Demon Armor spells by {value}%.",
                    {
                        value: [10, 20, 30]
                    }
                ]
            }
        ]);

        replaceTalentOld("1.16.1t", "warlock", "Destruction", "intensity", {
            description: [
                "Gives you a {value}% chance to resist interruption caused by damage while casting or channeling any Destruction Fire spell.",
                {
                    value: [35, 70]
                }
            ]
        });

        replaceTalentOld("1.16.1t", "warlock", "Destruction", "pyroclasm", {
            description: [
                "Gives your Rain of Fire, Hellfire, Conflagrate, and Soul Fire spells a {value}% chance to stun the target for 3 sec.",
                {
                    value: [13, 25]
                }
            ]
        });

        removeTalentsByIdOld("1.16.1t", "warrior", "Arms", [
            "axe_specialization",
            "polearm_specialization"
        ]);

        replaceTalentOld("1.16.1t", "warrior", "Arms", "improved_thunder_clap", {
            description: [
                "Reduces the cost of your Thunder Clap ability by {value1} and increases the damage by {value2}%.",
                {
                    value1: ["1 rage point", "2 rage points", "4 rage points"],
                    value2: [20, 40, 60]
                }
            ]
        });

        bulkInsertTalentsOld("1.16.1t", "warrior", "Arms", [
            {
                id: "poleaxe_specialization",
                name: "Poleaxe Specialization",
                icon: "inv_axe_06",
                row: 4,
                col: 0,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Increases your chance to get a critical strike with Axes and Polearms by {value}%.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            },
            {
                id: "improved_disciplines",
                name: "Improved Disciplines",
                icon: "ability_warrior_improveddisciplines",
                row: 5,
                col: 0,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Reduces the cooldown of your Retaliation, Recklessness and Shield Wall abilities by {value} min.",
                    {
                        value: [2, 4, 6]
                    }
                ]
            }
        ]);

        replaceTalentOld("1.16.1t", "warrior", "Protection", "improved_shield_block", {
            ranks: 1,
            description: [
                "Allows your Shield Block ability to block an additional attack and increases the duration by 1 second."
            ]
        });

        // turtle wow changes (1.17.2)

        removeTalentsByIdOld("1.17.2t", "hunter", "Survival", [
            "monster_slaying",
            "humanoid_slaying"
        ]);

        replaceTalentOld("1.17.2t", "hunter", "Survival", "entrapment", {
            ranks: 3,
            description: [
                "Gives your Immolation Trap, Frost Trap, and Explosive Trap a {value}% chance to entrap the target, preventing them from moving for 5 sec.",
                {
                    value: [8, 16, 25]
                }
            ]
        });

        replaceTalentOld("1.17.2t", "hunter", "Survival", "improved_feign_death", {
            description: [
                "Reduces the chance your Feign Death ability will be resisted by {value}%.",
                {
                    value: [4, 8]
                }
            ]
        });

        bulkInsertTalentsOld("1.17.2t", "hunter", "Survival", [
            {
                id: "improved_slaying",
                name: "Improved Slaying",
                icon: "spell_holy_prayerofhealing",
                row: 0,
                col: 0,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "Increases all damage caused against Beasts, Giants, Dragonkin, and Humanoid targets by {value}% and increases critical damage caused against Beasts, Giants, Dragonkin, and Humanoid targets by an additional {value}%.",
                    {
                        value: [1, 2, 3]
                    }
                ]
            },
            {
                id: "resourcefulness",
                name: "Resourcefulness",
                icon: "inv_misc_book_08",
                row: 0,
                col: 1,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Reduces the Mana cost of all traps and melee abilities by {value}%.",
                    {
                        value: [2, 4, 6, 8, 10]
                    }
                ]
            },
            {
                id: "vicious_bite",
                name: "Vicious Bite",
                icon: "ability_hunter_swiftstrike",
                row: 5,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Your Mongoose Bite now deals {value}% additional weapon damage.",
                    {
                        value: [15, 30]
                    }
                ]
            }
        ]);

        // project epoch changes (launch)

        bulkInsertTalentsOld("1.0.0e", "druid", "Restoration", [
            {
                id: "overgrowth",
                name: "Overgrowth",
                icon: "ability_druid_replenish",
                row: 2,
                col: 3,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Applies Rejuvenation (Rank 3) to your friendly target and that target's party members within 25 yards.",
                    {
                        value: [10, 20]
                    }
                ]
            }
        ]);

        removeTalentsByIdOld("1.0.0e", "mage", "Arcane", [
            "arcane_fortitude",
            "improved_blink"
        ]);

        replaceTalentOld("1.0.0e", "mage", "Arcane", "arcane_impact", {
            description: [
                "Increases the critical strike chance of your Arcane spells by an additional {value}%.",
                {
                    value: [2, 4, 6]
                }
            ]
        });

        replaceTalentOld("1.0.0e", "mage", "Arcane", "improved_mana_shield", {
            name: "Improved Shielding",
            description: [
                "Decreases the mana lost per point of damage taken when Mana Shield is active by {value1}%, and increases the resistances gained from Mage Armor by {value2}%.",
                {
                    value1: [10, 20],
                    value2: [50, 100]
                }
            ]
        });

        bulkInsertTalentsOld("1.0.0e", "mage", "Arcane", [
            {
                id: "arcane_blast",
                name: "Arcane Blast",
                icon: "spell_arcane_blast",
                row: 2,
                col: 3,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Blasts the target with energy, dealing 199 Arcane damage.  Each time you cast Arcane Blast, the casting time is reduced while mana cost is increased.  Effect stacks up to 3 times and lasts 8 sec."
                ]
            },
            {
                id: "improved_arcane_intellect",
                name: "Improved Arcane Intellect",
                icon: "spell_holy_magicalsentry",
                row: 4,
                col: 0,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Your Arcane Intellect and Arcane Brilliance spells also increase the target's maximum mana by {value}%.",
                    {
                        value: [4, 8]
                    }
                ]
            }
        ]);

        bulkInsertTalentsOld("1.0.0e", "mage", "Fire", [
            {
                id: "pyroclastic_burst",
                name: "Pyroclastic Burst",
                icon: "spell_fire_volcano",
                row: 4,
                col: 3,
                ranks: 2,
                requiresTalents: "blast_wave",
                description: [
                    "Your Fire spell criticals have a {value}% chance to increase the damage of your next Pyroblast by 10%, stacking up to 5 times. You cannot cast Presence of Mind while this effect is active.",
                    {
                        value: [50, 100]
                    }
                ]
            }
        ]);

        bulkInsertTalentsOld("1.0.0e", "paladin", "Holy", [
            {
                id: "overwhelming_light",
                name: "Overwhelming Light",
                icon: "spell_holy_divineprovidence",
                row: 3,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "When your Holy Light, Flash of Light, or Holy Shock spells heal a target to full health, 3 nearby injured allies will be healed by an amount equal to {value}% of the healing effect.",
                    {
                        value: [10, 20]
                    }
                ]
            }
        ]);

        moveTalentOld("1.0.0e", "paladin", "Protection", "anticipation", 3, 2);
        moveTalentOld("1.0.0e", "paladin", "Protection", "improved_concentration_aura", 2, 3);

        removeTalentsByIdOld("1.0.0e", "priest", "Discipline", [
            "divine_spirit"
        ]);

        moveTalentOld("1.0.0e", "priest", "Discipline", "improved_divine_spirit", 4, 2);
        moveTalentOld("1.0.0e", "priest", "Discipline", "improved_mana_burn", 3, 2);

        replaceTalentOld("1.0.0e", "priest", "Discipline", "pain_suppression", {
            row: 4,
            col: 3,
            requiresTalents: "martyrdom",
            description: [
                "Instantly reduces a friendly target's threat by 5%, reduces all damage taken by 40% and increases resistance to Dispel mechanics by 65% for 8 sec."
            ]
        });

        bulkInsertTalentsOld("1.0.0e", "priest", "Discipline", [
            {
                id: "power_word_barrier",
                name: "Power Word: Barrier",
                icon: "spell_holy_powerwordbarrier",
                row: 8,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Create a barrier around you, absorbing damage dealt to all party and raid members within it. The barrier lasts for 10 sec or until it absorbs 3935 damage, increased by up to 250% when affecting a large group. Priest must channel to maintain the spell."
                ]
            }
        ]);

        moveTalentOld("1.0.0e", "priest", "Holy", "inspiration", 3, 1);
        moveTalentOld("1.0.0e", "priest", "Holy", "holy_reach", 3, 2);
        moveTalentOld("1.0.0e", "priest", "Holy", "improved_healing", 2, 3);
        moveTalentOld("1.0.0e", "priest", "Holy", "searing_light", 2, 2);

        moveTalentOld("1.0.0e", "rogue", "Assassination", "improved_expose_armor", 5, 0);

        bulkInsertTalentsOld("1.0.0e", "rogue", "Assassination", [
            {
                id: "poisoned_knife",
                name: "Poisoned Knife",
                icon: "inv_throwingknife_04",
                row: 2,
                col: 1,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Throw and Deadly Throw now have a {value}% chance to consume 10 minutes of your off-hand weapon's poison to apply it to the target.",
                    {
                        value: [50, 100]
                    }
                ]
            }
        ]);

        bulkInsertTalentsOld("1.0.0e", "rogue", "Combat", [
            {
                id: "axe_specialization",
                name: "Axe Specialization",
                icon: "inv_axe_06",
                row: 3,
                col: 3,
                ranks: 5,
                requiresTalents: null,
                description: [
                    "Gives you a {value}% chance to cause your target to bleed for 100% weapon damage over 15 sec after hitting them with an Axe.",
                    {
                        value: [1, 2, 3, 4, 5]
                    }
                ]
            }
        ]);

        removeTalentsByIdOld("1.0.0e", "shaman", "Elemental", [
            "eye_of_the_storm"
        ]);

        bulkInsertTalentsOld("1.0.0e", "shaman", "Elemental", [
            {
                id: "rolling_thunder",
                name: "Rolling Thunder",
                icon: "spell_shaman_thunderstorm",
                row: 3,
                col: 1,
                ranks: 3,
                requiresTalents: null,
                description: [
                    "If you have an active Lightning Shield, your critical hits with Lightning Bolt and Chain Lightning have a {value1}% chance to cause your Lightning Shield to gain an additional charge, up to 9. When you reach 9 charges, any attempt to gain another charge will instead launch a Lightning Shield ball at your target.<br><br>When you have more than 3 Lightning Shield charges active, your Earth Shock spell will consume up to {value3}.",
                    {
                        value1: [33, 66, 100],
                        value2: [1, 2, 3],
                        value3: ["1 surplus charge after 2 sec, sending it at your target", "2 surplus charges every 2 sec for up to 4 sec, sending them at your target", "3 surplus charges every 2 sec for up to 6 sec, sending them at your target"]
                    }
                ]
            }
        ]);

        replaceTalentOld("1.0.0e", "shaman", "Elemental", "elemental_focus", {
            description: [
                "After landing a critical strike with a Fire, Frost, or Nature damage spell, you enter a Clearcasting state.  The Clearcasting state reduces the mana cost of your next 2 damage spells or fire totems by 40%."
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Elemental", "call_of_thunder", {
            row: 5,
            col: 2,
            requiresTalents: "lightning_mastery"
        });

        replaceTalentOld("1.0.0e", "shaman", "Elemental", "lightning_mastery", {
            name: "Fire and Lightning Mastery",
            icon: "shaman_talent_elementalblast",
            row: 2,
            col: 2,
            requiresTalents: null,
            description: [
                "Reduces the cast time of your Molten Blast, Lightning Bolt and Chain Lightning spells by {value} sec.",
                {
                    value: [0.1, 0.2, 0.3, 0.4, 0.5]
                }
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Elemental", "lightning_overload", {
            icon: "spell_shaman_lavaflow",
            name: "Elemental Overload",
            description: [
                "Gives your Molten Blast, Lightning Bolt and Chain Lightning spells a {value}% chance to cast a second, similar spell on the same target at no additional cost that causes half damage and no threat.",
                {
                    value: [4, 8, 12, 16, 20]
                }
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Enhancement", "spirit_weapons", {
            description: [
                "Gives a chance to parry enemy melee attacks and reduces the threat generated by your melee attacks unless you are wearing a shield by 30%."
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Enhancement", "dual_wield_specialization", {
            name: "Weapon Specialization",
            description: [
                "Increases your chance to hit with all weapons by an additional {value}%.",
                {
                    value: [2, 4, 6]
                }
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Enhancement", "dual_wield", {
            name: "Primal Wielding",
            description: [
                "Allows one-hand and off-hand weapons to be equipped in the off-hand.<br><br>Additionally, your Lightning Bolt and Molten Blast spells no longer delay your next melee swing, but deal 50% less damage if cast within 4.5 sec after a melee attack."
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Enhancement", "stormstrike", {
            description: [
                "Instantly attack with your weapon, or both weapons if you are dual wielding.  In addition, the target takes 5% additional Nature damage.  Lasts 12 sec."
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Enhancement", "shamanistic_rage", {
            description: [
                "Reduces all damage taken by 30% and causes your successful melee attacks to regenerate mana (based on weapon speed and attack power).  Lasts 15 sec."
            ]
        });

        replaceTalentOld("1.0.0e", "shaman", "Restoration", "healing_way", {
            icon: "spell_nature_healingway"
        });

        bulkInsertTalentsOld("1.0.0e", "warlock", "Affliction", [
            {
                id: "improved_shadow_bite",
                name: "Improved Shadow Bite",
                icon: "spell_shadow_summonfelhunter",
                row: 4,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Your Felhunter regains {value}% of its maximum mana each time it hits with its Shadow Bite ability.",
                    {
                        value: [5, 10]
                    }
                ]
            }
        ]);

        removeTalentsByIdOld("1.0.0e", "warlock", "Demonology", [
            "demonic_sacrifice"
        ]);

        bulkInsertTalentsOld("1.0.0e", "warlock", "Demonology", [
            {
                id: "demonic_empowerment",
                name: "Demonic Empowerment",
                icon: "ability_warlock_demonicempowerment",
                row: 4,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Grants the Warlock's summoned demon Empowerment.<br><br>Imp - Increases the Imp's spell critical strike chance by 20% for 30 sec.<br><br>Voidwalker - Increases the Voidwalker's health by 20%, and its threat generated from spells and attacks by 20% for 20 sec.<br><br>Succubus - Instantly vanishes, causing the demon to go into an improved Invisibility state. The vanish effect removes all stuns, snares and movement impairing effects from the demon.<br><br>Felhunter - Dispels all magical effects from the Felhunter.<br><br>Felguard - Increases the Felguard's attack speed by 20% and breaks all stun, snare and movement impairing effects and makes your Felguard immune to them for 15 sec."
                ]
            }
        ]);

        replaceTalentOld("1.0.0e", "warlock", "Demonology", "soul_link", {
            requiresTalents: "demonic_empowerment"
        });

        replaceTalentOld("1.0.0e", "warlock", "Destruction", "pyroclasm", {
            requiresTalents: null
        });

        replaceTalentOld("1.0.0e", "warlock", "Destruction", "shadowfury", {
            row: 4,
            col: 3,
            requiresTalents: null,
            description: [
                "Shadowfury is unleashed, causing 156 Shadow damage and stunning all enemies within 8 yds for 3 sec."
            ]
        });

        bulkInsertTalentsOld("1.0.0e", "warlock", "Destruction", [
            {
                id: "demonic_sacrifice",
                name: "Demonic Sacrifice",
                icon: "spell_shadow_psychicscream",
                row: 8,
                col: 1,
                ranks: 1,
                requiresTalents: "shadow_and_flame",
                description: [
                    "When activated, sacrifices your summoned demon to grant you an effect that lasts 30 min.  The effect is canceled if any Demon is summoned.<br><br>Imp: Increases your Fire damage by 15%.<br><br>Voidwalker: Restores 2% of total health every 4 sec.<br><br>Succubus: Increases your Shadow damage by 15%.<br><br>Felhunter: Restores 3% of total mana every 4 sec.<br><br>Felguard: Increases your Shadow damage by 10% and restores 2% of total mana every 4 sec."
                ]
            }
        ]);

        removeTalentsByIdOld("1.0.0e", "warrior", "Fury", [
            "death_wish",
            "improved_mortal_strike"
        ]);

        bulkInsertTalentsOld("1.0.0e", "warrior", "Arms", [
            {
                id: "improved_slam",
                name: "Improved Slam",
                icon: "ability_warrior_decisivestrike",
                row: 3,
                col: 3,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "Decreases the casting time of your Slam ability by {value} sec.",
                    {
                        value: [0.5, 1]
                    }
                ]
            },
            {
                id: "sweeping_strikes",
                name: "Sweeping Strikes",
                icon: "ability_rogue_slicedice",
                row: 4,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Your next 5 melee attacks strike an additional nearby opponent."
                ]
            },
            {
                id: "empowered_rend",
                name: "Empowered Rend",
                icon: "ability_warrior_bloodbath",
                row: 7,
                col: 2,
                ranks: 2,
                requiresTalents: null,
                description: [
                    "The damage dealt by Rend is {value} sec faster.",
                    {
                        value: [0.5, 1]
                    }
                ]
            },
            {
                id: "bladestorm",
                name: "Bladestorm",
                icon: "ability_warrior_bladestorm",
                row: 8,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "Instantly Whirlwind up to 4 nearby targets and for the next 6 sec you will perform a whirlwind attack every 1 sec.  While under the effects of Bladestorm, you can move but cannot perform any other abilities but you do not feel pity or remorse or fear, you cannot be stopped unless killed and your movement speed cannot be reduced below 60%."
                ]
            }
        ]);

        replaceTalentOld("1.0.0e", "warrior", "Arms", "mortal_strike", {
            requiresTalents: "sweeping_strikes"
        });

        replaceTalentOld("1.0.0e", "warrior", "Arms", "endless_rage", {
            row: 7,
            ranks: 3,
            description: [
                "You generate {value}% more rage from damage dealt.",
                {
                    value: [8, 16, 25]
                }
            ]
        });

        removeTalentsByIdOld("1.0.0e", "warrior", "Fury", [
            "improved_slam",
            "sweeping_strikes"
        ]);

        moveTalentOld("1.0.0e", "warrior", "Fury", "dual_wield_specialization", 3, 1);
        moveTalentOld("1.0.0e", "warrior", "Fury", "improved_execute", 4, 0);

        bulkInsertTalentsOld("1.0.0e", "warrior", "Fury", [
            {
                id: "death_wish",
                name: "Death Wish",
                icon: "spell_shadow_deathpact",
                row: 4,
                col: 1,
                ranks: 1,
                requiresTalents: null,
                description: [
                    "When activated, increases your physical damage by 20% and makes you immune to Fear effects, but increases all damage taken by 5%.  Lasts 30 sec."
                ]
            }
        ]);

        replaceTalentOld("1.0.0e", "warrior", "Fury", "bloodthirst", {
            requiresTalents: "death_wish"
        });

        /*
                talentsAttributedByVersion["1.6"].hunter.Survival.push({
                    id: "precision",
                    name: "Precision",
                    icon: "ability_rogue_ambush",
                    row: 0,
                    col: 1,
                    ranks: 5,
                    requiresTalents: null,
                    description: [
                        "Increases your chance to hit with melee weapons by {value}%.",
                        {
                        value: [1, 2, 3, 4, 5]
                        }
                    ]
                });

                talentsAttributedByVersion["1.6"].hunter.Survival.push({
                    id: "improved_raptor_strike",
                    name: "Improved Raptor Strike",
                    icon: "ability_meleedamage",
                    row: 0,
                    col: 2,
                    ranks: 5,
                    requiresTalents: null,
                    description: [
                        "Reduces the cooldown of your Raptor Strike by {value} second(s).",
                        {
                        value: [0.2, 0.4, 0.6, 0.8, 1]
                        }
                    ]
                });

                talentsAttributedByVersion["1.6"].hunter.Survival.push({
                    id: "lightning_reflexes",
                    name: "Lightning Reflexes",
                    icon: "spell_nature_invisibilty",
                    row: 1,
                    col: 1,
                    ranks: 3,
                    requiresTalents: null,
                    description: [
                        "Increases your Dodge chance by {value}%.",
                        {
                        value: [1, 2, 3]
                        }
                    ]
                });

                talentsAttributedByVersion["1.6"].hunter.Survival.push({
                    id: "improved_mongoose_bite",
                    name: "Improved Mongoose Bite",
                    icon: "ability_hunter_swiftstrike",
                    row: 2,
                    col: 1,
                    ranks: 5,
                    requiresTalents: "lightning_reflexes",
                    description: [
                        "Increases the damage done by your Mongoose Bite ability by {value}%.",
                        {
                        value: [4, 8, 12, 16, 20]
                        }
                    ]
                });

                talentsAttributedByVersion["1.6"].hunter.Survival.push({
                    id: "lacerate",
                    name: "Lacerate",
                    icon: "ability_gouge",
                    row: 6,
                    col: 1,
                    ranks: 1,
                    requiresTalents: "savage_strikes",
                    description: [
                        "Wounds the target, causing them to bleed for 77 damage over 21 seconds."
                    ]
                });
                */

        // Add new talent to custom version
        /*
                talentsAttributedByVersion["custom"].druid.Balance.push({
                    id: "stellar_flare",
                    name: "Stellar Flare",
                    icon: "spell_arcane_arcane01",
                    row: 7,
                    col: 1,
                    ranks: 1,
                    requiresTalents: "moonkin_form"
                });
                */

        // Override a talent in TBC
        /*
                talentsAttributedByVersion["2.4"].druid.Balance.push({
                    id: "force_of_nature",
                    name: "Force of Nature",
                    icon: "ability_druid_forceofnature",
                    row: 7,
                    col: 1,
                    ranks: 1,
                    requiresTalents: "moonkin_form"
                });
                */

        // const talents = talentsAttributedByVersion[currentState.version]?.[currentState.class]?.[treeName] || [];

        // Load saved builds from localStorage
        loadBuilds();

        function cloneDeep(obj) {
            return JSON.parse(JSON.stringify(obj));
        }

        // Functions
        function getTalents(version, classKey, treeName) {
            return talentsAttributedByVersion[version]?.[classKey]?.[treeName] || [];
        }

        function removeTalentsById(versionParam, classKey, treeName, idsToRemove) {
            const versions = versionParam.includes('.') ? getVersionsUpTo(versionParam) : [versionParam];

            versions.forEach(version => {
                const tree = talentsAttributedByVersion[version]?.[classKey]?.[treeName];
                if (!tree) return;

                talentsAttributedByVersion[version][classKey][treeName] = tree.filter(
                    (talent) => !idsToRemove.includes(talent.id)
                );
            });
        }

        function removeTalentsByIdOld(version, classKey, treeName, idsToRemove) {
            const tree = talentsAttributedByVersion[version]?.[classKey]?.[treeName];
            if (!tree) return;

            talentsAttributedByVersion[version][classKey][treeName] = tree.filter(
                (talent) => !idsToRemove.includes(talent.id)
            );
        }

        function replaceTalent(versionParam, classKey, treeName, id, newTalentData) {
            const versions = versionParam.includes('.') ? getVersionsUpTo(versionParam) : [versionParam];

            versions.forEach(version => {
                const tree = talentsAttributedByVersion[version]?.[classKey]?.[treeName];
                if (!tree) return;

                const index = tree.findIndex((t) => t.id === id);
                if (index !== -1) {
                    tree[index] = { ...tree[index], ...newTalentData };
                }
            });
        }

        function replaceTalentOld(version, classKey, treeName, id, newTalentData) {
            const tree = talentsAttributedByVersion[version]?.[classKey]?.[treeName];
            if (!tree) return;

            const index = tree.findIndex((t) => t.id === id);
            if (index !== -1) {
                tree[index] = { ...tree[index], ...newTalentData };
            }
        }

        function moveTalent(versionParam, classKey, treeName, id, newRow, newCol) {
            replaceTalent(versionParam, classKey, treeName, id, { row: newRow, col: newCol });
        }

        function moveTalentOld(version, classKey, treeName, id, newRow, newCol) {
            replaceTalentOld(version, classKey, treeName, id, { row: newRow, col: newCol });
        }

        function insertTalent(versionParam, classKey, treeName, talentData) {
            const versions = versionParam.includes('.') ? getVersionsUpTo(versionParam) : [versionParam];

            versions.forEach(version => {
                const tree = talentsAttributedByVersion[version]?.[classKey]?.[treeName];
                if (!tree) {
                    console.warn(`Tree not found: ${version} - ${classKey} - ${treeName}`);
                    return;
                }

                if (tree.some((t) => t.id === talentData.id)) {
                    console.warn(
                        `Talent with id "${talentData.id}" already exists in ${version} - ${classKey} - ${treeName}`
                    );
                }

                tree.push(talentData);
            });
        }

        function insertTalentOld(version, classKey, treeName, talentData) {
            const tree = talentsAttributedByVersion[version]?.[classKey]?.[treeName];
            if (!tree) {
                console.warn(`Tree not found: ${version} - ${classKey} - ${treeName}`);
                return;
            }

            // Optional: warn if you're overwriting an existing talent
            if (tree.some((t) => t.id === talentData.id)) {
                console.warn(
                    `Talent with id "${talentData.id}" already exists in ${version} - ${classKey} - ${treeName}`
                );
            }

            tree.push(talentData);
        }

        function bulkInsertTalents(versionParam, classKey, treeName, talentList) {
            talentList.forEach(talent =>
                insertTalent(versionParam, classKey, treeName, talent)
            );
        }

        function bulkInsertTalentsOld(version, classKey, treeName, talentList) {
            talentList.forEach(talent =>
                insertTalentOld(version, classKey, treeName, talent)
            );
        }

        function getVersionsUpTo(versionParam) {
            const targetParts = versionParam.split('.');        // e.g. ["1","10"]
            const major = targetParts[0];                        // "1"
            const targetPartsCount = targetParts.length;        // 2 for "1.10"
            const patchNumber = parseInt(targetParts[targetParts.length - 1], 10); // 10

            return Object.keys(talentsAttributedByVersion).filter(v => {
                const parts = v.split('.');
                if (parts.length !== targetPartsCount) return false;     // same number of parts
                if (parts[0] !== major) return false;                     // same major number

                const lastNum = parseInt(parts[parts.length - 1], 10);
                if (isNaN(lastNum)) return false;

                return lastNum <= patchNumber;
            });
        }

        function canLearnTalent(talent, classKey, treeName) {
            const treePoints = getTreePoints(classKey, treeName);
            const requirementsMet = talent.requiresTalents
                ? currentState.talents?.[classKey]?.[treeName]?.[talent.requiresTalents] > 0
                : true;

            return treePoints >= talent.row * 5 && requirementsMet;
        }

        function getTreePoints(classKey, treeName) {
            const tree = currentState.talents?.[classKey]?.[treeName] || {};
            return Object.values(tree).reduce((sum, val) => sum + val, 0);
        }

        function getTalentTooltip(talent, currentRank, classKey, treeName) {
            if (!talent) return "";

            const lines = [];

            // 1. Talent Name
            lines.push(`<div class="text-[15px] text-white">${talent.name}</div>`);

            // 2. "Talent" label
            lines.push(`<div class="text-sm text-gray-400">Talent</div>`);

            // 3. "Requires [Class]"
            const classDisplayName = talentTreeData[currentState.version].classes[classKey].name;
            lines.push(`<div class="text-sm text-white">Requires ${classDisplayName}</div>`);

            // 4. Description
            if (Array.isArray(talent.description)) {
                // Case A: [template, values] format (old)
                if (
                    typeof talent.description[0] === "string" &&
                    talent.description.length === 2 &&
                    typeof talent.description[1] === "object"
                ) {
                    const [template, values] = talent.description;
                    const getFilledDescription = (rank) => {
                        return template.replace(/\{(\w+)\}/g, (_, key) => {
                            const val = values?.[key];
                            if (Array.isArray(val)) {
                                return val[Math.max(0, Math.min(rank - 1, val.length - 1))];
                            }
                            if (typeof val === "object" && val.base !== undefined && val.perRank !== undefined) {
                                return (val.base + val.perRank * (rank - 1)).toFixed(1);
                            }
                            return val ?? "?";
                        });
                    };

                    const currentDesc = getFilledDescription(currentRank || 1);
                    lines.push(`<div class="text-sm text-yellow-300">${currentDesc}</div>`);

                    if (currentRank > 0 && currentRank < talent.ranks) {
                        const nextDesc = getFilledDescription(currentRank + 1);
                        lines.push(`<div class="mt-2 text-sm text-white">Next rank:</div>`);
                        lines.push(`<div class="text-sm text-yellow-300">${nextDesc}</div>`);
                    }
                }
                // Case B: Full per-rank string array (new)
                else if (talent.description.length > 1 && talent.description.every(d => typeof d === "string")) {
                    const rankIndex = Math.max(0, Math.min((currentRank || 1) - 1, talent.description.length - 1));
                    const currentDesc = talent.description[rankIndex];

                    lines.push(`<div class="text-sm text-yellow-300">${currentDesc}</div>`);

                    if (currentRank > 0 && currentRank < talent.ranks) {
                        const nextDesc = talent.description[rankIndex + 1];
                        lines.push(`<div class="mt-2 text-sm text-white">Next rank:</div>`);
                        lines.push(`<div class="text-sm text-yellow-300">${nextDesc}</div>`);
                    }
                }
                // Case C: Fallback for unexpected formats
                else {
                    lines.push(`<div class="text-sm text-yellow-300">${talent.description.join("<br>")}</div>`);
                }
            }
            // Case D: Simple string
            else if (typeof talent.description === "string") {
                lines.push(`<div class="text-sm text-yellow-300">${talent.description}</div>`);
            }

            // 5. Lock requirements
            const canLearn = canLearnTalent(talent, classKey, treeName);
            if (!canLearn) {
                const requiredPoints = talent.row * 5;
                const totalInTree = getTotalPointsInTree(classKey, treeName);
                if (totalInTree < requiredPoints) {
                    lines.push(`<div class="mt-2 text-sm text-red-400">Requires ${requiredPoints} points in ${treeName} Talents</div>`);
                }

                if (talent.requiresTalents) {
                    const reqTalent = getTalentById(classKey, treeName, talent.requiresTalents);
                    if (reqTalent) {
                        const spent = currentState.talents[classKey]?.[treeName]?.[reqTalent.id] || 0;
                        if (spent < reqTalent.ranks) {
                            const pointLabel = reqTalent.ranks === 1 ? "point" : "points";
                            lines.push(
                                `<div class="text-sm text-red-400">Requires ${reqTalent.ranks} ${pointLabel} in ${reqTalent.name}</div>`
                            );
                        }
                    }
                }
            }

            // 6. Show rank
            lines.push(`<div class="mt-2 text-sm text-white">Rank: ${currentRank}/${talent.ranks}</div>`);

            return lines.join("\n");
        }

        let previousExpansion = null;

        function handleVersionChange() {
            const version = versionSelect.value;
            const pointsBox = document.getElementById("talent-points-box");

            if (!version) {
                // Hide or disable custom options
                customVersionOptions.classList.add("hidden");

                // Disable class buttons
                classButtons.forEach((btn) => (btn.disabled = true));

                // Hide talent points box
                pointsBox.classList.add("hidden");

                return;
            }

            currentState.version = version;

            pointsBox.classList.remove("hidden");

            if (version === "custom") {
                customVersionOptions.classList.remove("hidden");
                currentState.pointsTotal = parseInt(customPoints.value);
            } else {
                customVersionOptions.classList.add("hidden");
                currentState.pointsTotal = talentTreeData[version].maxPoints;
            }

            // Determine expansion from version
            let currentExpansion = "";
            /*
            if ((version.startsWith("1.") && !isNaN(version)) || version.endsWith("t")) 
            currentExpansion = "vanilla";
            else if ((version.startsWith("2.") && !isNaN(version)) || version.endsWith("e")) currentExpansion = "tbc";
            else if (version.startsWith("3.") && !isNaN(version)) 
            currentExpansion = "wotlk";
            else currentExpansion = "custom";
            */

            for (const [expansion, patches] of Object.entries(patchOptions)) {
                if (patches.some(patch => patch.value === version)) {
                    currentExpansion = expansion;
                    break;
                }
            }

            if (currentExpansion === "wotlk" || currentExpansion === "cataclysm") {
                document.getElementById("deathknight-button").classList.remove("hidden");
            } else {
                document.getElementById("deathknight-button").classList.add("hidden");
            }

            // Only reset selected class highlight if expansion changed

            /*
            if (previousExpansion !== currentExpansion) {
                currentState.class = null; // Clear selected class
                classButtons.forEach((btn) => {
                    btn.classList.remove("bg-yellow-600", "text-white");
                    btn.classList.add("bg-gray-700", "hover:bg-gray-600");
                });
            }
            */

            // handleExpansionEffects(currentExpansion);

            previousExpansion = currentExpansion; // Update tracker

            // Enable class buttons
            classButtons.forEach((btn) => {
                btn.disabled = false;
                btn.classList.remove("opacity-50", "cursor-not-allowed");
            });

            // Reset URL hash when changing version
            if (location.hash) location.hash = "";

            // Reset state
            currentState.pointsSpent = 0;
            currentState.talents = {};
            currentState.talentOrder = [];

            updatePointsDisplay();

            renderTalentTrees();

            updateURLHash();
        }

        /*
        function handleExpansionEffects(currentExpansion) {
            if (currentExpansion === "wotlk") {
                dkBtn.classList.remove("hidden");
            } else {
                dkBtn.classList.add("hidden");

                // If DK is selected and expansion isn't WotLK, reset selection
                if (currentState.class === "deathknight") {
                    currentState.class = null;
                    talentContainer.innerHTML = `
                        <div id="talent-placeholder" class="text-center py-12">
                            <h2 class="text-2xl text-yellow-400 mb-2">Select a class to begin</h2>
                            <p class="text-gray-400">Click on any class icon to start building your talent tree</p>
                        </div>
                    `;
                }
            }
        }
        */

        function getExpansionFromPatch(patch) {
            for (const [expansion, patches] of Object.entries(patchOptions)) {
                if (patches.some(p => p.value === patch)) {
                    return expansion;
                }
            }
            return "custom";
        }

        function getCurrentExpansion() {
            const version = currentState.version;
            if (!version) return null;

            for (const [expansion, patches] of Object.entries(patchOptions)) {
                if (patches.some(patch => patch.value === version)) {
                    return expansion;
                }
            }

            return null; // or "custom" if you prefer a default value
        }

        function updatePlaceholder() {
            const currentExpansion = getCurrentExpansion();

            if (!currentState.version) {
                talentPlaceholder.innerHTML = `
                        <h2 class="text-2xl text-yellow-400 mb-2">Select a version</h2>
                        <p class="text-gray-400">Use the dropdown to choose a game version</p>
                        `;
                talentPlaceholder.classList.remove("hidden");
                talentTrees.classList.add("hidden");
                return;
            }

            if (!currentState.class || (currentState.class === "deathknight" && (currentExpansion !== "wotlk" && currentExpansion !== "cataclysm"))) {
                talentPlaceholder.innerHTML = `
                        <h2 class="text-2xl text-yellow-400 mb-2">Select a class</h2>
                        <p class="text-gray-400">Click on any class icon to start building your talent tree</p>
                        `;
                talentPlaceholder.classList.remove("hidden");
                talentTrees.classList.add("hidden");
                return;
            }

            // Hide placeholder if both version and class are selected
            talentPlaceholder.classList.add("hidden");
            talentTrees.classList.remove("hidden");
        }

        function moveClassButtons(toPlaceholder) {
            const classSelection = document.querySelector(".class-selection");
            const selectClassContainer = document.getElementById("select-class-container");
            const talentPlaceholder = document.getElementById("talent-placeholder");

            if (!classSelection || !selectClassContainer || !talentPlaceholder) return;

            if (toPlaceholder) {
                // Move class buttons inside the placeholder
                talentPlaceholder.appendChild(classSelection);

                // Optionally hide the "Select Class" header above (optional)
                selectClassContainer.style.display = "none";
            } else {
                // Move class buttons back to original container
                selectClassContainer.appendChild(classSelection);

                // Show the header again
                selectClassContainer.style.display = "";
            }
        }

        function handleCustomPointsChange() {
            currentState.pointsTotal = parseInt(customPoints.value);
            updatePointsDisplay();

            if (currentState.class) {
                renderTalentTrees();
            }
        }

        function handleClassSelect(e) {
            const newClassKey = e.currentTarget.dataset.class;

            if (newClassKey) {
                // headerEl?.classList.add("collapsed");
                selectClassHeader?.classList.add("collapsed");
            } else {
                // headerEl?.classList.remove("collapsed");
                selectClassHeader?.classList.remove("collapsed");
            }

            // Smoothly collapse the main header
            /*
            if (!newClassKey) {
                // No class selected → uncollapse the header
                if (headerEl) headerEl.classList.remove("collapsed");
            }
    
            if (headerEl && !headerEl.classList.contains("collapsed")) {
                headerEl.classList.add("collapsed");
            }
            */
            
            /*
            if (!newClassKey) {
                // No class selected → uncollapse the header
                if (captionEl) captionEl.classList.remove("collapsed");
            }
    
            if (captionEl && !captionEl.classList.contains("collapsed")) {
                captionEl.classList.add("collapsed");
            }
            */

            /*
            // If already selected a class and spent points, confirm before switching
            if (currentState.class && currentState.pointsSpent > 0 && currentState.class !== newClassKey) {
                const confirmSwitch = confirm("You have unsaved talent points in your current build.\n\nSwitching classes will reset your current selections.\n\nIf you want to keep this build, make sure to save it first.\n\nDo you want to proceed?");
                if (!confirmSwitch) return;
            }
            */

            // Reset URL hash when changing class
            if (location.hash) location.hash = "";

            // Reset all state regardless of whether data already exists
            currentState.class = newClassKey;
            currentState.pointsSpent = 0;
            currentState.talentOrder = [];

            const trees = talentTreeData[currentState.version].classes[newClassKey].trees;

            currentState.talents[newClassKey] = {};

            trees.forEach((tree) => {
                currentState.talents[newClassKey][tree] = {};
            });

            // Update active class button
            classButtons.forEach((btn) => {
                const isSelected = btn.dataset.class === newClassKey;
                /*
                btn.classList.toggle("bg-yellow-600", isSelected);
                btn.classList.toggle("text-white", isSelected);
                btn.classList.toggle("bg-gray-700", !isSelected);
                btn.classList.toggle("hover:bg-gray-600", !isSelected);
                */
            });

            updatePointsDisplay();
            renderTalentTrees();
        }

        const sharedIcon = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAA4ADgDASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAAAAIEBQcIBgMB/8QALxAAAgEDBAECBAUFAQAAAAAAAQIDBAURAAYSITEHEwhBUWEUIjIzcUJSgZHR4f/EABoBAAMAAwEAAAAAAAAAAAAAAAQFBgIDBwH/xAAzEQABAwMBBQUFCQAAAAAAAAABAgMRAAQhMQUSQVFhBhNxkbEUIoHh8SMyM2KCocHR8P/aAAwDAQACEQMRAD8A6Lblsho6KGihVikQyxLEtI7EliSSSWZiSSSSSSdL3PJU1GLBaYJJ2QB6v2kJIPkISPkD2fvj5jUxT0tbFQzzUywU707KslTWyLFBTFjgySs3QCjsDyTgapT1O9bLVtqlqrD6XTzTVMy8KzcrgpLIWUhxAG7Unlj3OiPzcfPM9QVdIZO8BO7oOA6k9BoNSfOsk3CUL7yJI0HCeZ8OHGegqztl2N5pfxE6ESZIVGBHEfMnXlv/ANVfTixW6W13Hc8lTKhCTUVkjaeVx4ZfePGIYP6sPk+B96Q9T9+etmy3G2d0brlqkutvFRHKJYarnTzKVJjmwXQHDKeJXOM9ggmnY2QKBjB+uPOhw+raLpV3gTGkZ9QKEvnHLl7vFnHADh/vDrVtbr+ITeVQRbNkwjZ1qTGIKIqaibA6eWcryZvPjiMdY61peywWveT2vfcLwyxXS3Q1JREwsc4ykgIPzWRHXyf05yc9YHrcdAYB7/nWm/hY3Bd5fSLdlrCVMMFpqEqqGtKlkDS4EsAJOAcKrgAf1OTjIyAgONXZQhWTgmBoceODqZNZJU4fwzBOJ6HFXNvK42KO3tbrgBOrD9mJyHVgQVYMCCjBgGDAhlIBBBAOjVY+SSSST2STkk/fRqnRsS1j7Qbx56U+Y2LbtohUqPOYrOe49/b23Vaaa0bg3PeLrQU0pqIoq2reUCQjHI8iSxAJAznAZsYyc8+aYOSZpW89BBgaRSchGCe8gH+Ne/keNC2lmy6wFOJycxoPIQPrU0pZCsUzrI4oo8o8hJPQY6+yrCjcF/EcgoLEYIORnS7l+x/ka0H8KxtsuwN8pXWSguojqrdK0VXGHXr3ypAPWQQT2CCCQQQSNJrtlLd6pppIE7kY5zOqv3nTFePXSWGC6vQVzPpb6Ty095ob9v2jol25iOZqWerPuXCGSPIMPsOG6DK3LIUHo5wy6tfY2x4dl2DdNHty9Pc7Te5qOSijdwaiMx+57kTqoHeJEJcBQQBkA5US0i1tznM1dKwUdInELxHyAwOgP406p4YYV4QwgAfPHf8An/3TNrZDLDiXZlYM9PWk21+19hspSW21B11JyExuDjBVxPD3Z40wprZkB6ggj+0Hofyf+aNStQ0cKiSSRQD1yJ6/2ev9aNN+8cXkVJO9oe0O0ll9CnI/IFBI6e6PXPOsUU5Qx5RgR40sH5ajaeUIjKc/UaVBVMuQ/efn9NS1p2iYDbaXMEjMaCPSa6UpkyYpxX9wkfTvVsfCruqksO9ai03WdIqO8QpT8n7T3QT7YP2PJ176/MNU9PUmQEBcD6/bRFK6BW4nkvg/b6aWXO0Ld++71JMRkweB/rI8uNabuyF1art14Ch5cj8DFbQvd9t1tqp6XlzkgPF1A7XrPgf91KXCxVt6pKe32m80S3tYYZa6hCFjTRzDmnIEflbjxOcEAnBx+UtmnbnrHuW22+CkqKC0XyKlRUpZLpS+5JAB/SrAhiPHknwMa5+/7s3Let4V+7aq71MN4r3Zpp6aRoyFI48FIOQgXCgf2gDVcLhThSq1ExmdQeWoGNT9Mwdj2LaZQUvD3hoqZB/TiPiTnwzpja+/6Tc/xD3D0yiBum1qqI2+nleT9qWlhkdp48ZB5MrLkEZHBvsTWUtuXu47Uv8ASXvbtfNRXWklEkEsR/MreDnPRBBIKkEMCQQQSNGpN5u7bVuNmSNd2VCesA56a1b+zKbAFurdHiR8fnUBIjxyNHIrI6khlYYII+R0nRo1JU2pUf6x/OnqxDiCV8+NGjVP2fZQ4hZUJj5VoeJEV6YSnXk5x9Bq0Nl+hHqDu/bsd+At9it88YmpjcpXjeeIjIlCqrERnGQxADDsZHejRo3al243dmxbO6gcsE4nJ/gRS6+eWxal5H3sa54gV1Ppv6e7W9OtwDdG8dzWe+NbiZaOht5eVJJ1x7bNlRzwx6RccjxywAIJo0abv7Kt2ld2BgaajrzpKsuOnfdWST4CPIV//9k=";

        const iconOverrideById = {};
        ["spirit_bond_old", "feral_aggression_old"].forEach(id => {
            iconOverrideById[id] = sharedIcon;
        });

        // actual base64 string

        // const talents = getTalents(currentState.version, currentState.class, treeName);

        function renderTalentTrees() {
            talentTrees.innerHTML = "";

            const classKey = currentState.class;
            const version = currentState.version;

            // Ensure both version and class are selected
            if (!version || !classKey) {
                updatePlaceholder();
                return;
            }
            updatePlaceholder();

            const classData = talentTreeData[version].classes[classKey];
            const trees = classData.trees;

            // Initialize talents for class if not present
            if (!currentState.talents[classKey]) {
                currentState.talents[classKey] = {};
                trees.forEach((tree) => {
                    currentState.talents[classKey][tree] = {};
                });
            }

            // Add class header + icon row
            /*
                        const headerHTML = `
                            <div class="text-center w-full py-4">
                            <h2 class="text-2xl font-bold text-yellow-400">${classData.name} Talents</h2>
                            </div>
                        `;
                        talentTrees.innerHTML = headerHTML;
                        */

            // Count points in each tree
            const treePoints = trees.map((tree) => {
                const talents = currentState.talents[classKey]?.[tree] || {};
                return Object.values(talents).reduce((sum, val) => sum + val, 0);
            });

            // Calculate required level
            const totalPoints = treePoints.reduce((a, b) => a + b, 0);
            const requiredLevel = totalPoints === 0 ? "-" : 9 + totalPoints;

            // Calculate points left
            const pointsLeft = currentState.pointsTotal - totalPoints;

            // Class icon URL
            const classIconUrl = `https://wow.zamimg.com/images/wow/icons/large/classicon_${classKey}.jpg`;
            const classColor = classColors[classKey] || "#FFF";

            // Build info box
            const headerHTML = `
                        <div class="w-full py-4 px-6 mb-4 rounded-md bg-gray-800 text-gray-100 shadow flex flex-col md:flex-row justify-between items-center gap-4 border border-gray-700">
                            <div class="flex items-center gap-3">
                                <img src="${classIconUrl}" alt="${classData.name
                }" class="w-8 h-8 rounded border border-gray-500" />
                                <span class="text-lg font-semibold">
                                <span style="color: ${classColor}">${classData.name
                }:</span>
                                ${treePoints
                    .map(
                        (points, index) => `
                                    <span class="${points === 0 ? "text-gray-400" : "text-white"
                            }">${points}</span>
                                    ${index < treePoints.length - 1
                                ? '<span class="text-gray-500"> / </span>'
                                : ""
                            }
                                `
                    )
                    .join("")}
                                </span>
                            </div>
                            <div class="flex gap-4 text-sm">
                                <div>
                                    <span class="text-gray-400 font-semibold">Required level:</span>
                                    <span class="font-semibold">${requiredLevel}</span>
                                </div>
                                <div>
                                    <span class="text-gray-400 font-semibold">Points left:</span>
                                    <span class="font-semibold">${pointsLeft}</span>
                                </div>
                            </div>
                        </div>
                    `;
            talentTrees.innerHTML = headerHTML;

            const container = document.createElement("div");
            container.className = "flex flex-col md:flex-row gap-6 justify-center";

            trees.forEach((treeName) => {
                const talents = getTalents(version, classKey, treeName);
                // Determine expansion-specific grid size
                let numRows = 7;
                if (version.startsWith("2.") || version.endsWith("e")) {
                    numRows = 9; // TBC
                } else if (version.startsWith("3.")) {
                    numRows = 11; // WotLK
                }

                const grid = Array.from({ length: numRows }, () => Array(4).fill(null));

                // Organize talents into grid
                talents.forEach((talent) => {
                    grid[talent.row][talent.col] = talent;
                });

                const treeWrapper = document.createElement("div");
                treeWrapper.className = "flex flex-col items-center";

                const treeEl = document.createElement("div");
                treeEl.className =
                    "bg-gray-900 h-full p-4 pt-4 pb-1 rounded-lg w-[340px] shadow-lg border border-gray-700 flex flex-col items-center";
                treeEl.setAttribute("data-tree-container", treeName);

                // Add background image
                const bgImage = backgroundImages?.[classKey]?.[treeName];
                if (bgImage) {
                    treeEl.style.backgroundImage = `url(${bgImage})`;
                    treeEl.style.backgroundSize = "cover";
                    treeEl.style.backgroundPosition = "center";
                    treeEl.style.backgroundBlendMode = "overlay";
                    treeEl.style.backgroundColor = "rgba(0,0,0,0.35)";
                }

                const pointsInTree = treePoints[trees.indexOf(treeName)];

                const resetTextColor = pointsInTree === 0 ? "text-gray-400" : "text-white";
                const resetBorderColor = "border-2 border-gray-700";

                // Add icon + tree name inside each tree box
                treeEl.innerHTML = `
                <div class="flex items-center justify-between mb-3 px-2 py-1 rounded bg-gray-800 border border-gray-700 w-full">
                        <div class="flex items-center gap-2">
                            <img src="https://wow.zamimg.com/images/wow/icons/large/${getTreeIcon(
                    classKey,
                    treeName
                )}.jpg"
                                alt="${treeName}" class="w-6 h-6" />
                            <span class="${pointsInTree === 0 ? "text-gray-400" : "text-white"
                    } font-medium text-base">${treeName}</span>
                        </div>
                        <div class="text-base font-semibold ${pointsInTree === 0 ? "text-gray-400" : "text-white"
                    }">
                            <span>${pointsInTree}</span>
                            <span> / </span>
                            <span>${currentState.pointsTotal}</span>
                        </div>
                </div>
            `;

                // ======= NEW: Wrap the grid in a fixed width div to keep cell spacing tight =======
                const gridWrapper = document.createElement("div");
                gridWrapper.className = "w-[235px] flex flex-col justify-center flex-grow";

                // Render each row (7, 9 or 11 rows depending on expansion)
                grid.forEach((row) => {
                    const rowEl = document.createElement("div");
                    rowEl.className = "flex justify-center gap-4 mb-4";

                    // Render each column (4 cols)
                    row.forEach((talent) => {
                        const cell = document.createElement("div");
                        if (talent && talent.id) {
                            cell.className = "w-12 h-12 flex items-center justify-center rounded border border-gray-700";
                        } else {
                            cell.className = "w-12 h-12 flex items-center justify-center rounded"; // no border for empty cells
                        }

                        if (talent) {
                            const points =
                                currentState.talents?.[classKey]?.[treeName]?.[talent.id] || 0;
                            const unlocked = canLearnTalent(talent, classKey, treeName);
                            const isMaxed = points >= talent.ranks;
                            const tooltipText = getTalentTooltip(
                                talent,
                                points,
                                classKey,
                                treeName
                            );

                            let borderClass = "";
                            let rankTextColor = "";

                            const totalPointsSpent = Object.values(currentState.talents[classKey])
                                .flatMap(tree => Object.values(tree))
                                .reduce((sum, val) => sum + val, 0);

                            const maxPointsReached = totalPointsSpent >= currentState.pointsTotal;

                            const reachedMax = unlocked && maxPointsReached && points === 0;

                            if (reachedMax) {
                                borderClass = "border-gray-600 grayscale-[100%] brightness-[100%] cursor-not-allowed";
                                rankTextColor = "text-gray-400";
                            } else if ((!unlocked && !isMaxed)) {
                                borderClass = "border-gray-600 grayscale-[100%] brightness-[100%] cursor-not-allowed";
                                rankTextColor = "text-gray-400";
                            } else if (!isMaxed) {
                                borderClass = "border-green-500 cursor-pointer";
                                rankTextColor = "text-green-400";
                            } else {
                                borderClass = "border-yellow-500 cursor-pointer";
                                rankTextColor = "text-yellow-300";
                            }

                            const showRank = points > 0 || !maxPointsReached;

                            const rankHTML = showRank
                                ? `<div class="absolute bottom-0 right-0 bg-black/70 ${rankTextColor} text-[10px] px-1 rounded border border-black leading-none">
                                ${points}/${talent.ranks}
                                </div>`
                                : "";

                            cell.innerHTML = `
                            <div
                                class="talent-icon relative w-full h-full border rounded ${borderClass} hover:brightness-110"
                                data-tree="${treeName}" data-id="${talent.id}"
                            >
                                <img
                                    src="${iconOverrideById[talent.id] ||
                                `https://wow.zamimg.com/images/wow/icons/large/${talent.icon}.jpg`
                                }"
                                    class="w-full h-full rounded"
                                    alt="${talent.name}"
                                />
                                ${rankHTML}
                            </div>
                        `;
                        }

                        rowEl.appendChild(cell);
                    });
                    // ======= Append each row to the grid wrapper (fixed width container) =======
                    gridWrapper.appendChild(rowEl);
                });

                // ======= Append the fixed width grid wrapper to the wider treeEl container =======
                treeEl.appendChild(gridWrapper);

                // Add the treeEl to the wrapper
                treeWrapper.appendChild(treeEl);

                // Create the reset button
                const resetBtn = document.createElement("button");
                resetBtn.className = `
                reset-tree-btn mt-2 w-[310px] bg-gray-900 hover:bg-gray-600 
                ${resetTextColor} ${resetBorderColor}
                text-sm px-3 py-1 rounded flex items-center justify-center gap-2
            `.trim();
                resetBtn.dataset.tree = treeName;
                resetBtn.innerHTML = `
                <i class="fas fa-times text-red-500"></i>
                <span class="font-semibold">Reset</span>
            `;

                // Append the button under the tree box
                treeWrapper.appendChild(resetBtn);

                container.appendChild(treeWrapper);
            });

            talentTrees.appendChild(container);
            renderLevelTimeline(talentTrees);

            // Add click handlers
            document.querySelectorAll(".talent-icon").forEach((icon) => {
                icon.addEventListener("click", handleTalentClick);
                icon.addEventListener("contextmenu", handleTalentRightClick);
            });

            // Add per-tree reset handlers
            document.querySelectorAll(".reset-tree-btn").forEach((btn) => {
                btn.addEventListener("click", (e) => {
                    const treeName = e.currentTarget.dataset.tree;
                    resetTree(treeName);
                });
            });

            /*
            trees.forEach(treeName => {
                renderDependencyArrows(treeName, currentState.class, currentState.version);
            });
            */

            // Ensure the layout is painted before rendering arrows

            requestAnimationFrame(() => {
                trees.forEach(treeName => {
                    renderDependencyArrows(treeName, currentState.class, currentState.version);
                });
            });

            // renderDependencyArrows(grid, treeEl, classKey, treeName);
        }

        const tooltip = document.getElementById("talent-tooltip");

        document.addEventListener("mouseover", (e) => {
            const target = e.target.closest("[data-id][data-tree]");
            if (!target) return;

            const classKey = currentState.class;
            const id = target.dataset.id;
            const tree = target.dataset.tree;

            const talent = getTalentById(classKey, tree, id);
            if (!talent) return;

            const points = currentState.talents?.[classKey]?.[tree]?.[id] || 0;
            const html = getTalentTooltip(talent, points, classKey, tree); // Now returns HTML
            tooltip.innerHTML = html;
            tooltip.classList.remove("hidden");
        });

        document.addEventListener("mousemove", (e) => {
            if (tooltip.classList.contains("hidden")) return;

            const padding = 12; // Prevent tooltip from hugging edge
            const offset = 15;

            // Temporarily position tooltip off-screen to measure it accurately
            tooltip.style.top = `-9999px`;
            tooltip.style.left = `-9999px`;

            const tooltipRect = tooltip.getBoundingClientRect();
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;

            let top = e.clientY + offset;
            let left = e.clientX + offset;

            // Flip vertically if overflowing bottom
            if (top + tooltipRect.height + padding > viewportHeight) {
                top = e.clientY - tooltipRect.height - offset;
                tooltip.setAttribute("data-position", "top");
            } else {
                tooltip.setAttribute("data-position", "bottom");
            }

            // Flip horizontally if overflowing right
            if (left + tooltipRect.width + padding > viewportWidth) {
                left = e.clientX - tooltipRect.width - offset;
            }

            // Clamp to ensure it doesn’t go off top or left edge
            top = Math.max(padding, top);
            left = Math.max(padding, left);

            tooltip.style.top = `${top}px`;
            tooltip.style.left = `${left}px`;
        });

        document.addEventListener("mouseout", (e) => {
            if (e.target.closest("[data-id][data-tree]")) {
                tooltip.classList.add("hidden");
            }
        });

        /*
                function renderTalentTrees() {
                    const container = document.getElementById("talent-container");
                    container.innerHTML = "";

                    if (!currentState.class) {
                        container.innerHTML = `<div class="text-center py-12">
                        <h2 class="text-2xl text-yellow-400 mb-2">Select a class to begin</h2>
                        <p class="text-gray-400">Click on any class icon to the left to start building your talent tree</p>
                        </div>`;
                        return;
                    }

                    const classKey = currentState.class;
                    const classData = talentTreeData[currentState.version].classes[classKey];
                    const trees = classData.trees;

                    const wrapper = document.createElement("div");
                    wrapper.className = "flex flex-col md:flex-row gap-6 justify-center";

                    trees.forEach(treeName => {
                        const treeDiv = document.createElement("div");
                        treeDiv.className = "relative bg-gray-900 rounded-lg p-4 w-[264px] h-[352px] shadow-lg border border-gray-700";

                        const header = document.createElement("h3");
                        header.className = "text-center text-yellow-400 font-semibold mb-2";
                        header.textContent = treeName;
                        treeDiv.appendChild(header);

                        const talents = getTalents(currentState.version, classKey, treeName);

                        talents.forEach(talent => {
                            const iconDiv = document.createElement("div");
                            iconDiv.className = "talent-icon absolute w-[44px] h-[44px] bg-cover border border-gray-600 hover:border-yellow-400 cursor-pointer";
                            iconDiv.dataset.tree = treeName;
                            iconDiv.dataset.id = talent.id;

                            iconDiv.style.left = `${10 + talent.col * 44}px`;
                            iconDiv.style.top = `${10 + talent.row * 44}px`;
                            iconDiv.style.backgroundImage = `url('https://wow.zamimg.com/images/wow/icons/large/${talent.icon}.jpg')`;

                            const currentPoints = currentState.talents[classKey]?.[treeName]?.[talent.id] || 0;
                            const pointsSpan = document.createElement("span");
                            pointsSpan.className = "absolute bottom-0 right-0 text-xs text-white bg-black bg-opacity-70 px-1 rounded";
                            pointsSpan.textContent = currentPoints;

                            iconDiv.appendChild(pointsSpan);
                            iconDiv.addEventListener("click", handleTalentClick);

                            treeDiv.appendChild(iconDiv);
                        });

                        wrapper.appendChild(treeDiv);
                    });

                    container.appendChild(wrapper);
                }
                */

        /*
                function renderTalentTrees() {
                    talentContainer.innerHTML = "";
                    
                    if (!currentState.class) {
                        // document.getElementById("druid-talents-preview").classList.add("hidden");
                        talentContainer.innerHTML = `<div class="text-center py-12">
                                <h2 class="text-2xl text-yellow-400 mb-2">Select a class to begin</h2>
                                <p class="text-gray-400">Click on any class icon to the left to start building your talent tree</p>
                            </div>`;
                        return;
                    }


                    const classKey = currentState.class;
                    const version = currentState.version;
                    const classData = talentTreeData[version].classes[classKey];
                    const trees = classData.trees;
                    const talentsByTree = talentTreeData[version]?.[classKey] || {};
                    
                    const wrapper = document.createElement("div");
                    wrapper.className = "flex flex-col md:flex-row gap-6 justify-center";

                    let html = `
                                    <div class="talent-tree-container flex flex-col md:flex-row gap-4">
                                        <div class="text-center w-full py-4">
                                            <h2 class="text-2xl font-bold text-yellow-400">${
                                            classData.name
                                            } Specializations</h2>
                                            <div class="flex justify-center gap-8 mt-4">
                                                ${trees
                                                .map(
                                                    (tree) => `
                                                    <div class="flex items-center gap-2">
                                                        <img src="https://wow.zamimg.com/images/wow/icons/large/${getTreeIcon(
                                                        currentState.class,
                                                        tree
                                                        )}.jpg" 
                                                            alt="${tree}" class="w-8 h-8">
                                                        <span>${tree}</span>
                                                    </div>
                                                `
                                                )
                                                .join("")}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex flex-col md:flex-row gap-4 mt-4">
                                `;

                    talentContainer.innerHTML = `<div class="text-center py-4">
                            <h2 class="text-2xl font-bold text-yellow-400">${
                            classData.name
                            } Talents</h2>
                            <div class="flex justify-center gap-8 mt-4">
                                ${trees.map((tree) => `<span>${tree}</span>`).join("")}
                            </div>
                        </div>`;

                    html += `</div>`; // Close the flex container

                    /*
                    //            // Show druid talents preview if druid is selected
                    //            if (currentState.class === 'druid') {
                    //                document.getElementById('druid-talents-preview').classList.remove('hidden');
                    //            } else {
                    //                document.getElementById('druid-talents-preview').classList.add('hidden');
                    //            }
                    */

        /*
                    talentContainer.innerHTML = html;

                    // Add click handlers to talent icons
                    document.querySelectorAll(".talent-icon").forEach((icon) => {
                        icon.addEventListener("click", handleTalentClick);
                    });
                }
                */

        function resetTree(treeName) {
            const classKey = currentState.class;

            if (!classKey || !treeName) return;

            const removedCount = currentState.talentOrder.filter(
                (entry) => entry.tree === treeName
            ).length;

            // Remove the tree's talents
            currentState.talents[classKey][treeName] = {};

            // Remove talentOrder entries related to this tree
            currentState.talentOrder = currentState.talentOrder
                .filter((entry) => entry.tree !== treeName)
                .map((entry, index) => ({
                    ...entry,
                    // Shift levels downward by number of removed points
                    level: 10 + index
                }));

            // Recalculate total points spent
            const trees = talentTreeData[currentState.version].classes[classKey].trees;
            currentState.pointsSpent = trees.reduce((total, tree) => {
                const treePoints = Object.values(currentState.talents[classKey][tree] || {}).reduce((sum, val) => sum + val, 0);
                return total + treePoints;
            }, 0);

            updatePointsDisplay();
            renderTalentTrees();
        }

        function getClassIndex(classKey) {
            const classOrder = [
                "druid",
                "hunter",
                "mage",
                "paladin",
                "priest",
                "rogue",
                "shaman",
                "warlock",
                "warrior",
                "deathknight"
            ];
            return classOrder.indexOf(classKey) + 1;
        }

        function getTreeIcon(classKey, tree) {
            const icons = {
                druid: {
                    Balance: { icon: "spell_nature_starfall" },
                    "Feral Combat": { icon: "ability_racial_bearform" },
                    Restoration: { icon: "spell_nature_healingtouch" }
                },
                hunter: {
                    "Beast Mastery": { icon: "ability_hunter_beasttaming" },
                    Marksmanship: { icon: "ability_marksmanship" },
                    Survival: { icon: "ability_hunter_swiftstrike" },
                    // old names for MM and SV
                    "Ranged Combat": { icon: "ability_marksmanship" },
                    Outdoorsmanship: { icon: "ability_hunter_swiftstrike" }
                },
                mage: {
                    Arcane: { icon: "spell_holy_magicalsentry" },
                    Fire: { icon: "spell_fire_firebolt02" },
                    Frost: { icon: "spell_frost_frostbolt02" }
                },
                paladin: {
                    Holy: { icon: "spell_holy_holybolt" },
                    Protection: { icon: "spell_holy_devotionaura" },
                    Retribution: { icon: "spell_holy_auraoflight" }
                },
                priest: {
                    Discipline: { icon: "spell_holy_wordfortitude" },
                    Holy: { icon: "spell_holy_guardianspirit" },
                    Shadow: { icon: "spell_shadow_shadowwordpain" }
                },
                rogue: {
                    Assassination: { icon: "ability_rogue_eviscerate" },
                    Combat: { icon: "ability_backstab" },
                    Subtlety: { icon: "ability_stealth" }
                },
                shaman: {
                    Elemental: { icon: "spell_nature_lightning" },
                    Enhancement: { icon: "spell_nature_lightningshield" },
                    Restoration: { icon: "spell_nature_magicimmunity" }
                },
                warlock: {
                    Affliction: { icon: "spell_shadow_deathcoil" },
                    Demonology: { icon: "spell_shadow_metamorphosis" },
                    Destruction: { icon: "spell_shadow_rainoffire" }
                },
                warrior: {
                    Arms: { icon: "ability_warrior_savageblow" },
                    Fury: { icon: "ability_warrior_innerrage" },
                    Protection: { icon: "ability_warrior_defensivestance" }
                },
                deathknight: {
                    Blood: { icon: "spell_deathknight_bloodpresence" },
                    Frost: { icon: "spell_deathknight_frostpresence" },
                    Unholy: { icon: "spell_deathknight_unholypresence" }
                }
            };
            return icons[classKey][tree]?.icon || "inv_misc_questionmark"; // fallback icon
        }

        const backgroundImages = {
            druid: {
                Balance:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/283.jpg",
                "Feral Combat":
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/281.jpg",
                Restoration:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/282.jpg"
            },
            hunter: {
                "Beast Mastery":
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/361.jpg",
                Marksmanship:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/363.jpg",
                Survival:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/362.jpg",
                "Ranged Combat":
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/363.jpg",
                Outdoorsmanship:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/362.jpg"
            },
            mage: {
                Arcane:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/81.jpg",
                Fire:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/41.jpg",
                Frost:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/61.jpg"
            },
            paladin: {
                Holy:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/382.jpg",
                Protection:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/383.jpg",
                Retribution:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/381.jpg"
            },
            priest: {
                Discipline:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/201.jpg",
                Holy:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/202.jpg",
                Shadow:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/203.jpg"
            },
            rogue: {
                Assassination:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/182.jpg",
                Combat:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/181.jpg",
                Subtlety:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/183.jpg"
            },
            shaman: {
                Elemental:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/261.jpg",
                Enhancement:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/263.jpg",
                Restoration:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/262.jpg"
            },
            warlock: {
                Affliction:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/302.jpg",
                Demonology:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/303.jpg",
                Destruction:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/301.jpg"
            },
            warrior: {
                Arms:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/161.jpg",
                Fury:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/164.jpg",
                Protection:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/classic/163.jpg"
            },
            deathknight: {
                Blood:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/wrath/398.jpg",
                Frost:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/wrath/399.jpg",
                Unholy:
                    "https://wow.zamimg.com/images/wow/talents/backgrounds/wrath/400.jpg"
            }
        };

        // Class-specific colors
        const classColors = {
            warrior: "#C79C6E",
            hunter: "#ABD473",
            mage: "#69CCF0",
            rogue: "#FFF569",
            priest: "#FFFFFF",
            druid: "#FF7D0A",
            paladin: "#F58CBA",
            shaman: "#0070DE",
            warlock: "#9482C9",
            deathknight: "#C41F3B"
        };

        function getTreePoints(tree) {
            if (!currentState.class || !currentState.talents[currentState.class])
                return 0;
            const treeTalents = currentState.talents[currentState.class][tree];
            return Object.values(treeTalents).reduce((sum, points) => sum + points, 0);
        }

        function renderTalentsForTree(tree) {
            if (!currentState.class) return "";

            const talents = getTalentsForClassAndTree(currentState.class, tree);
            let html = "";

            talents.forEach((talent) => {
                const pointsSpent =
                    currentState.talents[currentState.class][tree][talent.id] || 0;
                const isActive = pointsSpent > 0;
                const isMaxed = pointsSpent >= talent.ranks;
                const isDisabled = !isActive && !canLearnTalent(talent, tree);

                html += `
                                    <div class="talent-icon absolute ${isActive ? "active" : ""
                    } ${isMaxed ? "maxed" : ""} ${isDisabled ? "disabled" : ""
                    }" 
                                        style="left: ${talent.col * 44 + 10}px; top: ${talent.row * 44 + 10
                    }px; 
                                        background-image: url('https://wow.zamimg.com/images/wow/talents/icons/vanilla.jpg');
                                        background-position: ${getIconPosition(
                        talent.icon
                    )}"
                                        data-tree="${tree}" data-id="${talent.id
                    }" data-ranks="${talent.ranks}" data-requires="${talent.requires || ""}">
                                        <div class="talent-points">${pointsSpent}/${talent.ranks
                    }</div>
                                    </div>
                                `;

                // Render arrows if needed
                if (talent.requires) {
                    const reqTalent = talents.find((t) => t.id === talent.requires);
                    if (reqTalent) {
                        const arrowX = (talent.col + reqTalent.col) * 30;
                        const arrowY = (talent.row + reqTalent.row) * 30;
                        const arrowRotation = getArrowRotation(talent, reqTalent);

                        html += `
                                            <div class="arrow absolute" 
                                                style="left: ${arrowX}px; top: ${arrowY}px; transform: rotate(${arrowRotation}deg)"></div>
                                        `;
                    }
                }
            });

            return html;
        }

        // Helper to find talent's position in the grid by ID
        function findTalentPosition(grid, talentId) {
            for (let r = 0; r < grid.length; r++) {
                for (let c = 0; c < grid[r].length; c++) {
                    if (grid[r][c] && grid[r][c].id === talentId) {
                        return { row: r, col: c };
                    }
                }
            }
            return null;
        }

        // Add this inside your renderTalentTrees() after talents are rendered
        /*
        function renderDependencyArrows(grid, treeEl, classKey, treeName) {
        const talentIconSize = 44; // width and height of each talent icon (in px)
        const gap = 10; // your CSS gap between talents (px)
        const cellSize = talentIconSize + gap;

        // Flatten all talent elements in treeEl to map from id to element
        const talentElements = {};
        treeEl.querySelectorAll(".talent-icon").forEach((el) => {
            const id = el.getAttribute("data-talent-id");
            if (id) talentElements[id] = el;
        });

        grid.forEach((rowArr, row) => {
            rowArr.forEach((talent, col) => {
            if (!talent || !talent.requiresTalents) return;

            const currentTalentId = talent.id;
            const currentEl = talentElements[currentTalentId];
            if (!currentEl) return;

            // Prereq can be array or single id
            const prereqs = Array.isArray(talent.requiresTalents) ? talent.requiresTalents : [talent.requiresTalents];

            prereqs.forEach((prereqId) => {
                const prereqPos = findTalentPosition(grid, prereqId);
                if (!prereqPos) return;

                const prereqEl = talentElements[prereqId];
                if (!prereqEl) return;

                // Determine arrow direction
                let direction = null;
                if (prereqPos.col === col) {
                // Same column
                if (prereqPos.row < row) direction = "arrow-down";
                } else if (prereqPos.row === row) {
                // Same row
                if (prereqPos.col < col) direction = "arrow-right";
                else if (prereqPos.col > col) direction = "arrow-left";
                } else if (prereqPos.row < row) {
                // Diagonal down
                if (prereqPos.col < col) direction = "arrow-rightdown";
                else if (prereqPos.col > col) direction = "arrow-leftdown";
                }

                if (!direction) return;

                // Determine if unlocked or locked
                // Here unlocked means prereq talent has at least 1 point
                const prereqPoints = currentState.talents?.[classKey]?.[treeName]?.[prereqId] || 0;
                const unlocked = prereqPoints > 0;

                // Create arrow element
                const arrow = document.createElement("div");
                arrow.classList.add("arrow", direction);
                arrow.classList.add(unlocked ? "unlocked" : "locked");

                // Position arrow absolutely between prerequisite and current talent icons
                // Get bounding rect of both talent elements relative to tree container
                const containerRect = treeEl.getBoundingClientRect();
                const prereqRect = prereqEl.getBoundingClientRect();
                const currentRect = currentEl.getBoundingClientRect();

                // Calculate center points relative to tree container
                const startX = prereqRect.left + prereqRect.width / 2 - containerRect.left;
                const startY = prereqRect.top + prereqRect.height / 2 - containerRect.top;

                const endX = currentRect.left + currentRect.width / 2 - containerRect.left;
                const endY = currentRect.top + currentRect.height / 2 - containerRect.top;

                // Position arrow near midpoint, with an offset depending on direction to align nicely
                const midX = (startX + endX) / 2;
                const midY = (startY + endY) / 2;

                arrow.style.position = "absolute";
                arrow.style.left = `${midX - 15}px`;  // 15px is half arrow width (30px/2)
                arrow.style.top = `${midY - 15}px`;   // 15px is half arrow height

                // Optionally adjust offsets based on direction for better visual alignment:
                if (direction === "arrow-down") {
                arrow.style.left = `${startX - 15}px`;
                arrow.style.top = `${startY + talentIconSize / 2}px`;
                } else if (direction === "arrow-right") {
                arrow.style.left = `${startX + talentIconSize / 2}px`;
                arrow.style.top = `${startY - 15}px`;
                } else if (direction === "arrow-left") {
                arrow.style.left = `${startX - talentIconSize / 2 - 30}px`; // 30 arrow width
                arrow.style.top = `${startY - 15}px`;
                } else if (direction === "arrow-rightdown") {
                arrow.style.left = `${midX}px`;
                arrow.style.top = `${midY}px`;
                } else if (direction === "arrow-leftdown") {
                arrow.style.left = `${midX - 30}px`;
                arrow.style.top = `${midY}px`;
                }

                // Append arrow to the tree container
                treeEl.appendChild(arrow);
            });
            });
        });
        }
        */

        function renderDependencyArrows(treeName, classKey, version) {
            const container = document.querySelector(`[data-tree-container="${treeName}"]`);
            if (!container) return;

            // Ensure the container is relatively positioned
            container.style.position = "relative";

            container.querySelectorAll(".arrow").forEach(el => el.remove());

            const talents = getTalents(version, classKey, treeName);

            for (const talent of talents) {
                if (!talent.requiresTalents) continue;

                const requiredId = talent.requiresTalents;
                const requiredTalent = getTalentById(classKey, treeName, requiredId);
                if (!requiredTalent) continue;

                const fromEl = container.querySelector(`[data-id="${requiredId}"]`);
                const toEl = container.querySelector(`[data-id="${talent.id}"]`);
                if (!fromEl || !toEl) continue;

                /*
                const containerRect = container.getBoundingClientRect();
                const fromRect = fromEl.getBoundingClientRect();
                const toRect = toEl.getBoundingClientRect();
                */

                /*
                const fromCenter = {
                x: fromRect.left + fromRect.width / 2 - containerRect.left,
                y: fromRect.top + fromRect.height / 2 - containerRect.top
                };
    
                const toCenter = {
                x: toRect.left + toRect.width / 2 - containerRect.left,
                y: toRect.top + toRect.height / 2 - containerRect.top
                };
                */

                // Use offsetLeft/Top for container-relative positioning
                const fromCenter = {
                    x: fromEl.offsetLeft + fromEl.offsetWidth / 2,
                    y: fromEl.offsetTop + fromEl.offsetHeight / 2
                };
                const toCenter = {
                    x: toEl.offsetLeft + toEl.offsetWidth / 2,
                    y: toEl.offsetTop + toEl.offsetHeight / 2
                };

                const dx = toCenter.x - fromCenter.x;
                const dy = toCenter.y - fromCenter.y;

                let direction = "";
                if (dx === 0 && dy > 0) direction = "down";
                else if (dy === 0 && dx < 0) direction = "left";
                else if (dy === 0 && dx > 0) direction = "right";
                else if (dy > 0 && dx > 0) direction = "down-right";
                else if (dy > 0 && dx < 0) direction = "down-left";
                else continue; // unsupported

                const arrow = document.createElement("div");
                arrow.classList.add("arrow", `arrow-${direction}`);

                const isUnlocked = (currentState.talents[classKey]?.[treeName]?.[requiredId] || 0) >= (requiredTalent.ranks || 1);
                arrow.classList.add(isUnlocked ? "unlocked" : "locked");

                /*
                if (direction === "down") {
                arrow.style.top = `${fromRect.bottom - containerRect.top}px`;
                arrow.style.left = `${fromCenter.x - 15}px`; // center minus half arrow width
                arrow.style.height = `${toRect.top - fromRect.bottom}px`;
                } else if (direction === "left") {
                arrow.style.top = `${fromCenter.y - 15}px`;
                arrow.style.left = `${toRect.right - containerRect.left}px`;
                } else if (direction === "right") {
                arrow.style.top = `${fromCenter.y - 15}px`;
                arrow.style.left = `${fromRect.right - containerRect.left}px`;
                }
                */

                // Position and size the arrow
                if (direction === "down") {
                    arrow.style.position = "absolute";
                    arrow.style.left = `${fromCenter.x - 4}px`;
                    arrow.style.top = `${fromEl.offsetTop + fromEl.offsetHeight}px`;
                    arrow.style.width = "7px";
                    arrow.style.height = `${toEl.offsetTop - (fromEl.offsetTop + fromEl.offsetHeight)}px`;
                } else if (direction === "left") {
                    arrow.style.position = "absolute";
                    arrow.style.top = `${fromCenter.y - 4}px`;
                    arrow.style.left = `${toEl.offsetLeft + toEl.offsetWidth}px`;
                    arrow.style.height = "7px";
                    arrow.style.width = `${fromEl.offsetLeft - (toEl.offsetLeft + toEl.offsetWidth)}px`;
                } else if (direction === "right") {
                    arrow.style.position = "absolute";
                    arrow.style.top = `${fromCenter.y - 4}px`;
                    arrow.style.left = `${fromEl.offsetLeft + fromEl.offsetWidth}px`;
                    arrow.style.height = "7px";
                    arrow.style.width = `${toEl.offsetLeft - (fromEl.offsetLeft + fromEl.offsetWidth)}px`;
                } else if (direction === "down-right" || direction === "down-left") {
                    const horizontal = document.createElement("div");
                    const vertical = document.createElement("div");
                    const isUnlocked = (currentState.talents[classKey]?.[treeName]?.[requiredId] || 0) >= (requiredTalent.ranks || 1);
                    horizontal.classList.add("arrow", direction === "down-right" ? "arrow-right" : "arrow-left", isUnlocked ? "unlocked" : "locked");
                    vertical.classList.add("arrow", "arrow-down", isUnlocked ? "unlocked" : "locked");


                    const horizontalWidth = Math.abs(toCenter.x - fromCenter.x);
                    const verticalHeight = Math.abs(toCenter.y - fromCenter.y);

                    // Horizontal segment
                    horizontal.style.position = "absolute";
                    horizontal.style.top = `${fromCenter.y - 10 / 2}px`;
                    horizontal.style.height = "7px";
                    if (direction === "down-right") {
                        horizontal.style.left = `${fromEl.offsetLeft + fromEl.offsetWidth}px`;
                        horizontal.style.width = `${toCenter.x - (fromEl.offsetLeft + fromEl.offsetWidth) - 2}px`;
                    } else {
                        horizontal.style.left = `${toCenter.x + 2}px`;
                        horizontal.style.width = `${fromEl.offsetLeft - toCenter.x - 2}px`;
                    }

                    // Vertical segment
                    vertical.style.position = "absolute";
                    vertical.style.left = `${toCenter.x - 10 / 2}px`;
                    vertical.style.top = `${fromCenter.y - 10 / 2}px`;
                    vertical.style.width = "7px";
                    vertical.style.height = `${toEl.offsetTop - fromCenter.y + 5}px`;

                    container.appendChild(horizontal);
                    container.appendChild(vertical);
                }

                container.appendChild(arrow);
            }
        }

        function createArrowHead(color, direction) {
            const arrowHead = document.createElement("div");
            arrowHead.style.position = "absolute";
            arrowHead.style.width = "0";
            arrowHead.style.height = "0";

            // Use CSS borders to create triangles pointing the right way
            switch (direction) {
                case "down":
                    arrowHead.style.borderLeft = "6px solid transparent";
                    arrowHead.style.borderRight = "6px solid transparent";
                    arrowHead.style.borderTop = `8px solid ${color}`;
                    break;
                case "left":
                    arrowHead.style.borderTop = "6px solid transparent";
                    arrowHead.style.borderBottom = "6px solid transparent";
                    arrowHead.style.borderRight = `8px solid ${color}`;
                    break;
                case "right":
                    arrowHead.style.borderTop = "6px solid transparent";
                    arrowHead.style.borderBottom = "6px solid transparent";
                    arrowHead.style.borderLeft = `8px solid ${color}`;
                    break;
                default:
                    // No arrowhead for compound arrows here; handle separately
                    break;
            }

            return arrowHead;
        }


        /*
                function getTalentsForClassAndSpecialization(classKey, tree) {
                // This is a simplified version - in a real app this would contain all talents with their positions
                const talents = {
                    druid: {
                    Balance: [
                        {
                        id: "improved_wrath",
                        name: "Improved Wrath",
                        icon: "spell_nature_abolishmagic",
                        row: 0,
                        col: 1,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "natures_grasp",
                        name: "Nature's Grasp",
                        icon: "spell_nature_natureswrath",
                        row: 1,
                        col: 1,
                        ranks: 1,
                        requiresTalents: null
                        },
                        {
                        id: "improved_natures_grasp",
                        name: "Improved Nature's Grasp",
                        icon: "spell_nature_natureswrath",
                        row: 1,
                        col: 2,
                        ranks: 4,
                        requiresTalents: "natures_grasp"
                        },
                        {
                        id: "improved_thorns",
                        name: "Improved Thorns",
                        icon: "spell_nature_thorns",
                        row: 2,
                        col: 0,
                        ranks: 3,
                        requiresTalents: null
                        },
                        {
                        id: "omen_of_clarity",
                        name: "Omen of Clarity",
                        icon: "spell_nature_crystalball",
                        row: 2,
                        col: 1,
                        ranks: 1,
                        requiresTalents: null
                        },
                        {
                        id: "natures_reach",
                        name: "Nature's Reach",
                        icon: "spell_nature_naturetouchgrow",
                        row: 2,
                        col: 2,
                        ranks: 2,
                        requiresTalents: null
                        },
                        {
                        id: "vengeance",
                        name: "Vengeance",
                        icon: "spell_nature_purge",
                        row: 3,
                        col: 0,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "improved_starfire",
                        name: "Improved Starfire",
                        icon: "spell_arcane_starfire",
                        row: 3,
                        col: 2,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "natures_grace",
                        name: "Nature's Grace",
                        icon: "spell_nature_naturesblessing",
                        row: 4,
                        col: 1,
                        ranks: 1,
                        requiresTalents: "omen_of_clarity"
                        },
                        {
                        id: "moonglow",
                        name: "Moonglow",
                        icon: "spell_nature_sentinal",
                        row: 4,
                        col: 2,
                        ranks: 3,
                        requiresTalents: null
                        },
                        {
                        id: "moonfury",
                        name: "Moonfury",
                        icon: "spell_nature_moonglow",
                        row: 5,
                        col: 1,
                        ranks: 5,
                        requiresTalents: "natures_grace"
                        },
                        {
                        id: "moonkin_form",
                        name: "Moonkin Form",
                        icon: "spell_nature_forceofnature",
                        row: 6,
                        col: 1,
                        ranks: 1,
                        requiresTalents: "moonfury"
                        }
                    ],
                    "Feral Combat": [
                        {
                        id: "ferocity",
                        name: "Ferocity",
                        icon: "ability_hunter_pet_hyena",
                        row: 0,
                        col: 1,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "feral_aggression",
                        name: "Feral Aggression",
                        icon: "ability_druid_demoralizingroar",
                        row: 1,
                        col: 1,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "feral_instinct",
                        name: "Feral Instinct",
                        icon: "ability_ambush",
                        row: 1,
                        col: 2,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "brutal_impact",
                        name: "Brutal Impact",
                        icon: "ability_druid_bash",
                        row: 2,
                        col: 0,
                        ranks: 2,
                        requiresTalents: null
                        },
                        {
                        id: "thick_hide",
                        name: "Thick Hide",
                        icon: "inv_misc_pelt_bear_03",
                        row: 2,
                        col: 1,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "feral_swiftness",
                        name: "Feral Swiftness",
                        icon: "spell_nature_spiritwolf",
                        row: 2,
                        col: 2,
                        ranks: 2,
                        requiresTalents: null
                        },
                        {
                        id: "sharpened_claws",
                        name: "Sharpened Claws",
                        icon: "inv_misc_monsterclaw_04",
                        row: 3,
                        col: 0,
                        ranks: 3,
                        requiresTalents: null
                        },
                        {
                        id: "predatory_strikes",
                        name: "Predatory Strikes",
                        icon: "ability_hunter_pet_cat",
                        row: 3,
                        col: 1,
                        ranks: 3,
                        requiresTalents: null
                        },
                        {
                        id: "primal_fury",
                        name: "Primal Fury",
                        icon: "ability_racial_cannibalize",
                        row: 3,
                        col: 2,
                        ranks: 2,
                        requiresTalents: "feral_instinct"
                        },
                        {
                        id: "savage_fury",
                        name: "Savage Fury",
                        icon: "ability_druid_ravage",
                        row: 4,
                        col: 0,
                        ranks: 2,
                        requiresTalents: "sharpened_claws"
                        },
                        {
                        id: "faerie_fire_feral",
                        name: "Faerie Fire (Feral)",
                        icon: "spell_nature_faeriefire",
                        row: 4,
                        col: 1,
                        ranks: 1,
                        requiresTalents: "predatory_strikes"
                        },
                        {
                        id: "heart_of_the_wild",
                        name: "Heart of the Wild",
                        icon: "spell_holy_blessingofagility",
                        row: 5,
                        col: 1,
                        ranks: 5,
                        requiresTalents: "faerie_fire_feral"
                        },
                        {
                        id: "leader_of_the_pack",
                        name: "Leader of the Pack",
                        icon: "spell_nature_unyeildingstamina",
                        row: 6,
                        col: 1,
                        ranks: 1,
                        requiresTalents: "heart_of_the_wild"
                        }
                    ],
                    Restoration: [
                        {
                        id: "improved_mark_of_the_wild",
                        name: "Improved Mark of the Wild",
                        icon: "spell_nature_regeneration",
                        row: 0,
                        col: 1,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "furor",
                        name: "Furor",
                        icon: "spell_nature_unyeildingstamina",
                        row: 1,
                        col: 1,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "improved_healing_touch",
                        name: "Improved Healing Touch",
                        icon: "spell_nature_healingtouch",
                        row: 1,
                        col: 2,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "natures_focus",
                        name: "Nature's Focus",
                        icon: "spell_nature_healingwavegreater",
                        row: 2,
                        col: 0,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "improved_enrage",
                        name: "Improved Enrage",
                        icon: "ability_druid_enrage",
                        row: 2,
                        col: 1,
                        ranks: 2,
                        requiresTalents: "furor"
                        },
                        {
                        id: "reflection",
                        name: "Reflection",
                        icon: "spell_frost_windwalkon",
                        row: 2,
                        col: 2,
                        ranks: 3,
                        requiresTalents: null
                        },
                        {
                        id: "subtlety",
                        name: "Subtlety",
                        icon: "ability_eyeoftheowl",
                        row: 3,
                        col: 0,
                        ranks: 5,
                        requiresTalents: null
                        },
                        {
                        id: "tranquil_spirit",
                        name: "Tranquil Spirit",
                        icon: "spell_holy_elunesgrace",
                        row: 3,
                        col: 2,
                        ranks: 5,
                        requiresTalents: "improved_healing_touch"
                        },
                        {
                        id: "improved_rejuvenation",
                        name: "Improved Rejuvenation",
                        icon: "spell_nature_rejuvenation",
                        row: 4,
                        col: 1,
                        ranks: 3,
                        requiresTalents: null
                        },
                        {
                        id: "natures_swiftness",
                        name: "Nature's Swiftness",
                        icon: "spell_nature_ravenform",
                        row: 5,
                        col: 1,
                        ranks: 1,
                        requiresTalents: "improved_rejuvenation"
                        },
                        {
                        id: "gift_of_nature",
                        name: "Gift of Nature",
                        icon: "spell_nature_protectionformnature",
                        row: 5,
                        col: 2,
                        ranks: 5,
                        requiresTalents: "tranquil_spirit"
                        },
                        {
                        id: "improved_tranquility",
                        name: "Improved Tranquility",
                        icon: "spell_nature_tranquility",
                        row: 6,
                        col: 0,
                        ranks: 2,
                        requiresTalents: "subtlety"
                        },
                        {
                        id: "improved_regrowth",
                        name: "Improved Regrowth",
                        icon: "spell_nature_resistnature",
                        row: 6,
                        col: 2,
                        ranks: 5,
                        requiresTalents: "gift_of_nature"
                        }
                    ]
                    }
                    // ... other classes
                };

                return talents[classKey][tree] || [];
                }
                */

        function getIconPosition(iconName) {
            // Simplified icon positions for demo
            // In a real app, you would need exact coordinates from the sprite sheet
            const iconIndex = [
                "spell_nature_abolishmagic",
                "spell_nature_natureswrath",
                "spell_nature_thorns",
                "spell_nature_crystalball",
                "spell_nature_naturetouchgrow",
                "spell_nature_purge",
                "spell_arcane_starfire",
                "spell_nature_naturesblessing",
                "spell_nature_sentinal",
                "spell_nature_moonglow",
                "spell_nature_forceofnature"
            ].indexOf(iconName);

            if (iconIndex === -1) return "0 0";

            const x = -(iconIndex % 16) * 44;
            const y = -Math.floor(iconIndex / 16) * 44;
            return `${x}px ${y}px`;
        }

        function getArrowRotation(fromTalent, toTalent) {
            // Calculate arrow rotation based on talent positions
            if (fromTalent.row < toTalent.row) return 90; // Down
            if (fromTalent.row > toTalent.row) return 270; // Up
            if (fromTalent.col < toTalent.col) return 0; // Right
            return 180; // Left
        }

        function canLearnTalent(talent, classKey, treeName) {
            const currentRank =
                currentState.talents[classKey]?.[treeName]?.[talent.id] || 0;
            const totalPointsInTree = getTotalPointsInTree(classKey, treeName);

            // Don't allow learning if already maxed
            if (currentRank >= talent.ranks) return false;

            // 1. Tier requirement
            const requiredPoints = talent.row * 5;
            if (totalPointsInTree < requiredPoints) return false;

            // 2. Specific dependency check
            if (talent.requiresTalents) {
                const requiredId = talent.requiresTalents;
                const requiredTalent = getTalentById(classKey, treeName, requiredId);
                const requiredPoints = requiredTalent?.ranks || 0;
                const spent = currentState.talents[classKey]?.[treeName]?.[requiredId] || 0;

                if (spent < requiredPoints) return false;
            }

            return true;
        }

        function getTotalPointsInTree(classKey, treeName) {
            const treeTalents = currentState.talents[classKey]?.[treeName] || {};
            return Object.values(treeTalents).reduce((sum, val) => sum + val, 0);
        }

        function getTalentById(classKey, treeName, id) {
            const talents = getTalents(currentState.version, classKey, treeName);
            return talents.find((t) => t.id === id);
        }

        function updatePointsDisplay() {
            pointsSpentEl.textContent = currentState.pointsSpent;
            pointsTotalEl.textContent = currentState.pointsTotal;
            const percent = (currentState.pointsSpent / currentState.pointsTotal) * 100;
            pointsBar.style.width = `${percent}%`;

            if (currentState.pointsSpent >= currentState.pointsTotal) {
                pointsBar.classList.add("bg-red-500");
                pointsBar.classList.remove("bg-yellow-500");
            } else {
                pointsBar.classList.remove("bg-red-500");
                pointsBar.classList.add("bg-yellow-500");
            }
        }

        function resetTalents() {
            if (!currentState.class) return;

            const trees =
                talentTreeData[currentState.version].classes[currentState.class].trees;
            trees.forEach((tree) => {
                currentState.talents[currentState.class][tree] = {};
            });

            currentState.pointsSpent = 0;

            // Clear level timeline
            currentState.talentOrder = [];

            updatePointsDisplay();
            renderTalentTrees();
        }

        function saveBuild() {
            if (!currentState.class) {
                alert("Please select a class first");
                return;
            }

            const buildName = buildNameInput.value.trim();
            if (!buildName) {
                alert("Please enter a build name");
                return;
            }

            // Compress the current build into a single string
            /*
            const compressed = compressBuild({
                version: currentState.version,
                class: currentState.class,
                talents: {
                [currentState.class]: currentState.talents[currentState.class]
                }
            });
            */

            /*
            const buildData = {
                name: buildName,
                compressed
            };
            */

            const buildData = {
                name: buildName,
                version: currentState.version,
                class: currentState.class,
                talents: JSON.parse(JSON.stringify(currentState.talents))
            };

            // Check if build with this name already exists
            const existingIndex = currentState.builds.findIndex(
                (b) => b.name === buildName
            );
            if (existingIndex !== -1) {
                if (!confirm("A build with this name already exists. Overwrite it?")) {
                    return;
                }
                currentState.builds[existingIndex] = buildData;
            } else {
                currentState.builds.push(buildData);
            }

            saveBuildsToStorage();
            renderBuildsList();
            buildNameInput.value = "";
        }

        function importBuild() {
            const importData = prompt("Paste your build data here:");
            if (!importData) return;

            try {
                const raw = JSON.parse(importData);
                const buildData = {
                    ...decompressBuild(raw.compressed),
                    name: raw.name || "Imported Build"
                };

                // Validate
                if (!buildData.version || !buildData.class || !buildData.talents) {
                    throw new Error("Invalid build data");
                }

                // Set version and trigger logic
                versionSelect.value = buildData.version;
                handleVersionChange();

                // Delay to ensure talentTreeData is updated before rendering
                setTimeout(() => {
                    const classKey = buildData.class;

                    // Set class and talent data
                    currentState.class = classKey;
                    currentState.talents = JSON.parse(JSON.stringify(buildData.talents));
                    currentState.pointsTotal = buildData.pointsTotal || 51;

                    // Update class button styles
                    classButtons.forEach((btn) => {
                        const btnClass = btn.dataset.class;
                        if (!btnClass) return;

                        const isSelected = btnClass === classKey;
                        btn.classList.toggle("bg-yellow-600", isSelected);
                        btn.classList.toggle("text-white", isSelected);
                        btn.classList.toggle("bg-gray-700", !isSelected);
                        btn.classList.toggle("hover:bg-gray-600", !isSelected);
                    });

                    // Recalculate total points spent
                    currentState.pointsSpent = 0;
                    const trees =
                        talentTreeData[currentState.version]?.classes?.[classKey]?.trees || [];

                    trees.forEach((tree) => {
                        const treeTalents = currentState.talents[classKey][tree];
                        if (treeTalents) {
                            currentState.pointsSpent += Object.values(treeTalents).reduce(
                                (sum, p) => sum + p,
                                0
                            );
                        }
                    });

                    updatePointsDisplay();
                    renderTalentTrees();

                    alert(`✅ Successfully imported build: ${buildData.name}`);
                }, 20); // Slight delay to wait for version setup
            } catch (e) {
                alert("❌ Error importing build: " + e.message);
                console.error(e);
            }
        }

        function loadBuilds() {
            const savedBuilds = localStorage.getItem("wowTalentBuilds");
            if (savedBuilds) {
                currentState.builds = JSON.parse(savedBuilds);
                renderBuildsList();
            }
        }

        function saveBuildsToStorage() {
            localStorage.setItem("wowTalentBuilds", JSON.stringify(currentState.builds));
        }

        function handleTalentClick(e) {
            const icon = e.currentTarget;
            const tree = icon.dataset.tree;
            const id = icon.dataset.id;
            const classKey = currentState.class;
            const version = currentState.version;

            const talents = getTalents(version, classKey, tree);
            const talent = talents.find((t) => t.id === id);
            const currentPoints = currentState.talents[classKey]?.[tree]?.[id] || 0;

            // if (icon.classList.contains("disabled")) return;

            // Can we learn it?
            if (!canLearnTalent(talent, classKey, tree)) return;

            /*
                        if (
                            currentPoints < maxRanks &&
                            currentState.pointsSpent < currentState.pointsTotal
                        ) {
                            currentState.talents[currentState.class][tree][id] =
                            currentPoints + 1;
                            currentState.pointsSpent++;
                            updatePointsDisplay();
                            renderTalentTrees();
                        }
                        */

            // Already maxed out globally?
            if (currentState.pointsSpent >= currentState.pointsTotal) return;

            // Already maxed out?
            if (currentPoints >= talent.ranks) return;

            // Add a point
            currentState.talents[classKey][tree][id] = currentPoints + 1;
            currentState.pointsSpent += 1;

            currentState.talentOrder.push({
                id: talent.id,
                tree,
                classKey,
                icon: talent.icon,
                level: 9 + currentState.pointsSpent
            });

            // Update bar and count
            updatePointsDisplay();

            // Re-render
            renderTalentTrees();

            // Update URL
            updateURLHash();
        }

        function handleTalentRightClick(e) {
            e.preventDefault(); // Prevent default right-click menu

            const icon = e.currentTarget;
            const tree = icon.dataset.tree;
            const id = icon.dataset.id;
            const classKey = currentState.class;

            const currentPoints = currentState.talents?.[classKey]?.[tree]?.[id] || 0;

            // Nothing to remove
            if (currentPoints <= 0) return;

            // Clone current talent state in this tree to simulate removal
            const simulated = structuredClone(currentState.talents[classKey][tree]);
            simulated[id] = currentPoints - 1;
            if (simulated[id] === 0) delete simulated[id];

            // Build simulated points per tier
            const tierCounts = Array(11).fill(0); // Supports up to 11 tiers (WotLK)
            const allTalents = getTalents(currentState.version, classKey, tree);

            for (const t of allTalents) {
                const points = simulated[t.id] || 0;
                if (points > 0) {
                    tierCounts[t.row] += points;
                }
            }

            // Compute cumulative lower-tier sums for fast checking
            const tierSums = tierCounts.map((_, i) =>
                tierCounts.slice(0, i).reduce((sum, val) => sum + val, 0)
            );

            // Now validate: every active talent must still have required lower-tier points
            for (const t of allTalents) {
                const points = simulated[t.id] || 0;
                if (points > 0) {
                    const required = t.row * 5;
                    if (tierSums[t.row] < required) {
                        return; // Not enough points in lower tiers to support this talent
                    }
                }
            }

            // Prevent removal if this talent is a prerequisite for another active talent
            const isRequired = allTalents.some(t => {
                return t.requiresTalents === id && (simulated[t.id] || 0) > 0;
            });

            if (isRequired) return; // Can't remove prerequisite

            // Decrement talent
            currentState.talents[classKey][tree][id] = currentPoints - 1;
            currentState.pointsSpent = Math.max(0, currentState.pointsSpent - 1);

            // Remove the most recent matching entry from talentOrder
            for (let i = currentState.talentOrder.length - 1; i >= 0; i--) {
                const entry = currentState.talentOrder[i];
                if (entry.id === id && entry.tree === tree && entry.classKey === classKey) {
                    currentState.talentOrder.splice(i, 1);
                    break;
                }
            }

            // Clean up if zero
            if (currentState.talents[classKey][tree][id] === 0) {
                delete currentState.talents[classKey][tree][id];
            }

            // Update bar and count
            updatePointsDisplay();

            // Re-render
            renderTalentTrees();

            // Update URL
            updateURLHash();
        }

        function renderBuildsList() {
            buildsList.innerHTML = "";

            if (currentState.builds.length === 0) {
                buildsList.innerHTML =
                    '<p class="text-gray-400 text-center py-4">No saved builds yet</p>';
                return;
            }

            currentState.builds.forEach((build, index) => {
                const buildCard = document.createElement("div");
                buildCard.className =
                    "build-card bg-gray-700 rounded-md p-3 cursor-pointer hover:bg-gray-600";
                buildCard.innerHTML = `
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h3 class="font-semibold">${build.name}</h3>
                                            <p class="text-sm text-gray-400">${getBuildClassAndVersionLabel(
                    build
                )}</p>
                                        </div>
                                        <div class="flex gap-2">
                                            <button class="load-build-btn px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs" data-index="${index}">
                                                <i class="fas fa-play"></i>
                                            </button>
                                            <button class="export-build-btn px-2 py-1 bg-green-600 hover:bg-green-700 rounded text-xs" data-index="${index}">
                                                <i class="fas fa-share"></i>
                                            </button>
                                            <button class="delete-build-btn px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs" data-index="${index}">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                `;

                buildsList.appendChild(buildCard);
            });

            // Add event listeners to the new buttons
            document.querySelectorAll(".load-build-btn").forEach((btn) => {
                btn.addEventListener("click", (e) => {
                    e.stopPropagation();
                    loadBuild(parseInt(btn.dataset.index));
                });
            });

            document.querySelectorAll(".export-build-btn").forEach((btn) => {
                btn.addEventListener("click", (e) => {
                    e.stopPropagation();
                    exportBuild(parseInt(btn.dataset.index));
                });
            });

            document.querySelectorAll(".delete-build-btn").forEach((btn) => {
                btn.addEventListener("click", (e) => {
                    e.stopPropagation();
                    deleteBuild(parseInt(btn.dataset.index));
                });
            });

            // Clicking anywhere on the card loads the build
            document.querySelectorAll(".build-card").forEach((card) => {
                card.addEventListener("click", () => {
                    const index = parseInt(
                        card.querySelector(".load-build-btn").dataset.index
                    );
                    loadBuild(index);
                });
            });
        }

        function renderLevelTimeline(container) {
            const { class: classKey, talentOrder } = currentState;
            if (!classKey || talentOrder.length === 0) return;

            const orderBox = document.createElement("div");
            orderBox.className =
                "mt-6 p-3 rounded bg-gray-800 border border-gray-700 flex flex-wrap gap-2 justify-start";

            const timeline = [];

            // Group sequential levels for the same talent
            for (const entry of talentOrder) {
                const last = timeline[timeline.length - 1];
                if (
                    last &&
                    last.id === entry.id &&
                    last.tree === entry.tree &&
                    last.classKey === entry.classKey &&
                    last.endLevel === entry.level - 1
                ) {
                    last.endLevel = entry.level;
                } else {
                    timeline.push({
                        ...entry,
                        startLevel: entry.level,
                        endLevel: entry.level
                    });
                }
            }

            // Render grouped entries
            timeline.forEach((entry) => {
                const talent = getTalentById(entry.classKey, entry.tree, entry.id);
                const iconUrl =
                    iconOverrideById[talent.id] ||
                    `https://wow.zamimg.com/images/wow/icons/large/${talent.icon}.jpg`;
                const levelText =
                    entry.startLevel === entry.endLevel
                        ? `${entry.startLevel}`
                        : `${entry.startLevel} - ${entry.endLevel}`;

                const item = document.createElement("div");
                item.className =
                    "flex items-center text-xs text-white gap-1 bg-gray-900 px-2 py-1 rounded border border-gray-600";
                item.innerHTML = `
                <img src="${iconUrl}" alt="${talent.name}" class="w-4 h-4 rounded" />
                <span>${levelText}</span>
            `;
                orderBox.appendChild(item);
            });

            container.appendChild(orderBox);
        }

        function getBuildClassAndVersionLabel(build) {
            if (build.compressed) {
                const [meta] = build.compressed.split(":");
                const [version, classKey] = meta.split("/");
                return `${classKey} - ${version}`;
            }
            return `${build.class || "Unknown"} - ${build.version || "Unknown"}`;
        }

        function loadBuild(index) {
            const build = currentState.builds[index];
            if (!build || !build.version || !build.class || !build.talents) {
                alert("❌ Invalid build data");
                return;
            }

            // Determine the expansion the build belongs to
            const targetExpansion = getExpansionFromPatch(build.version);

            // Set the expansion first if needed
            if (expansionSelect.value !== targetExpansion) {
                expansionSelect.value = targetExpansion;
                // Trigger change to load the patch/version options
                const event = new Event("change");
                expansionSelect.dispatchEvent(event);
            }

            // Set the version and trigger talent data load
            versionSelect.value = build.version;
            handleVersionChange();

            setTimeout(() => {
                const classKey = build.class;

                currentState.version = build.version;
                currentState.class = classKey;
                currentState.talents = JSON.parse(JSON.stringify(build.talents));
                // Use the maxPoints for the current version
                const versionData = talentTreeData[currentState.version];
                currentState.pointsTotal = versionData ? versionData.maxPoints : 51;

                // Handle custom version display
                if (currentState.version === "custom") {
                    customPoints.value = currentState.pointsTotal;
                    customVersionOptions.classList.remove("hidden");
                } else {
                    customVersionOptions.classList.add("hidden");
                }

                // Style class buttons
                classButtons.forEach((btn) => {
                    const isSelected = btn.dataset.class === classKey;
                    // btn.classList.toggle("bg-yellow-600", isSelected);
                    // btn.classList.toggle("text-white", isSelected);
                    // btn.classList.toggle("bg-gray-700", !isSelected);
                    // btn.classList.toggle("hover:bg-gray-600", !isSelected);
                });

                // Calculate points spent
                currentState.pointsSpent = 0;
                const trees =
                    talentTreeData[currentState.version]?.classes?.[classKey]?.trees || [];

                trees.forEach((tree) => {
                    const treeTalents = currentState.talents[classKey][tree];
                    if (treeTalents) {
                        currentState.pointsSpent += Object.values(treeTalents).reduce(
                            (sum, pts) => sum + pts,
                            0
                        );
                    }
                });

                updatePointsDisplay();
                renderTalentTrees();
                updateURLHash();

                // Set build name in input field
                buildNameInput.value = build.name;

                alert(`✅ Loaded build: ${build.name}`);
            }, 20); // Slight delay for version setup
        }

        /*
        function exportBuild(index) {
        const build = currentState.builds[index];
        const buildJson = JSON.stringify(build, null, 2);

        // Create a temporary textarea to copy from
        const textarea = document.createElement("textarea");
        textarea.value = buildJson;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);

        alert("Build copied to clipboard! You can now share it with others.");
        }
        */

        function exportBuild(index) {
            try {
                const build = currentState.builds[index];
                if (!build || !build.version || !build.class) {
                    throw new Error("Cannot export: invalid build data.");
                }

                const buildString = generateBuildStringFromBuild(build);

                if (!buildString.replace(/-/g, "")) {
                    throw new Error("Cannot export: no talents selected.");
                }

                navigator.clipboard.writeText(buildString);
                showMessage(`Build "${build.name}" copied to clipboard!`);
            } catch (err) {
                showMessage(err.message, true);
            }
        }

        function showMessage(message, isError = false) {
            const msgBox = document.createElement("div");
            msgBox.className = `fixed bottom-4 right-4 px-4 py-2 rounded shadow-lg text-white z-50 ${isError ? "bg-red-600" : "bg-green-600"
                }`;
            msgBox.innerText = message;

            document.body.appendChild(msgBox);

            setTimeout(() => {
                msgBox.remove();
            }, 3000); // auto-hide after 3 seconds
        }

        function generateBuildStringFromBuild(build) {
            const { version, class: classKey, talents } = build;
            const trees = talentTreeData[version]?.classes?.[classKey]?.trees || [];

            // Get actual talent definitions (with row/col info)
            const classTalents = talentsAttributedByVersion[version]?.[classKey] || {};

            const treeStrings = trees.map((tree) => {
                const treeTalents = classTalents[tree] || [];
                const invested = talents[classKey]?.[tree] || {};

                // Sort by row first, then col
                const sorted = [...treeTalents].sort((a, b) => {
                    if (a.row !== b.row) return a.row - b.row;
                    return a.col - b.col;
                });

                let s = "";
                let lastNonZero = -1;

                sorted.forEach((talent, idx) => {
                    const val = invested[talent.id] || 0;
                    s += val;
                    if (val > 0) lastNonZero = idx;
                });

                // Trim trailing zeros
                return lastNonZero >= 0 ? s.substring(0, lastNonZero + 1) : "";
            });

            return treeStrings.join("-");
        }

        /*
        function compressBuild(build) {
            const parts = [];

            // Version/Class
            parts.push(`${build.version}/${build.class}`);

            // Talents
            const classKey = build.class;
            const trees = build.talents[classKey];
            const treeParts = [];

            for (const tree in trees) {
                const talents = trees[tree];
                const talentParts = [];

                for (const talentId in talents) {
                    const points = talents[talentId];
                    if (points > 0) {
                        talentParts.push(`${talentId}.${points}`);
                    }
                }

                if (talentParts.length > 0) {
                    treeParts.push(`${tree}=${talentParts.join(",")}`);
                }
            }

            parts.push(treeParts.join(";"));

            return parts.join(":"); // version/class : talents
        }
        */

        function decompressBuild(str) {
            const [meta, talentStr] = str.split(":");
            const [version, classKey] = meta.split("/");

            const trees = talentStr.split(";");
            const talents = {
                [classKey]: {}
            };

            trees.forEach((treeBlock) => {
                const [treeName, talentsList] = treeBlock.split("=");
                talents[classKey][treeName] = {};

                if (talentsList) {
                    talentsList.split(",").forEach((entry) => {
                        const [id, points] = entry.split(".");
                        talents[classKey][treeName][id] = parseInt(points, 10);
                    });
                }
            });

            // Infer max talent points from the version, fallback to 51 if unknown
            const pointsTotal = talentTreeData[version]?.maxPoints || 51;

            return {
                name: "Imported Build",
                version,
                class: classKey,
                pointsTotal, // You can infer from version if needed
                talents
            };
        }

        function deleteBuild(index) {
            if (confirm("Are you sure you want to delete this build?")) {
                currentState.builds.splice(index, 1);
                saveBuildsToStorage();
                renderBuildsList();
            }
        }

        // ----------------------------
        // ERROR HANDLING
        // ----------------------------
        function showError(message) {
            const errorBox = document.getElementById("build-error-box");
            if (errorBox) {
                errorBox.textContent = message;
                errorBox.classList.remove("hidden");
            } else {
                alert(message); // fallback
            }
        }

        function clearError() {
            const errorBox = document.getElementById("build-error-box");
            if (errorBox) {
                errorBox.textContent = "";
                errorBox.classList.add("hidden");
            }
        }

        function generateBuildString() {
            if (!currentState.version || !currentState.class) return "";

            const version = currentState.version;    
            const classKey = currentState.class;
            const trees = talentTreeData[version]?.classes?.[classKey]?.trees || [];

            // Get actual talent definitions (with row/col info)
            const classTalents = talentsAttributedByVersion[version]?.[classKey] || {};

            const treeStrings = trees.map((tree) => {
                const treeTalents = classTalents[tree] || [];
                const invested = currentState.talents[classKey]?.[tree] || {};

                // Sort talents by row first, then col
                const sorted = [...treeTalents].sort((a, b) => {
                    if (a.row !== b.row) return a.row - b.row;
                    return a.col - b.col;
                });

                let s = "";
                let lastNonZero = -1;

                sorted.forEach((talent, idx) => {
                    const val = invested[talent.id] || 0;
                    s += val;
                    if (val > 0) lastNonZero = idx;
                });

                // Trim trailing zeros
                return lastNonZero >= 0 ? s.substring(0, lastNonZero + 1) : "";
            });

            return treeStrings.join("-");
        }

        // ----------------------------
        // EXPORT BUILD
        // Returns a string like "5-503-5500535100233105031051" to form the path "2.4/paladin/5-503-5500535100233105031051"
        // ----------------------------

        function exportBuildString() {
            if (!currentState.version || !currentState.class) {
                throw new Error("Cannot export: version or class not selected.");
            }

            const buildString = generateBuildString();

            if (!buildString.replace(/-/g, "")) {
                throw new Error("Cannot export: no talents selected.");
            }

            return buildString;
        }

        /*
        function exportBuildString() {
            if (!currentState.class || !currentState.version) {
                showError("Cannot export: version or class not selected.");
                return "";
            }

            const classKey = currentState.class;
            const version = currentState.version;
            const classTrees = talentTreeData[version].classes[classKey].trees;

            const treeStrings = classTrees.map(treeName => {
                const treeTalents = currentState.talents[classKey]?.[treeName] || {};
                const maxIndex = Object.keys(treeTalents).length ? Math.max(...Object.keys(treeTalents)) : -1;
                if (maxIndex === -1) return ""; // no talents picked

                let str = "";
                for (let i = 0; i <= maxIndex; i++) {
                    str += treeTalents[i] || 0; // trailing zeros only for picked talents
                }
                return str;
            });

            if (treeStrings.every(str => str === "")) {
                showError("Cannot export: no talents selected.");
                return "";
            }

            return `${version}/${classKey}/${treeStrings.join("-")}`;
        }
        */

        // ----------------------------
        // IMPORT BUILD
        // Accepts a string like "2.4/paladin/5-503-5500535100233105031051"
        // ----------------------------
        function importBuildString(hash) {
            clearError();

            if (!hash) {
                showError("Invalid build string: no talents selected.");
                return;
            }

            const parts = hash.split("/");
            if (parts.length < 3) {
                showError("Invalid build string format.");
                return;
            }

            const [version, classKey, treesPart] = parts;
            if (!version || !classKey || !treesPart) {
                showError("Invalid build string format.");
                return;
            }

            const treeStrings = treesPart.split("-");
            if (treeStrings.every(str => str === "")) {
                showError("Invalid build string: no talents selected.");
                return;
            }

            const classData = talentTreeData[version]?.classes[classKey];
            if (!classData) {
                showError("Invalid version or class.");
                return;
            }

            currentState.version = version;
            currentState.class = classKey;
            currentState.talents = { [classKey]: {} };

            classData.trees.forEach((treeName, i) => {
                const str = treeStrings[i] || "";
                currentState.talents[classKey][treeName] = {};
                [...str].forEach((char, j) => {
                    const val = parseInt(char, 10);
                    if (!isNaN(val) && val > 0) {
                        currentState.talents[classKey][treeName][j] = val;
                    }
                });
            });

            renderTalentTrees();
        }

        // ----------------------------
        // UPDATE URL HASH
        // ----------------------------
        function updateURLHash() {
            if (!currentState.version /* || !currentState.class */) return;

            const version = currentState.version;
            const classKey = currentState.class;
            const buildString = generateBuildString();

            // Only update if there is a valid build string
            if (buildString) {
                location.hash = `${version}/${classKey}/${buildString}`;
            } else if (classKey) {
                location.hash = `${version}/${classKey}`;
            } else if (version) {
                location.hash = `${version}`;
            }
        }

        // ----------------------------
        // HANDLE VERSION / CLASS CHANGE
        // Call updateURLHash whenever version or class changes
        // ----------------------------

        // ----------------------------
        // HANDLE TALENT PICK / CHANGE
        // Call updateURLHash whenever a talent is picked
        // ----------------------------
        function handleTalentChange() {
            updatePointsDisplay();
            renderTalentTrees();
            updateURLHash();
        }


    </script>
</body>

</html>